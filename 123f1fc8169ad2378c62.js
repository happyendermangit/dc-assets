(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["19081"],{16873:function(e,t,n){"use strict";e.exports=n.p+"86c8b17e10af5906ce4b.svg"},605834:function(e,t,n){"use strict";e.exports=n.p+"dee199baf31d0fc4227d.svg"},976585:function(e,t,n){"use strict";e.exports=n.p+"8f386efbc744b1e32997.svg"},41912:function(e,t,n){"use strict";e.exports=n.p+"7a8aa360d0b7b01bf851.svg"},706692:function(e,t,n){"use strict";e.exports=n.p+"604ee8350b6482bfec20.svg"},615184:function(e,t,n){"use strict";e.exports=n.p+"9e2f412156e2ac1f14e9.svg"},992507:function(e,t,n){"use strict";e.exports=n.p+"64df6f04b850029d2e78.svg"},184841:function(e,t,n){"use strict";e.exports=n.p+"adfe130868d2bcf467b5.svg"},852294:function(e,t,n){"use strict";e.exports=n.p+"bca43ea978949f10c4be.svg"},836938:function(e,t,n){"use strict";e.exports=n.p+"07aa1f325ebe8b8af5cb.svg"},295021:function(e,t,n){"use strict";e.exports=n.p+"adc405c99f845c4bd619.svg"},177642:function(e,t,n){"use strict";e.exports=n.p+"336a8bdedb983df7fdbf.svg"},697221:function(e,t,n){"use strict";e.exports=n.p+"83720a1a3ec0963a1f71.svg"},951076:function(e,t,n){"use strict";e.exports=n.p+"332e869e414fbd8708de.svg"},760106:function(e,t,n){"use strict";e.exports=n.p+"8eeb59bba0a61cbffc41.svg"},41352:function(e,t,n){"use strict";e.exports=n.p+"d6dfb89ab06b62044dbb.svg"},21710:function(e,t,n){"use strict";e.exports=n.p+"53d74eda11a4185c1acd.svg"},999523:function(e,t,n){"use strict";e.exports=n.p+"6299f44c9c8c8c31cfdf.svg"},622650:function(e,t,n){"use strict";e.exports=n.p+"99d35a435f00582ddf41.svg"},454758:function(e,t,n){"use strict";e.exports=n.p+"8adc88268bfefa227846.svg"},456117:function(e,t,n){"use strict";e.exports=n.p+"45cd76fed34c8e398cc8.svg"},606778:function(e,t,n){"use strict";e.exports=n.p+"75081bdaad2d359c1469.svg"},665718:function(e,t,n){"use strict";e.exports=n.p+"5420f8fd9d89897c6448.svg"},897327:function(e,t,n){"use strict";e.exports=n.p+"d8197d45ef3e7289594d.svg"},678070:function(e,t,n){"use strict";e.exports=n.p+"a004cb7fd77d4358a96d.svg"},789335:function(e,t,n){"use strict";e.exports=n.p+"d79ae57779cdb98eeb61.svg"},894860:function(e,t,n){"use strict";e.exports=n.p+"741aba3cab652ca51ed7.png"},861948:function(e,t,n){"use strict";e.exports=n.p+"3ccc7040cdcbc1efaf36.svg"},382719:function(e,t,n){"use strict";e.exports=n.p+"39a446c64583517c2b3c.png"},559016:function(e,t,n){"use strict";e.exports=n.p+"216763e8162ce6f332b3.gif"},233135:function(e,t,n){"use strict";e.exports=n.p+"fd2a60d87996e1826c07.svg"},712967:function(e,t,n){"use strict";e.exports=n.p+"9b36085226f30399f2f9.svg"},981726:function(e,t,n){"use strict";e.exports=n.p+"440d8145b3dff23399e7.svg"},704176:function(e,t,n){"use strict";e.exports=n.p+"690146a2083a857c3dd1.svg"},529547:function(e,t,n){"use strict";e.exports=n.p+"62427879d943e487c053.svg"},21719:function(e,t,n){"use strict";e.exports=n.p+"865d3a738134a692139a.svg"},117861:function(e,t,n){"use strict";e.exports=n.p+"dce7aacb93fbfc80cd23.svg"},427230:function(e,t,n){"use strict";e.exports=n.p+"3a354aac283f909d403d.svg"},707132:function(e,t,n){"use strict";e.exports=n.p+"233617305061cc683540.svg"},846770:function(e,t,n){"use strict";e.exports=n.p+"9cf8c36deaa3dc7b8d65.svg"},284434:function(e,t,n){"use strict";e.exports=n.p+"51063f34b3960c1d5da8.svg"},315956:function(e,t,n){"use strict";e.exports=n.p+"f92a8b5812e2da52a179.svg"},408426:function(e,t,n){"use strict";e.exports=n.p+"0763b684871cf3aa4c4b.svg"},577997:function(e,t,n){"use strict";e.exports=n.p+"053ece9d4d0e004f1c47.svg"},635348:function(e,t,n){"use strict";e.exports=n.p+"f0eae807823459e917a6.gif"},271861:function(e,t,n){"use strict";e.exports=n.p+"c7fa42bca0c3ea28f681.svg"},149855:function(e,t,n){"use strict";e.exports=n.p+"0c5c580c72a087382ee1.svg"},897204:function(e,t,n){"use strict";e.exports=n.p+"590704d389aee197d7a5.svg"},465073:function(e,t,n){"use strict";e.exports=n.p+"e86b4414e7dfa126abbd.svg"},227966:function(e,t,n){"use strict";e.exports=n.p+"1a7474b52c42a84f530d.svg"},327893:function(e,t,n){"use strict";e.exports=n.p+"acc5574629c0d16d8981.svg"},640593:function(e,t,n){"use strict";e.exports=n.p+"4a17a4f6b479ae64f2bd.svg"},425643:function(e,t,n){"use strict";e.exports=n.p+"21c5ac2b22352e58d143.svg"},328989:function(e,t,n){"use strict";e.exports=n.p+"c4055dc18143c869ae27.svg"},534044:function(e,t,n){"use strict";e.exports=n.p+"d8d0ba3c83140067ae2b.mp4"},277842:function(e,t,n){"use strict";e.exports=n.p+"46d2034b95933b3d4e34.svg"},833345:function(e,t,n){"use strict";e.exports=n.p+"30c5d0b920e7f142a6c6.svg"},289867:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("913144"),l={toggleMembersSection(){a.default.dispatch({type:"CHANNEL_TOGGLE_MEMBERS_SECTION"})},toggleProfilePanelSection(){a.default.dispatch({type:"PROFILE_PANEL_TOGGLE_SECTION"})},toggleSummariesSection(){a.default.dispatch({type:"CHANNEL_TOGGLE_SUMMARIES_SECTION"})}}},629803:function(e,t,n){"use strict";n.r(t),n.d(t,{fetchConsents:function(){return o},setConsents:function(){return d}}),n("70102");var a=n("872717"),l=n("913144"),s=n("49111"),i=n("782340");function r(e){return null!=e&&null!=e.body&&l.default.dispatch({type:"UPDATE_CONSENTS",consents:{...e.body}}),e.body}function u(e){let t;throw Error(t=e.status>=500&&e.status<=599?i.default.Messages.DATA_PRIVACY_UPDATE_CONSENTS_FAILED:null!=e&&null!=e.body&&null!=e.body.message?e.body.message:i.default.Messages.DATA_PRIVACY_UPDATE_CONSENTS_FAILED)}function o(){return a.default.get({url:s.Endpoints.SETTINGS_CONSENT,oldFormErrors:!0}).then(r,e=>Promise.reject(Error(e.body.message)))}function d(e,t){return a.default.post({url:s.Endpoints.SETTINGS_CONSENT,body:{grant:e,revoke:t},oldFormErrors:!0}).then(r,u)}},369008:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("913144"),l={search(e,t){a.default.dispatch({type:"PRIVATE_CHANNEL_RECIPIENTS_INVITE_QUERY",query:e,channelId:t})},clear(e){a.default.dispatch({type:"PRIVATE_CHANNEL_RECIPIENTS_INVITE_QUERY",query:"",channelId:e})},select(e){a.default.dispatch({type:"PRIVATE_CHANNEL_RECIPIENTS_INVITE_SELECT",row:e})},addUser(e){a.default.dispatch({type:"PRIVATE_CHANNEL_RECIPIENTS_ADD_USER",userId:e})},removeUser(e){a.default.dispatch({type:"PRIVATE_CHANNEL_RECIPIENTS_REMOVE_USER",userId:e})},open(e){a.default.dispatch({type:"PRIVATE_CHANNEL_RECIPIENTS_INVITE_OPEN",channelId:e})},close(){a.default.dispatch({type:"PRIVATE_CHANNEL_RECIPIENTS_INVITE_CLOSE"})}}},363484:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("872717"),l=n("913144"),s=n("49111"),i={fetchRegions(e){a.default.get({url:s.Endpoints.REGIONS(e),retries:1,oldFormErrors:!0}).then(t=>l.default.dispatch({type:"LOAD_REGIONS",regions:t.body,guildId:e}),()=>l.default.dispatch({type:"LOAD_REGIONS",regions:[],guildId:e}))},changeCallRegion(e,t){a.default.patch({url:s.Endpoints.CALL(e),body:{region:t},oldFormErrors:!0})}}},112821:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var a=n("37983"),l=n("884691"),s=n("446674"),i=n("819855"),r=n("77078"),u=n("828986"),o=n("508229"),d=n("660478"),c=n("697218"),f=n("590514"),h=n("249561"),p=n("49111"),m=n("782340");let E=[];function C(e){let{channel:t,onJump:C}=e,{messages:g,loading:S}=(0,s.useStateFromStoresObject)([o.default],()=>{let e=o.default.getPinnedMessages(t.id),n=null!=e?e.messages:E;return{messages:n,loading:null==n||null!=e&&e.loading}}),_=(0,s.useStateFromStores)([d.default],()=>d.default.hasUnreadPins(t.id)),I=(0,s.useStateFromStores)([c.default],()=>{if(!t.isPrivate())return null;let e=c.default.getUser(t.getRecipientId());return null!=e?e.username:null});return l.useEffect(()=>{_&&u.default.ackPins(t.id)},[_,t.id]),(0,a.jsx)(r.Dialog,{"aria-label":m.default.Messages.PINNED_MESSAGES,children:(0,a.jsx)(f.default,{onFetch:function(){u.default.ackPins(t.id),u.default.fetchPins(t.id)},channel:t,messages:g,loading:S,analyticsName:"Channel Pins",onCloseMessage:function(e,n){null!=e&&(n.shiftKey?u.default.unpinMessage(t,e.id):h.default.confirmUnpin(t,e))},onJump:C,getProTip:function(){return t.isPrivate()?t.type===p.ChannelTypes.DM?m.default.Messages.PINNED_MESSAGES_PRO_TIP_BODY_DM.format({other:I}):m.default.Messages.PINNED_MESSAGES_PRO_TIP_BODY_GROUP_DM:m.default.Messages.PINNED_MESSAGES_PRO_TIP_BODY_CHANNEL},renderHeader:()=>(0,a.jsx)(f.Header,{title:m.default.Messages.PINNED_MESSAGES}),renderEmptyState:function(e){let l=m.default.Messages.NO_PINS_IN_CHANNEL;t.isPrivate()&&(l=m.default.Messages.NO_PINS_IN_DM);let s=(0,i.isThemeLight)(e)?n("615184"):n("992507");return(0,a.jsx)(f.EmptyStateCenter,{msg:l,image:s},"emptystate")},listName:"pins"})})}},942722:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}}),n("222007");var a=n("37983"),l=n("884691"),s=n("394846"),i=n("446674"),r=n("77078"),u=n("272030"),o=n("352674"),d=n("252063"),c=n("506885"),f=n("981601"),h=n("824563"),p=n("27618"),m=n("191542"),E=n("697218"),C=n("79798"),g=n("151185"),S=n("11056"),_=n("826684"),I=n("599110"),T=n("315102"),v=n("659500"),x=n("519812"),N=n("158998"),A=n("50885"),M=n("888503"),R=n("49111"),j=n("782340"),L=n("282730"),O=n("881235");let y=A.default.getEnableHardwareAcceleration();function P(e){let{user:t,channel:l}=e,{status:d,activities:C}=(0,i.useStateFromStoresObject)([p.default,E.default,h.default],()=>p.default.isFriend(t.id)||t===E.default.getCurrentUser()?{status:h.default.getStatus(t.id),activities:h.default.getActivities(t.id)}:{}),g=(0,i.useStateFromStores)([m.default],()=>null!=m.default.getTypingUsers(l.id)[t.id]),S=(0,i.useStateFromStores)([E.default],()=>E.default.getCurrentUser()),_=(0,i.useStateFromStores)([h.default],()=>h.default.isMobileOnline(t.id)),I=(0,i.useStateFromStores)([p.default],()=>p.default.getNickname(t.id)),T=e=>{(0,u.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("166452").then(n.bind(n,"166452"));return n=>(0,a.jsx)(e,{...n,user:t,channel:l})})};return(0,a.jsx)(r.Popout,{preload:()=>(0,c.default)(t.id,t.getAvatarURL(void 0,80)),renderPopout:e=>(0,a.jsx)(f.default,{...e,userId:t.id,channelId:l.id}),position:s.isMobile?"window_center":"left",spacing:16,onShiftClick:()=>{let e="@".concat(N.default.getUserTag(t,{decoration:"never"})),n="<@".concat(t.id,">");v.ComponentDispatch.dispatchToLastSubscribed(R.ComponentActions.INSERT_TEXT,{plainText:e,rawText:n}),o.default.startTyping(l.id)},children:e=>(0,a.jsx)(M.default,{user:t,currentUser:S,isOwner:t.id===l.ownerId,ownerTooltipText:j.default.Messages.GROUP_OWNER,shouldAnimateStatus:y,isTyping:g,status:d,activities:C,channel:l,onContextMenu:T,isMobile:_,nick:I,...e},t.id)})}function b(e){var t;let{integration:i,channel:o}=e,d=l.useCallback(e=>{(0,u.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("348866").then(n.bind(n,"348866"));return t=>(0,a.jsx)(e,{...t,channel:o,integration:i})})},[i,o]),h=i.application.bot,p=T.default.getApplicationIconURL({id:i.application.id,icon:i.application.icon,bot:null===(t=i.application)||void 0===t?void 0:t.bot,botIconFirst:!0});return null!=h?(0,a.jsx)(r.Popout,{preload:()=>(0,c.default)(h.id,p),renderPopout:e=>(0,a.jsx)(f.default,{...e,userId:h.id,channelId:o.id}),position:s.isMobile?"window_center":"left",spacing:16,children:e=>(0,a.jsx)(S.default,{onContextMenu:d,className:L.member,name:(0,a.jsx)("span",{className:L.username,children:i.application.name}),avatar:(0,a.jsx)(r.Avatar,{size:r.AvatarSizes.SIZE_32,src:p,"aria-label":i.application.name,statusTooltip:!0}),decorators:(0,a.jsx)(C.default,{className:L.botTag,verified:null==h?void 0:h.isVerifiedBot()}),id:i.application.id,focusProps:{offset:{top:4,bottom:4,left:4,right:4}},...e})}):null}function D(e){let{channel:t}=e,s=E.default.getCurrentUser(),u=null==s?void 0:s.isStaff(),o=(0,i.useStateFromStoresArray)([E.default],()=>(0,x.getRecipients)(t.recipients,E.default),[t.recipients]),{installedIntegrations:f,applicationsShelf:h,fetched:p,appsInGDMEnabled:m,availableApplications:T}=(0,d.usePrivateChannelIntegrationState)({channelId:t.id});l.useEffect(()=>{if(u)for(let e of o)(0,c.default)(e.id,e.getAvatarURL(void 0,80),{dispatchWait:!0})},[u,o]),l.useEffect(()=>{I.default.track(R.AnalyticEvents.MEMBER_LIST_VIEWED,{channel_id:t.id,channel_type:t.type,guild_id:t.guild_id})},[t.guild_id,t.id,t.type]);let v=u&&o.every(e=>e.isStaff());return(0,a.jsx)("div",{className:O.membersWrap,children:(0,a.jsxs)(r.Scroller,{className:O.members,fade:!0,children:[(0,a.jsxs)(_.default,{className:O.membersGroup,children:["".concat(j.default.Messages.MEMBERS,"—").concat(o.length," "),v?(0,a.jsx)(C.default,{className:O.decorator,type:C.default.Types.STAFF_ONLY_DM}):null]}),o.map(e=>(0,a.jsx)(P,{user:e,channel:t},e.id)),m&&(f.length>0||p&&h.length>0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.default,{className:O.membersGroup,children:"".concat(j.default.Messages.APPS,"—").concat(f.length)}),f.map(e=>(0,a.jsx)(b,{integration:e,channel:t},e.application.id)),T.length>0&&(0,a.jsx)(S.default,{className:L.member,onClick:()=>{(0,r.openModalLazy)(async()=>{let{default:e}=await n.el("724110").then(n.bind(n,"724110"));return n=>(0,a.jsx)(e,{...n,channelId:t.id})})},avatar:(0,a.jsx)("div",{className:O.appIconWrapper,children:(0,a.jsx)(g.default,{width:18,height:18})}),name:j.default.Messages.PRIVATE_CHANNEL_ADD_APPS})]})]})})}},654978:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}}),n("781738"),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("363484"),o=n("402904"),d=n("145131"),c=n("841283"),f=n("782340"),h=n("398990");let p={position:"bottom",autoInvert:!1},m=e=>{let{region:t,className:n=h.regionSelectName}=e,l=t.name.replace(/ \(VIP\)$/,"");return(0,a.jsx)("div",{className:n,children:l})};class E extends l.PureComponent{render(){let{region:e,selected:t}=this.props;return(0,a.jsxs)(d.default,{align:d.default.Align.CENTER,className:i({selected:t}),children:[(0,a.jsx)(m,{region:e,className:h.regionSelectName}),t?(0,a.jsx)("i",{className:h.check}):null]})}}class C extends l.PureComponent{componentDidMount(){null==this.props.regions&&u.default.fetchRegions(null)}render(){let{regions:e}=this.props;if(null==e)return null;let t=this.getSelectedRegion(),n={label:t.name,value:t},l=e.filter(e=>!e.deprecated&&!e.hidden).map(e=>({label:e.name,value:e,key:e.id}));return(0,a.jsx)(c.default,{label:f.default.Messages.REGION,options:l,value:n,onChange:this.handleChangeVoiceRegion,renderOption:this.renderOption,popoutProps:p,popoutClassName:h.regionSelectPopout})}constructor(...e){super(...e),this.renderOption=(e,t)=>(0,a.jsx)(E,{region:e.value,selected:t},e.value.id),this.getSelectedRegion=()=>{var e;let{regions:t,call:n}=this.props;return n.regionUpdated&&null!=t&&null!=n.region?null!==(e=t.find(e=>{let{id:t}=e;return t===n.region}))&&void 0!==e?e:{name:n.region,id:n.region}:{id:"automatic",name:f.default.Messages.AUTOMATIC_REGION,vip:!1,deprecated:!1,hidden:!1}},this.handleChangeVoiceRegion=e=>{let{value:t}=e,{channelId:n}=this.props.call;u.default.changeCallRegion(n,t.id)}}}var g=r.default.connectStores([o.default],()=>({regions:o.default.getRegions(null)}))(C)},561963:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n.n(r),o=n("974667"),d=n("394846"),c=n("446674"),f=n("77078"),h=n("272030"),p=n("352674"),m=n("206230"),E=n("95039"),C=n("405645"),g=n("256648"),S=n("593752"),_=n("506885"),I=n("981601"),T=n("373469"),v=n("26989"),x=n("305961"),N=n("824563"),A=n("101125"),M=n("191542"),R=n("697218"),j=n("543289"),L=n("45029"),O=n("155207"),y=n("826684"),P=n("483093"),b=n("599110"),D=n("659500"),U=n("991170"),w=n("158998"),F=n("50885"),k=n("888503"),V=n("49111"),B=n("782340"),H=n("126857"),G=n("881235");let W=F.default.getEnableHardwareAcceleration(),Y=44+k.AVATAR_DECORATION_PADDING,z=l.memo(function(e){let{channel:t,sectionId:s,userId:i,guildOwnerId:r}=e,u=(0,c.useStateFromStores)([M.default],()=>M.default.isTyping(t.id,i)),m=(0,c.useStateFromStores)([v.default],()=>v.default.getMember(t.guild_id,i)),C=(0,c.useStateFromStores)([x.default],()=>{var e,n;return(null==m?void 0:m.colorRoleId)!=null?null===(n=x.default.getGuild(t.guild_id))||void 0===n?void 0:null===(e=n.getRole(m.colorRoleId))||void 0===e?void 0:e.name:void 0},[t.guild_id,m]),g=(0,c.useStateFromStores)([R.default],()=>R.default.getUser(i)),j=(0,c.useStateFromStores)([R.default],()=>R.default.getCurrentUser()),L=(null==g?void 0:g.id)===(null==j?void 0:j.id),O=(0,c.useStateFromStores)([N.default,A.default],()=>L?A.default.getStatus():N.default.getStatus(i,t.guild_id)),y=(0,c.useStateFromStores)([N.default],()=>N.default.isMobileOnline(i)),P=(0,c.useStateFromStores)([N.default,A.default],()=>L?A.default.getActivities():N.default.getActivities(i,t.guild_id)),b=(0,c.useStateFromStores)([T.default],()=>T.default.getAnyStreamForUser(i)),U=(0,o.useListItem)(i),F=(0,c.useStateFromStores)([S.default],()=>S.default.canUserViewChannel(t.id,s,i)),H=(null==g?void 0:g.id)!=null&&g.id===r,G=l.useCallback(e=>{null!=g&&(0,h.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("721429").then(n.bind(n,"721429"));return n=>(0,a.jsx)(e,{...n,user:g,guildId:t.guild_id,channel:t})})},[g,t]),Y=l.useCallback(()=>{if(null==g)return;let e="@".concat(w.default.getUserTag(g,{decoration:"never"})),n="<@".concat(g.id,">");D.ComponentDispatch.dispatchToLastSubscribed(V.ComponentActions.INSERT_TEXT,{plainText:e,rawText:n}),p.default.startTyping(t.id)},[g,t]),z=l.useCallback(e=>{e.stopPropagation(),(0,E.openGuildBoostingMarketingModal)({guildId:t.guild_id,location:{section:V.AnalyticsSections.THREAD_MEMBER_LIST,object:V.AnalyticsObjects.BOOST_GEM_ICON}})},[t.guild_id]);if(null==g)return null;let K=null==m?void 0:m.premiumSince;return(0,a.jsx)(f.Popout,{preload:()=>(0,_.default)(g.id,g.getAvatarURL(t.guild_id,80),{guildId:t.guild_id,channelId:t.id}),renderPopout:e=>(0,a.jsx)(I.default,{...e,userId:g.id,guildId:t.guild_id,channelId:t.id}),position:d.isMobile?"window_center":"left",spacing:16,onShiftClick:Y,children:(e,n)=>{let{isShown:l}=n;return(0,a.jsx)(k.default,{onContextMenu:G,shouldAnimateStatus:W,user:g,currentUser:j,nick:null==m?void 0:m.nick,status:O,activities:P,colorString:null==m?void 0:m.colorString,colorRoleName:C,isTyping:u,channel:t,guildId:t.guild_id,isMobile:y,selected:l,applicationStream:b,premiumSince:null==K?null:new Date(K),onClickPremiumGuildIcon:z,itemProps:U,lostPermissionTooltipText:F?void 0:B.default.Messages.THREAD_MEMBER_WITHOUT_ACCESS,isOwner:H,...e})}})}),K=l.memo(function(e){let{id:t,label:n,count:l,guildId:s}=e,i=(0,C.useRoleIcon)({roleId:t,guildId:s,size:16});return t===V.StatusTypes.UNKNOWN?(0,a.jsx)("div",{className:G.membersGroup,children:(0,a.jsx)("div",{className:G.memberGroupsPlaceholder})}):(0,a.jsxs)(y.default,{className:G.membersGroup,"aria-label":B.default.Messages.CHANNEL_MEMBERS_A11Y_LABEL.format({title:n,count:l}),children:[null!=i?(0,a.jsx)(P.default,{className:G.roleIcon,...i}):null,(0,a.jsxs)("span",{"aria-hidden":!0,children:[n," — ",l]})]})}),Z=l.memo(function(e){let{channel:t}=e;return t.type===V.ChannelTypes.PRIVATE_THREAD?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:H.divider}),(0,a.jsxs)(f.Text,{variant:"text-xs/bold",color:"header-secondary",className:H.private,children:[(0,a.jsx)(L.default,{width:12,height:12}),"\xa0",B.default.Messages.THREAD_BROWSER_PRIVATE]}),(0,a.jsx)(f.Text,{variant:"text-sm/normal",color:"header-secondary",className:H.instructions,children:B.default.Messages.MEMBER_LIST_PRIVATE_THREAD_INSTRUCTIONS})]}):null});function X(e){let{channel:t,guild:n}=e,s="members-".concat(t.id),r=(0,g.useThreadMemberListSections)(t.id,n),d=r.filter(e=>e.userIds.length>0).reverse()[0],{navigator:h,listRef:p}=function(e,t){let n=(0,c.useStateFromStores)([m.default],()=>m.default.keyboardModeEnabled),a=l.useRef(null),s=l.useCallback((e,n)=>{let l=a.current;if(null==l)return;let s=parseInt(n,10),[i,r]=l.getSectionRowFromIndex(s),u=0===i&&0===r?t:0;l.scrollToIndex({section:i,row:r,padding:u,callback:()=>{requestAnimationFrame(()=>{var t;return null===(t=document.querySelector(e))||void 0===t?void 0:t.focus({preventScroll:!0})})}})},[t]),i=l.useCallback(()=>new Promise(e=>{let t=a.current;if(null==t)return e();t.scrollToTop({callback:()=>requestAnimationFrame(()=>e())})}),[]),r=l.useCallback(()=>new Promise(e=>{let t=a.current;if(null==t)return e();t.scrollToBottom({callback(){requestAnimationFrame(()=>setTimeout(e,100))}})}),[]),u=(0,o.default)({id:e,setFocus:s,isEnabled:n,scrollToStart:i,scrollToEnd:r});return{navigator:u,listRef:a}}(s,Y),E=0===r.length||r.every(e=>0===e.userIds.length);if(l.useEffect(()=>{b.default.track(V.AnalyticEvents.MEMBER_LIST_VIEWED,{channel_id:t.id,channel_type:t.type,guild_id:t.guild_id})},[t.guild_id,t.id,t.type]),E)return(0,a.jsx)(J,{channel:t});let C=u.omit(h.containerProps,["ref"]),S=U.default.getGuildVisualOwnerId(n);return(0,a.jsx)(o.ListNavigatorProvider,{navigator:h,children:(0,a.jsx)(f.FocusJumpSection,{children:e=>(0,a.jsx)("div",{className:i(G.membersWrap,G.hiddenMembers),children:(0,a.jsx)(f.List,{ref:p,className:G.members,paddingTop:0,sectionHeight:40,renderSection:e=>{let{section:t}=e,l=r[t];return(0,a.jsx)(K,{id:l.id,label:l.label,count:l.userIds.length,guildId:n.id},l.id)},rowHeight:Y,renderRow:e=>{let{section:n,row:l}=e,{userIds:s,id:i}=r[n];return(0,a.jsx)(z,{channel:t,sectionId:i,userId:s[l],guildOwnerId:S},s[l])},footerHeight:e=>r[e]===d&&t.type===V.ChannelTypes.PRIVATE_THREAD?80:0,renderFooter:e=>r[e.section]===d?(0,a.jsx)(Z,{channel:t},"footer"):null,innerAriaLabel:B.default.Messages.MEMBERS,innerTag:"ul",sections:r.map(e=>e.userIds.length),fade:!0,...C,...e},s)})})})}function J(e){let{channel:t}=e;return(0,a.jsxs)("div",{className:i(G.membersWrap,G.hiddenMembers,G.members,H.emptyState),children:[(0,a.jsx)(f.Text,{className:H.emptyStateHeader,variant:"text-xs/bold",color:"interactive-normal",children:B.default.Messages.MEMBERS}),(0,a.jsxs)("div",{className:H.emptyStateIconContainer,children:[(0,a.jsx)("div",{className:H.emptyStateIcon,children:(0,a.jsx)(O.default,{width:32,height:32})}),(0,a.jsx)(j.default,{className:H.emptyStateStars})]}),(0,a.jsx)(f.Heading,{variant:"heading-md/semibold",children:t.isForumPost()?B.default.Messages.FORUM_POST_MEMBER_LIST_EMPTY_STATE_HEADER:B.default.Messages.THREAD_MEMBER_LIST_EMPTY_STATE_HEADER}),(0,a.jsx)(f.Text,{className:H.emptyStateSubtext,variant:"text-sm/normal",color:"header-secondary",children:B.default.Messages.THREAD_MEMBER_LIST_EMPTY_STATE_SUBTEXT})]})}},841283:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}}),n("222007");var a=n("37983"),l=n("884691"),s=n("77078"),i=n("6466");class r extends l.PureComponent{render(){let{label:e,value:t,renderValue:n,className:l,popoutProps:r}=this.props;return(0,a.jsx)(s.Popout,{...r,renderPopout:this.renderPopout,children:(r,u)=>{let{isShown:o}=u;return(0,a.jsx)(s.Clickable,{...r,className:l,"aria-haspopup":"listbox","aria-expanded":o,children:(0,a.jsx)(i.default,{label:e,value:t,renderValue:n})})}})}constructor(...e){super(...e),this.renderPopout=e=>{let{closePopout:t}=e,{options:n,value:l,renderOption:s,popoutClassName:r,scroller:u}=this.props;return(0,a.jsx)(i.QuickSelectPopout,{scroller:!!u,className:r,options:n,value:l,renderOption:s,onChange:e=>{this.handleChange(e),t()}})},this.handleChange=e=>{let{onChange:t}=this.props;null==t||t(e)}}}var u=r},738073:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("851387"),d=n("697218"),c=n("440351"),f=n("701909"),h=n("49111"),p=n("782340"),m=n("42217");class E extends l.PureComponent{componentDidMount(){let{current:e}=this.scroller;null==e||e.scrollToBottom()}render(){let{nsfwDisallowed:e}=this.props,t=p.default.Messages.NSFW_DESCRIPTION;t=e?p.default.Messages.AGE_GATE_NSFW_UNDERAGE_BODY.format({helpURL:f.default.getArticleURL(h.HelpdeskArticles.NSFW_AGE_GATING)}):p.default.Messages.AGE_GATE_NSFW_DESCRIPTION;let n=e?(0,a.jsx)(c.default,{onAgree:this.handleAgree,onDisagree:this.handleDisagree,title:p.default.Messages.AGE_GATE_NSFW_UNDERAGE_HEADER,description:t,agreement:null,disagreement:p.default.Messages.BACK,imageClassName:m.ageGatedImage}):(0,a.jsx)(c.default,{onAgree:this.handleAgree,onDisagree:this.handleDisagree,title:p.default.Messages.NSFW_TITLE,description:t,agreement:p.default.Messages.NSFW_ACCEPT,disagreement:p.default.Messages.NSFW_DECLINE});return(0,a.jsx)(u.AdvancedScroller,{ref:this.scroller,className:m.scroller,children:(0,a.jsx)("div",{className:i(this.props.className,m.wrapper),children:n})})}constructor(...e){super(...e),this.scroller=l.createRef(),this.handleDisagree=()=>{let{guild:e}=this.props;null!=e&&o.default.nsfwReturnToSafety(e.id)},this.handleAgree=()=>{let{guild:e}=this.props;null!=e&&o.default.nsfwAgree(e.id)}}}var C=r.default.connectStores([d.default],()=>{var e;return{nsfwDisallowed:(null===(e=d.default.getCurrentUser())||void 0===e?void 0:e.nsfwAllowed)===!1}})(E)},650912:function(e,t,n){"use strict";n.r(t),n.d(t,{makeVoiceUserDroppable:function(){return c},makeVoiceUserDraggable:function(){return f}});var a=n("476042"),l=n("851387"),s=n("305961"),i=n("957255"),r=n("800762"),u=n("316133"),o=n("49111");let d="DRAGGABLE_USER";function c(e){return(0,a.DropTarget)(d,{canDrop(e){var t,n;let{channel:a}=e,l=a.getGuildId(),d=null!==(n=null===(t=s.default.getGuild(l))||void 0===t?void 0:t.maxVideoChannelUsers)&&void 0!==n?n:-1,c=u.default.countVoiceStatesForChannel(a.id),f=null!=l&&r.default.hasVideo(a.id)&&d>0&&c>=d+1;return i.default.can(o.Permissions.MOVE_MEMBERS,a)&&i.default.can(o.Permissions.CONNECT,a)&&!f},drop(e,t){let{channel:n}=e,a=r.default.getVoiceStateForUser(t.getItem().user.id);(null==a?void 0:a.channelId)!==n.id&&l.default.setChannel(n.getGuildId(),t.getItem().user.id,n.id)}},(e,t)=>({connectUserDropTarget:e.dropTarget(),isUserOver:t.isOver()&&t.canDrop()}))(e)}function f(e){return(0,a.DragSource)(d,{canDrag(e){let{user:t,canDrag:n}=e;return null!=n&&n},beginDrag(e){let{user:t}=e;return{user:t}}},e=>({connectUserDragSource:e.dragSource()}))(e)}},903834:function(e,t,n){"use strict";n.r(t),n.d(t,{ActivitiesPlusIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,fillRule:"evenodd",d:"M22 4v1.51a6 6 0 0 1-1.76 4.25l-4.1 4.1a.5.5 0 0 0-.14.35v1.29a.5.5 0 0 1-.5.5H15a3 3 0 0 0-3 3c0 .21-.3.26-.36.07l-.8-2.17a.5.5 0 0 0-.12-.18l-3.46-3.46a.5.5 0 0 0-.17-.11l-4.8-1.85a.5.5 0 0 1-.15-.85l2.02-1.73A3 3 0 0 1 6.1 8h3.68a.5.5 0 0 0 .36-.15l4.1-4.1A6 6 0 0 1 18.48 2H20a2 2 0 0 1 2 2Zm-5 5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",clipRule:"evenodd",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M9 19a1 1 0 0 0-1-1H7a1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1 3 3 0 0 0-3 3v3a1 1 0 0 0 1 1h3a3 3 0 0 0 3-3ZM19 14a1 1 0 0 1 1 1v3h3a1 1 0 0 1 0 2h-3v3a1 1 0 0 1-2 0v-3h-3a1 1 0 1 1 0-2h3v-3a1 1 0 0 1 1-1Z",className:r})]})}},47115:function(e,t,n){"use strict";n.r(t),n.d(t,{BellSlashIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M1.3 21.3a1 1 0 1 0 1.4 1.4l20-20a1 1 0 0 0-1.4-1.4l-20 20ZM3.13 16.13c.11.27.46.28.66.08L15.73 4.27a.47.47 0 0 0-.07-.74 6.97 6.97 0 0 0-1.35-.64.62.62 0 0 1-.38-.43 2 2 0 0 0-3.86 0 .62.62 0 0 1-.38.43A7 7 0 0 0 5 9.5v2.09a.5.5 0 0 1-.13.33l-1.1 1.22A3 3 0 0 0 3 15.15v.28c0 .24.04.48.13.7ZM18.64 9.36c.13-.13.36-.05.36.14v2.09c0 .12.05.24.13.33l1.1 1.22a3 3 0 0 1 .77 2.01v.28c0 .67-.34 1.29-.95 1.56-1.31.6-4 1.51-8.05 1.51-.46 0-.9-.01-1.33-.03a.48.48 0 0 1-.3-.83l8.27-8.28ZM9.18 19.84A.16.16 0 0 0 9 20a3 3 0 1 0 6 0c0-.1-.09-.17-.18-.16a24.84 24.84 0 0 1-5.64 0Z",className:r})})}},598165:function(e,t,n){"use strict";n.r(t),n.d(t,{CameraIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M15 13a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,fillRule:"evenodd",d:"M7.17 4.66A3 3 0 0 1 9.85 3h4.3a3 3 0 0 1 2.68 1.66c.34.69.94 1.34 1.71 1.34H20a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h1.46c.77 0 1.37-.65 1.71-1.34ZM17 13a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z",clipRule:"evenodd",className:r})]})}},918703:function(e,t,n){"use strict";n.r(t),n.d(t,{ChatPlusIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M19 14a1 1 0 0 1 1 1v3h3a1 1 0 1 1 0 2h-3v3a1 1 0 1 1-2 0v-3h-3a1 1 0 1 1 0-2h3v-3a1 1 0 0 1 1-1Z",fill:"string"==typeof i?i:i.css,className:r}),(0,a.jsx)("path",{d:"M20.76 12.57c.4.3 1.23.13 1.24-.37V12a10 10 0 1 0-18.44 5.36c.12.19.1.44-.04.61l-2.07 2.37A1 1 0 0 0 2.2 22h10c.5-.01.67-.84.37-1.24A3 3 0 0 1 15 16h.5a.5.5 0 0 0 .5-.5V15a3 3 0 0 1 4.76-2.43Z",fill:"string"==typeof i?i:i.css,className:r})]})}},831055:function(e,t,n){"use strict";n.r(t),n.d(t,{GridHorizontalIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M2 4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4ZM2 15c0-1.1.9-2 2-2h5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5ZM15 13a2 2 0 0 0-2 2v5c0 1.1.9 2 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2h-5Z",className:r})})}},821355:function(e,t,n){"use strict";n.r(t),n.d(t,{GridSquareIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M15 11a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2h5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5ZM2 20c0 1.1.9 2 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v5ZM13 20c0 1.1.9 2 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2h-5a2 2 0 0 0-2 2v5ZM2 9c0 1.1.9 2 2 2h5a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v5Z",className:r})})}},392800:function(e,t,n){"use strict";n.r(t),n.d(t,{GridVerticalIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M4 22a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2h5a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4ZM15 22a2 2 0 0 1-2-2v-5c0-1.1.9-2 2-2h5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5ZM13 9c0 1.1.9 2 2 2h5a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-5a2 2 0 0 0-2 2v5Z",className:r})})}},26309:function(e,t,n){"use strict";n.r(t),n.d(t,{GroupArrowDownIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M14.5 8a3 3 0 1 0-2.7-4.3c-.2.4.06.86.44 1.12a5 5 0 0 1 2.14 3.08c.01.06.06.1.12.1ZM20 15a1 1 0 1 0-2 0v5.59l-1.08-1.08-1.21-1.22a1 1 0 0 0-1.42 1.42l1.85 1.84 2.15 2.16a1 1 0 0 0 1.42 0l4-4a1 1 0 0 0-1.42-1.42L20 20.6V15ZM19 12c.4 0 .94-.68.65-.95a7.47 7.47 0 0 0-4.15-1.98c-.55-.08-.99.38-1.1.92-.06.3-.15.6-.26.87-.23.58-.05 1.3.47 1.63.39.25.75.52 1.1.82.26.23.7.15.9-.14A3 3 0 0 1 19 12Z",fill:"string"==typeof i?i:i.css,className:r}),(0,a.jsx)("path",{d:"M14.29 16.09c.44-.11.74-.67.42-.99A7.5 7.5 0 0 0 2 20.5c-.01.83.66 1.5 1.49 1.5a.2.2 0 0 0 .2-.16c.2-.96.56-1.87.88-2.54.1-.23.42-.15.42.1v2.1c0 .28.22.5.5.5h8c.1 0 .13-.13.06-.2l-.68-.68a3 3 0 0 1 1.4-5.03ZM9.5 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",fill:"string"==typeof i?i:i.css,className:r})]})}},337062:function(e,t,n){"use strict";n.r(t),n.d(t,{HandRequestSpeakListIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M16.02 3.06a1.23 1.23 0 0 0-2.39-.6l-2.14 7.76-.61-.24.83-6.97a1.26 1.26 0 0 0-2.49-.34L8.13 9.65l-.47 2.86a.42.42 0 0 1-.8.1l-.66-1.47a3.92 3.92 0 0 0-1.85-1.9l-.32-.17a1.53 1.53 0 0 0-1.91.47.61.61 0 0 0-.05.65l1.33 2.5c.06.12.12.24.16.37l1.26 4.11a7.47 7.47 0 0 0 7.77 5.25.48.48 0 0 0 .43-.48v-2.59L13 16a3 3 0 0 1 3-3h4.2a.5.5 0 0 0 .47-.3l1.23-2.9a1.19 1.19 0 0 0-2.17-.97l-1.8 3.87-.56-.22 2.4-7.64a1.17 1.17 0 0 0-2.21-.75l-2.78 7.4-.67-.26 1.9-8.17Z",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M16 15a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6ZM16 18a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6ZM16 21a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z",className:r})]})}},966900:function(e,t,n){"use strict";n.r(t),n.d(t,{HeadphonesDenyIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,fillRule:"evenodd",d:"M21.76.83a5.02 5.02 0 0 1 .78 7.7 5 5 0 0 1-7.07 0 5.02 5.02 0 0 1 0-7.07 5 5 0 0 1 6.29-.63Zm-4.88 2.05a3 3 0 0 1 3.41-.59l-4 4a3 3 0 0 1 .59-3.41Zm4.83.83-4 4a3 3 0 0 0 4-4Z",clipRule:"evenodd",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M12.38 1c.38.02.58.45.4.78-.15.3-.3.62-.4.95A.4.4 0 0 1 12 3a9 9 0 0 0-8.95 10h1.87a5 5 0 0 1 4.1 2.13l1.37 1.97a3.1 3.1 0 0 1-.17 3.78 2.85 2.85 0 0 1-3.55.74 11 11 0 0 1 5.71-20.61ZM22.22 11.22c.34-.18.76.02.77.4L23 12a11 11 0 0 1-5.67 9.62c-1.27.71-2.73.23-3.55-.74a3.1 3.1 0 0 1-.17-3.78l1.38-1.97a5 5 0 0 1 4.1-2.13h1.86c.03-.33.05-.66.05-1a.4.4 0 0 1 .27-.38c.33-.1.65-.25.95-.4Z",className:r})]})}},838048:function(e,t,n){"use strict";n.r(t),n.d(t,{HeadphonesSlashIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M22.7 2.7a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4l20-20ZM17.06 2.94a.48.48 0 0 0-.11-.77A11 11 0 0 0 2.18 16.94c.14.3.53.35.76.12l3.2-3.2c.25-.25.15-.68-.2-.76a5 5 0 0 0-1.02-.1H3.05a9 9 0 0 1 12.66-9.2c.2.09.44.05.59-.1l.76-.76ZM20.2 8.28a.52.52 0 0 1 .1-.58l.76-.76a.48.48 0 0 1 .77.11 11 11 0 0 1-4.5 14.57c-1.27.71-2.73.23-3.55-.74a3.1 3.1 0 0 1-.17-3.78l1.38-1.97a5 5 0 0 1 4.1-2.13h1.86a9.1 9.1 0 0 0-.75-4.72ZM10.1 17.9c.25-.25.65-.18.74.14a3.1 3.1 0 0 1-.62 2.84 2.85 2.85 0 0 1-3.55.74.16.16 0 0 1-.04-.25l3.48-3.48Z",className:r})})}},359902:function(e,t,n){"use strict";n.r(t),n.d(t,{MicrophoneDenyIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,fillRule:"evenodd",d:"M21.76.83a5.02 5.02 0 0 1 .78 7.7 5 5 0 0 1-7.07 0 5.02 5.02 0 0 1 0-7.07 5 5 0 0 1 6.29-.63Zm-4.88 2.05a3 3 0 0 1 3.41-.59l-4 4a3 3 0 0 1 .59-3.41Zm4.83.83-4 4a3 3 0 0 0 4-4Z",clipRule:"evenodd",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M12 2c.33 0 .51.35.4.66a6.99 6.99 0 0 0 3.04 8.37c.2.12.31.37.21.6A4 4 0 0 1 8 10V6a4 4 0 0 1 4-4Z",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M17.55 12.29c.1-.23.33-.37.58-.34.29.03.58.05.87.05h.04c.35 0 .63.32.51.65A8 8 0 0 1 13 17.94V20h2a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h2v-2.06A8 8 0 0 1 4 10a1 1 0 0 1 2 0 6 6 0 0 0 11.55 2.29Z",className:r})]})}},780624:function(e,t,n){"use strict";n.r(t),n.d(t,{MicrophoneSlashIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"m2.7 22.7 20-20a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4ZM10.8 17.32c-.21.21-.1.58.2.62V20H9a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-2v-2.06A8 8 0 0 0 20 10a1 1 0 0 0-2 0c0 1.45-.52 2.79-1.38 3.83l-.02.02A5.99 5.99 0 0 1 12.32 16a.52.52 0 0 0-.34.15l-1.18 1.18ZM15.36 4.52c.15-.15.19-.38.08-.56A4 4 0 0 0 8 6v4c0 .3.03.58.1.86.07.34.49.43.74.18l6.52-6.52ZM5.06 13.98c.16.28.53.31.75.09l.75-.75c.16-.16.19-.4.08-.61A5.97 5.97 0 0 1 6 10a1 1 0 0 0-2 0c0 1.45.39 2.81 1.06 3.98Z",className:r})})}},594881:function(e,t,n){"use strict";n.r(t),n.d(t,{MinimizeIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M15 4v3.59l5.3-5.3a1 1 0 1 1 1.4 1.42L16.42 9H20a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1V4a1 1 0 1 1 2 0ZM9 16.41l-5.3 5.3a1 1 0 0 1-1.4-1.42L7.58 15H4a1 1 0 1 1 0-2h6a1 1 0 0 1 1 1v6a1 1 0 1 1-2 0v-3.59Z",className:r})})}},283322:function(e,t,n){"use strict";n.r(t),n.d(t,{MusicIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M8.65 1.51A2 2 0 0 0 6 3.41v9.88A3.98 3.98 0 0 0 4.5 13C2.57 13 1 14.34 1 16s1.57 3 3.5 3S8 17.66 8 16V5.4l11 3.81v7.08a3.98 3.98 0 0 0-1.5-.29c-1.93 0-3.5 1.34-3.5 3s1.57 3 3.5 3 3.5-1.34 3.5-3V7.03c0-.74-.47-1.4-1.18-1.65L8.65 1.51Z",className:r})})}},473109:function(e,t,n){"use strict";n.r(t),n.d(t,{MusicSlashIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M22.7 2.7a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4l20-20ZM15.2 3.78a.5.5 0 0 1 .2.83l-2.28 2.27a.5.5 0 0 1-.52.12L8 5.4v6.4a.5.5 0 0 1-.15.35L2.3 17.7c-.2.2-.5.2-.67 0A2.7 2.7 0 0 1 1 16c0-1.66 1.57-3 3.5-3 .54 0 1.05.1 1.5.29V3.4a2 2 0 0 1 2.65-1.89l6.55 2.27ZM19.15 8.85a.5.5 0 0 0-.15.36v7.08a3.98 3.98 0 0 0-1.5-.29c-1.93 0-3.5 1.34-3.5 3s1.57 3 3.5 3 3.5-1.34 3.5-3V7.6a.25.25 0 0 0-.43-.17l-1.42 1.42Z",className:r})})}},565422:function(e,t,n){"use strict";n.r(t),n.d(t,{PaintbrushThinIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"m9.17 12.67 2.16 2.16a1 1 0 0 0 .99.25l2.57-.75A3 3 0 0 0 16.6 13l4.91-8.05a1.8 1.8 0 0 0-2.47-2.47L11 7.39a3 3 0 0 0-1.32 1.72l-.75 2.57a1 1 0 0 0 .25.99ZM8.03 13.14c.27.07.51.23.7.43l1.7 1.7c.2.19.36.43.43.7A4 4 0 0 1 7 21H2a1 1 0 1 1 0-2c.68 0 1.13-.77 1.04-1.44a4 4 0 0 1 5-4.42Z",className:r})})}},202998:function(e,t,n){"use strict";n.r(t),n.d(t,{PhoneCallIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M2 7.4A5.4 5.4 0 0 1 7.4 2c.36 0 .7.22.83.55l1.93 4.64a1 1 0 0 1-.43 1.25L7 10a8.52 8.52 0 0 0 7 7l1.12-2.24a1 1 0 0 1 1.19-.51l5.06 1.56c.38.11.63.46.63.85C22 19.6 19.6 22 16.66 22h-.37C8.39 22 2 15.6 2 7.71V7.4ZM13 3a1 1 0 0 1 1-1 8 8 0 0 1 8 8 1 1 0 1 1-2 0 6 6 0 0 0-6-6 1 1 0 0 1-1-1Z",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M13 7a1 1 0 0 1 1-1 4 4 0 0 1 4 4 1 1 0 1 1-2 0 2 2 0 0 0-2-2 1 1 0 0 1-1-1Z",className:r})]})}},543324:function(e,t,n){"use strict";n.r(t),n.d(t,{PinUprightIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M16.91 5C18.61 5 20 3.48 20 1.6v-.1a.5.5 0 0 0-.5-.5h-15a.5.5 0 0 0-.5.5v.1C4 3.49 5.38 5 7.09 5H8v4.35l-3.39 3.26A2 2 0 0 0 4 14.05V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-.95a2 2 0 0 0-.61-1.44L16 9.35V5h.91ZM13.37 17.25c.33 0 .56.3.5.61l-1.08 4.75a.5.5 0 0 1-.49.39h-.6a.5.5 0 0 1-.49-.39l-1.07-4.75a.5.5 0 0 1 .49-.61h2.74Z",className:r})})}},382269:function(e,t,n){"use strict";n.r(t),n.d(t,{PinUprightSlashIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M22.7 2.7a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4l20-20ZM4.5 1h13.17a.5.5 0 0 1 .36.85L4.62 15.25c-.2.22-.56.2-.6-.1A1 1 0 0 1 4 15v-.95a2 2 0 0 1 .61-1.44L8 9.35V5h-.91C5.39 5 4 3.48 4 1.6v-.1c0-.28.22-.5.5-.5ZM17.77 11.05a.5.5 0 0 0-.7 0l-4.1 4.1a.5.5 0 0 0 .36.85H19a1 1 0 0 0 1-1v-.95a2 2 0 0 0-.61-1.44l-1.62-1.56ZM11.08 17.25a.5.5 0 0 0-.36.15l-.36.37a.5.5 0 0 0-.14.46l.99 4.38a.5.5 0 0 0 .49.39h.6a.5.5 0 0 0 .49-.39l1.07-4.75a.5.5 0 0 0-.49-.61h-2.3Z",className:r})})}},265614:function(e,t,n){"use strict";n.r(t),n.d(t,{ScreenIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M5 2a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3H5ZM13.5 20a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-.5.5H9a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-1.5Z",className:r})})}},496061:function(e,t,n){"use strict";n.r(t),n.d(t,{ScreenSlashIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsx)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"m2.7 22.7 20-20a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4ZM13.2 16a.5.5 0 0 1-.35-.85l8.3-8.3a.5.5 0 0 1 .85.36V13a3 3 0 0 1-3 3h-5.8ZM17.15 2.85a.5.5 0 0 0-.36-.85H5a3 3 0 0 0-3 3v8a3 3 0 0 0 1.85 2.77c.17.07.36.02.49-.11l12.8-12.8ZM13.5 20a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-.5.5H9a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-1.5Z",className:r})})}},392646:function(e,t,n){"use strict";n.r(t),n.d(t,{UserCircleStatusIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,fillRule:"evenodd",d:"M23 12.38c-.02.38-.45.58-.78.4a6.97 6.97 0 0 0-6.27-.08.54.54 0 0 1-.44 0 8.97 8.97 0 0 0-11.16 3.55c-.1.15-.1.35 0 .5.37.58.8 1.13 1.28 1.61.24.24.64.15.8-.15.19-.38.39-.73.58-1.02.14-.21.43-.1.4.15l-.19 1.96c-.02.19.07.37.23.47A8.96 8.96 0 0 0 12 21a.4.4 0 0 1 .38.27c.1.33.25.65.4.95.18.34-.02.76-.4.77L12 23a11 11 0 1 1 11-10.62ZM15.5 7.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z",clipRule:"evenodd",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M24 19a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z",className:r})]})}},559981:function(e,t,n){"use strict";n.r(t),n.d(t,{UserMinusIcon:function(){return i}});var a=n("37983");n("884691");var l=n("669491"),s=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=l.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...u}=e;return(0,a.jsxs)("svg",{...(0,s.default)(u),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M11.53 11A9.53 9.53 0 0 0 2 20.53c0 .81.66 1.47 1.47 1.47h.22c.24 0 .44-.17.5-.4.29-1.12.84-2.17 1.32-2.91.14-.21.43-.1.4.15l-.25 2.61c-.03.3.2.55.5.55h7.63c.12 0 .17-.31.06-.36C12.82 21.14 12 20.22 12 19a3 3 0 0 1 3-3h5.02c.38 0 .61-.4.4-.72A9.52 9.52 0 0 0 12.47 11h-.94ZM12 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z",fill:"string"==typeof i?i:i.css,className:r}),(0,a.jsx)("path",{d:"M15 18a1 1 0 1 0 0 2h8a1 1 0 0 0 0-2h-8Z",fill:"string"==typeof i?i:i.css,className:r})]})}},560103:function(e,t,n){"use strict";n.r(t),n.d(t,{useThrottledState:function(){return i},useThrottledFunction:function(){return r}}),n("222007");var a=n("884691"),l=n("917351");let s=e=>e,i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3?arguments[3]:void 0,i=r(s,t,n,l),u=a.useRef(e);return a.useEffect(()=>{let t=i(e);u.current=t},[e,i]),0===t?e:u.current},r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0,i=a.useRef((0,l.throttle)(e,t,s));return a.useEffect(()=>(i.current=(0,l.throttle)(e,t,s),()=>{var e;null===(e=i.current)||void 0===e||e.cancel()}),[e,t,s,...n]),i.current}},133797:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var a,l=n("782340");let s=["a","b","c","d"],i=e=>e;function r(e,t){let n={},a=Math.min(e.length,s.length);for(let l=0;l<a;++l)n[s[l]]=(n,a)=>t(e[l],a);return n}a=class{asString(){return this.transformed(i)}isEmpty(){return 0===this.items.length}transformed(e){switch(this.items.length){case 0:return"";case 1:return e(this.items[0],"");case 2:return l.default.Messages.GENERIC_FORMATTED_LIST_TWO.format(r(this.items,e));case 3:return l.default.Messages.GENERIC_FORMATTED_LIST_THREE.format(r(this.items,e));default:return l.default.Messages.GENERIC_FORMATTED_LIST_FOUR.format(r(this.items,e))}}constructor(e){this.items=e}}},103723:function(e,t,n){"use strict";n.r(t),n.d(t,{VideoSpinnerContext:function(){return a},VideoSpinnerTimer:function(){return m}}),n("222007");var a,l,s=n("811022"),i=n("398183"),r=n("271938"),u=n("42203"),o=n("985365"),d=n("945956"),c=n("800762"),f=n("599110"),h=n("49111");(l=a||(a={})).SELF_VIDEO="self_video",l.SELF_STREAM="self_stream",l.REMOTE_VIDEO="remote_video",l.REMOTE_STREAM="remote_stream",l.CHANGE_VIDEO_BACKGROUND="change_video_background",l.VIDEO_PLAYER="video_player",l.REPLAY_VIDEO_STREAM="replay_video_stream";let p=new Map;class m{onSpinnerStarted(){null==this.spinnerVisibleStart&&(this.spinnerVisibleStart=(0,i.now)())}trackSpinnerDuration(e,t,n){if(null==this.spinnerVisibleStart)return;let a=function(e){var t;let n=(null!==(t=p.get(e))&&void 0!==t?t:0)+1;return p.set(e,n),n}(n),l=(0,i.now)()-this.spinnerVisibleStart;if(this.spinnerVisibleStart=null,l<0){this.logger.warn("spinner duration is negative: ".concat(l," ms\n        [").concat(e,", count for stream: ").concat(a,"]"));return}this.logger.info("spinner visible for ".concat(l," ms\n      [").concat(e,", count for stream: ").concat(a,"]"));let s=d.default.getGuildId(),m=c.default.getUserVoiceChannelId(s,r.default.getId()),E=function(e){if(null!=e){if(e.isGuildVoice())return"guild_voice";if(e.isGuildStageVoice())return"is_stage_channel";if(e.isDM())return"dm";if(e.isGroupDM())return"group_dm"}return null}(u.default.getChannel(m));f.default.track(h.AnalyticEvents.VIDEO_SPINNER_SHOWN_V2,{video_spinner_context:e,duration_video_spinner_visible_ms:l,rtc_connection_id:d.default.getRTCConnectionId(),media_session_id:d.default.getMediaSessionId(),event_count_for_stream:a,guild_id:s,channel_id:m,channel_type:E,spinning_user_id:t,connection_type:o.default.getType(),effective_connection_speed:o.default.getEffectiveConnectionSpeed(),service_provider:o.default.getServiceProvider()})}constructor(e){this.spinnerVisibleStart=null,this.logger=new s.default(e)}}},886860:function(e,t,n){"use strict";n.r(t),n.d(t,{ActivitiesAutoSuggestExperiment:function(){return l}});var a=n("862205");let l=(0,a.createExperiment)({kind:"user",id:"2022-12_activities_auto_suggest",label:"Activities Auto Suggest",defaultConfig:{enableCenterControlTrayMiniShelf:!1},treatments:[{id:1,label:"Enable VC Activities Mini Shelf",config:{enableCenterControlTrayMiniShelf:!0}}]})},296998:function(e,t,n){"use strict";n.r(t),n.d(t,{useIsWatchTogetherPromoWeek1SparklesEnabled:function(){return s}});var a=n("862205");let l=(0,a.createExperiment)({kind:"user",id:"2023-03_activities_watch_together_promo_sparkles_week_1",label:"Activities Watch Together Promo Week 1 Sparkles",defaultConfig:{enableWatchTogetherPromoWeek1Sparkles:!1},treatments:[{id:1,label:"enable Watch Together promo week 1 sparkles",config:{enableWatchTogetherPromoWeek1Sparkles:!0}}]}),s=()=>{let{enableWatchTogetherPromoWeek1Sparkles:e}=l.useExperiment({location:"703243_1"},{autoTrackExposure:!1});return e}},926128:function(e,t,n){"use strict";n.r(t),n.d(t,{useIsWatchTogetherPromoWeek2SparklesEnabled:function(){return s}});var a=n("862205");let l=(0,a.createExperiment)({kind:"user",id:"2023-03_activities_watch_together_promo_sparkles_week_2",label:"Activities Watch Together Promo Week 2 Sparkles",defaultConfig:{enableWatchTogetherPromoWeek2Sparkles:!1},treatments:[{id:1,label:"enable Watch Together promo week 2 sparkles",config:{enableWatchTogetherPromoWeek2Sparkles:!0}}]}),s=()=>{let{enableWatchTogetherPromoWeek2Sparkles:e}=l.useExperiment({location:"afee10_1"},{autoTrackExposure:!1});return e}},860345:function(e,t,n){"use strict";n.r(t),n.d(t,{PaxVcTileActivitiesExperiment:function(){return l}});var a=n("862205");let l=(0,a.createExperiment)({kind:"user",id:"2023-03_pax_vc_tile_activities",label:"PAX VC Tile Activities",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enable PAX VC Tile Activities",config:{enabled:!0}}]})},117582:function(e,t,n){"use strict";n.r(t),n.d(t,{VcTileActivityExperimentType:function(){return l},VcTileActivitiesEntryPointExperiment:function(){return i}});var a,l,s=n("862205");(a=l||(l={})).CONTROL="CONTROL",a.ONE_OR_TWO_USERS="ONE_OR_TWO_USERS",a.ANY_NUMBER_OF_USERS="ANY_NUMBER_OF_USERS";let i=(0,s.createExperiment)({kind:"user",id:"2023-01_vc_tile_activities_entry_point",label:"VC Tile Activities Entry Point",defaultConfig:{vcTileActivityExperimentType:"CONTROL"},treatments:[{id:1,label:"Enable one or two users VC Tile Activities Entry Point",config:{vcTileActivityExperimentType:"ONE_OR_TWO_USERS"}},{id:2,label:"Enable any number of users VC Tile Activities Entry Point",config:{vcTileActivityExperimentType:"ANY_NUMBER_OF_USERS"}}]})},757245:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}}),n("222007");var a=n("37983");n("884691");var l=n("446674"),s=n("577776"),i=n("77078"),r=n("812204"),u=n("685665"),o=n("42203"),d=n("18494"),c=n("697218"),f=n("811305"),h=n("427953"),p=n("550766"),m=n("191225"),E=n("885829"),C=n("575136"),g=n("141962"),S=n("272505"),_=n("782340"),I=n("131279");let T="ActivityPanelActionBar";function v(){let e=(0,l.useStateFromStores)([d.default],()=>d.default.getChannelId()),t=o.default.getChannel(e),{analyticsLocations:n}=(0,u.default)(r.default.ACTIVITY_IN_TEXT_ACTIONBAR),v=(0,l.useStateFromStoresArray)([m.default],()=>null!=e?m.default.getEmbeddedActivitiesForChannel(e):[],[e]),x=(0,l.useStateFromStores)([m.default],()=>m.default.getActivityPanelMode()),N=(0,C.useEmbeddedApps)(v),A=(0,C.useEmbeddedAppsWithPresence)(N),M=A.get(null===(O=N[0])||void 0===O?void 0:null===(L=O.application)||void 0===L?void 0:L.id),R=(0,h.useIsActivitiesInTextEnabled)(e,T),j=(0,h.useIsActivitiesInTextActionBarEnabled)(e,T);if(!(R&&j)||null==M||x!==S.ActivityPanelModes.ACTION_BAR)return null;var L,O,y,P=M.embeddedActivity.details;(null==P||void 0===P||""===P)&&(P=_.default.Messages.LOADING);let b=Array.from(M.embeddedActivity.connections.values()).map(e=>c.default.getUser(e.user_id)).filter(e=>null!=e&&void 0!==e);return(0,a.jsxs)(i.Clickable,{className:I.actionBarContainer,onClick:()=>{null!=t&&null!=M&&((0,E.maybeJoinEmbeddedActivity)({channelId:t.id,applicationId:M.application.id,activityId:M.embeddedActivity.activity_id,inputApplication:M.application,analyticsLocations:n,embeddedActivitiesManager:g.default}),(0,p.updateActivityPanelMode)(S.ActivityPanelModes.PANEL))},children:[(0,a.jsx)("img",{alt:"",src:null!==(y=M.application.getIconURL(48))&&void 0!==y?y:void 0,className:I.applicationIcon}),(0,a.jsxs)("div",{className:I.textContainer,children:[(0,a.jsx)(s.Text,{color:"header-primary",variant:"text-sm/semibold",children:M.application.name}),(0,a.jsx)(s.Text,{color:"header-secondary",variant:"text-xxs/medium",className:I.textSubtitle,children:P})]}),(0,a.jsx)(f.default,{renderIcon:!1,users:b,size:24,max:3,className:I.userSummaryContainer})]})}},294926:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("577776"),o=n("452804"),d=n("579408"),c=n("168973"),f=n("981913"),h=n("576242"),p=n("18494"),m=n("717018"),E=n("659500"),C=n("550766"),g=n("191225"),S=n("698372"),_=n("401207"),I=n("320817"),T=n("803997"),v=n("272505"),x=n("49111"),N=n("782340"),A=n("355255");let M={[v.FocusedActivityLayouts.NO_CHAT]:A.noChat,[v.FocusedActivityLayouts.RESIZABLE]:A.resizable};function R(e){var t;let{maxHeight:n,connectedChannelId:s}=e,R=(0,S.default)(),j=l.useCallback(()=>{(0,C.updateActivityPanelMode)(v.ActivityPanelModes.PIP)},[]),L=l.useRef(null),O=(0,r.useStateFromStores)([g.default],()=>g.default.getFocusedLayout()),y=O!==v.FocusedActivityLayouts.NO_CHAT,[P,b]=l.useState(null!==(t=c.default.activityPanelHeight)&&void 0!==t?t:n),D=l.useCallback(e=>{o.default.updatedUnsyncedSettings({activityPanelHeight:e})},[]),U=l.useRef(null),[w,F]=l.useState({width:0,height:0});l.useLayoutEffect(()=>{if(null==U.current)return;let e=new ResizeObserver(()=>{var e,t,n,a;let l=null!==(n=null===(e=U.current)||void 0===e?void 0:e.clientWidth)&&void 0!==n?n:0;F({width:l,height:null!==(a=null===(t=U.current)||void 0===t?void 0:t.clientHeight)&&void 0!==a?a:0})});return e.observe(U.current),()=>e.disconnect()},[]);let k=w.width/Math.max(w.height,1),V=k<v.LANDSCAPE_ACTIVITY_ASPECT_RATIO,B=0,H=0,G=w.width,W=w.height;V?((W=w.width/v.LANDSCAPE_ACTIVITY_ASPECT_RATIO)>w.height&&(G=(W=w.height)*v.LANDSCAPE_ACTIVITY_ASPECT_RATIO),H=(w.height-W)/2):((G=Math.min(w.height*v.LANDSCAPE_ACTIVITY_ASPECT_RATIO))>w.width&&(W=(G=w.width)/v.LANDSCAPE_ACTIVITY_ASPECT_RATIO),B=(w.width-G)/2);let Y=(0,r.useStateFromStores)([p.default],()=>p.default.getChannelId());return null==R?null:(0,a.jsxs)("div",{className:i(A.wrapper,M[O]),ref:L,style:y&&null!=P?{minHeight:200,maxHeight:n,height:P}:void 0,children:[(0,a.jsxs)("div",{className:A.header,children:[(0,a.jsx)("div",{className:A.arrowContainer,children:(0,a.jsx)(f.default,{label:N.default.Messages.EMBEDDED_ACTIVITIES_MINIMIZE_A11Y_LABEL,onClick:j,className:A.circularButton,iconComponent:m.default,iconClassName:A.minimizeIcon,themeable:!0})}),(0,a.jsx)(u.Text,{color:"header-primary",variant:"text-md/semibold",className:A.headerTitle,children:null==R?void 0:R.name}),(0,a.jsx)("div",{className:A.leaveButtonContainer,children:(0,a.jsx)(h.default,{applicationId:R.id,channelId:s,className:A.leaveActivityButton,iconClassName:A.leaveActivityIcon,centerButton:!0,color:"red"})})]}),(0,a.jsx)("div",{className:A.activityContainer,style:{paddingLeft:B,paddingRight:B,paddingTop:H,paddingBottom:H},ref:U,children:(0,a.jsx)(_.default,{className:A.iframe,embedId:(0,I.default)(s,R.id)})}),null!=Y?(0,a.jsx)("div",{className:A.footer,children:(0,a.jsx)(T.default,{channelId:Y})}):null,y?(0,a.jsx)(d.default,{minHeight:480,maxHeight:n,resizableNode:L,onResize:e=>{E.ComponentDispatch.dispatch(x.ComponentActions.MANUAL_IFRAME_RESIZING,{resizing:!0}),b(e)},onResizeEnd:e=>{E.ComponentDispatch.dispatch(x.ComponentActions.MANUAL_IFRAME_RESIZING,{resizing:!1}),D(e)}}):null]})}},169920:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("37983"),l=n("884691"),s=n("65597"),i=n("84339"),r=n("427953"),u=n("550766"),o=n("191225"),d=n("420444"),c=n("294926"),f=n("272505");function h(e){let{maxHeight:t}=e,{connectedChannelId:n,connectedActivity:h,activityPanelMode:p}=(0,s.useStateFromStoresObject)([o.default],()=>{var e;let t=o.default.getConnectedActivityChannelId();return{connectedChannelId:t,connectedActivity:null!=t&&null!==(e=o.default.getSelfEmbeddedActivityForChannel(t))&&void 0!==e?e:void 0,activityPanelMode:o.default.getActivityPanelMode()}}),m=(0,r.useIsActivitiesInTextEnabled)(n,"ActivityPanelUI"),E=(0,i.default)(n);if(l.useEffect(()=>{null==n&&null!=E?(0,u.updateActivityPanelMode)(f.ActivityPanelModes.ACTION_BAR):null!=n&&null==E&&(0,u.updateFocusedActivityLayout)(f.FocusedActivityLayouts.NO_CHAT)},[n,E]),!m)return null;let C=null==h?void 0:h.application_id;return p!==f.ActivityPanelModes.PANEL||null==C?null:null==n||null==h||(0,d.default)(n)||null==C?null:(0,a.jsx)(c.default,{maxHeight:t,connectedChannelId:n})}},803997:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}}),n("424973");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n("446674"),o=n("996496"),d=n("981913"),c=n("660478"),f=n("191542"),h=n("256170"),p=n("378765"),m=n("550766"),E=n("191225"),C=n("272505"),g=n("49111"),S=n("782340"),_=n("369026");function I(e){let{channelId:t,...n}=e,s=l.useRef(null),I=(0,u.useStateFromStores)([E.default],()=>E.default.getFocusedLayout()===C.FocusedActivityLayouts.RESIZABLE),T=l.useCallback(()=>{let e=I?C.FocusedActivityLayouts.NO_CHAT:C.FocusedActivityLayouts.RESIZABLE;(0,m.updateFocusedActivityLayout)(e)},[I]),{unreadCount:v,mentionCount:x}=function(e){let t=(0,u.useStateFromStores)([f.default],()=>!(0,r.isEmpty)(f.default.getTypingUsers(e)),[e]),{unreadCount:n,mentionCount:a}=(0,u.useStateFromStoresObject)([c.default],()=>({unreadCount:c.default.getUnreadCount(e),mentionCount:c.default.getMentionCount(e)}),[e]);return{unreadCount:n,mentionCount:a,isTyping:t}}(t),N=l.useCallback(()=>{var e;null===(e=s.current)||void 0===e||e.focus()},[]);(0,p.useComponentAction)({event:g.ComponentActions.FOCUS_CHAT_BUTTON,handler:N});let A=I?S.default.Messages.HIDE_CHAT:S.default.Messages.SHOW_CHAT,M=[A];x>0&&M.push(S.default.Messages.GUILD_SIDEBAR_CHANNEL_A11Y_LABEL_MENTIONS.format({mentionCount:x})),v>0&&M.push(S.default.Messages.GUILD_SIDEBAR_CHANNEL_A11Y_LABEL_UNREAD);let R=(0,u.useStateFromStores)([E.default],()=>E.default.getFocusedLayout()),j=v>0;return(0,a.jsxs)("div",{className:_.wrapper,children:[(0,a.jsx)(d.default,{buttonRef:s,onClick:T,label:A,"aria-label":M.join(", "),tooltipPosition:"bottom",iconComponent:h.default,themeable:!0,className:i(_.circularButton,R===C.FocusedActivityLayouts.NO_CHAT?_.upArrow:_.downArrow),...n}),j?(0,a.jsx)(o.default,{hasMentions:x>0,truncatedCount:v>99?"99+":v,className:_.badge}):null]})}},372610:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("884691"),l=n("550766"),s=n("126939"),i=n("702173");let r=e=>null!=e&&""!==e;function u(e,t){let n=(0,s.useIsActivitiesEnabledForCurrentPlatform)(),u=(0,i.default)(t),o=r(e)||u;a.useEffect(()=>{o&&n&&(0,l.fetchShelf)({guildId:e})},[e,n,o]);let d=o&&n;return d}},426631:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("446674"),l=n("191225");function s(e){let{channelId:t}=e;return(0,a.useStateFromStores)([l.default],()=>l.default.getEmbeddedActivitiesForChannel(t).some(e=>e.connections.size>0))}},380691:function(e,t,n){"use strict";n.r(t),n.d(t,{useShowActivityIndicator:function(){return s}});var a=n("446674"),l=n("191225");let s=()=>{let e=(0,a.useStateFromStores)([l.default],()=>l.default.getState().shouldShowNewActivityIndicator);return e}},801852:function(e,t,n){"use strict";n.r(t),n.d(t,{ActivitiesMiniShelf:function(){return w}}),n("222007"),n("424973");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("90915"),u=n("748820"),o=n("446674"),d=n("77078"),c=n("997289"),f=n("244201"),h=n("206230"),p=n("812204"),m=n("685665"),E=n("161778"),C=n("124824"),g=n("772280"),S=n("82636"),_=n("599110"),I=n("614175"),T=n("955153"),v=n("550766"),x=n("337697"),N=n("91761"),A=n("441821"),M=n("766914"),R=n("478272"),j=n("49111"),L=n("782340"),O=n("362486"),y=n("678070"),P=n("789335"),b=n("894860"),D=n("861948");let U="vc-activities-".concat((0,u.v4)()),w=l.forwardRef(function(e,t){let{channel:n,isHovered:s,closePopout:u,onMouseEnter:w,onMouseLeave:F,onClick:k,className:V}=e,{enabled:B}=I.ActivitiesGameNightExperiment.useExperiment({location:"8009ca_1"},{autoTrackExposure:!1}),{enabled:H}=T.BirthdayActivitiesExperiment.useExperiment({location:"8009ca_3"}),{enabled:G}=x.ExperimentBirthdayGoodbye.useExperiment({location:"8009ca_4"}),W=(0,o.useStateFromStores)([E.default],()=>E.default.getState().theme),Y=(0,o.useStateFromStores)([h.default],()=>h.default.useReducedMotion),{id:z,guild_id:K}=n;l.useEffect(()=>{_.default.track(j.AnalyticEvents.ACTIVITIES_CENTER_CONTROL_TRAY_BUTTON_HOVERED,{channel_id:z,guild_id:K})},[z,K]),l.useEffect(()=>{!s&&u()},[u,s]);let Z=(0,f.useAppContext)(),{analyticsLocations:X,AnalyticsLocationProvider:J}=(0,m.default)(p.default.ACTIVITIES_MINI_SHELF),{AnalyticsLocationProvider:q}=(0,m.default)([...X,p.default.ACTIVITIES_MINI_SHELF_BANNER]),Q=Z===j.AppContext.POPOUT,$=(0,c.useAnalyticsContext)(),ee=function(e){let t=(0,N.default)({guildId:e}),n=[];return t.forEach(e=>{let[t,a]=e;n.push(...a)}),n.slice(0,5)}(n.getGuildId());l.useEffect(()=>{let e=setTimeout(()=>v.dismissNewActivityIndicator(),1e3);return()=>clearTimeout(e)},[]);let et=l.useCallback(()=>{var e;(0,R.default)({channel:n,guildId:null!==(e=n.getGuildId())&&void 0!==e?e:void 0,locationObject:$.location,openInPopout:Q,analyticsLocations:X}),F(),k()},[$,X,n,k,F,Q]),en=l.useCallback(e=>{w(),_.default.track(j.AnalyticEvents.ACTIVITIES_MINI_SHELF_HOVERED,{channel_id:n.id,guild_id:n.getGuildId()})},[w,n]),ea=B?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{alt:L.default.Messages.EMBEDDED_ACTIVITIES_MINI_SHELF_GAME_NIGHT_POSTER_ALT,src:b,className:O.poster}),(0,a.jsx)("div",{className:O.posterDivider})]}):G?(0,a.jsxs)("div",{className:O.freeWrapper,children:[(0,a.jsxs)("div",{className:O.freeLeft,children:[(0,a.jsx)(d.Text,{className:O.freeLeftTitle,variant:"display-md",children:L.default.Messages.EMBEDDED_ACTIVITIES_FREE_FOR_EVERYONE_BANNER_TEXT}),(0,a.jsx)(d.Anchor,{href:"https://discord.com/blog/server-activities-games-voice-watch-together",className:i((0,d.getButtonStyle)({color:d.Button.Colors.BRAND}),O.freeButtonLink),children:L.default.Messages.LEARN_MORE})]}),(0,a.jsx)("img",{className:O.freeRight,src:D,alt:L.default.Messages.EMBEDDED_ACTIVITIES_SHELF_CHARACTERS_ALT_TEXT})]}):H?(0,a.jsxs)(r.Link,{to:j.Routes.ACTIVITIES,children:[(0,a.jsx)("img",{alt:L.default.Messages.EMBEDDED_ACTIVITIES_BIRTHDAY_ACTIVITIES_HERO_ALT,src:"light"===W?y:P,className:O.poster}),(0,a.jsx)("div",{className:O.posterDivider})]}):null;return(0,a.jsx)(J,{children:(0,a.jsx)(C.default,{children:(0,a.jsxs)(d.Dialog,{ref:t,"aria-labelledby":U,className:V,children:[(0,a.jsx)(d.HeadingLevel,{forceLevel:2,children:(0,a.jsx)(d.HiddenVisually,{children:(0,a.jsx)(d.H,{id:U,children:L.default.Messages.EMBEDDED_ACTIVITIES_MINI_SHELF_TITLE})})}),(0,a.jsxs)("div",{className:O.container,onMouseEnter:en,onMouseLeave:F,children:[(0,a.jsxs)("div",{className:O.titleContainer,children:[(0,a.jsxs)("div",{className:O.titleLeft,children:[(0,a.jsx)(S.default,{className:O.titleLeftIcon,color:"var(--interactive-active)"}),(0,a.jsx)(d.Text,{variant:"eyebrow",children:L.default.Messages.EMBEDDED_ACTIVITIES_AUTO_SUGGEST_ACTIVITIES_TITLE})]}),(0,a.jsxs)(d.Clickable,{className:O.titleRight,onClick:et,children:[(0,a.jsx)(d.Text,{variant:"eyebrow",children:L.default.Messages.EMBEDDED_ACTIVITIES_AUTO_SUGGEST_SEE_ALL}),(0,a.jsx)(g.default,{width:12,height:12,color:"var(--interactive-active)",className:O.titleRightIcon})]})]}),(0,a.jsx)(q,{children:ea}),(0,a.jsxs)("div",{className:O.activityContainer,children:[ee.map(e=>(0,a.jsx)(A.ActivitySuggestion,{channel:n,activityItem:e,onClick:()=>{u(),k()},aspectRatio:A.ActivitySuggestion.AspectRatio.THIRTEEN_BY_ELEVEN,animatedDivClass:O.activitySuggestion},e.application.id)),(0,a.jsx)("div",{className:i(O.wumpusRocketOuterContainer,{[O.wumpusReducedMotion]:Y}),children:(0,a.jsx)("div",{className:O.wumpusRocketInnerContainer,children:(0,a.jsx)(M.default,{className:O.wumpusRocket})})})]})]})]})})})})},441821:function(e,t,n){"use strict";n.r(t),n.d(t,{ActivitySuggestion:function(){return R}}),n("222007");var a,l,s=n("37983"),i=n("884691"),r=n("414456"),u=n.n(r),o=n("907002"),d=n("446674"),c=n("669491"),f=n("77078"),h=n("697218"),p=n("45029"),m=n("216422"),E=n("719923"),C=n("439932"),g=n("15264"),S=n("607573"),_=n("817039"),I=n("687292"),T=n("141962"),v=n("49111"),x=n("782340"),N=n("193879");let A=["embedded_cover"],M={tension:800,friction:24};function R(e){var t;let{channel:n,activityItem:a,onClick:l,aspectRatio:r=0,animatedDivClass:R}=e,j=(0,d.useStateFromStores)([h.default],()=>h.default.getCurrentUser(),[]),{onActivityItemSelected:L,imageBackground:O,activityAction:y,labelType:P}=(0,S.default)({channel:n,activityItem:a,guildId:null!==(t=n.getGuildId())&&void 0!==t?t:void 0,locationObject:{},onActivityItemSelected:l,embeddedActivitiesManager:T.default,assetNames:A}),[b,D]=i.useState(!1),U=i.useCallback(()=>{D(!0)},[D]),w=i.useCallback(()=>{D(!1)},[D]),F=(0,f.useToken)(c.default.unsafe_rawColors.PREMIUM_PERK_PINK),k=i.useMemo(()=>(0,s.jsx)("div",{className:N.overlayBadge,children:(0,s.jsx)("div",{className:N.badgeContainer,children:(0,s.jsx)(I.default,{name:a.application.name,labelType:P})})}),[a.application.name,P]),V=i.useMemo(()=>(0,g.default)(a.activity)?null:E.default.canUsePremiumActivities(j)?(0,s.jsx)("div",{className:N.iconOuterContainer,children:(0,s.jsx)("div",{className:u(N.iconInnerContainer,N.nitroIconContainer),children:(0,s.jsx)(m.default,{width:16,height:16,color:F.hex(),className:N.nitroIcon})})}):(0,s.jsx)("div",{className:u(N.iconOuterContainer,N.lockBackground),children:(0,s.jsx)("div",{className:u(N.iconInnerContainer,N.lockIconContainer),children:(0,s.jsx)(p.default,{color:"var(--interactive-active)",className:N.lock})})}),[a.activity,F,j]),B=i.useMemo(()=>{switch(y){case S.ActivityAction.JOIN:return(0,s.jsx)("div",{className:N.activityAction,children:(0,s.jsx)("div",{className:N.activityActionButton,children:(0,s.jsx)(f.Text,{variant:"text-sm/medium",color:"always-white",children:x.default.Messages.JOIN})})});case S.ActivityAction.LEAVE:return(0,s.jsx)("div",{className:N.activityAction,children:(0,s.jsx)("div",{className:u(N.activityActionButton,N.activityActionButtonDanger),children:(0,s.jsx)(f.Text,{variant:"text-sm/medium",color:"always-white",children:x.default.Messages.EMBEDDED_ACTIVITIES_LEAVE})})});case S.ActivityAction.START:default:return(0,s.jsx)(s.Fragment,{})}},[y]);return(0,s.jsx)(f.Button,{onClick:L,color:"transparent",look:f.Button.Looks.BLANK,size:f.Button.Sizes.NONE,onFocus:U,onBlur:w,onMouseEnter:U,onMouseLeave:w,innerClassName:N.activityItemButtonInnerClass,children:(0,s.jsx)(o.Spring,{config:M,from:{value:0},to:{value:b?1:0},children:e=>{let{value:t}=e;return(0,s.jsx)(o.animated.div,{className:u((0,C.getThemeClass)(v.ThemeTypes.DARK),N.activityItem,R,{[N.activityItem_13_11]:0===r,[N.activityItem_16_9]:1===r}),style:{transform:t.to([0,1],[1,1.05]).to(e=>"scale(".concat(e,")"))},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.default,{imageBackground:O,applicationName:a.application.name,imageClassName:N.activitySuggestionImage,imageNotFoundClassName:N.brokenImageIconWrapper}),k,V,B]})})}})})}(l=a||(a={}))[l.THIRTEEN_BY_ELEVEN=0]="THIRTEEN_BY_ELEVEN",l[l.SIXTEEN_BY_NINE=1]="SIXTEEN_BY_NINE",R.AspectRatio=a},401207:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983"),l=n("884691"),s=n("446674"),i=n("913144"),r=n("600965"),u=n("292687"),o=n("659500"),d=n("191225"),c=n("420444"),f=n("577261"),h=n("272505"),p=n("49111");let m=(e,t)=>{i.default.wait(()=>{(0,r.updateRect)(e,t)})};function E(e){let t,{embedId:n,className:i,style:r}=e,E=(0,s.useStateFromStores)([u.default],()=>u.default.getWindow(p.PopoutWindowKeys.CHANNEL_CALL_POPOUT)),C=(0,f.default)(),g=(0,s.useStateFromStores)([d.default],()=>d.default.getActivityPanelMode()),S=null!=C&&!(0,c.default)(C.channelId)&&g===h.ActivityPanelModes.PANEL;if(S)t=window;else{var _;t=null!==(_=null==E?void 0:E.window)&&void 0!==_?_:window}let I=l.useRef(null),T=l.useMemo(()=>{let e=null;return()=>{null==e&&(e=t.requestAnimationFrame(()=>{var t,a;m(n,null!==(a=null===(t=I.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==a?a:null),e=null}))}},[n,t]);return l.useEffect(()=>(t.addEventListener("resize",T),o.ComponentDispatch.subscribe(p.ComponentActions.REMEASURE_TARGET,T),()=>{t.removeEventListener("resize",T),o.ComponentDispatch.unsubscribe(p.ComponentActions.REMEASURE_TARGET,T)}),[T,t]),l.useLayoutEffect(()=>{let e=I.current;if(null==e)return;let t=e.ownerDocument.defaultView;if(null==t)return;T();let a=new t.ResizeObserver(T);return a.observe(e),()=>{a.disconnect(),m(n,null)}},[n,T]),(0,a.jsx)("div",{ref:I,style:r,className:i})}},10524:function(e,t,n){"use strict";n.r(t),n.d(t,{MaskColor:function(){return l},FreeActivityIndicatorDot:function(){return o}});var a,l,s=n("37983");n("884691");var i=n("414456"),r=n.n(i),u=n("421723");(a=l||(l={}))[a.POPOUT=0]="POPOUT",a[a.SECONDARY=1]="SECONDARY",a[a.BLACK=2]="BLACK";let o=e=>{let{left:t,top:n=0,right:a=0,bottom:l,size:i=8,alert:o=!1,maskColor:d=1}=e;return(0,s.jsx)("span",{className:r(u.dot,{[u.alert]:o,[u.maskPopout]:0===d,[u.maskSecondary]:1===d,[u.maskBlack]:2===d}),style:{height:i,width:i,left:t,top:n,right:a,bottom:l}})}},766914:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var l=e=>(0,a.jsxs)("svg",{viewBox:"0 0 500 350",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"linear-gradient",x1:137.05,y1:259.98,x2:172.2,y2:237.66,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:0,stopColor:"#ffe75c"}),(0,a.jsx)("stop",{offset:1,stopColor:"#ff8c19"})]}),(0,a.jsxs)("linearGradient",{id:"linear-gradient-2",x1:146.1,y1:114.65,x2:204.28,y2:84.63,gradientTransform:"matrix(-.99 .13 .13 .99 416 -12.92)",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:0,stopColor:"#7196ff"}),(0,a.jsx)("stop",{offset:.2,stopColor:"#6990fc"}),(0,a.jsx)("stop",{offset:.49,stopColor:"#547ff4"}),(0,a.jsx)("stop",{offset:.67,stopColor:"#4572ee"})]}),(0,a.jsxs)("linearGradient",{id:"linear-gradient-3",x1:167.18,y1:156.28,x2:118.66,y2:238.11,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:0,stopColor:"#ff8c19"}),(0,a.jsx)("stop",{offset:.55,stopColor:"#ffe75c"})]}),(0,a.jsxs)("linearGradient",{id:"linear-gradient-4",x1:125.79,y1:287.01,x2:241.87,y2:290.82,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:.45,stopColor:"#ffe75c"}),(0,a.jsx)("stop",{offset:.95,stopColor:"#ff8c19"})]}),(0,a.jsxs)("linearGradient",{id:"linear-gradient-5",x1:323.47,y1:303.47,x2:284.74,y2:147.93,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:.08,stopColor:"#717f8e"}),(0,a.jsx)("stop",{offset:1,stopColor:"#d3d7db"})]}),(0,a.jsxs)("linearGradient",{id:"linear-gradient-6",x1:211.38,y1:109.6,x2:273.39,y2:77.6,gradientTransform:"matrix(-.8 .6 .6 .8 325.62 -103.19)",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:.32,stopColor:"#7196ff"}),(0,a.jsx)("stop",{offset:.43,stopColor:"#6a90fc"}),(0,a.jsx)("stop",{offset:.74,stopColor:"#5b84f6"}),(0,a.jsx)("stop",{offset:1,stopColor:"#5680f4"})]}),(0,a.jsxs)("linearGradient",{id:"linear-gradient-7",x1:-96.32,y1:138.47,x2:-101.4,y2:109.82,gradientTransform:"scale(-1 1) rotate(14.5 27.61 -552.62)",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:0,stopColor:"#4572ee"}),(0,a.jsx)("stop",{offset:1,stopColor:"#7196ff"})]}),(0,a.jsx)("linearGradient",{id:"linear-gradient-8",x1:-39.5,y1:59.37,x2:-44.66,y2:30.24,gradientTransform:"matrix(-.98 .17 .17 .98 119.49 49.25)",xlinkHref:"#linear-gradient-7"}),(0,a.jsxs)("linearGradient",{id:"linear-gradient-9",x1:299.25,y1:167.71,x2:244.21,y2:161.69,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:.32,stopColor:"#4572f0"}),(0,a.jsx)("stop",{offset:.52,stopColor:"#4d79f3"}),(0,a.jsx)("stop",{offset:.84,stopColor:"#638bfa"}),(0,a.jsx)("stop",{offset:1,stopColor:"#7196ff"})]}),(0,a.jsxs)("linearGradient",{id:"linear-gradient-10",x1:423.96,y1:48.35,x2:363.72,y2:139.3,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{offset:.45,stopColor:"#ffe75c"}),(0,a.jsx)("stop",{offset:1,stopColor:"#ff8c19"})]}),(0,a.jsx)("style",{children:".cls-3{fill:#ff78b9}.cls-6{fill:#ed5f00}.cls-12{fill:#7196ff}.cls-16{fill:#b6cbff}.cls-18{fill:#7fa0ff}.cls-21{fill:#5783ff}.cls-24{fill:#8e99a5}"})]}),(0,a.jsx)("path",{d:"M391.43 240.7a19.35 19.35 0 0 1-8.76-13.59l-1.46-9.49a1 1 0 0 0-.31-.59.85.85 0 0 0-1.24 0 1 1 0 0 0-.31.59l-1.45 9.49a19.66 19.66 0 0 1-8.76 13.59l-1.26.79a.92.92 0 0 0-.3.35.9.9 0 0 0-.1.45.87.87 0 0 0 .1.45.92.92 0 0 0 .3.35l1.26.79a19.71 19.71 0 0 1 8.76 13.6l1.45 9.48a1 1 0 0 0 .32.57 1 1 0 0 0 1.23 0 .93.93 0 0 0 .31-.57l1.46-9.48a19.34 19.34 0 0 1 8.76-13.6l1.26-.79a1 1 0 0 0 .3-.35 1 1 0 0 0 .1-.45 1 1 0 0 0-.4-.8Z",style:{fill:"#57f287"}}),(0,a.jsx)("path",{d:"M79.4 119.28a19.34 19.34 0 0 1-8.76-13.6l-1.46-9.48a1 1 0 0 0-.31-.6.87.87 0 0 0-1.24 0 1.06 1.06 0 0 0-.31.6l-1.45 9.48a19.71 19.71 0 0 1-8.76 13.6l-1.26.79a.92.92 0 0 0-.3.35.87.87 0 0 0-.1.45.9.9 0 0 0 .1.45.83.83 0 0 0 .3.34l1.26.8a19.66 19.66 0 0 1 8.76 13.59l1.45 9.48a1 1 0 0 0 .32.58 1 1 0 0 0 1.23 0 .92.92 0 0 0 .31-.58l1.46-9.48a19.49 19.49 0 0 1 2.89-7.75 19.24 19.24 0 0 1 5.87-5.84l1.26-.8a.83.83 0 0 0 .3-.34 1 1 0 0 0 .1-.45 1 1 0 0 0-.1-.45.92.92 0 0 0-.3-.35Z",style:{fill:"#8cd9ff"}}),(0,a.jsx)("path",{className:"cls-3",d:"M424.29 277.52a13.59 13.59 0 0 1-4.15-4.12 13.85 13.85 0 0 1-2-5.48l-1-6.69a.66.66 0 0 0-1.31 0l-1 6.69a13.88 13.88 0 0 1-6.18 9.6l-.9.56a.72.72 0 0 0-.21.25.71.71 0 0 0-.07.32.68.68 0 0 0 .28.56l.9.56a13.88 13.88 0 0 1 6.18 9.6l1 6.7a.64.64 0 0 0 .22.4.67.67 0 0 0 .87 0 .64.64 0 0 0 .22-.4l1-6.7a13.85 13.85 0 0 1 2-5.48 13.7 13.7 0 0 1 4.15-4.12l.89-.56a.68.68 0 0 0 .28-.56.71.71 0 0 0-.07-.32.72.72 0 0 0-.21-.25ZM312.67 50.64a13.7 13.7 0 0 1-4.14-4.13 13.46 13.46 0 0 1-2-5.47l-1-6.7a.75.75 0 0 0-.22-.42.6.6 0 0 0-.88 0 .69.69 0 0 0-.22.42l-1 6.7a13.84 13.84 0 0 1-6.18 9.6l-.89.56a.69.69 0 0 0-.21.24.77.77 0 0 0 0 .64.61.61 0 0 0 .21.24l.89.57a13.79 13.79 0 0 1 6.18 9.6l1 6.69a.73.73 0 0 0 .23.41.69.69 0 0 0 .86 0 .73.73 0 0 0 .23-.41l1-6.69a13.65 13.65 0 0 1 6.18-9.6l.89-.57a.61.61 0 0 0 .21-.24.77.77 0 0 0 0-.64.69.69 0 0 0-.21-.24Z"}),(0,a.jsx)("path",{d:"M117 223.15s27.1-4.4 40.07 12.51 18.76 54.19-27.79 56.74c0 0 6.25-3.94 7.41-14.82 0 0-26.64 26.86-60.68 6.25 0 0 9-4.56 16.68-29.87C99.58 231.38 127 233.8 127 233.8s-2.6-5.55-10-10.65Z",style:{fill:"#eb459f"}}),(0,a.jsx)("path",{className:"cls-3",d:"M126.3 258.49s21.35-38.36 36.1-21.1c12.3 14.39 1.6 29.8-36.1 21.1Z"}),(0,a.jsx)("path",{d:"M140.49 210.84a39.73 39.73 0 0 1 36.29 70.69l-.24.12L140.25 211Z",style:{fill:"url(#linear-gradient)"}}),(0,a.jsx)("path",{className:"cls-6",d:"M185.46 233.56a1.25 1.25 0 1 0-1.08-2.25l-27 13 1.14 2.22ZM146.66 223.45c7.56-2.8 21.64-6.61 35.13-2.62a1.25 1.25 0 0 0 .71-2.4c-14.5-4.28-29.23-.2-37 2.75ZM193.82 240.23a1.25 1.25 0 0 0-2.41-.69c-4 14-15.42 24.07-21.73 28.74l1.17 2.28c6.51-4.72 18.63-15.19 22.97-30.33Z"}),(0,a.jsx)("path",{d:"M272.84 128.72c7.42.14 15.65-.7 25.48-1.7a9.76 9.76 0 1 0-2-19.41c-16.47 1.68-25.41 2.46-32.79.33-7.11-2-14.09-7.29-25.76-19.35a9.76 9.76 0 1 0-14 13.57c12.12 12.52 22.1 21 34.38 24.53a56.21 56.21 0 0 0 14.69 2.03Z",style:{fill:"url(#linear-gradient-2)"}}),(0,a.jsx)("path",{d:"M213.51 175.69 180.61 154a69.42 69.42 0 0 0-48.86-10.64l-14 2.17a4.88 4.88 0 0 0-2.09 8.78l51.53 36.94Z",style:{fill:"url(#linear-gradient-3)"}}),(0,a.jsx)("path",{d:"M247.56 242 246 281.4a69.31 69.31 0 0 1-19.83 45.9l-9.9 10.08a4.88 4.88 0 0 1-8.35-3.42v-63.41Z",style:{fill:"url(#linear-gradient-4)"}}),(0,a.jsx)("path",{d:"m195.12 271.32-35.64-69.44a6.69 6.69 0 0 1 2.89-9l172.52-88.56s35.91-16.82 74.81 4.87a13 13 0 0 1 6.63 12.81c-4.86 41.79-39.68 63.62-39.68 63.62l-172.52 88.6a6.69 6.69 0 0 1-9.01-2.9Z",style:{fill:"url(#linear-gradient-5)"}}),(0,a.jsx)("circle",{cx:311.18,cy:167.88,r:30.46}),(0,a.jsx)("path",{className:"cls-6",d:"M311.22 200.86a33 33 0 1 1 15-3.66 33 33 0 0 1-15 3.66Zm-.09-60.94a28 28 0 1 0 24.93 15.19 27.82 27.82 0 0 0-24.93-15.19Z"}),(0,a.jsx)("path",{d:"M213.42 126c7-3.71 14.22-8.75 22.86-14.78a10.4 10.4 0 1 0-11.9-17C209.9 104.24 202 109.6 194 111.44c-7.69 1.78-16.91.51-34-4.69a10.4 10.4 0 0 0-6 19.9c17.77 5.4 31.46 8.12 44.74 5a59.84 59.84 0 0 0 14.68-5.65Z",style:{fill:"url(#linear-gradient-6)"}}),(0,a.jsx)("path",{className:"cls-12",d:"M261.69 121.31c-2.89-11.31-5-17.25-13.46-28.37l-46.85 10.53c-1.67 25.92-6.72 34.81-5.67 43.93.83 7.25 8.38 18.18 23 18.42s21.94-9 32.9-16.55 12.55-18.27 10.08-27.96Z"}),(0,a.jsx)("path",{d:"M192.19 32.35c-12.59 2.17-3 15.4.4 18l29.55-7.24c-18.83-1.33-20.14-12.46-29.95-10.76Z",style:{fill:"#55ef84"}}),(0,a.jsx)("path",{d:"M205.44 47.31a1.23 1.23 0 0 1-.9-.38c-.14-.15-15-15.27-25.26-12.12a1.25 1.25 0 1 1-.73-2.39c11.73-3.59 27.14 12.1 27.79 12.77a1.25 1.25 0 0 1 0 1.77 1.27 1.27 0 0 1-.9.35Z"}),(0,a.jsx)("path",{d:"M230.71 38.82c8.19-3.11 15.33-22.12 1.67-26.55a15.5 15.5 0 0 0-8.25-.24c-22.91 5.18-6.34 30.84-25.54 35.31Z",style:{fill:"#47c26e"}}),(0,a.jsx)("path",{d:"M217.22 46.26a1.26 1.26 0 0 1-1.12-.7 1.24 1.24 0 0 1 .56-1.67c10.32-5.15 10.89-20.58 10.89-20.74a1.23 1.23 0 0 1 1.29-1.21 1.24 1.24 0 0 1 1.21 1.28c0 .7-.6 17.09-12.28 22.91a1.23 1.23 0 0 1-.55.13Z"}),(0,a.jsx)("path",{d:"M253.05 45.91c12-1.77 15.64-3.67 18.58 16 2.73 17.52.16 16.89-14 18.91Z",style:{fill:"url(#linear-gradient-7)"}}),(0,a.jsx)("path",{className:"cls-16",d:"M255.39 50c8.39-1.24 11.08-4.17 13 11.17 1.55 12.32.11 11.83-9.82 13.24Z"}),(0,a.jsx)("path",{className:"cls-12",d:"M194.32 38.29h43.29A25.74 25.74 0 0 1 263.35 64v20.2a20.59 20.59 0 0 1-20.59 20.59h-50.49a20.59 20.59 0 0 1-20.59-20.59V60.93a22.64 22.64 0 0 1 22.64-22.64Z",transform:"matrix(-.99 .17 -.17 -.99 443.95 105.64)"}),(0,a.jsx)("ellipse",{cx:191.65,cy:67.44,rx:4.15,ry:4.98,transform:"rotate(-10.19 191.598 67.447)"}),(0,a.jsx)("path",{className:"cls-16",d:"M215.13 55.86h20.38a13.26 13.26 0 0 1 13.26 13.26v7.29a9.45 9.45 0 0 1-9.45 9.45h-28a9.45 9.45 0 0 1-9.45-9.45v-7.29a13.26 13.26 0 0 1 13.26-13.26Z",transform:"rotate(170.35 225.325 70.857)"}),(0,a.jsx)("ellipse",{cx:253.68,cy:56.65,rx:4.15,ry:4.98,transform:"rotate(-10.19 253.608 56.64)"}),(0,a.jsx)("path",{d:"M213.51 92.38a49.86 49.86 0 0 1-7.2-1.71 1.22 1.22 0 0 0-1.52 1.55c1.48 4.27 5.12 12 9.63 1.86a1.21 1.21 0 0 0-.91-1.7Z"}),(0,a.jsx)("path",{d:"M213.09 96.62c-3.15 4.93-5.76 1.52-7.35-2a6.39 6.39 0 0 1 7.35 2Z",style:{fill:"#ff78b7"}}),(0,a.jsx)("rect",{className:"cls-18",x:215.56,y:78.58,width:12.43,height:3.55,rx:1.76,transform:"rotate(-9.66 221.695 80.354)"}),(0,a.jsx)("rect",{className:"cls-18",x:230.95,y:76.24,width:10.55,height:3.55,rx:1.78,transform:"rotate(-9.66 236.196 78.003)"}),(0,a.jsx)("path",{d:"M173.25 59c-13.14 2.31-17.43 1.63-14.12 21.19 2.85 17.5 6.11 15.93 20.21 13.43Z",style:{fill:"url(#linear-gradient-8)"}}),(0,a.jsx)("path",{className:"cls-16",d:"m173.44 62.83 4.77 24.7c-11.86 1.86-11.85 1.07-14.43-12.24-2.09-10.82.33-11.04 9.66-12.46Z"}),(0,a.jsx)("path",{d:"M230 137.26c31.47-9.59 39-.5 34.65 26.87-2.18 13.85-1.83 27.21-14.49 27-19.91-.34-12.71-17.14-12.14-32.18 0 0-6.33 1.33-11.61 2.24s-10.13-3.45-9.21-11.85 6.58-10.19 12.8-12.08Z",style:{fill:"url(#linear-gradient-9)"}}),(0,a.jsx)("path",{className:"cls-21",d:"M228.51 138.45a1.25 1.25 0 0 1-.51-2.39 42.25 42.25 0 0 1 17.69-3.33 1.27 1.27 0 0 1 1.24 1.27 1.25 1.25 0 0 1-1.25 1.23 39.77 39.77 0 0 0-16.68 3.11 1.34 1.34 0 0 1-.49.11ZM239.23 158a1.2 1.2 0 0 1-.74-.25 1.25 1.25 0 0 1-.26-1.75l5-6.65a1.25 1.25 0 1 1 2 1.49l-5 6.65a1.27 1.27 0 0 1-1 .51ZM199.73 132.31a1.26 1.26 0 0 1-1.17-.8 1.25 1.25 0 0 1 .72-1.62l9.07-3.51a1.25 1.25 0 1 1 .91 2.33l-9.08 3.51a1.2 1.2 0 0 1-.45.09Z"}),(0,a.jsx)("path",{d:"M409.7 109.18c-38.9-21.69-74.81-4.87-74.81-4.87l19.56 38.11 22.2 43.24s34.82-21.83 39.68-63.62a13 13 0 0 0-6.63-12.86Z",style:{fill:"url(#linear-gradient-10)"}}),(0,a.jsx)("ellipse",{cx:367.61,cy:110.41,rx:12.8,ry:5.19,style:{fill:"#fff"}}),(0,a.jsx)("path",{className:"cls-24",d:"m281.46 220.54-56.2 28.63a12.69 12.69 0 0 0-5.55 17.06L298.15 226a12.41 12.41 0 0 0-16.69-5.46ZM242.5 229.16a5.34 5.34 0 0 0-10 3.54l-4.21 2.09a5.36 5.36 0 1 0 1.1 2.24l4.22-2.09a5.27 5.27 0 0 0 2.38 1.65 5.25 5.25 0 0 0 4.08-.27 5.35 5.35 0 0 0 2.42-7.16Zm-17 11.59a2.84 2.84 0 1 1-2.53-5.09 2.81 2.81 0 0 1 1.26-.3 2.91 2.91 0 0 1 .92.15 2.78 2.78 0 0 1 1.63 1.43 2.84 2.84 0 0 1-1.31 3.81Zm13.5-6.67a2.78 2.78 0 0 1-2.17.14 2.84 2.84 0 1 1 2.17-.14Z"})]})},229661:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("77078"),s=n("452804"),i=n("135230"),r=n("168973"),u=n("782340");function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=t=>{s.default.updatedUnsyncedSettings({disableEmbeddedActivityPopOutAlert:!0}),t(),e()},o=!r.default.disableEmbeddedActivityPopOutAlert;o?(0,l.openModal)(l=>(0,a.jsx)(i.default,{confirmText:u.default.Messages.EMBEDDED_ACTIVITIES_YEP,secondaryConfirmText:u.default.Messages.DONT_ASK_AGAIN,title:u.default.Messages.EMBEDDED_ACTIVITIES_CAREFUL,cancelText:u.default.Messages.EMBEDDED_ACTIVITIES_NVM,onConfirm:()=>{l.onClose(),e()},onCancel:t,onConfirmSecondary:()=>n(l.onClose),body:u.default.Messages.EMBEDDED_ACTIVITIES_POP_IN_WARNING,...l}),{},l.POPOUT_MODAL_CONTEXT):e()}},320817:function(e,t,n){"use strict";function a(e,t){return"activityembed:".concat(e,":").concat(t)}n.r(t),n.d(t,{default:function(){return a}})},367632:function(e,t,n){"use strict";n.r(t),n.d(t,{fetchBugReportConfig:function(){return o},getFeatureId:function(){return d},getPriorities:function(){return c},submitReport:function(){return f}}),n("424973");var a=n("759843"),l=n("872717"),s=n("147746");n("18108"),n("773336");var i=n("840707"),r=n("49111"),u=n("782340");async function o(){let e=await l.default.get({url:r.Endpoints.BUG_REPORTS});return e.body}function d(e){var t,n;return null!==(n=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""+(null==e?void 0:e.squad))&&void 0!==n?n:""}function c(){return[{title:u.default.Messages.BUG_REPORT_PRIORITY_CRITICAL_TITLE,description:u.default.Messages.BUG_REPORT_PRIORITY_CRITICAL_DESCRIPTION.format(),emoji:"801497159479722084",value:0},{title:u.default.Messages.BUG_REPORT_PRIORITY_HIGH_TITLE,description:u.default.Messages.BUG_REPORT_PRIORITY_HIGH_DESCRIPTION.format(),emoji:"410336837563973632",value:1},{title:u.default.Messages.BUG_REPORT_PRIORITY_LOW_TITLE,description:u.default.Messages.BUG_REPORT_PRIORITY_LOW_DESCRIPTION.format(),emoji:"841420679643529296",value:2},{title:u.default.Messages.BUG_REPORT_PRIORITY_VERY_LOW_TITLE,description:u.default.Messages.BUG_REPORT_PRIORITY_VERY_LOW_DESCRIPTION.format(),emoji:"827645852352512021",value:3}]}async function f(e,t,n){var l,u;let o=!(arguments.length>3)||void 0===arguments[3]||arguments[3],d=[{name:"name",value:e.name},{name:"priority",value:"".concat(e.priority)},{name:"override_platform_information",value:"".concat(t.overridePlatformInformation)}];""!==e.description&&d.push({name:"description",value:e.description}),""!==e.url&&d.push({name:"external_url",value:e.url});let c=null===(l=e.feature)||void 0===l?void 0:l.asana_inbox_id;null!=c&&""!==c&&d.push({name:"asana_inbox_id",value:"".concat(c)});let f=null===(u=e.feature)||void 0===u?void 0:u.name;null!=f&&""!==f&&d.push({name:"feature_name",value:f}),t.overridePlatformInformation&&(d.push({name:"device",value:t.device}),d.push({name:"os",value:t.operatingSystem}),d.push({name:"os_version",value:t.operatingSystemVersion}),d.push({name:"client_version",value:t.clientVersion}),d.push({name:"client_build_number",value:t.clientBuildNumber}),d.push({name:"release_channel",value:window.GLOBAL_ENV.RELEASE_CHANNEL}),d.push({name:"locale",value:t.locale})),o&&(0,s.uploadDebugLogFiles)(r.DebugLogCategory.WEB_APP);try{return await i.default.post({url:r.Endpoints.BUG_REPORTS,attachments:n,fields:d,trackedActionData:{event:a.NetworkActionNames.BUG_REPORT_SUBMIT,properties:{priority:e.priority,asana_inbox_id:c}}})}catch(e){return e}}},826332:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("913144"),l={setCallChatToastsEnabled(e,t){a.default.dispatch({type:"CALL_CHAT_TOASTS_SET_ENABLED",channelId:e,toastsEnabled:t})}}},535348:function(e,t,n){"use strict";var a,l;n.r(t),n.d(t,{SelfStreamAndVideoAlertType:function(){return a}}),(l=a||(a={}))[l.STREAM=0]="STREAM",l[l.VIDEO=1]="VIDEO"},14124:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("782340");function l(e,t,n,l){return l?a.default.Messages.CONSOLE_CONNECTING_DISABLED:n?a.default.Messages.SUPPRESSED:t?a.default.Messages.SERVER_MUTED_DIALOG_TITLE:e?a.default.Messages.UNMUTE:a.default.Messages.MUTE}},236898:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("446674"),l=n("990766"),s=n("373469"),i=n("271938");function r(e,t){let n=(0,a.useStateFromStores)([i.default],()=>i.default.getId()),r=(0,a.useStateFromStores)([s.default],()=>{let t=s.default.getCurrentUserActiveStream();return null!=t&&t.channelId===e},[e]),u=(0,a.useStateFromStores)([s.default],()=>s.default.isSelfStreamHidden(e),[e]);return[(null==t||t===n)&&r,u,t=>{(0,l.toggleSelfStreamHidden)(e,t)}]}},301603:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("446674"),l=n("629109"),s=n("271938"),i=n("42887"),r=n("49111"),u=n("353927");function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.MediaEngineContextTypes.DEFAULT,n=(0,a.useStateFromStores)([s.default],()=>s.default.getId()),o=(0,a.useStateFromStores)([i.default],()=>i.default.supports(u.Features.DISABLE_VIDEO)&&i.default.isVideoEnabled()),d=(0,a.useStateFromStores)([i.default],()=>i.default.isLocalVideoDisabled(n,t),[n,t]),c=null==e||e===n;return[c&&(o||d),d,e=>{let a=e?r.VideoToggleState.DISABLED:r.VideoToggleState.MANUAL_ENABLED;l.default.setDisableLocalVideo(n,a,t)}]}},598785:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("780166"),l=n("245463");function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,l.default)(e),{isSharedCanvasEnabled:s}=a.default.useExperiment({guildId:e.guild_id,location:"6b64ff_1"},{autoTrackExposure:t});return n||s}},266392:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var l=n("77078"),s=n("901582"),i=n("252227"),r=n("143082"),u=n("832759"),o=n("60787"),d=n("466769"),c=n("736747"),f=n("49111"),h=n("782340"),p=n("394782");function m(e){let{onClose:t,renderOutputDevices:n=!1,renderInputDevices:m=!1,renderInputModes:E=!1,renderInputVolume:C=!1,renderOutputVolume:g=!1,onSelect:S}=e,_=(0,c.default)(),I=(0,o.default)(),T=(0,d.default)(),v=(0,i.default)(),x=(0,r.default)(),N=(0,u.default)();return(0,a.jsx)(s.default,{object:f.AnalyticsObjects.CONTEXT_MENU,children:(0,a.jsxs)(l.Menu,{onSelect:S,className:p.menu,onClose:t,navId:"audio-device-context","aria-label":h.default.Messages.AUDIO_DEVICE_ACTIONS,children:[m?(0,a.jsx)(l.MenuGroup,{label:h.default.Messages.INPUT_DEVICE,children:I}):null,n?(0,a.jsx)(l.MenuGroup,{label:h.default.Messages.OUTPUT_DEVICE,children:T}):null,E?(0,a.jsx)(l.MenuGroup,{label:h.default.Messages.FORM_LABEL_INPUT_MODE,children:v}):null,(0,a.jsxs)(l.MenuGroup,{children:[C?x:null,g?N:null,_]})]})})}},494286:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eF}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("627445"),u=n.n(r),o=n("446674"),d=n("151426"),c=n("862337"),f=n("77078"),h=n("913144"),p=n("255397"),m=n("272030"),E=n("987317"),C=n("990766"),g=n("452804"),S=n("654978"),_=n("901582"),I=n("731898"),T=n("84339"),v=n("244201"),x=n("84460"),N=n("191225"),A=n("372610"),M=n("735890"),R=n("812204"),j=n("716241"),L=n("685665"),O=n("862853"),y=n("76393"),P=n("261552"),b=n("710560"),D=n("374014"),U=n("223913"),w=n("383294"),F=n("292687"),k=n("393414"),V=n("168973"),B=n("581389"),H=n("103738"),G=n("486030"),W=n("908583"),Y=n("550410"),z=n("115531"),K=n("620592"),Z=n("172131"),X=n("640553"),J=n("95032"),q=n("331759"),Q=n("336971"),$=n("555038"),ee=n("634472"),et=n("260014"),en=n("373469"),ea=n("271938"),el=n("712234"),es=n("950104"),ei=n("305961"),er=n("957255"),eu=n("660478"),eo=n("18494"),ed=n("697218"),ec=n("800762"),ef=n("145131"),eh=n("956089"),ep=n("599110"),em=n("404008"),eE=n("659500"),eC=n("773336"),eg=n("439932"),eS=n("50885"),e_=n("563680"),eI=n("191145"),eT=n("161306"),ev=n("598785"),ex=n("412090"),eN=n("452027"),eA=n("328715"),eM=n("836087"),eR=n("579408"),ej=n("198755"),eL=n("636150"),eO=n("99795"),ey=n("49111"),eP=n("782340"),eb=n("806390");let eD={[ey.ChannelLayouts.NORMAL]:eb.normal,[ey.ChannelLayouts.MINIMUM]:eb.minimum,[ey.ChannelLayouts.NO_CHAT]:eb.noChat,[ey.ChannelLayouts.FULL_SCREEN]:eb.fullScreen},eU={[ey.AppContext.POPOUT]:eb.popout,[ey.AppContext.APP]:null,[ey.AppContext.OVERLAY]:null};class ew extends l.PureComponent{getRootNode(){var e,t;let n=null!==(t=null===(e=this.props.popoutWindow)||void 0===e?void 0:e.window)&&void 0!==t?t:window;return n.document.getElementById("app-mount")}componentDidMount(){let{channel:e,layout:t}=this.props;this.currentDocument.addEventListener(e_.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenChange),ep.default.track(ey.AnalyticEvents.VIDEO_LAYOUT_TOGGLED,{video_layout:this.inPopout?"popout":t,...(0,j.collectVoiceAnalyticsMetadata)(e.id)})}componentWillUnmount(){this._videoBackgroundTooltipTimeout.stop(),this.currentDocument.removeEventListener(e_.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenChange),!(this.inPopout&&(0,eC.isMac)())&&this.maybeLeaveFullScreen()}componentDidUpdate(e){let{participantsOpen:t,inCall:n,mode:a,layout:l}=this.props,s=this.getRootNode();if(null!=s&&e.mode===ey.ChannelModes.VIDEO&&a===ey.ChannelModes.VOICE&&(0,e_.isFullScreen)(s,this.currentDocument)&&(0,e_.exitFullScreen)(s,this.currentDocument),e.participantsOpen!==t||l!==e.layout){var i;null===(i=this._contentRef.current)||void 0===i||i.triggerResize()}e.inCall&&!n&&this.inPopout&&h.default.wait(()=>this.handleClosePopout())}get nativePopoutSupported(){return eC.isPlatformEmbedded&&eS.default.supportsFeature(ey.NativeFeatures.POPOUT_WINDOWS)}get popoutSupported(){return!eC.isPlatformEmbedded||this.nativePopoutSupported}get popoutOpen(){let{popoutWindow:e}=this.props;return null!=e&&!e.closed}get currentDocument(){let{popoutWindow:e}=this.props;return null!=e&&this.popoutOpen&&this.inPopout?e.document:document}get screenMessage(){return this.popoutOpen&&!this.inPopout&&this.props.inCall?{mainText:eP.default.Messages.POPOUT_PLAYER_OPENED}:null}get paused(){return this.popoutOpen&&!this.inPopout}get inPopout(){return this.props.appContext===ey.AppContext.POPOUT}get viewProperties(){let{layout:e,mode:t,channel:n,inCall:a}=this.props,l=t===ey.ChannelModes.VIDEO&&a&&!(this.popoutOpen&&!this.inPopout),s=t===ey.ChannelModes.VIDEO&&a&&this.popoutSupported,i=t!==ey.ChannelModes.VOICE&&n.isPrivate()&&!this.inPopout&&a,r=n.type===ey.ChannelTypes.GUILD_VOICE,u=e===ey.ChannelLayouts.MINIMUM||e===ey.ChannelLayouts.NORMAL,o=this.inPopout&&this.nativePopoutSupported,d=n.isPrivate()&&!n.isBroadcastChannel(),c={renderHeader:!0,useTheme:!1,useExternalHeader:u,canInvite:r,canPopout:s,canFullscreen:l,canSelectRegion:d,canChangeLayout:i,canStayOnTop:o};if(!a)return{...c,canFullscreen:l,useTheme:!0};switch(e){case ey.ChannelLayouts.FULL_SCREEN:return{...c,canPopout:!this.inPopout&&this.popoutOpen&&c.canPopout};case ey.ChannelLayouts.MINIMUM:return{...c,canPopout:!1,useTheme:!0};case ey.ChannelLayouts.NO_CHAT:case ey.ChannelLayouts.NORMAL:return{...c}}}renderContent(e){let{selectedParticipant:t,inCall:n,hasConnectPermission:l,mode:s,popoutWindow:i,participantsOpen:r,participants:u,filteredParticipants:o,participantsVersion:d,channel:c,guild:f,layout:h,forceShowControls:p,awaitingRemoteSessionInfo:m}=this.props,E=h===ey.ChannelLayouts.MINIMUM,C=E||h===ey.ChannelLayouts.NORMAL,g=n&&s===ey.ChannelModes.VIDEO;return this._lastIdleProps=e,(0,a.jsx)(K.default,{renderHeader:this.renderHeader,renderBottomLeft:this.renderBottomLeft,renderBottomCenter:this.renderBottomCenter,renderBottomRight:this.renderBottomRight,renderChatButton:c.isGuildVoice()?this.renderChatButton:void 0,renderChatToasts:c.isGuildVoice()?this.renderChatToasts:void 0,renderVoiceChannelEffects:this.renderVoiceChannelEffects,...e,screenMessage:this.screenMessage,disableGradients:E,idle:!p&&n&&!E&&e.idle,children:n&&this.popoutOpen&&!this.inPopout?null:(0,a.jsx)(H.default,{ref:this._contentRef,inCall:n,paused:this.paused,channel:c,hasConnectPermission:l,guild:f,participants:u,filteredParticipants:o,participantsVersion:d,selectedParticipant:g?t:null,layout:h,idle:e.idle,mode:s,onSelectParticipant:this.handleSelectParticipant,onContextMenuParticipant:this.handleContextMenu,showParticipants:r&&!C,popoutWindow:this.inPopout?i:null,awaitingRemoteSessionInfo:m})})}render(){let{layout:e,channel:t,guild:n,mode:l,chatOpen:s,appContext:r,maxSidebarWidth:u,maxHeight:o,inCall:d}=this.props,{resizedHeight:c}=this.state,f=l===ey.ChannelModes.VIDEO,h=e!==ey.ChannelLayouts.NO_CHAT&&e!==ey.ChannelLayouts.FULL_SCREEN&&null!=o;return(0,a.jsxs)("div",{className:i(eb.wrapper,eD[e],eU[r],{[eb.poppedOut]:this.popoutOpen&&!this.inPopout&&e!==ey.ChannelLayouts.NO_CHAT&&t.isPrivate(),[eb.video]:f,[eb.chatSidebarOpen]:s}),ref:e=>{this._wrapperRef.current=e,this.props.wrapperRef.current=e},style:h&&null!=c?{minHeight:200,maxHeight:o,height:c}:void 0,children:[(0,a.jsx)("div",{className:i(eb.callContainer,{[(0,eg.getThemeClass)(ey.ThemeTypes.DARK)]:f}),ref:e=>{this._callContainerRef.current=e,this.props.callContainerRef.current=e},children:(0,a.jsx)(W.default,{timeout:2e3,children:e=>this.renderContent(e)})}),h&&(0,a.jsx)(eR.default,{minHeight:200,maxHeight:o,resizableNode:this._wrapperRef,onResize:this.handleCallResize,onResizeEnd:this.props.updateStoredCallHeaderHeight}),(0,a.jsx)("div",{className:eb.channelChatWrapper,ref:e=>{this._channelChatRef.current=e,this.props.channelChatRef.current=e},children:s&&(!d||!this.popoutOpen||this.inPopout)&&(0,a.jsx)(eN.default,{channel:t,guild:n,maxWidth:u})})]})}constructor(...e){super(...e),this._prevLayout=ey.ChannelLayouts.MINIMUM,this._wrapperRef=l.createRef(),this._callContainerRef=l.createRef(),this._channelChatRef=l.createRef(),this._contentRef=l.createRef(),this._videoBackgroundTooltipTimeout=new c.Timeout,this._lastIdleProps=null,this.state={resizedHeight:V.default.callHeaderHeight},this.handleFullScreenChange=()=>{let e=this.getRootNode();null!=e&&!(0,e_.isFullScreen)(e,this.currentDocument)&&this.props.layout===ey.ChannelLayouts.FULL_SCREEN&&this.handleFullScreen()},this.handleFullScreen=()=>{let e=this.getRootNode();null!=e&&(this.props.layout!==ey.ChannelLayouts.FULL_SCREEN?(this._prevLayout=this.props.layout,this.handleChangeLayout(ey.ChannelLayouts.FULL_SCREEN),(0,e_.requestFullScreen)(e)):this.maybeLeaveFullScreen())},this.maybeLeaveFullScreen=()=>{let e=this.getRootNode();if(null!=e)this.props.layout===ey.ChannelLayouts.FULL_SCREEN&&(this.handleChangeLayout(this._prevLayout),(0,e_.exitFullScreen)(e,this.currentDocument))},this.handleToggleLayout=()=>{this.handleChangeLayout(this.props.layout===ey.ChannelLayouts.NORMAL?ey.ChannelLayouts.NO_CHAT:ey.ChannelLayouts.NORMAL)},this.handleChangeLayout=e=>{let{channel:t,appContext:n,layout:a}=this.props;a!==e&&(p.default.updateLayout(t.id,e,n),e===ey.ChannelLayouts.FULL_SCREEN&&t.isPrivate()&&eE.ComponentDispatch.dispatch(ey.ComponentActions.TEXTAREA_BLUR))},this.handleDisconnect=()=>{this.props.layout===ey.ChannelLayouts.FULL_SCREEN&&this.handleFullScreen()},this.handleContextMenu=(e,t)=>{var l,s;let{channel:i,appContext:r,layout:o}=this.props,d={onClose:()=>{var e;return null===(e=this._lastIdleProps)||void 0===e?void 0:e.onAllowIdle("menu")},context:r};switch(null===(l=this._lastIdleProps)||void 0===l||l.onPreventIdle("menu"),null===(s=this._lastIdleProps)||void 0===s||s.onActive(),e.type){case eO.ParticipantTypes.HIDDEN_STREAM:case eO.ParticipantTypes.STREAM:(0,m.openContextMenuLazy)(t,async()=>{let{default:t}=await n.el("172844").then(n.bind(n,"172844"));return n=>(0,a.jsx)(t,{...n,stream:e.stream,exitFullscreen:this.maybeLeaveFullScreen,appContext:r})},d);return;case eO.ParticipantTypes.USER:let c=ed.default.getUser(e.id);if(null!=c)switch(i.type){case ey.ChannelTypes.DM:return(0,m.openContextMenuLazy)(t,async()=>{let{default:e}=await n.el("130074").then(n.bind(n,"130074"));return t=>(0,a.jsx)(e,{...t,showChannelCallItems:!0,showMediaItems:!0,user:c,channel:i,showModalItems:!0})},d);case ey.ChannelTypes.GROUP_DM:return(0,m.openContextMenuLazy)(t,async()=>{let{default:e}=await n.el("166452").then(n.bind(n,"166452"));return t=>(0,a.jsx)(e,{...t,showChannelCallItems:!0,showMediaItems:!0,showChatItems:o===ey.ChannelLayouts.MINIMUM||o===ey.ChannelLayouts.NORMAL,user:c,channel:i,showModalItems:!0})},d);case ey.ChannelTypes.GUILD_VOICE:let f=i.getGuildId();return u(null!=f,"GuildID null for guild voice channel"),(0,m.openContextMenuLazy)(t,async()=>{let{default:e}=await n.el("834247").then(n.bind(n,"834247"));return t=>(0,a.jsx)(e,{...t,showMediaItems:!0,showChannelCallItems:!0,showChatItems:!1,user:c,channel:i,guildId:f,showModalItems:!0})},d)}}},this.handleCallResize=e=>{this.setState({resizedHeight:e})},this.handleSelectParticipant=(e,t)=>{let{channel:n,selectedParticipant:a,allActiveStreams:l,inCall:s,mode:i}=this.props;if((0,eO.isStreamParticipant)(e)&&(0,U.canWatchStream)(n,ec.default,ei.default,er.default,y.default)[0]){E.default.selectVoiceChannel(n.id);let a=l.filter(t=>(0,D.encodeStreamKey)(t)===e.id&&t.state!==ey.ApplicationStreamStates.ENDED);0===a.length&&(0,C.watchStream)((0,D.decodeStreamKey)(e.id),{forceMultiple:t.shiftKey})}s&&i===ey.ChannelModes.VIDEO&&((null==a?void 0:a.id)===e.id?p.default.selectParticipant(n.id,null):p.default.selectParticipant(n.id,e.id))},this.handleOpenPopout=()=>{let{channel:e,connectedToEmbeddedActivity:t}=this.props,n=()=>{let t=e.getGuildId();null!=t&&(0,k.transitionTo)((0,em.previousTextChannelRouteForGuild)(t)),w.openChannelCallPopout(e)};t?(0,M.default)(n):n()},this.handleStayOnTop=e=>{w.setAlwaysOnTop(ey.PopoutWindowKeys.CHANNEL_CALL_POPOUT,e)},this.handleClosePopout=()=>{w.close(ey.PopoutWindowKeys.CHANNEL_CALL_POPOUT)},this.handleFullscreenParticipant=(e,t)=>{let{layout:n,selectedParticipant:a}=this.props,l=n===ey.ChannelLayouts.FULL_SCREEN;(!l&&(null==a?void 0:a.id)!==e.id||l&&(null==a?void 0:a.id)===e.id)&&this.handleSelectParticipant(e,t),this.handleFullScreen()},this.renderRegionSelect=()=>{let e;let{call:t,channel:n,layout:l}=this.props;return!this.inPopout&&l!==ey.ChannelLayouts.FULL_SCREEN&&null!=t&&!n.isManaged()&&(e=(0,a.jsx)(S.default,{call:t})),(0,a.jsx)(ef.default,{justify:ef.default.Justify.END,children:e})},this.renderBottomCenter=()=>{let{channel:e,inCall:t,layout:n}=this.props;return t||n===ey.ChannelLayouts.MINIMUM||n===ey.ChannelLayouts.NORMAL?(0,a.jsx)(B.default,{exitFullScreen:this.maybeLeaveFullScreen,channel:e,onDisconnectCall:this.handleDisconnect,idleProps:this._lastIdleProps}):null},this.renderBottomLeft=()=>{let{layout:e,mentionCount:t,channel:n,appContext:l,useNewInviteButton:s,selectedParticipant:r,shouldUseVoiceEffectsActionBar:u,inCall:o,participants:d}=this.props;if(!o)return null;let c=e===ey.ChannelLayouts.NO_CHAT?Z.default.Directions.UP:Z.default.Directions.DOWN,f=[ey.ChannelLayouts.FULL_SCREEN,ey.ChannelLayouts.NO_CHAT].includes(e),h=d.some(e=>e.type===eO.ParticipantTypes.STREAM),p=e===ey.ChannelLayouts.FULL_SCREEN?()=>{this._prevLayout=ey.ChannelLayouts.NORMAL,this.handleFullScreen()}:this.handleToggleLayout,{canChangeLayout:m,canInvite:E}=this.viewProperties,C=s?(0,a.jsx)(G.default,{channel:n,stream:(null==r?void 0:r.type)===eO.ParticipantTypes.STREAM?(0,D.decodeStreamKey)(r.id):void 0,applicationId:(null==r?void 0:r.type)===eO.ParticipantTypes.ACTIVITY?r.id:void 0,appContext:l,className:eb.leftTrayIcon,exitFullScreen:this.maybeLeaveFullScreen,analyticsLocation:n.type===ey.ChannelTypes.GUILD_VOICE?ey.AnalyticsPages.GUILD_CHANNEL:ey.AnalyticsPages.DM_CHANNEL}):(0,a.jsx)(q.default,{channel:n,stream:(null==r?void 0:r.type)===eO.ParticipantTypes.STREAM?(0,D.decodeStreamKey)(r.id):void 0,className:eb.leftTrayIcon,exitFullScreen:this.maybeLeaveFullScreen,analyticsLocation:n.type===ey.ChannelTypes.GUILD_VOICE?ey.AnalyticsPages.GUILD_CHANNEL:ey.AnalyticsPages.DM_CHANNEL});return(0,a.jsxs)(a.Fragment,{children:[E&&!u?C:null,m?(0,a.jsxs)(ef.default,{className:eb.iconWrapper,align:ef.default.Align.CENTER,grow:0,children:[(0,a.jsx)(Z.default,{label:f?eP.default.Messages.SHOW_CHAT:eP.default.Messages.HIDE_CHAT,direction:c,className:eb.leftTrayIcon,onClick:p}),f&&t>0?(0,a.jsx)(eh.NumberBadge,{className:eb.badge,count:t}):null]}):null,(null==r?void 0:r.type)!==eO.ParticipantTypes.STREAM&&(null==r?void 0:r.type)!==eO.ParticipantTypes.ACTIVITY||u?null:(0,a.jsx)(Y.default,{children:(0,a.jsx)(eM.default,{className:i(eb.leftTrayIcon,eb.viewersButton),participant:r,maxVisibleUsers:4,guildId:n.getGuildId(),channelId:n.id,disableInteraction:this.inPopout||e===ey.ChannelLayouts.FULL_SCREEN})}),u&&(0,a.jsx)(eL.default,{channel:n,hasActiveStream:h,themeable:this.viewProperties.useTheme}),(0,a.jsx)(b.default,{showLeftDivider:u,themeable:this.viewProperties.useTheme,className:eb.leftTrayIcon,channel:n})]})},this.renderBottomRight=()=>{let{popoutWindow:e,popoutWindowAlwaysOnTop:t,currentUserId:n,selectedParticipant:l}=this.props,{canFullscreen:s,canStayOnTop:i,canPopout:r,useTheme:u}=this.viewProperties;return(0,a.jsxs)(a.Fragment,{children:[null!=l&&l.type!==eO.ParticipantTypes.ACTIVITY&&l.user.id!==n?(0,a.jsx)(ee.default,{context:(0,eT.default)(l.type),userId:l.user.id,currentWindow:this.inPopout?null!=e?e:void 0:window,sliderClassName:eb.volumeSlider,className:eb.rightTrayIcon}):null,i?(0,a.jsx)($.default,{className:eb.rightTrayIcon,popoutWindowAlwaysOnTop:t,onToggleStayOnTop:this.handleStayOnTop}):null,r?(0,a.jsx)(Q.default,{themeable:u,popoutOpen:this.popoutOpen,className:eb.rightTrayIcon,onOpenPopout:this.handleOpenPopout,onClosePopout:this.handleClosePopout}):null,s?(0,a.jsx)(J.default,{themeable:u,node:this.getRootNode(),guestWindow:e,className:eb.rightTrayIcon,onClick:this.handleFullScreen}):null]})},this.renderChatButton=e=>{let{className:t,showingClassName:n}=e,{channel:l,chatOpen:s,inCall:i}=this.props;return s||this.popoutOpen&&!this.inPopout&&i?null:(0,a.jsx)(X.ChatButton,{channelId:l.id,className:t,showingClassName:n})},this.renderChatToasts=()=>{let{showChatToasts:e,chatOpen:t,channel:n,inCall:l}=this.props;return!e||t||this.popoutOpen&&!this.inPopout&&l?null:(0,a.jsx)(ex.default,{children:(0,a.jsx)(z.default,{className:eb.chatToasts,channelId:n.id})})},this.renderVoiceChannelEffects=()=>{let{channel:e}=this.props;return(0,a.jsx)(ej.default,{children:(0,a.jsx)(et.default,{channelId:e.id})})},this.renderHeader=()=>{let{renderExternalHeader:e,channel:t,guild:n,appContext:l,chatOpen:s,inCall:i}=this.props,{useExternalHeader:r,canSelectRegion:u,renderHeader:o}=this.viewProperties;return o?(0,a.jsxs)(Y.default,{children:[(0,a.jsx)("div",{className:eb.headerWrapper,children:r?null==e?void 0:e():(0,a.jsx)(eA.default,{channel:t,guild:n,appContext:l,inCall:i,isChatOpen:s||this.popoutOpen&&!this.inPopout&&i,exitFullScreen:this.maybeLeaveFullScreen})}),u?this.renderRegionSelect():null]}):null}}}var eF=function(e){var t;let{channel:n,renderExternalHeader:s,maxHeight:i}=e,{width:r=0,ref:u}=(0,I.default)(),{width:c=0,height:h=0,ref:p}=(0,I.default)(),{ref:m}=(0,I.default)(),E=(0,v.useAppContext)(),C=(0,P.default)(),S=(0,o.useStateFromStores)([eo.default],()=>{var e;return(null!==(e=null==C?void 0:C.channelId)&&void 0!==e?e:eo.default.getVoiceChannelId())===n.id}),{participants:M,filteredParticipants:j,participantsVersion:b,mode:D,layout:U,participantsOpen:w,chatOpen:k,selectedParticipant:B}=(0,o.useStateFromStoresObject)([eI.default],()=>{let e=E===ey.AppContext.POPOUT,t=eI.default.getMode(n.id);e&&(t=ey.ChannelModes.VIDEO);let a=t===ey.ChannelModes.VIDEO?eI.default.getLayout(n.id,E):ey.ChannelLayouts.MINIMUM;return e&&a!==ey.ChannelLayouts.FULL_SCREEN&&(a=ey.ChannelLayouts.NO_CHAT),{mode:t,layout:a,selectedParticipant:t!==ey.ChannelModes.VOICE?eI.default.getSelectedParticipant(n.id):null,participants:eI.default.getParticipants(n.id),filteredParticipants:eI.default.getFilteredParticipants(n.id),participantsOpen:eI.default.getParticipantsOpen(n.id),chatOpen:eI.default.getChatOpen(n.id),participantsVersion:eI.default.getParticipantsVersion(n.id)}},[E,n.id]),H=(0,o.useStateFromStoresArray)([en.default],()=>en.default.getAllActiveStreams()),{selectedStream:G}=(0,o.useStateFromStoresObject)([en.default],()=>({selectedStream:null!=B?en.default.getActiveStreamForStreamKey(B.id):null}),[B]),W=(0,o.useStateFromStores)([ei.default],()=>ei.default.getGuild(n.getGuildId())),Y=(0,o.useStateFromStores)([es.default],()=>es.default.getCall(n.id),[n.id]),z=(0,o.useStateFromStores)([eu.default],()=>eu.default.getMentionCount(n.id),[n.id]),K=(0,o.useStateFromStores)([ea.default],()=>ea.default.getId()),{popoutWindow:Z,popoutWindowAlwaysOnTop:X}=(0,o.useStateFromStoresObject)([F.default],()=>({popoutWindow:F.default.getWindow(ey.PopoutWindowKeys.CHANNEL_CALL_POPOUT),popoutWindowAlwaysOnTop:F.default.getIsAlwaysOnTop(ey.PopoutWindowKeys.CHANNEL_CALL_POPOUT)})),J=(0,o.useStateFromStores)([er.default],()=>er.default.can(ey.Permissions.CONNECT,n)),q=(0,o.useStateFromStores)([el.default],()=>el.default.getToastsEnabled(n.id)),Q=(0,o.useStateFromStores)([y.default],()=>y.default.getAwaitingRemoteSessionInfo()),$=(0,o.useStateFromStores)([V.default],()=>V.default.callHeaderHeight),ee=l.useCallback(e=>{g.default.updatedUnsyncedSettings({callHeaderHeight:e})},[]),et=null!==(t=null==W?void 0:W.id)&&void 0!==t?t:null,ed=(0,A.default)(et,n.id),ec=(0,o.useStateFromStores)([x.default],()=>x.default.getFetchState(),[]),ef=(0,T.default)(ec);l.useEffect(()=>{"errored"===ec&&"errored"!==ef&&(0,f.showToast)((0,f.createToast)(eP.default.Messages.EMBEDDED_ACTIVITIES_DEVELOPER_ACTIVITY_SHELF_FETCH_ERROR,f.ToastType.FAILURE))},[ec,ef]);let eh=(0,o.useStateFromStores)([N.default],()=>null!=N.default.getSelfEmbeddedActivityForChannel(n.id),[n]);l.useEffect(()=>{let e=!1,t=null,n=async()=>{S&&D===ey.ChannelModes.VIDEO&&(t=await eS.default.blockDisplaySleep(),e&&null!=t&&eS.default.unblockDisplaySleep(t))};return n(),()=>{null!=t?eS.default.unblockDisplaySleep(t):e=!0}},[S,D]);let ep=(0,ev.default)(n,!0),em=(0,O.useIsContentShown)(d.DismissibleContent.CALL_CHAT_BUTTON_TEXT_IN_VOICE_COACH_MARK),{AnalyticsLocationProvider:eE}=(0,L.default)(R.default.CHANNEL_CALL);return(0,a.jsx)(eE,{children:(0,a.jsx)(_.default,{page:ey.AnalyticsPages.CHANNEL_CALL,children:(0,a.jsx)(ex.ChannelCallChatLayerProvider,{children:(0,a.jsxs)(ej.VoiceChannelEffectsLayerProvider,{children:[(0,a.jsx)(ew,{channel:n,guild:W,hasConnectPermission:J,participantsOpen:w,renderExternalHeader:s,appContext:E,call:Y,popoutWindow:Z,popoutWindowAlwaysOnTop:X,mentionCount:z,selectedStream:G,mode:D,inCall:S,participants:M,filteredParticipants:j,participantsVersion:b,layout:U,chatOpen:k,maxSidebarWidth:r-550,shouldUseVoiceEffectsActionBar:ep,currentUserId:K,selectedParticipant:B,allActiveStreams:H,useNewInviteButton:ed,connectedToEmbeddedActivity:eh,showChatToasts:q,storedCallHeaderHeight:$,updateStoredCallHeaderHeight:ee,wrapperRef:u,callContainerDimensions:{width:c,height:h},callContainerRef:p,channelChatRef:m,width:r,maxHeight:i,forceShowControls:em,awaitingRemoteSessionInfo:Q}),!n.isPrivate()&&(0,a.jsx)(ej.VoiceChannelEffectsLayerContainer,{}),(0,a.jsx)(ex.ChannelCallChatLayerContainer,{})]})})})})}},412090:function(e,t,n){"use strict";n.r(t),n.d(t,{ChannelCallChatLayerContainer:function(){return r},ChannelCallChatLayerProvider:function(){return u},default:function(){return o}});var a=n("77078");let{Layer:l,LayerContainer:s,LayerProvider:i}=(0,a.createLayer)("ChannelCallChat"),r=s,u=i;var o=l},452027:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var a=n("37983"),l=n("884691"),s=n("151426"),i=n("255397"),r=n("264732"),u=n("176347"),o=n("665182"),d=n("850391"),c=n("10641"),f=n("474643"),h=n("109264"),p=n("945330"),m=n("664336"),E=n("659500"),C=n("412090"),g=n("49111"),S=n("994428"),_=n("782340"),I=n("176692"),T=function(e){let{channel:t,guild:n,maxWidth:T}=e;l.useEffect(()=>{(0,c.markDismissibleContentAsDismissed)(s.DismissibleContent.CALL_CHAT_BUTTON_TEXT_IN_VOICE_COACH_MARK,{dismissAction:S.ContentDismissActionType.AUTO})},[]);let v=l.useCallback(()=>{i.default.updateChatOpen(t.id,!1),E.ComponentDispatch.safeDispatch(g.ComponentActions.FOCUS_CHAT_BUTTON)},[t.id]),x=(0,a.jsx)(m.default.Icon,{icon:p.default,tooltip:_.default.Messages.CLOSE,onClick:v});return(0,a.jsxs)(o.default,{sidebarType:o.ChatSidebarType.CallChatSidebar,maxWidth:T,floatingLayer:C.default,children:[(0,a.jsx)(r.default,{channel:t,draftType:f.DraftType.ChannelMessage}),(0,a.jsxs)(m.default,{toolbar:x,"aria-label":_.default.Messages.CHANNEL_HEADER_BAR_A11Y_LABEL,children:[(0,a.jsx)(m.default.Icon,{icon:h.default,disabled:!0,"aria-label":_.default.Messages.VOICE_CHAT_TEXT_CHANNEL}),(0,a.jsx)(m.default.Title,{children:t.name})]}),(0,a.jsx)("div",{className:I.chat,children:(0,a.jsx)(u.default,{channel:t,guild:n,chatInputType:d.ChatInputTypes.SIDEBAR},t.id)})]})}},328715:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}}),n("222007");var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("446674"),r=n("77078"),u=n("308289"),o=n("789394"),d=n("244201"),c=n("204947"),f=n("442939"),h=n("207273"),p=n("679653"),m=n("619335"),E=n("534222"),C=n("822516"),g=n("941298"),S=n("539938"),_=n("557809"),I=n("367376"),T=n("616718"),v=n("550410"),x=n("957255"),N=n("953109"),A=n("832132"),M=n("664336"),R=n("439932"),j=n("191145"),L=n("598785"),O=n("2830"),y=n("836087"),P=n("843624"),b=n("99795"),D=n("49111"),U=n("843455"),w=n("782340"),F=n("125738"),k=n("632215");function V(e){let{focusedParticipant:t,channel:n}=e,l=(0,d.useAppContext)(),s=(0,i.useStateFromStores)([j.default],()=>j.default.getLayout(n.id,l));return(0,a.jsx)(v.default,{children:(0,a.jsx)(y.default,{className:F.participants,participant:t,maxVisibleUsers:5,guildId:n.getGuildId(),channelId:n.id,disableInteraction:l===D.AppContext.POPOUT||s===D.ChannelLayouts.FULL_SCREEN})})}function B(e){let{user:t,channel:n,stream:l,color:s}=e,i=(0,T.default)(n,t,l);return null==t||null==l?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.default,{className:F.avatar,size:r.AvatarSizes.SIZE_24,user:t,animate:!1}),(0,a.jsx)(r.Text,{className:F.playingText,variant:"text-md/medium",color:s,children:i})]})}function H(e){let t,{focusedApplication:n,focusedParticipant:l,channel:s}=e,i=(0,L.default)(s,!0),u=(0,E.useActiveEvent)(s.id),o=null!=u?(0,C.getNextRecurrenceIdInEvent)(u):null,d=null!=u;if((null==l?void 0:l.type)===b.ParticipantTypes.ACTIVITY)null!=n&&(t=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.default.Divider,{className:F.divider}),(0,a.jsx)(N.default,{game:n,className:F.activityIcon}),(0,a.jsx)(r.Text,{className:F.playingText,variant:"text-md/normal",color:"none",children:(0,c.default)(n.name)}),i&&(0,a.jsx)(V,{channel:s,focusedParticipant:l})]}));else if((null==l?void 0:l.type)===b.ParticipantTypes.STREAM){let e=l.user,n=l.stream;t=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.default.Divider,{className:F.divider}),(0,a.jsx)(B,{user:e,channel:s,stream:n,color:i?"header-primary":"none"}),i&&(0,a.jsx)(V,{channel:s,focusedParticipant:l})]})}else d&&(t=(0,a.jsx)(g.default,{guildEvent:u,recurrenceId:o}));return(0,a.jsx)("div",{className:F.container,children:t})}function G(e){let{channel:t,guild:l,appContext:u,inCall:d,isChatOpen:c,exitFullScreen:E}=e,{focusedParticipant:C}=(0,i.useStateFromStoresObject)([j.default],()=>({focusedParticipant:j.default.getSelectedParticipant(t.id),participantsOpen:j.default.getParticipantsOpen(t.id)}),[t.id]),g=(0,p.default)(t),T=(0,m.default)(t),[v]=(0,f.default)((null==C?void 0:C.type)===b.ParticipantTypes.ACTIVITY?[C.id]:[]),N=w.default.Messages.VOICE_CHANNEL;t.isDM()?N=w.default.Messages.DM:t.isGroupDM()&&(N=w.default.Messages.GROUP_DM);let{enabled:L,left:y}=o.ChannelEmojisExperiment.useExperiment({location:"7b48cc_2"},{autoTrackExposure:!1}),V=L&&(0,a.jsx)(_.ChannelEmoji,{channel:t}),B=(0,i.useStateFromStores)([h.default],()=>h.default.getChannelStatus(t)),G=t.isGuildVoice()&&d&&null!=B&&B.length>0,W=(0,i.useStateFromStores)([x.default],()=>x.default.can(D.Permissions.SET_VOICE_CHANNEL_STATUS,t)),Y=G?(0,a.jsx)(r.Tooltip,{text:w.default.Messages.VOICE_CHANNEL_SET_STATUS,delay:500,position:"bottom",shouldShow:W,children:e=>(0,a.jsxs)(r.Clickable,{...e,className:s(F.channelStatusClickable,{[F.hoverable]:W}),onClick:W?z:void 0,children:[(0,a.jsx)(r.Text,{variant:"text-xs/normal",className:s(F.channelStatus,k.markup,{[F.hoverable]:W}),children:I.default.parseVoiceChannelStatus(B,!0,{channelId:t.id})}),W&&(0,a.jsx)(A.default,{className:s(F.pencilIcon,F.hoverable),width:14,height:14})]})}):null;function z(){(0,r.openModalLazy)(async()=>{let{default:e}=await n.el("843624").then(n.bind(n,"843624"));return n=>(0,a.jsx)(e,{channel:t,...n})},{modalKey:P.VOICE_CHANNEL_STATUS_MODAL_KEY})}return(0,a.jsx)("div",{className:F.subtitleContainer,children:(0,a.jsxs)(M.default,{onDoubleClick:S.handleDoubleClick,transparent:!0,className:(0,R.getThemeClass)(U.ThemeTypes.DARK),childrenBottom:Y,toolbar:(0,a.jsx)(O.default,{inPopout:u===D.AppContext.POPOUT,channel:t,appContext:u,inCall:d,isChatOpen:c,exitFullScreen:E}),children:[y&&V,null!=T?(0,a.jsx)(M.default.Icon,{icon:T,disabled:!0,"aria-label":N}):null,!y&&V,(0,a.jsx)(M.default.Title,{children:g}),(0,a.jsx)(_.HeaderGuildBreadcrumb,{channel:t,guild:l}),(0,a.jsx)(H,{focusedApplication:v,focusedParticipant:C,channel:t})]})})}},2830:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}}),n("424973");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n.n(r),o=n("446674"),d=n("77078"),c=n("777274"),f=n("56947"),h=n("76813"),p=n("992207"),m=n("374014"),E=n("336804"),C=n("311197"),g=n("830251"),S=n("170643"),_=n("550410"),I=n("124824"),T=n("640553"),v=n("104815"),x=n("925674"),N=n("331759"),A=n("63260"),M=n("422736"),R=n("280168"),j=n("664336"),L=n("68148"),O=n("980423"),y=n("191145"),P=n("598785"),b=n("226735"),D=n("340513"),U=n("99795"),w=n("49111"),F=n("782340"),k=n("767290");function V(e){let{channelId:t,guildId:n}=e,l=Date.now(),s=(0,o.useStateFromStores)([R.default,y.default],()=>u(R.default.getSpeakers()).map(e=>y.default.getParticipant(t,e)).filter(e=>null!=e&&e.type===U.ParticipantTypes.USER&&e.speaking&&!(0,g.default)(e)).sortBy(e=>-R.default.getSpeakingDuration(e.user.id,l)).slice(0,3).value());return 0===s.length?null:(0,a.jsx)(a.Fragment,{children:s.map((e,t)=>(0,a.jsx)(d.Tooltip,{position:"bottom",color:d.Tooltip.Colors.GREY,text:F.default.Messages.CHANNEL_CALL_CURRENT_SPEAKER.format({username:e.user.username}),children:l=>(0,a.jsx)(L.default,{...l,className:i(k.speaker,{[k.last]:t===s.length-1}),user:e.user,speaking:!0,collapsed:!0,guildId:n})},e.id))})}function B(e){let{inPopout:t,channel:n,appContext:s,inCall:i,isChatOpen:r,exitFullScreen:u}=e,g=n.id,{voiceParticipantsHidden:R,selectedParticipant:L,userParticipantCount:F}=(0,o.useStateFromStoresObject)([y.default],()=>({selectedParticipant:y.default.getSelectedParticipant(g),voiceParticipantsHidden:y.default.getVoiceParticipantsHidden(g),userParticipantCount:y.default.getUserParticipantCount(g)}),[g]),B=(0,P.default)(n),{showClipsHeaderEntrypoint:H}=f.ClipsExperiment.useExperiment({location:"ChannelCallHeaderToolbar"},{autoTrackExposure:!1}),{preventIdle:G,allowIdle:W}=(0,_.usePreventIdle)("popup"),Y=[];if(B){let e=(null==L?void 0:L.type)===U.ParticipantTypes.STREAM?(0,m.decodeStreamKey)(L.id):void 0,t=(null==L?void 0:L.type)===U.ParticipantTypes.ACTIVITY?L.id:void 0;Y.push((0,a.jsx)(N.default,{className:k.button,channel:n,applicationId:t,stream:e,exitFullScreen:u,analyticsLocation:n.type===w.ChannelTypes.GUILD_VOICE?w.AnalyticsPages.GUILD_CHANNEL:w.AnalyticsPages.DM_CHANNEL},"invite-button"))}return R&&Y.push((0,a.jsx)(V,{channelId:g,guildId:n.guild_id},"current-speaker")),Y.push((0,a.jsx)(p.default,{className:k.button,channelId:g},"clips-enabled-indicator")),(null==L?void 0:L.type)===U.ParticipantTypes.STREAM&&(Y.push((0,a.jsx)(S.default,{className:k.button,participant:L},"warning")),Y.push((0,a.jsx)(E.default,{size:O.default.Sizes.LARGE,className:k.button,participant:L,showQuality:!0},"live-indicator"))),R&&Y.push((0,a.jsx)(d.Popout,{position:"bottom",renderPopout:()=>(0,a.jsx)(I.default,{children:(0,a.jsx)(D.default,{channel:n})}),children:(e,t)=>{let{isShown:n}=t;return(0,l.createElement)(A.default,{...e,isActive:n,count:F,key:"call-members",className:k.button})}},"call-members-popout")),i&&Y.push(null!=L?(0,a.jsx)(x.default,{className:k.button,channelId:g},"deselect-participant"):(0,a.jsx)(M.default,{className:k.button,channelId:g,isHorizontal:!0},"select-participant")),H&&!t&&Y.push((0,a.jsx)(h.default,{className:k.button},"clips")),Y.push((0,a.jsx)(C.default,{onOpen:G,onClose:W,className:k.button},"recents")),Y.push((0,a.jsx)(c.CallscopeChannelCallIssueMarker,{className:k.button},"callscope-marker")),Y.push((0,a.jsx)(d.Popout,{position:"bottom",renderPopout:e=>{let{closePopout:t}=e;return(0,a.jsx)(I.default,{children:(0,a.jsx)(b.default,{channelId:g,onClose:t,appContext:s,exitFullScreen:u})})},children:(e,t)=>{let{isShown:n}=t;return(0,l.createElement)(v.default,{...e,key:"more-options",isActive:n,className:k.lastButton})}},"more-options-popout")),!r&&(Y.push((0,a.jsx)(j.default.Divider,{className:k.divider},"divider")),Y.push((0,a.jsx)(T.ChatButton,{channelId:n.id,className:k.chatButtonSpacer,disabled:!0},"chat-spacer"))),(0,a.jsx)(a.Fragment,{children:Y})}},226735:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("191145"),r=n("243288"),u=n("769928"),o=n("321135"),d=n("976074"),c=n("639537"),f=n("99795"),h=n("782340");function p(e){let{channelId:t,onClose:n,appContext:p,exitFullScreen:m,onSelect:E}=e,C=(0,l.useStateFromStores)([i.default],()=>i.default.getSelectedParticipant(t)),g=(null==C?void 0:C.type)===f.ParticipantTypes.STREAM?C.stream:null,S=(0,r.default)(t),_=(0,o.default)(),I=(0,u.default)(t),T=(0,c.default)(t);return(0,a.jsxs)(s.Menu,{navId:"channel-call-overflow-popout",onClose:n,"aria-label":h.default.Messages.CHANNEL_CALL_OVERFLOW_MENU_LABEL,onSelect:E,children:[S,_,I,T,(0,d.default)(g,p,m)]})}},340513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("884155"),r=n("316133"),u=n("49111"),o=n("782340"),d=n("162088");function c(e){let{channel:t}=e,n=(0,l.useStateFromStores)([r.default],()=>r.default.getVoiceStatesForChannel(t));return(0,a.jsxs)("div",{className:d.root,children:[(0,a.jsx)(s.Text,{variant:"text-xs/bold",className:d.header,children:o.default.Messages.CHANNEL_CALL_MEMBERS_POPOUT_HEADER.format({count:n.length})}),(0,a.jsx)(s.Scroller,{className:d.scroller,children:(0,a.jsx)(i.default,{allowDragging:!1,allowPreviews:!1,className:d.voiceUsers,channel:t,voiceStates:n,collapsed:!1,location:u.AnalyticsLocations.CHANNEL_CALL})})]})}},579408:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n("222007");var a=n("37983"),l=n("884691"),s=n("594203"),i=n("701268");function r(e){let{resizableNode:t,onResize:n,onResizeEnd:r,minHeight:u,maxHeight:o}=e,[d,c]=l.useState(null);l.useEffect(()=>{var e,n;c(null!==(n=null===(e=t.current)||void 0===e?void 0:e.offsetHeight)&&void 0!==n?n:null)},[t]);let f=(0,s.default)({initialElementDimension:d,minDimension:u,maxDimension:o,resizableDomNodeRef:t,onElementResize:n,onElementResizeEnd:r,orientation:s.ResizeOrientation.VERTICAL_BOTTOM});return(0,a.jsx)("div",{onMouseDown:f,className:i.resizeHandle})}},458685:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var l=n("627445"),s=n.n(l),i=n("446674"),r=n("77078"),u=n("901582"),o=n("697218"),d=n("348852"),c=n("873254"),f=n("49111"),h=n("782340");function p(e){let{onClose:t,onSelect:n}=e,l=(0,i.useStateFromStores)([o.default],()=>{let e=o.default.getCurrentUser();return s(null!=e,"VideoDeviceMenu: currentUser cannot be undefined"),e}),p=(0,d.default)(),m=(0,c.default)(l.id);return(0,a.jsx)(u.default,{object:f.AnalyticsObjects.CONTEXT_MENU,children:(0,a.jsxs)(r.Menu,{onClose:t,navId:"video-device-context","aria-label":h.default.Messages.FORM_LABEL_VIDEO_DEVICE,onSelect:n,children:[(0,a.jsx)(r.MenuGroup,{label:h.default.Messages.FORM_LABEL_VIDEO_DEVICE,children:p}),(0,a.jsx)(r.MenuGroup,{children:m})]})})}},141681:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}}),n("424973"),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("458960"),u=n("446674"),o=n("266491"),d=n("819855"),c=n("77078"),f=n("841098"),h=n("471671"),p=n("823050"),m=n("99795"),E=n("976620"),C=n("173791"),g=n("4184");let S={STEPS:23,FRAME_DURATION:17,FRAME_SIZE:26},_={SCALE_MIN:.7,SCALE_MAX:1,DURATION_IN:300,DURATION_OUT:170,EASING_IN:r.default.Easing.inOut(r.default.Easing.back()),EASING_OUT:r.default.Easing.quad},I={DURATION_IN:200,DURATION_OUT:125};class T extends l.PureComponent{componentDidMount(){this.componentDidAppear()}componentDidAppear(){let{scaleAnimation:e,widthAnimation:t}=this;e.setValue(1),t.setValue(1)}componentWillEnter(e){let{scaleAnimation:t,widthAnimation:n}=this;t.setValue(0),n.setValue(0),r.default.parallel([r.default.timing(t,{toValue:1,duration:_.DURATION_IN,easing:_.EASING_IN}),r.default.timing(n,{toValue:1,duration:200})]).start(e)}componentWillLeave(e){let{scaleAnimation:t,spriteAnimation:n,spriteOpacity:a,widthAnimation:l}=this;a.setValue(1),n.setValue(0);let s=[];for(let e=0;e<S.STEPS;e++)s.push(r.default.timing(n,{toValue:-S.FRAME_SIZE*e,duration:S.FRAME_DURATION}));r.default.sequence([r.default.timing(t,{toValue:0,duration:_.DURATION_OUT,easing:_.EASING_OUT}),r.default.sequence(s),r.default.timing(l,{toValue:0,duration:125})]).start(e)}getScaleStyle(){let{scaleAnimation:e}=this;return r.default.accelerate({transform:[{scale:e.interpolate({inputRange:[0,1],outputRange:[_.SCALE_MIN,_.SCALE_MAX]})}],opacity:e})}getSpriteStyle(){let{spriteAnimation:e,spriteOpacity:t}=this;return{backgroundPosition:e,opacity:t}}getWidthStyle(){return{width:this.widthAnimation.interpolate({inputRange:[0,1],outputRange:["0px","".concat(this.props.width,"px")]})}}render(){let{theme:e,children:t,className:n}=this.props,l=(0,d.isThemeDark)(e),s=i(E.sprite,{[g.crossWhite]:l,[g.crossGrey]:!l});return(0,a.jsxs)(r.default.div,{className:i(E.transition,n),style:this.getWidthStyle(),children:[(0,a.jsx)("div",{className:i(E.spriteWrapper,C.horizontal,C.justifyCenter,C.alignCenter),children:(0,a.jsx)(r.default.div,{className:s,style:this.getSpriteStyle()})}),(0,a.jsx)(r.default.div,{style:this.getScaleStyle(),children:t})]})}constructor(...e){super(...e),this.scaleAnimation=new r.default.Value(0),this.spriteAnimation=new r.default.Value(0),this.spriteOpacity=new r.default.Value(0),this.widthAnimation=new r.default.Value(0)}}function v(e){var t,n;let{participants:l,onContextMenu:s,className:r,onClick:d,width:C,guildId:g}=e,S=(0,f.default)();let _=(t=C,n=l.length,((0,c.getAvatarSize)(c.AvatarSizes.SIZE_80)+16)*n>t?c.AvatarSizes.SIZE_40:c.AvatarSizes.SIZE_80),I=(0,u.useStateFromStores)([h.default],()=>h.default.isFocused()),v=l.map(e=>{var t,n;if(e.type!==m.ParticipantTypes.USER)return null;let{user:l,voiceState:i,speaking:r,ringing:u}=e;return(0,a.jsx)(T,{className:E.participant,width:(0,c.getAvatarSize)(_),theme:S,children:(0,a.jsx)(p.default,{src:l.getAvatarURL(g,(0,c.getAvatarSize)(_),r&&I),size:_,muted:null!==(t=null==i?void 0:i.isVoiceMuted())&&void 0!==t&&t,deafen:null!==(n=null==i?void 0:i.isVoiceDeafened())&&void 0!==n&&n,speaking:r,ringing:u,onClick:t=>null==d?void 0:d(e,t),onContextMenu:t=>null==s?void 0:s(e,t)},e.id)},l.id)});return(0,a.jsx)(o.default,{component:"div",className:i(E.root,r),children:v})}},397443:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}}),n("222007");var a=n("37983"),l=n("884691"),s=n("748820"),i=n("446674"),r=n("913144"),u=n("206230"),o=n("716241"),d=n("170152"),c=n("391591"),f=n("397485"),h=n("738258"),p=n("49111"),m=n("182797");function E(e){let{channelId:t,guildId:n,userId:E,containerDimensions:C}=e,g=(0,i.useStateFromStores)([u.default],()=>u.default.useReducedMotion),[S,_]=l.useState([]),I=S.length<50;l.useEffect(()=>{function e(e){var a;let{channelId:l,userId:i,emoji:r,animationType:u,animationId:h}=e;if(null!=E&&E!==i||d.default.getEnabled()&&(0,c.default)(null!==(a=null==r?void 0:r.name)&&void 0!==a?a:""))return;let m=null!=r&&null!=u&&null!=h;if(l===t&&!g&&I&&m){let e=(0,f.getEffectUrl)(r),a=null!=r.id&&!r.animated,l={id:(0,s.v4)(),animationType:u,animationId:h,shouldResize:a,url:e,userId:i};_(e=>[...e,l]),o.default.trackWithMetadata(p.AnalyticEvents.VOICE_CHANNEL_EFFECT_VIEWED,{channel_id:t,guild_id:n})}}return r.default.subscribe("VOICE_CHANNEL_EFFECT_SEND",e),()=>{r.default.unsubscribe("VOICE_CHANNEL_EFFECT_SEND",e)}},[t,n,E,g,I]);let T=l.useCallback(e=>{_(t=>{let n=[...t],a=n.findIndex(t=>t.id===e);return n.splice(a,1),n})},[]);return g?null:(0,a.jsx)("div",{className:m.effectsWrapper,style:{width:C.width},children:(0,a.jsx)("div",{className:m.effects,children:S.map(e=>(0,a.jsx)(h.default,{containerDimensions:C,effect:e,onComplete:T},e.id))})})}},198755:function(e,t,n){"use strict";n.r(t),n.d(t,{VoiceChannelEffectsLayerContainer:function(){return r},VoiceChannelEffectsLayerProvider:function(){return u},default:function(){return o}});var a=n("77078");let{Layer:l,LayerContainer:s,LayerProvider:i}=(0,a.createLayer)("VoiceChannelEffectsCall"),r=s,u=i;var o=l},338677:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("77078"),s=n("629109"),i=n("135230"),r=n("723872"),u=n("782340");function o(e,t){if(t&&(0,r.isRTCConnectedInHub)()){(0,l.openModalLazy)(async()=>{let{default:e}=await n.el("109253").then(n.bind(n,"109253"));return t=>(0,a.jsx)(e,{...t})});return}if(t){(0,l.openModal)(e=>(0,a.jsx)(i.default,{...e,title:u.default.Messages.SUPPRESSED,body:u.default.Messages.SUPPRESSED_PERMISSION_BODY}));return}if(e){(0,l.openModal)(e=>(0,a.jsx)(i.default,{...e,title:u.default.Messages.SERVER_MUTED_DIALOG_TITLE,body:u.default.Messages.SERVER_MUTED_DIALOG_BODY}));return}s.default.toggleSelfMute()}},632616:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("452804"),s=n("135230"),i=n("535348"),r=n("782340");function u(e){let{type:t,onConfirm:n,...u}=e,o=t===i.SelfStreamAndVideoAlertType.STREAM?r.default.Messages.HIDE_SELF_STREAM_CONFIRMATION_HEADER:r.default.Messages.HIDE_SELF_VIDEO_CONFIRMATION_HEADER,d=t===i.SelfStreamAndVideoAlertType.STREAM?r.default.Messages.HIDE_SELF_STREAM_CONFIRMATION_BODY:r.default.Messages.HIDE_SELF_VIDEO_CONFIRMATION_BODY;return(0,a.jsx)(s.default,{confirmText:r.default.Messages.CONFIRM,secondaryConfirmText:r.default.Messages.DONT_ASK_AGAIN,title:o,cancelText:r.default.Messages.CANCEL,onConfirm:n,onConfirmSecondary:()=>{l.default.updatedUnsyncedSettings({disableHideSelfStreamAndVideoConfirmationAlert:!0}),n()},body:d,...u})}},243288:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("255397"),r=n("191145"),u=n("782340");function o(e){let t=(0,l.useStateFromStores)([r.default],()=>r.default.getVoiceParticipantsHidden(e));return(0,a.jsx)(s.MenuCheckboxItem,{id:"no-video-hide",label:u.default.Messages.STREAM_SHOW_NON_VIDEO,checked:!t,action:()=>i.default.toggleVoiceParticipantsHidden(e,!t)})}},769928:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}}),n("222007");var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("168973"),r=n("236898"),u=n("632616"),o=n("535348"),d=n("782340");function c(e,t){let[n,c,f]=(0,r.default)(e,t),h=(0,l.useStateFromStores)([i.default],()=>i.default.disableHideSelfStreamAndVideoConfirmationAlert);return n?(0,a.jsx)(s.MenuCheckboxItem,{id:"self-stream-hide",label:d.default.Messages.SHOW_SELF_STREAM,checked:!c,action:()=>{if(h||c)return f(!c);(0,s.openModal)(e=>(0,a.jsx)(u.default,{...e,type:o.SelfStreamAndVideoAlertType.STREAM,onConfirm:()=>f(!c)}))}}):null}},321135:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}}),n("222007");var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("168973"),r=n("301603"),u=n("632616"),o=n("535348"),d=n("353927"),c=n("782340");function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.MediaEngineContextTypes.DEFAULT,[n,f,h]=(0,r.default)(e,t),p=(0,l.useStateFromStores)([i.default],()=>i.default.disableHideSelfStreamAndVideoConfirmationAlert);return n?(0,a.jsx)(s.MenuCheckboxItem,{id:"self-video-hide",label:c.default.Messages.SHOW_SELF_VIDEO,checked:!f,action:()=>{if(p||f)return h(!f);(0,s.openModal)(e=>(0,a.jsx)(u.default,{...e,type:o.SelfStreamAndVideoAlertType.VIDEO,onConfirm:()=>h(!f)}))}}):null}},60787:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("629109"),r=n("42887");function u(){let e=(0,l.useStateFromStores)([r.default],()=>Object.values(r.default.getInputDevices())),t=(0,l.useStateFromStores)([r.default],()=>r.default.getInputDeviceId());return e.map(e=>{let{id:n,disabled:l,name:r}=e;return(0,a.jsx)(s.MenuRadioItem,{id:"input-".concat(n),group:"input-devices",disabled:l,label:r,checked:n===t,action:()=>i.default.setInputDevice(n)},"input-".concat(n))})}},348852:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("629109"),r=n("42887");function u(){let e=(0,l.useStateFromStores)([r.default],()=>Object.values(r.default.getVideoDevices())),t=(0,l.useStateFromStores)([r.default],()=>r.default.getVideoDeviceId());return e.map(e=>{let{id:n,disabled:l,name:r}=e;return(0,a.jsx)(s.MenuRadioItem,{group:"video-devices",id:"video-device-".concat(n),disabled:l,label:r,checked:n===t,action:()=>i.default.setVideoDevice(n)},"video-device-".concat(n))})}},466769:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("629109"),r=n("42887");function u(){let e=(0,l.useStateFromStores)([r.default],()=>Object.values(r.default.getOutputDevices())),t=(0,l.useStateFromStores)([r.default],()=>r.default.getOutputDeviceId());return e.map(e=>{let{id:n,disabled:l,name:r}=e;return(0,a.jsx)(s.MenuRadioItem,{group:"output-devices",id:"output-".concat(n),disabled:l,label:r,checked:n===t,action:()=>i.default.setOutputDevice(n)},"output-".concat(n))})}},873254:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("648911"),r=n("271938"),u=n("42887"),o=n("782340"),d=n("431024");function c(e){let t=(0,s.useModalContext)(),c=(0,l.useStateFromStores)([u.default],()=>u.default.isVideoEnabled()),f=(0,l.useStateFromStores)([r.default],()=>r.default.getId()===e),h=(0,i.default)();return(!c||h)&&f?(0,a.jsx)(s.MenuItem,{id:"change-video-background",label:(0,a.jsx)("div",{className:d.item,children:c?o.default.Messages.CAMERA_CHANGE_VIDEO_BACKGROUND_MENU_ITEM:o.default.Messages.CAMERA_PREVIEW_MENU_ITEM}),action:function(){(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("381736").then(n.bind(n,"381736"));return t=>(0,a.jsx)(e,{...t,videoEnabled:c})},{modalKey:"camera-preview",contextKey:t})}}):null}},639537:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("712234"),r=n("826332"),u=n("782340");function o(e){let t=(0,l.useStateFromStores)([i.default],()=>i.default.getToastsEnabled(e));return(0,a.jsx)(s.MenuCheckboxItem,{id:"show-call-chat-toasts",label:u.default.Messages.SHOW_NEW_MESSAGE_PREVIEWS,checked:t,action:()=>r.default.setCallChatToastsEnabled(e,!t)})}},736747:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("77078"),s=n("79112"),i=n("474571"),r=n("49111"),u=n("782340");function o(){return(0,a.jsx)(l.MenuItem,{id:"voice-settings",label:u.default.Messages.VOICE_SETTINGS,action:()=>s.default.open(r.UserSettingsSections.VOICE),icon:i.default})}},456127:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var l=n("598165"),s=n("446674"),i=n("386045"),r=n("803725"),u=n("103979"),o=n("981913"),d=n("373469"),c=n("271938"),f=n("191145"),h=n("99795"),p=n("782340");function m(e){let{channel:t}=e,n=(0,s.useStateFromStores)([f.default],()=>f.default.getSelectedParticipant(t.id)),m=(null==n?void 0:n.type)===h.ParticipantTypes.STREAM,E=(0,s.useStateFromStores)([d.default],()=>m?d.default.getActiveStreamForStreamKey(n.id):null),{ignoreSenderPreference:C}=u.default.useExperiment({location:"ActionBarClipsButton"},{autoTrackExposure:!1}),{viewerClippingAllowed:g,isAtMaxSavingClipOperations:S}=(0,s.useStateFromStoresObject)([i.default],()=>({viewerClippingAllowed:null!=E&&(i.default.isViewerClippingAllowedForUser(E.ownerId)||C),isAtMaxSavingClipOperations:i.default.getIsAtMaxSaveClipOperations()})),_=(null==E?void 0:E.ownerId)===c.default.getId(),I=!(_||g)||S||null==n;return(0,a.jsx)(o.default,{onClick:()=>{!I&&(_?(0,r.saveClip)():(0,r.saveClip)(n.id))},disabled:I,iconComponent:e=>(0,a.jsx)(l.CameraIcon,{...e,color:"currentColor"}),label:null==E?p.default.Messages.CLIPS_VIEWERSIDE_BUTTON_FOCUS_TOOLTIP:_||g?S?void 0:p.default.Messages.CLIPS_SAVE:p.default.Messages.CLIPS_VIEWERSIDE_BUTTON_DISABLED_TOOLTIP})}},888814:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983");n("884691");var l=n("65597"),s=n("760679"),i=n("242260"),r=n("315841"),u=n("981913"),o=n("987772"),d=n("814711"),c=n("782340");function f(){let e=(0,l.default)([i.default],()=>i.default.getDrawMode()),t=(null==e?void 0:e.type)===r.DrawableType.LINE,n=()=>{t?(0,s.setDrawMode)(null):(0,s.setDrawMode)({type:r.DrawableType.LINE})};return(0,a.jsx)(d.default,{renderPopout:()=>null,children:e=>{let{...l}=e;return(0,a.jsx)(u.default,{...l,label:c.default.Messages.SHARED_CANVAS_DRAW_MODE_LINE,isActive:t,iconComponent:o.default,onClick:n})}})}},943917:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var l=n("65597"),s=n("760679"),i=n("242260"),r=n("315841"),u=n("124824"),o=n("981913"),d=n("258901"),c=n("472037"),f=n("814711"),h=n("782340");function p(e){let{channel:t}=e,n=(0,l.default)([i.default],()=>i.default.getDrawMode()),p=(null==n?void 0:n.type)===r.DrawableType.EMOJI_HOSE,m=(e,t)=>{null!=e?(0,s.setDrawMode)({type:r.DrawableType.EMOJI_HOSE,emojiName:e.name,emojiId:e.id}):p&&(0,s.setDrawMode)(null),null==t||t()};return(0,a.jsx)(f.default,{renderPopout:e=>{let{closePopout:n,onFocus:l}=e;return(0,a.jsx)(u.default,{children:(0,a.jsx)(d.default,{title:h.default.Messages.SHARED_CANVAS_DRAW_MODE_EMOJI_HOSE,channel:t,closePopout:n,onFocus:l,onSelectEmoji:e=>m(e,n)})})},children:e=>(0,a.jsx)(o.default,{...e,iconComponent:c.default,isActive:p||e.isActive,onClick:t=>{m(null),e.onClick(t)}})})}},380116:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983"),l=n("884691"),s=n("446674"),i=n("174727"),r=n("124824"),u=n("515496"),o=n("568088"),d=n("257407"),c=n("814711");function f(e){let{channel:t}=e,n=(0,s.useStateFromStores)([o.default],()=>o.default.effectCooldownEndTime),f=l.useMemo(()=>null!=n?(n.getTime()-Date.now())/1e3:0,[n]),{seconds:h}=(0,i.default)(null!=n?n:new Date),p=h>0;return(0,a.jsx)(c.default,{renderPopout:e=>{let{closePopout:n,onFocus:l}=e;return(0,a.jsx)(r.default,{children:(0,a.jsx)(d.default,{channel:t,closePopout:n,onFocus:l})})},children:e=>{let{onMouseEnter:t,...n}=e;return(0,a.jsx)(u.default,{totalCooldownSeconds:f,remainingCooldownSeconds:h,onMouseEnter:e=>{var n,a;return n=e,a=t,void(!p&&a(n))},...n})}})}},814711:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}}),n("222007");var a=n("37983"),l=n("884691"),s=n("77078"),i=n("788220"),r=n("894282"),u=n("186503");function o(e){let{renderPopout:t,onMouseEnter:n,onMouseLeave:s,closePopout:i,isHovered:r,...u}=e;return l.useEffect(()=>{!r&&i()},[i,r]),(0,a.jsx)("div",{onMouseEnter:n,onMouseLeave:s,children:t({closePopout:i,...u})})}function d(e){let{renderPopout:t,children:n}=e,[d,c]=l.useState(!1),{isHovered:f,setIsHovered:h,onMouseEnter:p,onMouseLeave:m,cancelTimers:E}=(0,i.default)(200,300);function C(e){"focus"!==e.type&&!d&&p()}function g(){!d&&m()}function S(e){E(),c(!d),(!f||d)&&e()}let _=f||d;return(0,a.jsx)(s.Popout,{shouldShow:_,animationPosition:"top",position:"top",align:"left",spacing:16,onRequestClose:()=>{h(!1),c(!1)},renderPopout:e=>(0,a.jsx)(o,{isHovered:_,onFocus:()=>c(!0),onMouseEnter:p,onMouseLeave:g,renderPopout:t,...e}),children:e=>{let{onClick:t,onKeyDown:l}=e;return(0,a.jsx)(a.Fragment,{children:n({onClick:e=>S(()=>t(e)),onKeyDown:e=>{var t,n;return t=e,n=l,void((t.key===r.KeyboardKeysUpdated.ENTER||t.key===r.KeyboardKeysUpdated.SPACE)&&S(()=>n(t)))},className:u.actionBarButton,onMouseEnter:C,onMouseLeave:g,isActive:_})})}})}},149882:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}}),n("222007");var a=n("37983");n("884691");var l=n("65597"),s=n("151426"),i=n("272030"),r=n("235145"),u=n("78581"),o=n("429829"),d=n("191191"),c=n("244390"),f=n("124824"),h=n("981913"),p=n("42887"),m=n("754576"),E=n("814711"),C=n("782340");function g(e){let{channel:t,themeable:g}=e,S=t.getGuildId(),{mute:_,suppress:I}=(0,c.default)(t),T=(0,l.default)([p.default],()=>p.default.isDeaf()),v=_||I||T,x=(0,u.useSoundBoardDismissContentTypes)({isSoundboardButtonDisabled:v}),[N,A]=(0,r.useGetDismissibleContent)(x);function M(e){null!=S&&(0,i.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("136137").then(n.bind(n,"136137"));return t=>(0,a.jsx)(e,{guildId:S,...t})})}return(0,a.jsx)(E.default,{renderPopout:e=>{let{closePopout:n}=e;return(0,a.jsx)(f.default,{children:(0,a.jsx)(d.default,{guildId:S,channel:t,onClose:n,gridNotice:N===s.DismissibleContent.CUSTOM_CALL_SOUNDS_PICKER_UPSELL&&(0,a.jsx)(o.CustomCallSoundUpsell,{onClose:n,markAsDismissed:A}),analyticsSource:"action bar button"})})},children:e=>(0,a.jsx)(h.default,{themeable:g,label:function(){if(_)return C.default.Messages.SOUNDBOARD_OPEN_SOUNDBOARD_ERROR_GUILD_MUTE;if(I)return C.default.Messages.SOUNDBOARD_OPEN_SOUNDBOARD_ERROR_SUPPRESSED;if(T)return C.default.Messages.SOUNDBOARD_OPEN_SOUNBOARRD_ERROR_DEAFENED}(),iconComponent:m.default,disabled:v,onContextMenu:M,...e})})}},568009:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("65597"),s=n("760679"),i=n("242260"),r=n("981913"),u=n("462579"),o=n("814711"),d=n("782340");function c(){let e=(0,l.default)([i.default],()=>!i.default.visibleOverlayCanvas);return(0,a.jsx)(o.default,{renderPopout:()=>null,children:t=>{let{...n}=t;return(0,a.jsx)(r.default,{...n,label:d.default.Messages.SHARED_CANVAS_HIDE_OVERLAY_DRAWINGS,isActive:e,iconComponent:u.default,onClick:s.toggleOverlayCanvas})}})}},636150:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var a=n("37983");n("884691");var l=n("627445"),s=n.n(l),i=n("446674"),r=n("18346"),u=n("261552"),o=n("103979"),d=n("780166"),c=n("245463"),f=n("42887"),h=n("697218"),p=n("991170"),m=n("456127"),E=n("888814"),C=n("943917"),g=n("380116"),S=n("149882"),_=n("568009"),I=n("49111"),T=n("621262");function v(e){var t;let{channel:n,hasActiveStream:l,themeable:v=!1}=e,x=(0,i.useStateFromStores)([h.default],()=>{let e=h.default.getCurrentUser();return s(null!=e,"CenterControlTray: currentUser cannot be undefined"),e}),N=(0,u.default)(),{isSharedCanvasEnabled:A}=d.default.useExperiment({guildId:null!==(t=null==n?void 0:n.guild_id)&&void 0!==t?t:"",location:"b7309a_1"}),{enableViewerClipping:M}=o.default.useExperiment({location:"VoiceEffectsActionBar"},{autoTrackExposure:!1}),R=(0,r.default)(f.default);if(null==n||null!=N)return null;let j=(0,c.default)(n),L=p.default.can({permission:I.Permissions.ADD_REACTIONS,user:x,context:n});return(0,a.jsxs)("div",{className:T.voiceEffectsActionBar,children:[j&&(0,a.jsx)(S.default,{channel:n,themeable:v}),L&&(0,a.jsx)(g.default,{channel:n}),M&&R&&(0,a.jsx)(m.default,{channel:n}),A&&l&&(0,a.jsx)(E.default,{}),A&&l&&(0,a.jsx)(C.default,{channel:n}),A&&l&&(0,a.jsx)(_.default,{})]})}},316194:function(e,t,n){"use strict";n.r(t),n.d(t,{setRtcLogMarker:function(){return l}});var a=n("913144");function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log("[callscope] Issue marker pressed."),a.default.dispatch({type:"RTC_LOG_MARKER",marker:e})}},546206:function(e,t,n){"use strict";n.r(t),n.d(t,{getCallscopeState:function(){return E},shouldShowCallscopeUI:function(){return C},setCallscopeIssue:function(){return g}}),n("424973"),n("222007");var a=n("811022"),l=n("446674"),s=n("398183"),i=n("913144"),r=n("629803"),u=n("367632"),o=n("147746"),d=n("271938"),c=n("697218"),f=n("773336"),h=n("49111");class p{async getDescription(){let e={callStartedAt:this.callStartedAt.toISOString(),blindIds:[],issues:[]},t=e=>"".concat(e.toISOString()," (").concat(e.getTime()-this.callStartedAt.getTime(),")");for(let n of this.blindIds)e.blindIds.push({date:t(n.date),ids:await n.ids,context:n.context});for(let n of this.issues)e.issues.push("".concat(t(n.date),": ").concat(n.description));return e}shouldShowUI(){return m.isInCallscopeCall}async submit(){if(!this.hasIssues)return;let e=await this.getDescription(),t=JSON.stringify(e,void 0,4);console.log("[callscope] Submitting issues...\n".concat(t));try{await (0,o.uploadDebugLogFiles)(h.DebugLogCategory.RTC,e)}catch(e){console.error("[callscope] Error uploading logs",e)}try{let e=c.default.getCurrentUser();await (0,u.submitReport)({name:"Issue from ".concat(null==e?void 0:e.username,"#").concat(null==e?void 0:e.discriminator),priority:2,description:t,feature:{asana_inbox_id:"1204198429044032"},url:""},{overridePlatformInformation:!1},void 0,!1)}catch(e){console.error("[callscope] Error submitting report",e)}}constructor(){this.isInCallscopeCall=!1,this.rtcConnections=new Set,this.callStartedAt=new Date,this.blindIds=[],this.hasIssues=!1,this.issues=[]}}let m=new p;function E(){return m}function C(){return m.shouldShowUI()}function g(e){m.issues.push({date:new Date,description:e}),m.hasIssues=!0}let S=new a.default("CallscopeStore");class _{static async shouldUpload(){var e,t;if(!f.isPlatformEmbedded)return!1;let n=await (0,r.fetchConsents)();return null!==(t=null===(e=n[h.Consents.USAGE_STATISTICS])||void 0===e?void 0:e.consented)&&void 0!==t&&t}static async handleDisconnected(e){if(e.state!==h.RTCConnectionStates.DISCONNECTED||null==e.channelId||null==e.rtcLogEphemeralKey)return;if(!await _.shouldUpload()){S.info("CallscopeManager: USAGE_STATISTICS is disabled or is not desktop. Not uploading.");return}S.info("CallscopeManager: Uploading rtc logs in ".concat(1e4," ms..."));let t=d.default.getId();await (0,s.sleep)(1e4),await (0,o.uploadCallscopeLogs)(e.channelId,t,e.rtcLogEphemeralKey,e.context)}}class I extends l.default.Store{}I.displayName="CallscopeStore",new I(i.default,__OVERLAY__?{}:{RTC_CONNECTION_STATE:function(e){var t;let n=(null!==(t=e.channelId)&&void 0!==t?t:"unknown")+e.context;switch(e.state){case h.RTCConnectionStates.DISCONNECTED:m.rtcConnections.delete(n),0===m.rtcConnections.size?((async t=>{await _.handleDisconnected(e),await t.submit()})(m),m=new p):_.handleDisconnected(e);break;case h.RTCConnectionStates.RTC_CONNECTED:if(null!=e.rtcLogEphemeralKey){let t=d.default.getId(),a=(0,o.getBlindIds)(e.channelId,t,e.rtcLogEphemeralKey);0===m.rtcConnections.size&&(m.callStartedAt=new Date),m.isInCallscopeCall=!0,m.blindIds.push({date:new Date,context:e.context,ids:a}),m.rtcConnections.add(n)}}}})},777274:function(e,t,n){"use strict";n.r(t),n.d(t,{CallscopeChannelCallIssueMarker:function(){return T}}),n("222007");var a=n("37983"),l=n("884691"),s=n("77078"),i=n("981913"),r=n("697218"),u=n("471654"),o=n("413709"),d=n("50885"),c=n("316194"),f=n("546206"),h=n("782340");let p={marginTop:"12px",marginBottom:"12px"},m={marginTop:"12px",marginBottom:"12px"},E={marginLeft:".5em"};function C(){return(0,a.jsx)(u.default,{width:"1em",height:"1em"})}function g(e){let[t,n]=l.useState(""),[i,u]=l.useState(null);l.useEffect(()=>{(async()=>{let e=(0,f.getCallscopeState)();u(await e.getDescription())})()},[]);let o=l.useCallback(()=>{console.log("[callscope] Issue marker closed ".concat(t,".")),(0,f.setCallscopeIssue)(t),e.onClose()},[e,t]),d=l.useCallback(()=>{e.onClose()},[e]),c=!function(){let e=r.default.getCurrentUser();return null!=e&&e.isStaff()}()?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.FormItem,{style:p,children:[(0,a.jsx)(s.Text,{variant:"text-md/normal",style:m,children:"Because all user and channel data is anonymized some additional information is needed for Discord to retrieve the logs. You may be asked to provide these IDs so we can associate the incident."}),(0,a.jsx)(_,{description:i})]}),(0,a.jsx)(s.FormItem,{style:p,children:(0,a.jsxs)(s.Text,{variant:"text-md/normal",style:m,children:["Shortly after the call, you can enter the blinded channel ID into the"," ",(0,a.jsx)(s.Anchor,{href:"https://callscope.discord.tools/",children:"callscope visualizer"}),"."]})})]});return(0,a.jsxs)(s.ModalRoot,{transitionState:s.ModalTransitionState.ENTERING,size:s.ModalSize.MEDIUM,children:[(0,a.jsxs)(s.ModalContent,{children:[(0,a.jsx)(s.Heading,{variant:"heading-xl/semibold",style:p,children:h.default.Messages.NOTICE_CALLSCOPE_DIALOG_HEADER}),(0,a.jsxs)(s.FormItem,{style:p,children:[(0,a.jsxs)(s.Text,{variant:"text-md/normal",style:m,children:["We marked the time of your ",(0,a.jsx)(C,{})," ",h.default.Messages.NOTICE_CALLSCOPE_MARK_ISSUE," button press in the analytics logs. It can be used multiple times during your call."]}),(0,a.jsx)(s.TextArea,{placeholder:h.default.Messages.NOTICE_CALLSCOPE_DIALOG_INPUT,autoFocus:!0,rows:5,value:t,maxLength:500,onChange:n})]}),c]}),(0,a.jsxs)(s.ModalFooter,{children:[(0,a.jsx)(s.Button,{onClick:o,children:"Submit Issue"}),(0,a.jsx)(s.Button,{look:s.ButtonLooks.BLANK,onClick:d,children:(0,a.jsx)(s.Text,{variant:"text-md/medium",children:h.default.Messages.CANCEL})})]})]})}function S(e){let t=l.useCallback(()=>{d.default.copy(e.text)},[e.text]);return(0,a.jsx)(s.Anchor,{style:E,onClick:t,title:"Copy to clipboard",children:(0,a.jsx)(o.default,{width:"1em",height:"1em"})})}function _(e){let t=l.useCallback(()=>{d.default.copy(JSON.stringify(e,void 0,4))},[e]);return null==e.description?(0,a.jsx)(s.Text,{variant:"text-md/medium",children:"Unable to locate blind IDs."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Text,{variant:"text-md/medium",children:(0,a.jsx)("ul",{children:e.description.blindIds.map(e=>{let{context:t,ids:n}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("li",{children:[(0,a.jsxs)("strong",{children:["Blind channel ID (",t,"):"]})," ",(0,a.jsx)("kbd",{style:{userSelect:"text"},children:n.blindChannelId}),(0,a.jsx)(S,{text:n.blindChannelId})]}),(0,a.jsxs)("li",{children:[(0,a.jsxs)("strong",{children:["Blind user ID (",t,"):"]})," ",(0,a.jsx)("kbd",{style:{userSelect:"text"},children:n.blindUserId}),(0,a.jsx)(S,{text:n.blindUserId})]})]},t)})})}),(0,a.jsx)(s.Button,{onClick:t,children:"Copy All"})]})}let I="callscope-report-issue-dialog";function T(e){let t=(0,s.useModalContext)(),n=l.useCallback(()=>{(0,s.closeModal)(I)},[]),r=l.useCallback(()=>{(0,c.setRtcLogMarker)(),(0,s.openModalLazy)(()=>Promise.resolve(e=>(0,a.jsx)(g,{onClose:n})),{contextKey:t,modalKey:I})},[t,n]);return(0,f.shouldShowCallscopeUI)()?(0,a.jsx)(i.default,{onClick:r,iconComponent:u.default,"aria-label":h.default.Messages.NOTICE_CALLSCOPE_MARK_ISSUE,className:e.className,label:h.default.Messages.NOTICE_CALLSCOPE_MARK_ISSUE}):(0,a.jsx)(a.Fragment,{})}},533466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e2}}),n("222007"),n("424973");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("627445"),u=n.n(r),o=n("917351"),d=n.n(o),c=n("90915"),f=n("446674"),h=n("151426"),p=n("551042"),m=n("77078"),E=n("272030"),C=n("942722"),g=n("561963"),S=n("264732"),_=n("738073"),I=n("737960"),T=n("789394"),v=n("734575"),x=n("84339"),N=n("447789"),A=n("191225"),M=n("169920"),R=n("420444"),j=n("191145"),L=n("494286"),O=n("850391"),y=n("992207"),P=n("269936"),b=n("69927"),D=n("40635"),U=n("10641"),w=n("327432"),F=n("336804"),k=n("928265"),V=n("744568"),B=n("257869"),H=n("848848"),G=n("93252"),W=n("661455"),Y=n("230035"),z=n("155832"),K=n("353054"),Z=n("262956"),X=n("723431"),J=n("977983"),q=n("539938"),Q=n("557809"),$=n("853189"),ee=n("718091"),et=n("922164"),en=n("148205"),ea=n("969103"),el=n("361572"),es=n("267567"),ei=n("393414"),er=n("144491"),eu=n("56778"),eo=n("208021"),ed=n("582713"),ec=n("716214"),ef=n("58343"),eh=n("445375"),ep=n("38861"),em=n("31673"),eE=n("338273"),eC=n("861570"),eg=n("970366"),eS=n("401642"),e_=n("514917"),eI=n("223170"),eT=n("59811"),ev=n("824135"),ex=n("982108"),eN=n("42203"),eA=n("474643"),eM=n("341542"),eR=n("247013"),ej=n("305961"),eL=n("824563"),eO=n("744983"),ey=n("18494"),eP=n("162771"),eb=n("697218"),eD=n("800762"),eU=n("980423"),ew=n("439932"),eF=n("679653"),ek=n("176347"),eV=n("665182"),eB=n("681393"),eH=n("61918"),eG=n("656612"),eW=n("624027"),eY=n("49111"),ez=n("272505"),eK=n("99795"),eZ=n("994428"),eX=n("237542"),eJ=n("837979"),eq=n("782340"),eQ=n("305794");let e$=(0,P.makeLazy)({createPromise:()=>n.el("479273").then(n.bind(n,"479273")),webpackId:"479273",renderLoader:()=>(0,a.jsx)("div",{className:eQ.loader,children:(0,a.jsx)(m.Spinner,{})}),name:"ForumChannel"});class e0 extends l.PureComponent{componentDidMount(){(0,eg.trackAppUIViewed)("guild_channel")}componentDidUpdate(e){null!=this.props.channel&&null!=e.channel&&this.props.channel.id!==e.channel.id&&this.state.topicExpanded&&this.setState({topicExpanded:!1}),this.openChannelModal()}openChannelContextMenu(e,t){let{guild:l}=this.props;u(null!=t,"Missing channel in Channel.openChannelContextMenu"),u(null!=l,"Missing guild in Channel.openChannelContextMenu"),(0,E.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("229233").then(n.bind(n,"229233"));return n=>(0,a.jsx)(e,{...n,channel:t,guild:l})})}openThreadContextMenu(e,t){u(null!=t,"Missing channel in Channel.openChannelContextMenu"),(0,E.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("994827").then(n.bind(n,"994827"));return n=>(0,a.jsx)(e,{...n,channel:t})})}openDMContextMenu(e,t){u(null!=t,"Missing channel in Channel.openDMContextMenu");let l=eb.default.getUser(t.getRecipientId());u(null!=l,"Missing user in Channel.openDMContextMenu"),(0,E.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("130074").then(n.bind(n,"130074"));return n=>(0,a.jsx)(e,{...n,user:l,channelSelected:!0,channel:t})})}renderCall(){let{channel:e,showCall:t,nsfwAllowed:n,nsfwAgree:l}=this.props;if(u(null!=e,"Missing channel in Channel.renderCall"),(null==e?void 0:e.isNSFW())&&(!n||!l)||!t)return null;switch(e.type){case eY.ChannelTypes.GUILD_STAGE_VOICE:return(0,a.jsx)(ef.default,{channel:e},e.id);case eY.ChannelTypes.GUILD_VOICE:case eY.ChannelTypes.DM:case eY.ChannelTypes.GROUP_DM:case eY.ChannelTypes.PUBLIC_THREAD:case eY.ChannelTypes.PRIVATE_THREAD:let s=this.props.height-200;return(0,a.jsx)(L.default,{channel:e,renderExternalHeader:this.renderHeaderBar,maxHeight:s},"call-".concat(e.id));default:return null}}renderEmbeddedActivityPanel(){let e=this.props.height-200;return(0,a.jsx)(M.default,{maxHeight:e})}renderChat(){let{channel:e,nsfwAgree:t,guild:n,nsfwAllowed:l,needSubscriptionToAccess:s}=this.props;if(u(null!=e,"Missing channel in Channel.renderChat"),s)return(u(null!=n,"premium channels must exist within a guild"),null==e?void 0:e.isRoleSubscriptionTemplatePreviewChannel())?(0,a.jsx)(G.default,{guildId:n.id}):(0,a.jsx)(B.GroupListingsFetchContextProvider,{guildId:n.id,children:(0,a.jsx)(W.default,{channelId:e.id,guildId:n.id})});if(e.isNSFW()&&(!l||!t))return(0,a.jsx)(_.default,{guild:n});if(e.isGuildVocal())return null;if(e.isDirectory())return u(null!=n,"directory channels must exist within a guild"),(0,a.jsx)(D.default,{channel:e,guild:n});if(e.isForumLikeChannel()){u(null!=n,"forum channels must exist within a guild");let t={isThreadSidebarFloating:this.state.isThreadSidebarFloating,threadSidebarWidth:this.state.threadSidebarWidth};return(0,a.jsx)(e$,{channel:e,guild:n,sidebarState:t},e.id)}return(0,a.jsx)(ek.default,{channel:e,guild:n,chatInputType:O.ChatInputTypes.NORMAL},null!=n?n.id:"home")}renderSidebar(){let{searchId:e,channel:t,parentChannel:n,guild:l,needSubscriptionToAccess:s,section:i,showCall:r}=this.props;if(u(null!=t,"Missing channel in Channel.renderSidebar"),__OVERLAY__||s);else if(i===eY.ChannelSections.PROFILE&&t.isPrivate())return(0,a.jsx)(e_.default,{channel:t,showCall:r},"private-channel-profile-".concat(t.id));else if(i===eY.ChannelSections.MEMBERS)switch(t.type){case eY.ChannelTypes.GROUP_DM:return(0,a.jsx)(C.default,{channel:t},"private-channel-recipients-".concat(t.id));case eY.ChannelTypes.GUILD_DIRECTORY:case eY.ChannelTypes.GUILD_FORUM:case eY.ChannelTypes.GUILD_MEDIA:case eY.ChannelTypes.GUILD_ANNOUNCEMENT:case eY.ChannelTypes.GUILD_TEXT:var o;let d=!0===eY.ChannelTypesSets.GUILD_THREADS_ONLY.has(t.type)?t.id:null!==(o=t.guild_id)&&void 0!==o?o:t.id;return(0,a.jsx)(eH.default,{channel:t},"channel-members-".concat(d));case eY.ChannelTypes.ANNOUNCEMENT_THREAD:if(null!=n)return(0,a.jsx)(eH.default,{channel:n},"channel-members-".concat(n.id));break;case eY.ChannelTypes.PUBLIC_THREAD:case eY.ChannelTypes.PRIVATE_THREAD:if(!t.isArchivedThread()&&null!=l)return(0,a.jsx)(g.default,{channel:t,guild:l},"channel-members-".concat(t.id))}else if(i===eY.ChannelSections.SEARCH&&null!=e)return(0,a.jsx)(eu.default,{searchId:e});return null}openChannelModal(){let{channel:e,guildId:t,hasModalOpen:l,showWelcomeModal:s,isLurking:i,isUnavailable:r,showRealNameModal:u}=this.props;return null==e||null==t||r||l?null:(u&&(0,m.openModalLazy)(async()=>{let{default:e}=await n.el("278999").then(n.bind(n,"278999"));return n=>(0,a.jsx)(e,{...n,guildId:t})},{onCloseCallback:()=>k.default.viewPrompt(eX.GuildPrompts.REAL_NAME_PROMPT,t),modalKey:"Guild Hub Real Name Modal"}),s&&(0,m.openModalLazy)(async()=>{let{default:e}=await n.el("900257").then(n.bind(n,"900257"));return n=>(0,a.jsx)(e,{...n,guildId:t})},{onCloseCallback:()=>(0,eI.welcomeScreenViewed)(t,i),modalKey:"Guild Welcome Screen Modal"}),null)}renderThreadSidebar(){let e;let{channel:t,section:n,channelSidebarState:l,guildSidebarState:s,nsfwAgree:i,nsfwAllowed:r,width:u}=this.props;if(null==s&&null==l)return null;if(n===eY.ChannelSections.SIDEBAR_CHAT&&null!=l){if((null==t?void 0:t.isNSFW())&&(!r||!i))return null;switch(l.type){case ed.SidebarType.CREATE_THREAD:if(null==t?void 0:t.isForumLikeChannel())return null;e=(0,a.jsx)(eh.default,{parentChannelId:l.parentChannelId,parentMessageId:l.parentMessageId,location:l.location});break;case ed.SidebarType.VIEW_THREAD:let n=(null==t?void 0:t.isForumLikeChannel())?w.default:eC.default;e=(0,a.jsx)(n,{channelId:l.channelId});break;case ed.SidebarType.VIEW_CHANNEL:case ed.SidebarType.VIEW_MESSAGE_REQUEST:default:return null}}if(null!=s&&null==e){if(s.type===ed.GuildSidebarType.GUILD_MEMBER_MOD_VIEW){let{guildId:e,userId:t}=s.details;return(0,a.jsx)("div",{style:{width:eY.DEFAULT_CHAT_SIDEBAR_WIDTH},children:(0,a.jsx)(V.default,{guildId:e,userId:t,onClose:()=>eo.default.closeGuildSidebar(e)})})}else return null}if(null==e)return null;let o=(null==t?void 0:t.type)!=null&&eY.ChannelTypesSets.GUILD_THREADS_ONLY.has(t.type)?528:450,d=u-eY.CHANNEL_SIDEBAR_WIDTH-o;return(0,a.jsx)(eV.default,{sidebarType:(null==t?void 0:t.type)!=null&&eY.ChannelTypesSets.GUILD_THREADS_ONLY.has(t.type)?eV.ChatSidebarType.PostSidebar:eV.ChatSidebarType.ThreadSidebar,maxWidth:d,onWidthChange:this.handleThreadSidebarResize,children:e})}render(){let{channel:e,guild:t,formattedChannelName:n,showCall:l,isUnavailable:s,layout:r,section:u,hasModalOpen:o,guildSidebarState:d}=this.props,{threadSidebarWidth:c,isThreadSidebarFloating:f}=this.state;if(s)return(0,a.jsx)(eG.default,{});if(null==e)return(0,a.jsx)(eW.default,{channelId:this.props.channelId});let h=u===eY.ChannelSections.SIDEBAR_CHAT,p=null!=d&&!h,m=!e.isForumLikeChannel()&&!o,E=null==t?void 0:t.name;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.AppPageTitle,{location:E,subsection:null!=n?n:void 0}),(0,a.jsxs)("div",{className:i(eQ.chat,{[eQ.threadSidebarOpen]:h||p,[eQ.threadSidebarFloating]:h&&f}),children:[m?(0,a.jsx)(S.default,{style:{right:h?c:void 0},className:eQ.uploadArea,channel:e,draftType:eA.DraftType.ChannelMessage}):null,l?null:this.renderHeaderBar(),this.renderCall(),this.renderEmbeddedActivityPanel(),(0,a.jsxs)("div",{className:i(eQ.content,{[eQ.noChat]:r===eY.ChannelLayouts.NO_CHAT}),children:[(0,a.jsx)(eB.default,{children:this.renderChat()}),this.renderSidebar()]})]}),this.renderThreadSidebar(),(0,a.jsx)(Y.default,{})]})}constructor(...e){super(...e),this.state={topicExpanded:!1,threadSidebarWidth:void 0,isThreadSidebarFloating:!1},this.handleTitleParentClick=()=>{let{parentChannel:e}=this.props;null!=e&&(0,er.transitionToChannel)(e.id)},this._handleContextMenu=(e,t)=>{switch(t.type){case eY.ChannelTypes.GUILD_VOICE:case eY.ChannelTypes.GUILD_ANNOUNCEMENT:case eY.ChannelTypes.GUILD_TEXT:case eY.ChannelTypes.GUILD_FORUM:case eY.ChannelTypes.GUILD_MEDIA:this.openChannelContextMenu(e,t);break;case eY.ChannelTypes.ANNOUNCEMENT_THREAD:case eY.ChannelTypes.PUBLIC_THREAD:case eY.ChannelTypes.PRIVATE_THREAD:this.openThreadContextMenu(e,t);break;case eY.ChannelTypes.DM:this.openDMContextMenu(e,t)}},this.handleContextMenu=e=>{u(null!=this.props.channel,"Missing channel in Channel.handleContextMenu"),this._handleContextMenu(e,this.props.channel)},this.handleParentContextMenu=e=>{u(null!=this.props.parentChannel,"Missing parentChannel in Channel.handleParentContextMenu"),this._handleContextMenu(e,this.props.parentChannel)},this.handleThreadSidebarResize=(e,t)=>{this.setState({threadSidebarWidth:e,isThreadSidebarFloating:t})},this.openUserProfile=()=>{let{channel:e}=this.props;u(null==e?void 0:e.isPrivate(),"Missing private channel in Channel.openUserProfile"),(0,eS.openUserProfileModal)({userId:e.getRecipientId(),guildId:e.guild_id,channelId:e.id,analyticsLocation:{section:eY.AnalyticsSections.CHANNEL_HEADER}})},this.renderClipsEnabledIndicatorToolbarItem=()=>{let{inCall:e,voiceChannel:t}=this.props;return e?(0,a.jsx)(y.default,{channelId:null!=t?t.id:null}):null},this.renderStreamQualityLiveIndicatorToolbarItem=()=>{let{selectedParticipant:e}=this.props;return(null==e?void 0:e.type)!==eK.ParticipantTypes.STREAM?null:(0,a.jsx)(F.default,{size:eU.default.Sizes.LARGE,participant:e,showQuality:!0},"live-indicator")},this.renderHeaderToolbar=()=>{let{channel:e,parentChannel:t,isLurking:n,showCall:l}=this.props;u(null!=e,"Missing channel in Channel.renderHeaderToolbar");let s=[];if(e.isSystemDM())return s;switch(e.type){case eY.ChannelTypes.GUILD_STAGE_VOICE:case eY.ChannelTypes.GUILD_VOICE:break;case eY.ChannelTypes.DM:s.push(this.renderClipsEnabledIndicatorToolbarItem()),s.push(this.renderStreamQualityLiveIndicatorToolbarItem()),s.push((0,a.jsx)($.default,{channel:e},"calls")),s.push((0,a.jsx)(Z.default,{channel:e},"pins")),s.push((0,a.jsx)(ee.default,{channel:e,tooltip:eq.default.Messages.GROUP_DM_ADD_FRIENDS},"invite")),s.push((0,a.jsx)(et.default,{channel:e,showCall:l},"profile"));break;case eY.ChannelTypes.GROUP_DM:if(s.push(this.renderClipsEnabledIndicatorToolbarItem()),s.push(this.renderStreamQualityLiveIndicatorToolbarItem()),s.push((0,a.jsx)($.default,{channel:e},"calls")),s.push((0,a.jsx)(Z.default,{channel:e},"pins")),!e.isManaged()){let t=eq.default.Messages.GROUP_DM_ADD_FRIENDS;s.push((0,a.jsx)(ee.default,{channel:e,tooltip:t},"invite"))}s.push((0,a.jsx)(z.default,{channelId:e.id},"members"));break;case eY.ChannelTypes.ANNOUNCEMENT_THREAD:case eY.ChannelTypes.PRIVATE_THREAD:case eY.ChannelTypes.PUBLIC_THREAD:null!=t&&!t.isForumLikeChannel()&&s.push((0,a.jsx)(ep.default,{channel:t},"browser")),e.isVocalThread()&&s.push((0,a.jsx)(en.default,{channel:e},"thread-call")),s.push((0,a.jsx)(em.default,{channel:e},"notifications")),s.push((0,a.jsx)(Z.default,{channel:e},"pins")),!e.isArchivedThread()&&s.push((0,a.jsx)(z.default,{channelId:e.id},"members")),null!=t&&(0,v.canSeeChannelSummaries)(e)&&s.push((0,a.jsx)(X.default,{channel:e},"summaries")),s.push((0,a.jsx)(eE.default,{channel:e},"threads-overflow"));break;case eY.ChannelTypes.GUILD_ANNOUNCEMENT:case eY.ChannelTypes.GUILD_TEXT:s.push((0,a.jsx)(ep.default,{channel:e},"browser")),!n&&s.push((0,a.jsx)(K.default,{channel:e},"notifications")),s.push((0,a.jsx)(Z.default,{channel:e},"pins")),s.push((0,a.jsx)(z.default,{channelId:e.id},"members")),(0,v.canSeeChannelSummaries)(e)&&s.push((0,a.jsx)(X.default,{channel:e},"summaries"));break;case eY.ChannelTypes.GUILD_FORUM:case eY.ChannelTypes.GUILD_MEDIA:!n&&(s.push((0,a.jsx)(J.default,{channel:e},"forum-onboarding")),s.push((0,a.jsx)(K.default,{channel:e},"notifications"))),!__OVERLAY__&&s.push((0,a.jsx)(z.default,{channelId:e.id},"members"));break;case eY.ChannelTypes.GUILD_DIRECTORY:s.push((0,a.jsx)(z.default,{channelId:e.id},"members"))}return s},this.renderMobileToolbar=()=>{let{channel:e}=this.props;u(null!=e,"Missing channel in Channel.renderHeaderToolbar");let t=[];if(e.isSystemDM())return t;switch(e.type){case eY.ChannelTypes.GUILD_STAGE_VOICE:case eY.ChannelTypes.GUILD_VOICE:case eY.ChannelTypes.DM:break;case eY.ChannelTypes.GROUP_DM:t.push((0,a.jsx)(z.default,{channelId:e.id},"members"));break;case eY.ChannelTypes.ANNOUNCEMENT_THREAD:case eY.ChannelTypes.PRIVATE_THREAD:case eY.ChannelTypes.PUBLIC_THREAD:!e.isArchivedThread()&&t.push((0,a.jsx)(z.default,{channelId:e.id},"members"));break;case eY.ChannelTypes.GUILD_ANNOUNCEMENT:case eY.ChannelTypes.GUILD_TEXT:case eY.ChannelTypes.GUILD_FORUM:case eY.ChannelTypes.GUILD_MEDIA:case eY.ChannelTypes.GUILD_DIRECTORY:t.push((0,a.jsx)(z.default,{channelId:e.id},"members"))}return t},this.renderFollowButton=()=>{let{showFollowButton:e,channel:t}=this.props;return e?(0,a.jsx)(m.Button,{size:m.Button.Sizes.MIN,color:m.Button.Colors.PRIMARY,className:eQ.followButton,onClick:()=>(0,m.openModalLazy)(async()=>{let{default:e}=await n.el("996177").then(n.bind(n,"996177"));return n=>(0,a.jsx)(e,{channel:t,...n})}),children:eq.default.Messages.FOLLOW}):null},this.renderHeaderBar=()=>{let{channel:e,channelName:t,parentChannel:n,guild:l,guildId:s,showCall:r,hasVideo:o,channelEmojiLeftOfIcon:d,headerGuildBreadcrumbPosition:c}=this.props;u(null!=e,"Missing channel in Channel.renderHeaderBar"),u(null!=t,"Should not be null if channel is not null.");let f=e.isDM()&&!e.isSystemDM()?this.openUserProfile:void 0,h=(null==n?void 0:n.guild_id)!=null&&(null==n?void 0:n.id)!=null?this.handleTitleParentClick:void 0;return(0,a.jsxs)(q.default,{guildId:s,channelId:e.id,channelType:e.type,hideSearch:e.isDirectory(),toolbar:this.renderHeaderToolbar(),mobileToolbar:this.renderMobileToolbar(),className:i(eQ.title,o&&r?(0,ew.getThemeClass)(eY.ThemeTypes.DARK):null),transparent:r,"aria-label":eq.default.Messages.CHANNEL_HEADER_BAR_A11Y_LABEL,children:["left"===c&&(0,a.jsx)(Q.HeaderGuildBreadcrumb,{channel:e,guild:l,caretPosition:"right"}),(0,Q.renderTitle)({channel:e,channelName:t,parentChannel:n,guild:l,hasVideo:o,handleContextMenu:this.handleContextMenu,handleParentContextMenu:this.handleParentContextMenu,handleClick:f,handleParentClick:h,renderFollowButton:this.renderFollowButton,channelEmojiLeftOfIcon:d}),"right"===c&&(0,a.jsx)(Q.HeaderGuildBreadcrumb,{channel:e,guild:l,caretPosition:"left"}),(0,Q.renderTopic)(e,l)]},"header-".concat(e.id))}}}let e1=(0,I.default)(e0);var e2=l.memo(function(e){var t;let{providedChannel:n}=e,[s,i]=l.useState(null),r=(0,f.useStateFromStores)([ey.default],()=>ey.default.getChannelId()),u=(0,f.useStateFromStores)([ey.default],()=>ey.default.getVoiceChannelId()),o=(0,f.useStateFromStores)([eN.default],()=>null!=n?n:eN.default.getChannel(r),[r,n]),m=(0,f.useStateFromStores)([eN.default],()=>eN.default.getChannel(u),[u]),E=null==o?void 0:o.parent_id,C=(0,f.useStateFromStores)([eN.default],()=>eN.default.getChannel(E),[E]),g=(0,f.useStateFromStores)([ej.default],()=>ej.default.getGuild(null==o?void 0:o.guild_id),[o]),{needSubscriptionToAccess:S}=(0,H.default)(null!==(t=null==o?void 0:o.id)&&void 0!==t?t:void 0),_=(0,f.useStateFromStores)([j.default],()=>{let e=null!=r?j.default.getParticipants(r):[],t=null!=r?j.default.getActivityParticipants(r):[];return e.length-t.length>0},[r]),I=(0,f.useStateFromStores)([A.default],()=>{var e;return A.default.getSelfEmbeddedActivityForChannel(null!==(e=null==o?void 0:o.id)&&void 0!==e?e:"")}),M=(0,f.useStateFromStores)([A.default],()=>A.default.getActivityPanelMode()),L=null!=I&&!(0,R.default)(null==o?void 0:o.id)&&M===ez.ActivityPanelModes.PANEL,O=(0,f.useStateFromStores)([eD.default],()=>null!=o&&o.isVocalThread()&&!d.isEmpty(eD.default.getVoiceStatesForChannel(o.id)),[o]),y=(null==o?void 0:o.isGuildVocal())||L||_||O,{welcomeModalChannelId:P}=(0,c.useLocation)(),b=(0,f.useStateFromStores)([es.default],()=>null!=o&&es.default.isLurking(o.guild_id),[o]),D=(0,f.useStateFromStores)([eT.default],()=>eT.default.hasSeen(null==o?void 0:o.guild_id,b),[o,b]),w=(0,f.useStateFromStores)([j.default,A.default],()=>null!=A.default.getConnectedActivityChannelId()&&A.default.getActivityPanelMode()===ez.ActivityPanelModes.PANEL?A.default.getFocusedLayout()===ez.FocusedActivityLayouts.NO_CHAT?eY.ChannelLayouts.NO_CHAT:eY.ChannelLayouts.NORMAL:null!=r?j.default.getLayout(r):eY.ChannelLayouts.NORMAL,[r]),F=(0,f.useStateFromStores)([j.default],()=>null!=o?j.default.getSelectedParticipant(o.id):null),k=(0,f.useStateFromStores)([eb.default],()=>eb.default.getCurrentUser()),V=(0,ea.default)(g),B=(0,ev.default)(P,null==g?void 0:g.id),{section:G,channelSidebarState:W}=(0,f.useStateFromStoresObject)([ex.default],()=>({section:ex.default.getSection(r,null==o?void 0:o.isDM()),channelSidebarState:ex.default.getSidebarState(r)}),[r,o]),Y=null==g?void 0:g.id,z=(0,f.useStateFromStores)([ex.default],()=>ex.default.getGuildSidebarState(Y),[Y]),K=(0,f.useStateFromStores)([eP.default],()=>eP.default.getGuildId()),Z=K===eY.FAVORITES,X=(0,eF.default)(o),J=(0,eF.default)(o,!0),q=null!=o&&u===o.id,Q=null!=o&&o.isGuildStageVoice();l.useEffect(()=>{var e,t,n;let a=(0,ei.getHistory)();if((null==a?void 0:null===(e=a.location)||void 0===e?void 0:e.state)===eJ.STAGE_INVITE_STATE_KEY){let{channelId:e}=null!==(n=(0,el.tryParseChannelPath)(null==a?void 0:null===(t=a.location)||void 0===t?void 0:t.pathname))&&void 0!==n?n:{};null!=e&&i(e)}},[]),l.useEffect(()=>{null!=s&&null!=o&&Q&&o.id===s&&!q&&((0,ec.connectAndOpen)(o),i(null))},[s,Q]);let $=(0,v.useChannelSummariesExperiment)(o);l.useEffect(()=>{null!=o&&o.isPrivate()&&N.ActivitiesInGdmExperiment.trackExposure({location:"781dc9_1"})},[o]);let ee=null!=o&&o.isPrivate(),et=(0,x.default)(ee),en=(0,x.default)(null==o?void 0:o.id);l.useEffect(()=>{let e=et&&!ee,t=et&&ee&&(null==o?void 0:o.id)!==en;(e||t)&&(0,U.markDismissibleContentAsDismissed)(h.DismissibleContent.ACTIVITY_GDM_CALL_TOOLTIP,{dismissAction:eZ.ContentDismissActionType.AUTO})},[null==o?void 0:o.id,en,ee,et]);let{left:er}=T.ChannelEmojisExperiment.useExperiment({location:"781dc9_2"},{autoTrackExposure:!1}),eu=(0,p.useHasAnyModalOpen)();return(0,a.jsx)(e1,{guildId:null==o?void 0:o.guild_id,channelId:r,channel:o,channelName:X,formattedChannelName:J,parentChannel:C,voiceChannel:m,layout:w,needSubscriptionToAccess:S,isLurking:b,hasModalOpen:eu,section:G,channelSidebarState:W,guildSidebarState:z,guild:g,searchId:(0,f.useStateFromStores)([eO.default],()=>eO.default.getCurrentSearchId()),showCall:!S&&y,nsfwAgree:(0,f.useStateFromStores)([eR.default],()=>eR.default.didAgree(null==o?void 0:o.guild_id)),isMobile:(0,f.useStateFromStores)([eL.default],()=>(null==o?void 0:o.type)===eY.ChannelTypes.DM&&eL.default.isMobileOnline(o.getRecipientId()),[o]),isUnavailable:(0,f.useStateFromStores)([eM.default],()=>(null==o?void 0:o.guild_id)!=null&&eM.default.isUnavailable(o.guild_id),[o]),showRealNameModal:V,showWelcomeModal:!D&&B,showFollowButton:(null==o?void 0:o.type)===eY.ChannelTypes.GUILD_ANNOUNCEMENT&&(null==g?void 0:g.hasFeature(eY.GuildFeatures.NEWS))||!1,...(0,f.useStateFromStoresObject)([eD.default],()=>({hasVideo:null!=o&&eD.default.hasVideo(o.id)}),[o]),inCall:q,selectedParticipant:F,nsfwAllowed:(null==k?void 0:k.nsfwAllowed)===!0,showChannelSummaries:$,channelEmojiLeftOfIcon:er,headerGuildBreadcrumbPosition:Z?"left":"right"})})},681393:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var l=n("757245"),s=n("703648");function i(e){let{children:t}=e;return(0,a.jsxs)("div",{className:s.container,children:[(0,a.jsx)("div",{className:s.chatContainer,children:t}),(0,a.jsx)("div",{className:s.overlayContainer,children:(0,a.jsx)("div",{className:s.activityActionBarContainer,children:(0,a.jsx)(l.default,{})})})]})}},61918:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}}),n("222007"),n("808653");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n.n(r),o=n("974667"),d=n("394846"),c=n("446674"),f=n("233736"),h=n("77078"),p=n("272030"),m=n("666020"),E=n("352674"),C=n("888503"),g=n("206230"),S=n("716241"),_=n("521803"),I=n("95039"),T=n("405645"),v=n("12896"),x=n("506885"),N=n("981601"),A=n("19766"),M=n("305961"),R=n("191542"),j=n("697218"),L=n("476765"),O=n("826684"),y=n("483093"),P=n("659500"),b=n("449008"),D=n("158998"),U=n("50885"),w=n("49111"),F=n("782340"),k=n("881235");let V=U.default.getEnableHardwareAcceleration(),B=44+C.AVATAR_DECORATION_PADDING,H={origin:{x:38,y:11},targetWidth:232,targetHeight:40,offset:{x:0,y:0}};class G extends l.Component{shouldComponentUpdate(e){return!(0,f.default)(this.props,e,["channelId"])}render(){let{colorString:e,colorRoleName:t,isOwner:n,nick:l,user:s,currentUser:i,activities:r,applicationStream:u,status:o,channel:c,guildId:f,isTyping:p,isMobileOnline:m,premiumSince:E,...g}=this.props,S=null!=E?new Date(E):null;return(0,a.jsx)(h.Popout,{preload:()=>(0,x.default)(s.id,s.getAvatarURL(f,80),{guildId:f,channelId:c.id}),renderPopout:this.renderUserPopout,position:d.isMobile?"window_center":"left",spacing:16,onShiftClick:this.handleShiftClick,children:(d,h)=>{let{isShown:E}=h;return(0,a.jsx)(C.default,{className:k.member,onContextMenu:this.renderUserContextMenu,shouldAnimateStatus:V,user:s,currentUser:i,nick:l,status:o,activities:r,applicationStream:u,isOwner:n,premiumSince:S,colorString:e,colorRoleName:t,isTyping:p,channel:c,guildId:f,isMobile:m,onClickPremiumGuildIcon:this.openGuildSubscriptionModal,selected:E,itemProps:g,...d})}})}constructor(...e){super(...e),this.renderUserContextMenu=e=>{(0,p.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("834247").then(n.bind(n,"834247"));return t=>(0,a.jsx)(e,{...t,user:this.props.user,guildId:this.props.guildId,channel:this.props.channel,showMediaItems:!0})})},this.handleShiftClick=()=>{let{user:e,channel:t}=this.props,n="@".concat(D.default.getUserTag(e,{decoration:"never"})),a="<@".concat(e.id,">");P.ComponentDispatch.dispatchToLastSubscribed(w.ComponentActions.INSERT_TEXT,{plainText:n,rawText:a}),E.default.startTyping(t.id)},this.openGuildSubscriptionModal=e=>{let{guildId:t}=this.props;null!=t&&(e.stopPropagation(),(0,I.openGuildBoostingMarketingModal)({guildId:t,location:{section:w.AnalyticsSections.MEMBER_LIST,object:w.AnalyticsObjects.BOOST_GEM_ICON}}))},this.renderUserPopout=e=>(0,a.jsx)(N.default,{...e,userId:this.props.user.id,guildId:this.props.guildId,channelId:this.props.channel.id})}}let W=l.memo(e=>{let{colorRoleId:t,...n}=e,{channel:l,user:s,index:i}=e,r=(0,o.useListItem)("".concat(i)),u=(0,c.useStateFromStores)([R.default],()=>R.default.isTyping(l.id,s.id)),d=(0,c.useStateFromStores)([j.default],()=>j.default.getCurrentUser()),f=(0,c.useStateFromStores)([M.default],()=>{var e,n;return null!=t?null===(n=M.default.getGuild(l.guild_id))||void 0===n?void 0:null===(e=n.getRole(t))||void 0===e?void 0:e.name:void 0},[l,t]);return(0,a.jsx)(G,{...n,...r,isTyping:u,currentUser:d,colorRoleName:f})}),Y=l.memo(function(e){let{id:t,title:n,count:l,guildId:s}=e,i=(0,T.useRoleIcon)({roleId:t,guildId:s,size:16});return t===w.StatusTypes.UNKNOWN?(0,a.jsx)("div",{className:k.membersGroup,children:(0,a.jsx)("div",{className:k.memberGroupsPlaceholder})}):(0,a.jsxs)(O.default,{className:k.membersGroup,children:[(0,a.jsx)(h.HiddenVisually,{children:F.default.Messages.CHANNEL_MEMBERS_A11Y_LABEL.format({title:n,count:l})}),(0,a.jsxs)("span",{"aria-hidden":!0,children:[null!=i?(0,a.jsx)(y.default,{className:k.roleIcon,...i}):null,n," — ",l]})]})});function z(e){let{index:t}=e,n=(0,o.useListItem)("".concat(t));return(0,a.jsx)(C.default,{itemProps:n})}class K extends l.Component{shouldComponentUpdate(e){return e.channel.id!==this.props.channel.id||e.version!==this.props.version||e.groups.length!==this.props.groups.length}componentDidMount(){this.updateSubscription(),this.trackMemberListViewed()}componentDidUpdate(e){e.channel.id!==this.props.channel.id&&this.updateSubscription(),this.trackMemberListViewed()}getDimensions(){let e=this._list;if(null==e)return{y:0,height:0,rowHeight:0};let{offsetHeight:t,scrollTop:n}=e.getScrollerState(),a=Math.floor(t/B);return{height:t,rowHeight:B,rowsVisible:a,y:n}}render(){let{groups:e,listId:t,channel:n}=this.props;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:k.membersListNotices,children:(0,a.jsx)(_.default,{channel:n})}),(0,a.jsx)(h.FocusJumpSection,{children:l=>(0,a.jsx)(L.UID,{children:s=>(0,a.jsx)("aside",{className:i(k.membersWrap,k.hiddenMembers),"aria-labelledby":s,children:(0,a.jsx)(h.HeadingLevel,{component:(0,a.jsx)(h.HiddenVisually,{children:(0,a.jsx)(h.H,{id:s,children:F.default.Messages.MEMBERS_LIST_LANDMARK_LABEL.format({channel:n.name})})}),children:(0,a.jsx)(o.ListNavigatorContainer,{children:n=>{let{ref:s,role:r,...u}=n;return(0,a.jsx)(h.List,{innerRole:r,innerAriaLabel:F.default.Messages.MEMBERS,ref:e=>{var t;this._list=e,this.props.listRef.current=e,s.current=null!==(t=null==e?void 0:e.getScrollerNode())&&void 0!==t?t:null},className:i(k.members,{[k.fullWidth]:d.isMobile}),paddingTop:0,sectionHeight:40,rowHeight:B,renderSection:this.renderSection,renderRow:this.renderRow,sections:e.map(e=>e.count),onScroll:this.handleScroll,fade:!0,customTheme:!0,...u,...l},t)}})})})})})]})}constructor(...e){super(...e),this._list=null,this.setList=e=>{this._list=e,this.props.listRef.current=e},this.renderSection=e=>{let{section:t}=e,{groups:n,channel:s}=this.props,i=n[t];return 0===t?(0,a.jsx)(v.default,{tutorialId:"whos-online",position:"left",inlineSpecs:H,children:(0,a.jsx)(Y,{...i,guildId:s.guild_id})},"section-".concat(t)):(0,l.createElement)(Y,{...i,key:"section-".concat(t),guildId:s.guild_id})},this.getRowProps=e=>{let{groups:t,rows:n}=this.props,a=t[e.section];if(null==a)return null;let{index:l}=a;return null==l||"row"!==e.type?null:n[l+1+e.row]},this.renderRow=e=>{let{section:t,row:n,rowIndex:l}=e,{channel:s}=this.props,i=this.getRowProps(e);if(null==i||i.type!==A.MemberListRowTypes.MEMBER||!("user"in i))return(0,a.jsx)(z,{index:l},"placeholder-".concat(t,":").concat(n));{let{colorString:e,colorRoleId:t,user:n,status:r,isOwner:u,isMobileOnline:o,nick:d,activities:c,applicationStream:f,premiumSince:h}=i;return(0,a.jsx)(W,{colorString:e,colorRoleId:t,user:n,status:r,isOwner:u,nick:d,activities:c,applicationStream:f,channel:s,guildId:s.guild_id,premiumSince:h,isMobileOnline:o,index:l},"member-".concat(i.user.id))}},this.handleScroll=()=>{this.updateSubscription()},this.updateSubscription=u.debounce(()=>{let e=this._list;if(null==e)return;let{channel:t}=this.props,{rowHeight:n,y:a,height:l}=this.getDimensions();(0,m.subscribeChannelDimensions)({guildId:t.guild_id,channelId:t.id,y:a,height:l,rowHeight:n})},50),this.trackMemberListViewed=()=>{var e;if(this.lastReportedAnalyticsChannel===this.props.channel.id)return;let t=null===(e=this._list)||void 0===e?void 0:e.getItems(),{rowsVisible:n}=this.getDimensions();if(void 0===n||0===n||null==t)return;let a=t.map(e=>this.getRowProps(e)).slice(0,n+1).filter(b.isNotNullish);if(0===a.length)return;let l=a.reduce((e,t)=>t.type!==A.MemberListRowTypes.MEMBER?e:(e.num_users_visible++,t.isMobileOnline&&e.num_users_visible_with_mobile_indicator++,null!=t.activities&&t.activities.length>0&&(e.num_users_visible_with_activity++,t.activities.some(e=>e.type===w.ActivityTypes.PLAYING)&&e.num_users_visible_with_game_activity++),null!=t.user.avatarDecoration&&e.num_users_visible_with_avatar_decoration++,e),{num_users_visible:0,num_users_visible_with_mobile_indicator:0,num_users_visible_with_game_activity:0,num_users_visible_with_activity:0,num_users_visible_with_avatar_decoration:0});this.lastReportedAnalyticsChannel=this.props.channel.id,S.default.trackWithMetadata(w.AnalyticEvents.MEMBER_LIST_VIEWED,{...l})}}}function Z(e){let{channel:t,className:n}=e,s=(0,c.useStateFromStores)([g.default],()=>g.default.keyboardModeEnabled),r=(0,c.useStateFromStoresObject)([A.default],()=>A.default.getProps(t.guild_id,t.id)),{rows:u,groups:d}=r,f=l.useRef(null),h=l.useCallback((e,t)=>{let n=f.current;if(null==n)return;let a=parseInt(t,10),[l,s]=n.getSectionRowFromIndex(a),i=0===l&&0===s?B:0;n.scrollToIndex({section:l,row:s,padding:i,callback:()=>{requestAnimationFrame(()=>{var t;return null===(t=document.querySelector(e))||void 0===t?void 0:t.focus({preventScroll:!0})})}})},[]),p=l.useCallback(()=>new Promise(e=>{let t=f.current;if(null==t)return e();t.scrollToTop({callback:()=>requestAnimationFrame(()=>e())})}),[]),m=l.useCallback(()=>new Promise(e=>{let t=f.current;if(null==t)return e();t.scrollToBottom({callback(){requestAnimationFrame(()=>setTimeout(e,100))}})}),[]),E=(0,o.default)({id:"members-".concat(t.id),setFocus:h,isEnabled:s,scrollToStart:p,scrollToEnd:m});return(0,a.jsx)("div",{className:i(k.container,n),children:(0,a.jsx)(o.ListNavigatorProvider,{navigator:E,children:(0,a.jsx)(K,{...e,...r,groups:d,rows:u,listRef:f})})})}function X(e){let{channel:t,className:n}=e,s=l.useDeferredValue(t);return l.useMemo(()=>(0,a.jsx)(Z,{channel:s,className:n}),[s,n])}},656612:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983"),l=n("884691"),s=n("819855"),i=n("77078"),r=n("841098"),u=n("716241"),o=n("539938"),d=n("593195"),c=n("49111"),f=n("782340"),h=n("845871"),p=n("242412"),m=n("846770"),E=()=>{let e=(0,r.default)();l.useEffect(()=>{u.default.trackWithMetadata(c.AnalyticEvents.GUILD_OUTAGE_VIEWED,{})},[]);let t=(0,s.isThemeDark)(e)?p:m;return(0,a.jsxs)("div",{className:h.container,children:[(0,a.jsxs)(o.default,{toolbar:(0,a.jsx)(l.Fragment,{}),children:[(0,a.jsx)(o.default.Icon,{icon:d.default,"aria-hidden":!0}),(0,a.jsx)(o.default.Title,{children:f.default.Messages.GUILD_UNAVAILABLE_HEADER})]}),(0,a.jsxs)("div",{className:h.content,children:[(0,a.jsx)("img",{alt:"",className:h.splashImage,src:t}),(0,a.jsx)(i.Heading,{className:h.splashHeader,variant:"heading-lg/medium",children:f.default.Messages.GUILD_UNAVAILABLE_TITLE}),(0,a.jsx)(i.Text,{className:h.splashText,variant:"text-md/normal",children:f.default.Messages.GUILD_UNAVAILABLE_BODY})]})]})}},624027:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983"),l=n("884691"),s=n("394846"),i=n("446674"),r=n("77078"),u=n("120252"),o=n("161778"),d=n("162771"),c=n("941886"),f=n("664336"),h=n("49111"),p=n("782340"),m=n("889175");function E(e){let t,{channelId:E}=e;l.useEffect(()=>{u.default.loadThread(E)});let C=(0,i.useStateFromStores)([d.default],()=>d.default.getGuildId()),g=C===h.FAVORITES,S=(0,i.useStateFromStores)([o.default],()=>o.default.theme);return t=g?(0,a.jsx)(c.EmptyStateText,{note:p.default.Messages.FAVORITES_EMPTY_BODY,children:p.default.Messages.FAVORITES_EMPTY_TITLE}):null!=E?(0,a.jsx)(r.Spinner,{type:r.Spinner.Type.SPINNING_CIRCLE}):(0,a.jsx)(c.EmptyStateText,{note:p.default.Messages.CHANNELS_UNAVAILABLE_BODY,children:p.default.Messages.CHANNELS_UNAVAILABLE_TITLE}),(0,a.jsxs)("div",{className:m.noChannel,children:[s.isMobile&&(0,a.jsx)(f.default,{children:(0,a.jsx)(l.Fragment,{})}),(0,a.jsxs)(c.default,{theme:S,children:[(0,a.jsx)(c.EmptyStateImage,{darkSrc:g?n("41912"):n("605834"),lightSrc:g?n("706692"):n("976585"),width:272,height:222}),t]})]})}},30874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("77078"),s=n("263024"),i=n("300322"),r=n("782340");function u(e){var t;let n=(0,i.useCanManageThread)(e),u=(0,i.useCanUnarchiveThread)(e),o=e.isArchivedThread();if(o?u:n)return(null===(t=e.threadMetadata)||void 0===t?void 0:t.archived)?(0,a.jsx)(l.MenuItem,{id:"unarchive-thread",label:e.isForumPost()?r.default.Messages.UNARCHIVE_FORUM_POST:r.default.Messages.UNARCHIVE_THREAD,action:()=>s.default.unarchiveThread(e,!1)}):(0,a.jsx)(l.MenuItem,{id:"archive-thread",label:e.isForumPost()?r.default.Messages.ARCHIVE_FORUM_POST:r.default.Messages.ARCHIVE_THREAD,action:()=>s.default.archiveThread(e,!1)})}},13777:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983"),l=n("884691"),s=n("917351"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("848848"),d=n("300322"),c=n("800762"),f=n("242740"),h=n("782340");function p(e){let t=(0,d.useCanJoinThreadVoice)(e),n=(0,r.useStateFromStores)([c.default],()=>c.default.isInChannel(e.id)),s=(0,r.useStateFromStores)([c.default],()=>!i.isEmpty(c.default.getVoiceStatesForChannel(e.id))),{needSubscriptionToAccess:p}=(0,o.default)(e.id),m=l.useCallback(()=>{f.default.handleVoiceConnect({channel:e,connected:n,needSubscriptionToAccess:p,locked:!1})},[e,n,p]);return n||!t?null:(0,a.jsx)(u.MenuItem,{id:"join-thread-voice",label:s?h.default.Messages.JOIN_CALL:h.default.Messages.START_CALL,action:m})}},37774:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("77078"),s=n("263024"),i=n("300322"),r=n("782340");function u(e){let t=(0,i.useIsThreadModerator)(e),n=e.isLockedThread();if(t)return n?(0,a.jsx)(l.MenuItem,{id:"unlock-thread",label:e.isForumPost()?r.default.Messages.UNLOCK_FORUM_POST:r.default.Messages.UNLOCK_THREAD,action:()=>s.default.unlockThread(e)}):(0,a.jsx)(l.MenuItem,{id:"lock-thread",label:e.isForumPost()?r.default.Messages.LOCK_FORUM_POST:r.default.Messages.LOCK_THREAD,action:()=>s.default.lockThread(e)})}},117399:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("477566"),r=n("680986"),u=n("263024"),o=n("300322"),d=n("42203"),c=n("724210"),f=n("782340");function h(e){let t=(0,l.useStateFromStores)([d.default],()=>d.default.getChannel(e.parent_id)),n=(0,o.useIsThreadModerator)(e),h=(0,r.useExistingPin)(e);return(null==t?void 0:t.isForumLikeChannel())&&n?e.hasFlag(c.ChannelFlags.PINNED)?(0,a.jsx)(s.MenuItem,{id:"unpin-thread",label:f.default.Messages.UNPIN_POST,action:()=>u.default.unpin(e)}):(0,a.jsx)(s.MenuItem,{id:"pin-thread",label:f.default.Messages.PIN_POST,action:function(){null!=h?i.default.show({title:f.default.Messages.FORUM_PIN_CONFIRM_TITLE,body:f.default.Messages.FORUM_PIN_CONFIRM_BODY,onConfirm:async()=>{await u.default.unpin(h),u.default.pin(e)}}):u.default.pin(e)}}):null}},400501:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("77078"),s=n("18054"),i=n("300322"),r=n("782340");function u(e){let t=(0,i.useCanManageThread)(e),n=(0,i.useIsActiveChannelOrUnarchivableThread)(e),u=(0,i.useIsNonModInLockedThread)(e);return!t||!n||u||__OVERLAY__?null:(0,a.jsx)(l.MenuItem,{id:"edit-thread",label:e.isForumPost()?r.default.Messages.EDIT_FORUM_POST:r.default.Messages.EDIT_THREAD,action:()=>{(0,l.closeAllModals)(),s.default.open(e.id)}})}},542640:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}}),n("222007");var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("272030"),r=n("430568"),u=n("385976"),o=n("404607"),d=n("680986"),c=n("300322"),f=n("42203"),h=n("953371"),p=n("782340"),m=n("208701");function E(e){let{tag:t}=e,{name:n,emojiId:s,emojiName:i}=t,o=(0,l.useStateFromStores)([u.default],()=>null!=s?u.default.getUsableCustomEmojiById(s):null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{className:m.emoji,emojiId:s,emojiName:i,animated:!!(null==o?void 0:o.animated)}),n]})}function C(e){let t=(0,l.useStateFromStores)([f.default],()=>f.default.getChannel(e),[e]),n=(0,c.useCanManageThread)(t),r=(0,l.useStateFromStores)([f.default],()=>f.default.getChannel(null==t?void 0:t.parent_id),[t]),u=(0,d.useVisibleForumTags)(r),m=(0,d.useAppliedTags)(t),C=m.length>=h.MAX_FORUM_POST_TAGS,g=(0,c.useIsActiveChannelOrUnarchivableThread)(t);if(null==t)return(0,i.closeContextMenu)(),null;if(!n||__OVERLAY__||!t.isForumPost()||(null==u?void 0:u.length)===0||!g)return null;let S=e=>{let n=new Set(m);if(n.has(e))n.delete(e);else{if(C)return;n.add(e)}let a=Array.from(n).map(e=>e.id);o.default.updateForumPostTags(t.id,a)},_=null==u?void 0:u.map(e=>{let t=m.includes(e);return(0,a.jsx)(s.MenuCheckboxItem,{id:e.id,label:(0,a.jsx)(E,{tag:e}),disabled:C&&!t,action:()=>S(e),checked:t},e.id)});return(0,a.jsx)(s.MenuItem,{id:"edit-tags",label:p.default.Messages.FORUM_TAG_POST_EDIT,children:_})}},772371:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("755624"),r=n("263024"),u=n("414833"),o=n("648564"),d=n("782340");function c(e){let t=(0,u.useThreadNotificationSetting)(e),n=(0,l.useStateFromStores)([i.default],()=>i.default.hasJoined(e.id));return n?(0,a.jsx)(s.MenuItem,{id:"thread-notifications",label:d.default.Messages.NOTIFICATION_SETTINGS,children:(0,o.getThreadNotificationOptions)().map(n=>{let{setting:l,label:i}=n;return(0,a.jsx)(s.MenuRadioItem,{group:"thread-notifications",id:"".concat(l),label:i,action:()=>r.default.setNotificationSettings(e,{flags:l}),checked:l===t},l)})}):(0,a.jsx)(s.MenuItem,{id:"notifications-disabled",label:d.default.Messages.NOTIFICATION_SETTINGS,disabled:!0})}},604656:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("77078"),s=n("263024"),i=n("300322"),r=n("49111"),u=n("782340");function o(e){var t,n;let o=(0,i.useIsThreadModerator)(e);if(!o||e.type!==r.ChannelTypes.PRIVATE_THREAD)return null;let d=null===(n=null===(t=e.threadMetadata)||void 0===t?void 0:t.invitable)||void 0===n||n;return(0,a.jsx)(l.MenuCheckboxItem,{id:"toggle-thread-invitable",label:u.default.Messages.THREAD_INVITABLE_TOGGLE_LABEL,checked:d,action:()=>s.default.setInvitable(e,!d)})}},164586:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n("77078"),o=n("716241"),d=n("945330"),c=n("599110"),f=n("49111"),h=n("782340"),p=n("832025");let m=(0,r.debounce)(o.default.trackWithMetadata,500);var E=function(e){let{guild:t,title:n,message:s,image:r,type:E,imageStyles:C,imageMarginX:g,imageMarginTop:S,trackingSource:_,undismissable:I,onDismissed:T,onClick:v,cta:x,ctaColor:N,centerText:A}=e;l.useEffect(()=>{m(f.AnalyticEvents.CHANNEL_NOTICE_VIEWED,{notice_type:E,guild_id:t.id})},[t.id,E]);let M=null;"function"==typeof x?M=x():null!=x&&(M=(0,a.jsx)(u.Button,{className:p.button,size:u.Button.Sizes.SMALL,onClick:()=>{null!=E&&c.default.track(f.AnalyticEvents.CHANNEL_NOTICE_CTA_CLICKED,{source:_,guild_id:t.id,notice_type:E}),null==v||v()},fullWidth:!0,color:N,children:x}));let R=null;"function"==typeof n?R=n():null!=n&&(R=(0,a.jsx)(u.Text,{variant:"text-md/medium",color:"header-primary",className:i(p.title,{[p.noImageTitle]:null==r},{[p.center]:A}),children:n}));let j=null!=g?"".concat(g,"px"):"16px";return(0,a.jsxs)("div",{className:p.container,children:[!0===I?null:(0,a.jsx)(u.Clickable,{onClick:()=>{o.default.trackWithMetadata(f.AnalyticEvents.CHANNEL_NOTICE_CLOSED,{notice_type:E}),null==T||T()},className:p.close,"aria-label":h.default.Messages.DISMISS,children:(0,a.jsx)(d.default,{className:p.closeIcon})}),null!=r&&(0,a.jsx)("div",{className:p.imageContainer,style:{marginTop:"".concat(S,"px"),marginLeft:j,marginRight:j},children:(0,a.jsx)("img",{className:p.image,style:C,src:r,alt:""})}),(0,a.jsxs)("div",{className:p.message,children:[R,(0,a.jsx)(u.Text,{className:i({[p.center]:A}),variant:"text-sm/normal",color:"text-muted",children:s}),M]})]})}},521803:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}}),n("424973");var a=n("37983");n("884691");var l=n("446674"),s=n("151426"),i=n("343885"),r=n("980215"),u=n("28561"),o=n("509802"),d=n("305961"),c=n("449008"),f=n("994428");function h(e){e.stopPropagation()}var p=function(e){var t;let{channel:n}=e,p=(0,l.useStateFromStores)([d.default],()=>d.default.getGuild(n.guild_id)),m=(0,r.useClydeProfilesEnabled)(p,!0,"member_list_notices");i.default.useExperiment({guildId:null!==(t=null==p?void 0:p.id)&&void 0!==t?t:"",location:"member_list_notices"});let E=[];return m&&(0,c.isNotNullish)(n.guild_id)&&E.push(s.DismissibleContent.CLYDE_AI_PERSONALITIES_NUX_MODAL),(0,a.jsx)(o.default,{contentTypes:E,groupName:f.DismissibleContentGroupName.MEMBER_LIST_HEADER,children:e=>{let{visibleContent:t,markAsDismissed:l}=e,i=(()=>{if(t===s.DismissibleContent.CLYDE_AI_PERSONALITIES_NUX_MODAL)return(0,a.jsx)(u.default,{channel:n,markAsDismissed:()=>l(f.ContentDismissActionType.UNKNOWN)});return null})();return(0,a.jsx)("div",{onContextMenu:h,children:i})}})}},992207:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("446674"),r=n("669491"),u=n("77078"),o=n("191145"),d=n("373469"),c=n("568307"),f=n("522049"),h=n("956089"),p=n("386045"),m=n("99795"),E=n("782340"),C=n("75606"),g=e=>{let{className:t,channelId:n}=e,l=(0,i.useStateFromStores)([d.default,o.default,p.default,c.default],()=>{var e;if(null==n)return!1;let t=d.default.getCurrentUserActiveStream(),a=null===(e=c.default.getVisibleGame())||void 0===e?void 0:e.windowHandle;return null!=t&&!!p.default.getSettings().clipsEnabled||null!=a&&!!p.default.getSettings().decoupledClipsEnabled||o.default.getParticipants(n).some(e=>e.type===m.ParticipantTypes.USER&&p.default.isClipsEnabledForUser(e.user.id))});return l?(0,a.jsxs)(u.TooltipContainer,{text:E.default.Messages.CLIPS_ENABLED_VIEWER_TOOLTIP,color:u.TooltipColors.GREY,className:s(t,C.clipsEnabledIndicator),children:[(0,a.jsx)(h.IconBadge,{icon:f.default,shape:h.BadgeShapes.ROUND_LEFT,color:r.default.unsafe_rawColors.PRIMARY_500.css,className:C.clipBadgeIcon}),(0,a.jsx)(h.TextBadge,{text:E.default.Messages.CLIPS_ENABLED_BADGE,shape:h.BadgeShapes.ROUND_RIGHT,color:r.default.unsafe_rawColors.PRIMARY_500.css,className:C.clipBadgeText})]}):null}},343885:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("862205"),l=n("772051");let s=(0,a.createExperiment)({kind:"guild",id:"2023-11_clyde_ai_aa",label:"ClydeAI",defaultConfig:{experimentState:l.ClydeExperimentState.None},treatments:[{id:1,label:"Enabled (Default Off)",config:{experimentState:l.ClydeExperimentState.DefaultOff}},{id:3,label:"Enabled (Default On)",config:{experimentState:l.ClydeExperimentState.DefaultOn}},{id:4,label:"Coming Soon",config:{experimentState:l.ClydeExperimentState.ComingSoon}},{id:5,label:"Clyde Profiles",config:{experimentState:l.ClydeExperimentState.ClydeProfiles}}]});var i=s},28561:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}}),n("222007");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("77078"),r=n("545158"),u=n("206230"),o=n("164586"),d=n("713135"),c=n("305961"),f=n("145131"),h=n("449008"),p=n("701909"),m=n("335189"),E=n("190045"),C=n("680894"),g=n("49111"),S=n("994428"),_=n("782340"),I=n("400496"),T=n("382719"),v=n("559016");function x(e){let{channel:t,markAsDismissed:n}=e,[x,N]=l.useState(!0),A=(0,s.useStateFromStores)([u.default],()=>u.default.useReducedMotion),M=(0,s.useStateFromStores)([c.default],()=>c.default.getGuild(t.guild_id)),R=(0,s.useStateFromStores)([d.default],()=>{var e;return d.default.getGuildMemberProfile(C.CLYDE_AI_USER_ID,null!==(e=null==M?void 0:M.id)&&void 0!==e?e:"")}),j=()=>{var e;(0,E.default)(null!==(e=null==M?void 0:M.id)&&void 0!==e?e:""),n(S.ContentDismissActionType.UNKNOWN)},L=()=>{(0,r.default)(p.default.getArticleURL(g.HelpdeskArticles.CLYDE_AI),!0)};return(l.useEffect(()=>{let e=async()=>{if((0,h.isNotNullish)(M)&&null==R)try{await (0,m.addClydeGuildMember)(M.id),N(!1)}catch{}else N(!1)};e()},[R,M]),null==M)?null:(0,a.jsx)(o.default,{type:g.ChannelNoticeTypes.CLYDE_PERSONALITIES_NUX,image:A?T:v,imageStyles:{borderRadius:"50%"},imageMarginTop:8,guild:M,onDismissed:()=>n(S.ContentDismissActionType.UNKNOWN),centerText:!0,imageMarginX:64,title:_.default.Messages.CLYDE_PERSONALITY_NUX_HEADER,message:_.default.Messages.CLYDE_PERSONALITY_NUX_INFO,cta:()=>(0,a.jsxs)(f.default,{grow:0,shrink:0,direction:f.default.Direction.VERTICAL,justify:f.default.Justify.START,align:f.default.Align.STRETCH,wrap:f.default.Wrap.NO_WRAP,className:I.footer,children:[(0,a.jsx)(i.Button,{type:"submit",submitting:x,color:i.Button.Colors.BRAND,onClick:j,children:_.default.Messages.CLYDE_CUSTOMIZE}),(0,a.jsx)(i.Button,{type:"button",look:i.Button.Looks.LINK,color:i.Button.Colors.LINK,onClick:L,children:_.default.Messages.LEARN_MORE})]})})}},15433:function(e,t,n){"use strict";n.r(t),n.d(t,{fetchDirectoryEntries:function(){return o}});var a=n("483366"),l=n.n(a),s=n("872717"),i=n("913144"),r=n("730647"),u=n("49111");let o=l(async e=>{try{i.default.dispatch({type:"EVENT_DIRECTORY_FETCH_START"});let t=await s.default.get({url:u.Endpoints.DIRECTORY_CHANNEL_ENTRIES(e),query:{type:r.DirectoryEntryTypes.GUILD_SCHEDULED_EVENT}});i.default.dispatch({type:"EVENT_DIRECTORY_FETCH_SUCCESS",channelId:e,entries:t.body})}catch(e){i.default.dispatch({type:"EVENT_DIRECTORY_FETCH_FAILURE"})}},200)},71102:function(e,t,n){"use strict";n.r(t),n.d(t,{fetchDirectoryEntries:function(){return f},fetchDirectoryCounts:function(){return h},addDirectoryGuildEntry:function(){return p},removeDirectoryGuildEntry:function(){return m},searchDirectoryEntries:function(){return E},clearDirectorySearch:function(){return C},updateDirectoryEntry:function(){return g},selectDirectoryCategory:function(){return S},fetchGuildEntriesForIds:function(){return _}});var a=n("483366"),l=n.n(a),s=n("759843"),i=n("872717"),r=n("913144"),u=n("840707"),o=n("393467"),d=n("730647"),c=n("49111");let f=l(async(e,t)=>{try{r.default.dispatch({type:"GUILD_DIRECTORY_FETCH_START"});let n=await i.default.get({url:c.Endpoints.DIRECTORY_CHANNEL_ENTRIES(e),query:{category_id:t}});r.default.dispatch({type:"GUILD_DIRECTORY_FETCH_SUCCESS",channelId:e,entries:n.body})}catch(e){r.default.dispatch({type:"GUILD_DIRECTORY_FETCH_FAILURE"})}},200),h=l(async e=>{try{let t=await i.default.get({url:c.Endpoints.DIRECTORY_CHANNEL_CATEGORY_COUNTS(e)});r.default.dispatch({type:"GUILD_DIRECTORY_COUNTS_FETCH_SUCCESS",channelId:e,counts:t.body})}catch(e){}},200);async function p(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.DirectoryEntryCategories.UNCATEGORIZED,l=await u.default.post({url:c.Endpoints.DIRECTORY_CHANNEL_ENTRY(e,t),body:{description:n,primary_category_id:a},trackedActionData:{event:s.NetworkActionNames.DIRECTORY_GUILD_ENTRY_CREATE,properties:{directory_channel_id:e,guild_id:t,primary_category_id:a}}});r.default.dispatch({type:"GUILD_DIRECTORY_ENTRY_CREATE",channelId:e,entry:l.body})}function m(e,t){u.default.delete({url:c.Endpoints.DIRECTORY_CHANNEL_ENTRY(e,t),trackedActionData:{event:s.NetworkActionNames.DIRECTORY_GUILD_ENTRY_DELETE,properties:{directory_channel_id:e,guild_id:t}}}),r.default.dispatch({type:"GUILD_DIRECTORY_ENTRY_DELETE",channelId:e,guildId:t})}let E=l(async(e,t)=>{let n=o.default.shouldFetch(e,t);if(!n){r.default.dispatch({type:"GUILD_DIRECTORY_CACHED_SEARCH",channelId:e,query:t});return}try{r.default.dispatch({type:"GUILD_DIRECTORY_SEARCH_START",channelId:e,query:t});let n=await i.default.get({url:c.Endpoints.DIRECTORY_ENTRIES_SEARCH(e),query:{query:t}});r.default.dispatch({type:"GUILD_DIRECTORY_SEARCH_SUCCESS",channelId:e,query:t,results:n.body})}catch(e){r.default.dispatch({type:"GUILD_DIRECTORY_FETCH_FAILURE"})}},200),C=e=>{r.default.dispatch({type:"GUILD_DIRECTORY_SEARCH_CLEAR",channelId:e})},g=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.DirectoryEntryCategories.UNCATEGORIZED,l=await i.default.patch({url:c.Endpoints.DIRECTORY_CHANNEL_ENTRY(e,t),body:{description:n,primary_category_id:a}});r.default.dispatch({type:"GUILD_DIRECTORY_ENTRY_UPDATE",channelId:e,entry:l.body})},S=(e,t)=>{r.default.dispatch({type:"GUILD_DIRECTORY_CATEGORY_SELECT",channelId:e,categoryId:t})},_=async(e,t)=>{try{let n=await i.default.get({url:c.Endpoints.DIRECTORY_CHANNEL_LIST_BY_ID(e),query:{entity_ids:t}});r.default.dispatch({type:"GUILD_DIRECTORY_ADMIN_ENTRIES_FETCH_SUCCESS",channelId:e,entries:n.body})}catch(e){}}},393467:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}}),n("424973");var a=n("446674"),l=n("913144"),s=n("513688");let i=[],r={},u={};class o extends a.default.Store{getSearchState(e){var t;return null!==(t=r[e])&&void 0!==t?t:{mostRecentQuery:"",fetching:!1}}getSearchResults(e,t){var n,a,l;return null!==(l=null===(a=u[e])||void 0===a?void 0:null===(n=a[t])||void 0===n?void 0:n.results)&&void 0!==l?l:i}shouldFetch(e,t){var n,a;let l=null===(a=u[e])||void 0===a?void 0:null===(n=a[t])||void 0===n?void 0:n.lastSearchedAt;return null==l||Date.now()-l>12e4}}o.displayName="GuildDirectorySearchStore";var d=new o(l.default,{GUILD_DIRECTORY_SEARCH_START:function(e){let{channelId:t,query:n}=e;r[t]={fetching:!0,mostRecentQuery:n}},GUILD_DIRECTORY_SEARCH_SUCCESS:function(e){let{channelId:t,query:n,results:a}=e;r[t]={...r[t],fetching:!1};let l=[];a.forEach(e=>{let t=(0,s.guildDirectoryEntryFromServer)(e);l.push(t)}),u[t]={...u[t],[n]:{results:(0,s.orderByTotalMemberCount)(l),lastSearchedAt:Date.now()}}},GUILD_DIRECTORY_SEARCH_FAILURE:function(e){let{channelId:t}=e;r[t]={...r[t],fetching:!1}},GUILD_DIRECTORY_SEARCH_CLEAR:function(e){let{channelId:t}=e;r[t]={fetching:!1,mostRecentQuery:""}},GUILD_DIRECTORY_CACHED_SEARCH:function(e){let{channelId:t,query:n}=e;r[t]={fetching:!1,mostRecentQuery:n}},GUILD_DIRECTORY_ENTRY_DELETE:function(e){var t;let{channelId:n,guildId:a}=e,l=null===(t=r[n])||void 0===t?void 0:t.mostRecentQuery;if(null==l)return;let s=u[n][l];if(null==s)return;let i=s.results.filter(e=>e.guildId!==a);u[n]={...u[n],[r[n].mostRecentQuery]:{...s,results:i}}}})},209397:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}}),n("222007");var a=n("446674"),l=n("913144"),s=n("513688"),i=n("730647");let r=Object.freeze({}),u=!1,o={},d={},c={},f={},h={};class p extends a.default.Store{isFetching(){return u}getCurrentCategoryId(e){var t;return null!==(t=d[e])&&void 0!==t?t:i.DirectoryEntryCategories.ALL}getDirectoryEntries(e,t){var n;return null!=t?null===(n=c[e])||void 0===n?void 0:n[t]:o[e]}getDirectoryEntry(e,t){var n;return null===(n=o[e])||void 0===n?void 0:n[t]}getDirectoryAllEntriesCount(e){var t;return Object.keys(null!==(t=o[e])&&void 0!==t?t:{}).length}getDirectoryCategoryCounts(e){var t;return null!==(t=f[e])&&void 0!==t?t:r}getAdminGuildEntryIds(e){return h[e]}}p.displayName="GuildDirectoryStore";var m=new p(l.default,{GUILD_DIRECTORY_FETCH_START:function(){u=!0},GUILD_DIRECTORY_FETCH_SUCCESS:function(e){let{channelId:t,entries:n}=e;u=!1;let a={},l={};n.forEach(e=>{let t=(0,s.guildDirectoryEntryFromServer)(e);a[t.guildId]=t,null!=l[t.primaryCategoryId]?l[t.primaryCategoryId][t.guildId]=t:l[t.primaryCategoryId]={[t.guildId]:t}}),o[t]=a,c[t]=l},GUILD_DIRECTORY_FETCH_FAILURE:function(){u=!1},GUILD_DIRECTORY_ENTRY_CREATE:function(e){var t,n,a,l,r;let{channelId:u,entry:d}=e,h=(0,s.guildDirectoryEntryFromServer)(d);if(null==h||(null===(t=o[u])||void 0===t?void 0:t[h.guildId])!=null)return;o[u]={...o[u],[h.guildId]:h};let p=null!==(a=h.primaryCategoryId)&&void 0!==a?a:i.DirectoryEntryCategories.UNCATEGORIZED;if(c[u]={...c[u],[p]:{...null===(n=c[u])||void 0===n?void 0:n[p],[h.guildId]:h}},null!=f[u]){let e=null!==(r=null===(l=f[u])||void 0===l?void 0:l[p])&&void 0!==r?r:0;f[u]={...f[u],[p]:e+1}}},GUILD_DIRECTORY_ENTRY_DELETE:function(e){var t,n;let{channelId:a,guildId:l}=e,s=null===(t=o[a])||void 0===t?void 0:t[l];if(null==s)return;let i=s.primaryCategoryId,r=Object.assign({},o[a]);delete r[l],null===(n=h[a])||void 0===n||n.delete(l),h[a]=new Set(h[a]),o[a]=r;let u=Object.assign({},c[a][i]);if(delete u[l],c[a]={...c[a],[i]:u},null!=f[a]){let e=f[a][i]-1;f[a]={...f[a],[i]:e>=0?e:0}}},GUILD_DIRECTORY_ENTRY_UPDATE:function(e){var t,n,a,l,r,u,d,h,p;let{channelId:m,entry:E}=e,C=(0,s.guildDirectoryEntryFromServer)(E),g=null===(t=o[m])||void 0===t?void 0:t[C.guildId];o[m]={...o[m],[C.guildId]:{...g,...C}};let S=null!==(l=null==g?void 0:g.primaryCategoryId)&&void 0!==l?l:i.DirectoryEntryCategories.UNCATEGORIZED,_=null!==(r=C.primaryCategoryId)&&void 0!==r?r:i.DirectoryEntryCategories.UNCATEGORIZED,I=Object.assign({},null===(n=c[m])||void 0===n?void 0:n[S]);null!=g&&S!==_&&delete I[C.guildId],c[m]={...c[m],[S]:I,[_]:{...null===(a=c[m])||void 0===a?void 0:a[_],[C.guildId]:{...g,...C}}},_!==S&&null!=f[m]&&(f[m]={...f[m],[S]:(null===(u=f[m])||void 0===u?void 0:u[S])>0?(null===(d=f[m])||void 0===d?void 0:d[S])-1:0,[_]:(null!==(p=null===(h=f[m])||void 0===h?void 0:h[_])&&void 0!==p?p:0)+1})},GUILD_DIRECTORY_CATEGORY_SELECT:function(e){let{channelId:t,categoryId:n}=e;d[t]=n},GUILD_DIRECTORY_COUNTS_FETCH_SUCCESS:function(e){let{channelId:t,counts:n}=e;f[t]=n},GUILD_DIRECTORY_ADMIN_ENTRIES_FETCH_SUCCESS:function(e){let{channelId:t,entries:n}=e,a=new Set;n.forEach(e=>{let t=(0,s.guildDirectoryEntryFromServer)(e);a.add(t.guildId)}),h[t]=a}})},513688:function(e,t,n){"use strict";n.r(t),n.d(t,{guildDirectoryEntryFromServer:function(){return u},MAX_CATEGORY_SERVERS:function(){return o},orderByTotalMemberCount:function(){return d},rankByDateAdded:function(){return c},rankGuildEntries:function(){return f},hasMinimumMemberCount:function(){return h}}),n("222007");var a=n("627445"),l=n.n(a),s=n("917351"),i=n.n(s),r=n("730647");function u(e){var t,n,a,s,i,u,o;return l(e.type===r.DirectoryEntryTypes.GUILD,"Directory entries must be connected to a guild!"),{channelId:e.directory_channel_id,guildId:e.entity_id,type:e.type,authorId:e.author_id,createdAt:e.created_at,description:e.description,primaryCategoryId:e.primary_category_id,name:null===(t=e.guild)||void 0===t?void 0:t.name,icon:null===(n=e.guild)||void 0===n?void 0:n.icon,splash:null===(a=e.guild)||void 0===a?void 0:a.splash,features:new Set(null===(s=e.guild)||void 0===s?void 0:s.features),approximateMemberCount:null===(i=e.guild)||void 0===i?void 0:i.approximate_member_count,approximatePresenceCount:null===(u=e.guild)||void 0===u?void 0:u.approximate_presence_count,featurableInDirectory:null===(o=e.guild)||void 0===o?void 0:o.featurable_in_directory}}let o=5;function d(e){return i.orderBy(e,[e=>e.approximateMemberCount],["desc"])}function c(e){var t;let n=e.filter(e=>e.featurableInDirectory&&h(e));return(t=n,i.orderBy(t,[e=>e.createdAt],["desc"])).slice(0,o)}function f(e){return d(e)}function h(e){var t;return(null!==(t=e.approximateMemberCount)&&void 0!==t?t:0)>=5}},187163:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u},useCanCreateOrAddGuildInDirectory:function(){return o}});var a=n("446674"),l=n("42203"),s=n("305961"),i=n("957255"),r=n("49111");function u(e){let t=(0,a.useStateFromStores)([s.default],()=>s.default.getGuild(e.guildId)),n=(0,a.useStateFromStores)([l.default],()=>l.default.getChannel(e.channelId)),u=(0,a.useStateFromStores)([i.default],()=>i.default.can(r.Permissions.ADMINISTRATOR,t)),o=(0,a.useStateFromStores)([i.default],()=>i.default.can(r.Permissions.MANAGE_MESSAGES,n));return{isEntryAdmin:u,canEdit:u||o,canRemove:u||o}}function o(e){return(0,a.useStateFromStores)([i.default],()=>i.default.can(r.Permissions.SEND_MESSAGES,e))}},40635:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}}),n("222007");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("77078"),r=n("913144"),u=n("267363"),o=n("27978"),d=n("660478"),c=n("599110"),f=n("15433"),h=n("71102"),p=n("393467"),m=n("209397"),E=n("187163"),C=n("132615"),g=n("663685"),S=n("516056"),_=n("30176"),I=n("730647"),T=n("49111"),v=n("512233"),x=e=>{var t;let{channel:x,guild:N}=e,{currentCategoryId:A,directoryEntries:M,categoryCounts:R,allEntriesCount:j,isLoading:L}=(0,s.useStateFromStoresObject)([m.default],()=>{let e=m.default.getCurrentCategoryId(x.id),t=m.default.getDirectoryEntries(x.id,e===I.DirectoryEntryCategories.ALL?null:e),n=m.default.getDirectoryCategoryCounts(x.id),a=m.default.getDirectoryAllEntriesCount(x.id),l=m.default.isFetching();return{currentCategoryId:e,directoryEntries:t,categoryCounts:n,allEntriesCount:a,isLoading:l}});l.useEffect(()=>()=>{let e=d.default.lastMessageId(x.id);null!=e&&r.default.wait(()=>{(0,u.ack)(x.id,!0,!0,e)})},[x.id]);let O=l.useMemo(()=>null!=M?(0,S.generateDirectoryRows)(Object.values(M),A):null,[M,A]),{mostRecentQuery:y,searchFetching:P,searchResults:b}=(0,s.useStateFromStoresObject)([p.default],()=>{let{mostRecentQuery:e,fetching:t}=p.default.getSearchState(x.id);return{mostRecentQuery:e,searchFetching:t,searchResults:p.default.getSearchResults(x.id,e)}}),[D,U]=l.useState(y),w=""!==y,{showHubEventsList:F}=o.default.useExperiment({guildId:null!==(t=N.id)&&void 0!==t?t:"",location:"6f7fb0_1"},{autoTrackExposure:!1});l.useEffect(()=>{h.fetchDirectoryEntries(x.id),h.fetchDirectoryCounts(x.id),F&&f.fetchDirectoryEntries(x.id),U(y)},[x.id]),l.useEffect(()=>{c.default.track(T.AnalyticEvents.GUILD_DIRECTORY_CHANNEL_VIEWED,{directory_channel_id:x.id,directory_guild_id:N.id,primary_category_id:A})},[x.id,N.id,A]);let k=(0,E.useCanCreateOrAddGuildInDirectory)(x),V=k?()=>{(0,i.openModalLazy)(async()=>{let{default:e}=await n.el("467085").then(n.bind(n,"467085"));return t=>(0,a.jsx)(e,{...t,directoryGuildName:N.name,directoryGuildId:N.id,directoryChannelId:x.id,currentCategoryId:A===I.DirectoryEntryCategories.ALL?null:A})})}:void 0,B=e=>{0!==D.trim().length&&e.charCode===T.KeyboardKeys.ENTER&&(h.searchDirectoryEntries(x.id,D),c.default.track(T.AnalyticEvents.GUILD_DIRECTORY_SEARCH,{directory_channel_id:x.id,directory_guild_id:N.id}))},H=()=>{U(""),h.clearDirectorySearch(x.id)};return w?(0,a.jsx)(_.default,{searchQuery:D,setSearchQuery:U,mostRecentQuery:y,handleSearchKeyPress:B,handleClearSearch:H,handleCreateOrAddGuild:V,searchResults:b,searchFetching:P}):null==O&&null==A?(0,a.jsx)("div",{className:v.pageContainer,children:(0,a.jsx)(i.Spinner,{className:v.spinner})}):(null==O?void 0:O.length)===0&&null==A?(0,a.jsx)("div",{className:v.pageContainer,children:(0,a.jsx)(C.default,{guild:N,onAddGuild:V})}):(0,a.jsx)(g.default,{channel:x,searchQuery:D,setSearchQuery:U,handleSearchKeyPress:B,handleClearSearch:H,handleCreateOrAddGuild:V,currentCategoryId:A,handleSelectCategory:e=>{h.selectDirectoryCategory(x.id,e)},directoryEntries:O,categoryCounts:R,allEntriesCount:j,isLoading:L})}},132615:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983"),l=n("884691"),s=n("77078"),i=n("952999"),r=n("49111"),u=n("782340"),o=n("760472"),d=e=>{let{guild:t,onAddGuild:d}=e,c=l.useCallback(()=>{(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("310688").then(n.bind(n,"310688"));return n=>(0,a.jsx)(e,{...n,guild:t,source:r.InstantInviteSources.HUB_DIRECTORY,analyticsLocation:{section:r.AnalyticsSections.HUB_WELCOME_CTA}})})},[t]);return(0,a.jsxs)("div",{className:o.emptyWrapper,children:[(0,a.jsx)("img",{className:o.emptyImage,alt:"",src:n("704176")}),(0,a.jsx)(s.Heading,{className:o.emptyTitle,variant:"heading-xl/semibold",children:u.default.Messages.HUB_DIRECTORY_CHANNEL_EMPTY_TITLE.format({guildName:t.name})}),(0,a.jsx)(s.Text,{variant:"text-md/normal",className:o.emptySubtitle,children:u.default.Messages.HUB_DIRECTORY_CHANNEL_EMPTY_SUBTITLE}),null!=d?(0,a.jsx)(i.WelcomeMessageCTA,{className:o.emptyCTA,iconUrl:n("233135"),header:u.default.Messages.HUB_DIRECTORY_CHANNEL_EMPTY_ADD_SERVER,completed:!1,onClick:d}):null,(0,a.jsx)(i.WelcomeMessageCTA,{className:o.emptyCTA,iconUrl:n("243826"),header:u.default.Messages.HUB_DIRECTORY_CHANNEL_EMPTY_INVITE,completed:!1,onClick:c})]})}},791679:function(e,t,n){"use strict";n.r(t),n.d(t,{AddEntryCard:function(){return R},default:function(){return L}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("272030"),d=n("851387"),c=n("407063"),f=n("239380"),h=n("813006"),p=n("305961"),m=n("580357"),E=n("476263"),C=n("433487"),g=n("987772"),S=n("587974"),_=n("149279"),I=n("315102"),T=n("187163"),v=n("175703"),x=n("49111"),N=n("782340"),A=n("477362"),M=n("712967");let R=e=>{let{onClick:t}=e;return(0,a.jsxs)(u.Clickable,{onClick:t,className:A.addEntryCard,children:[(0,a.jsx)("img",{alt:"",src:M}),(0,a.jsx)(u.Text,{variant:"text-sm/semibold",color:"header-primary",className:A.addServerText,children:N.default.Messages.HUB_ADD_SERVER_CTA})]})};function j(e){let{entry:t}=e,[s,r]=l.useState(!1),{canEdit:o}=(0,T.default)(t);return(0,a.jsx)("div",{className:i(A.actionButtonsContainer,{[A.forceButtonsShow]:s}),children:(0,a.jsxs)(_.default,{children:[o?(0,a.jsx)(u.Tooltip,{text:N.default.Messages.HUB_ENTRY_UPDATE,hideOnClick:!0,children:e=>{let{onClick:l,...s}=e;return(0,a.jsx)(_.Button,{...s,onClick:()=>{null==l||l(),(0,u.openModalLazy)(async()=>{let{default:e}=await n.el("895792").then(n.bind(n,"895792"));return n=>(0,a.jsx)(e,{...n,entry:t})})},"aria-label":N.default.Messages.HUB_ENTRY_UPDATE,children:(0,a.jsx)(g.default,{className:A.overflowIcon})})}}):null,(0,a.jsx)(v.default,{onRequestOpen:()=>r(!0),onRequestClose:()=>r(!1),entry:t,hideEditButton:!0,children:e=>{let{onClick:t,...n}=e;return(0,a.jsx)(u.Tooltip,{text:N.default.Messages.MORE,hideOnClick:!0,children:e=>{let{onClick:l,...s}=e;return(0,a.jsx)(_.Button,{...n,...s,onClick:e=>{null==l||l(),t(e)},"aria-label":N.default.Messages.MORE,children:(0,a.jsx)(C.default,{className:A.overflowIcon})})}})}})]})})}var L=e=>{var t;let{entry:s}=e,[i,C]=l.useState(!1),g=(0,r.useStateFromStores)([p.default],()=>p.default.getGuild(s.guildId)),_=null!=g,T=async()=>{C(!0);try{_?(0,f.transitionToGuild)(s.guildId):await d.default.joinGuild(s.guildId,{source:x.JoinGuildSources.DIRECTORY_ENTRY})}finally{C(!1)}},v=I.default.getGuildSplashURL({id:s.guildId,splash:s.splash,size:300*(0,c.getDevicePixelRatio)()}),M=null!==(t=I.default.getGuildIconURL({id:s.guildId,icon:s.icon,size:40}))&&void 0!==t?t:void 0,R=N.default.Messages.JOIN;return _&&(R=N.default.Messages.HUB_DIRECTORY_CARD_JOINED_GUILD_BUTTON),(0,a.jsxs)("div",{className:A.card,onContextMenu:e=>{(0,o.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("184727").then(n.bind(n,"184727"));return t=>(0,a.jsx)(e,{...t,entry:s})})},children:[(0,a.jsxs)("div",{className:A.cardHeader,children:[(0,a.jsx)("div",{className:A.splash,children:null!=v&&(0,a.jsx)("img",{src:v,alt:"",className:A.splashImage})}),(0,a.jsx)("div",{className:A.guildIcon,children:(0,a.jsx)(S.default,{mask:S.default.Masks.SQUIRCLE,width:48,height:48,children:(0,a.jsx)("div",{className:A.iconMask,children:(0,a.jsx)(E.default,{className:A.icon,iconSrc:M,guild:new h.default(s),size:E.default.Sizes.MEDIUM,active:!0})})})})]}),(0,a.jsxs)("div",{className:A.guildInfo,children:[(0,a.jsxs)("div",{className:A.title,children:[(0,a.jsx)(m.default,{className:A.guildBadge,guild:s,tooltipColor:u.Tooltip.Colors.PRIMARY}),(0,a.jsx)(u.Text,{className:A.guildName,variant:"heading-md/semibold",color:"header-primary",children:s.name})]}),(0,a.jsx)(u.Text,{className:A.description,variant:"text-sm/normal",color:"header-secondary",children:s.description}),(0,a.jsxs)("div",{className:A.memberInfo,children:[null!=s.approximatePresenceCount&&(0,a.jsxs)("div",{className:A.memberCount,children:[(0,a.jsx)("div",{className:A.dotOnline}),(0,a.jsx)(u.Text,{variant:"text-xs/normal",color:"header-secondary",children:N.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_ONLINE.format({membersOnline:s.approximatePresenceCount})})]}),null!=s.approximateMemberCount&&(0,a.jsxs)("div",{className:A.memberCount,children:[(0,a.jsx)("div",{className:A.dotOffline}),(0,a.jsx)(u.Text,{variant:"text-xs/normal",color:"header-secondary",children:N.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_TOTAL.format({count:s.approximateMemberCount})})]})]}),(0,a.jsx)(u.Button,{submitting:i,className:A.joinButton,color:_?u.Button.Colors.PRIMARY:u.Button.Colors.GREEN,onClick:T,children:R})]}),(0,a.jsx)(j,{entry:s})]})}},184727:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("37983"),l=n("884691"),s=n("77078"),i=n("272030"),r=n("861370"),u=n("377114"),o=n("907566"),d=n("71102"),c=n("187163"),f=n("782340");function h(e){let{entry:t,onSelect:h,closePopout:p,forceLightTheme:m,hideEditButton:E=!1}=e,{isEntryAdmin:C,canEdit:g,canRemove:S}=(0,c.default)(t),_=(0,r.default)({id:t.guildId,label:f.default.Messages.COPY_ID_GUILD,onSuccess:p});l.useEffect(()=>{!g&&!S&&null==_&&(0,i.closeContextMenu)()});let I=()=>{d.removeDirectoryGuildEntry(t.channelId,t.guildId)};function T(){(0,i.closeContextMenu)(),null==p||p()}return(0,a.jsxs)(s.Menu,{className:m?"theme-light":null,navId:"guild-entry-context",onClose:T,"aria-label":f.default.Messages.GUILD_ACTIONS_MENU_LABEL,onSelect:h,children:[(0,a.jsxs)(s.MenuGroup,{children:[g&&!E?(0,a.jsx)(s.MenuItem,{id:"update-entry",label:f.default.Messages.HUB_ENTRY_UPDATE,action:function(){(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("895792").then(n.bind(n,"895792"));return n=>(0,a.jsx)(e,{...n,entry:t})}),T()}}):null,S?(0,a.jsx)(s.MenuItem,{id:"remove-from-hub",label:f.default.Messages.HUB_ENTRY_REMOVE,action:function(){(0,s.openModal)(e=>(0,a.jsx)(s.ConfirmModal,{header:f.default.Messages.HUB_ENTRY_REMOVE,confirmText:f.default.Messages.REMOVE,cancelText:f.default.Messages.CANCEL,onConfirm:I,...e,children:(0,a.jsx)(s.Text,{variant:"text-md/normal",children:f.default.Messages.HUB_ENTRY_REMOVE_BODY.format({guildName:t.name})})})),T()},color:"danger"}):null,C?null:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(s.MenuItem,{id:"report-server-listing",label:f.default.Messages.REPORT_SERVER_NO_NAME,action:function(){null!=t&&((0,u.showReportModalForGuildDirectoryEntry)(t),T())},icon:o.default,color:"danger"})})]}),(0,a.jsx)(s.MenuGroup,{children:_})]})}},175703:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var l=n("77078"),s=n("184727"),i=e=>{let{entry:t,forceLightTheme:n,hideEditButton:i,children:r,onRequestOpen:u,onRequestClose:o}=e;return(0,a.jsx)(l.Popout,{onRequestOpen:u,onRequestClose:o,animation:l.Popout.Animation.NONE,position:"bottom",spacing:4,align:"right",renderPopout:e=>{let{closePopout:l}=e;return(0,a.jsx)(s.default,{entry:t,closePopout:l,forceLightTheme:n,hideEditButton:i})},children:r})}},663685:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("65597"),u=n("77078"),o=n("737960"),d=n("305961"),c=n("957255"),f=n("646240"),h=n("315102"),p=n("791679"),m=n("730647"),E=n("49111"),C=n("782340"),g=n("512233"),S=n("373586"),_=n("981726"),I=n("529547");let T=(0,o.default)(e=>{let{searchQuery:t,setSearchQuery:n,handleClearSearch:l,handleSearchKeyPress:s,width:r}=e,o=null!=r&&r<=800;return(0,a.jsxs)("div",{className:S.header,children:[(0,a.jsx)("img",{alt:"",className:S.headerImage,src:o?I:_}),(0,a.jsx)("div",{className:S.headerContentWrapper,children:(0,a.jsxs)("div",{className:i(S.headerContent,{[S.headerContentSmall]:o}),children:[(0,a.jsx)(u.Heading,{variant:"heading-xl/semibold",className:S.searchTitle,children:C.default.Messages.HUB_DIRECTORY_SEARCH_TITLE}),(0,a.jsx)(u.Text,{variant:"text-md/normal",className:S.searchSubtitle,children:C.default.Messages.HUB_DIRECTORY_SEARCH_SUBTITLE}),(0,a.jsx)(f.default,{searchTerm:t,className:S.searchBox,inputClassName:S.searchBoxInput,closeIconClassName:S.closeIcon,searchIconClassName:S.searchIcon,label:C.default.Messages.DIRECTORY_SEARCH_PLACEHOLDER,placeholder:C.default.Messages.DIRECTORY_SEARCH_PLACEHOLDER,onChange:n,onClear:l,onKeyPress:s,cta:null!=t&&t.length>0?C.default.Messages.GUILD_DISCOVERY_SEARCH_ENTER_CTA:null})]})})]})});function v(e){let{guild:t,directoryEntries:n,handleCreateOrAddGuild:l,isLoading:s}=e,o=(0,r.default)([c.default],()=>c.default.can(E.Permissions.ADMINISTRATOR,t)),d=[];null!=n&&n.forEach(e=>{d=d.concat(e.entries)}),d.sort((e,t)=>{var n,a;return(null!==(n=t.approximateMemberCount)&&void 0!==n?n:0)-(null!==(a=e.approximateMemberCount)&&void 0!==a?a:0)});let f=h.default.getGuildSplashURL({id:t.id,splash:t.splash});return(0,a.jsx)("div",{className:g.pageContainer,children:(0,a.jsxs)(u.AdvancedScrollerAuto,{className:g.scroller,children:[(0,a.jsxs)("div",{className:S.header,children:[null!=f?(0,a.jsx)("img",{alt:"",className:i(S.headerImage,S.headerImageSimple),src:f}):null,(0,a.jsx)("div",{className:S.headerImageBG}),(0,a.jsx)("div",{className:S.headerContentWrapper,children:(0,a.jsx)("div",{className:i(S.headerContent,S.headerContentSmall),children:(0,a.jsx)(u.Heading,{variant:"heading-xl/semibold",color:"always-white",children:C.default.Messages.GUILD_DISCOVERY_CATEGORY_SEARCH_PLACEHOLDER.format({categoryName:"Midjourney"})})})})]}),s&&null==n?(0,a.jsx)(u.Spinner,{className:g.spinner}):(0,a.jsxs)("div",{className:g.cardsContainer,children:[d.map(e=>(0,a.jsx)(p.default,{entry:e},e.guildId)),o&&null!=l?(0,a.jsx)(p.AddEntryCard,{onClick:l}):null]})]})})}var x=e=>{let{channel:t,directoryEntries:n,handleCreateOrAddGuild:s,searchQuery:i,setSearchQuery:o,handleClearSearch:c,handleSearchKeyPress:f,currentCategoryId:h,handleSelectCategory:_,categoryCounts:I,allEntriesCount:x,isLoading:N}=e,A=(0,r.default)([d.default],()=>d.default.getGuild(t.getGuildId()));return null!=A&&A.hasFeature(E.GuildFeatures.SHARD)?(0,a.jsx)(v,{guild:A,directoryEntries:n,handleCreateOrAddGuild:s,isLoading:N}):(0,a.jsx)("div",{className:g.pageContainer,children:(0,a.jsxs)(u.AdvancedScrollerAuto,{className:g.scroller,children:[(0,a.jsx)(T,{searchQuery:i,setSearchQuery:o,handleClearSearch:c,handleSearchKeyPress:f}),(0,a.jsx)(u.AdvancedScrollerThin,{orientation:"horizontal",children:(0,a.jsxs)(u.TabBar,{className:S.tabBar,type:"top",look:"brand",selectedItem:h,onItemSelect:e=>{_(e)},children:[(0,a.jsx)(u.TabBar.Item,{className:S.tabBarItem,id:m.DirectoryEntryCategories.ALL,children:"".concat(C.default.Messages.DIRECTORY_CATEGORY_ALL," (").concat(x,")")},m.DirectoryEntryCategories.ALL),(0,m.getHubCategories)(t.id).map(e=>{let{value:t,label:n}=e;return(0,a.jsx)(u.TabBar.Item,{className:S.tabBarItem,id:t,children:"".concat(n," ").concat(null!=I[t]?"(".concat(I[t],")"):"")},t)})]})}),N&&null==n?(0,a.jsx)(u.Spinner,{className:g.spinner}):null==n?void 0:n.map((e,t)=>(0,a.jsxs)(l.Fragment,{children:[void 0!==e.header?(0,a.jsx)(u.Text,{variant:"text-md/semibold",className:S.sectionHeader,children:e.header}):null,(0,a.jsxs)("div",{className:g.cardsContainer,children:[e.entries.map(e=>(0,a.jsx)(p.default,{entry:e},e.guildId)),e.appendEndCard&&null!=s?(0,a.jsx)(p.AddEntryCard,{onClick:s}):null]})]},t))]})})}},516056:function(e,t,n){"use strict";n.r(t),n.d(t,{generateDirectoryRows:function(){return i}}),n("222007"),n("424973");var a=n("513688"),l=n("730647"),s=n("782340");function i(e,t){if(t!==l.DirectoryEntryCategories.ALL)return[{entries:(0,a.rankGuildEntries)(e),appendEndCard:!0}];let n=[],i=(0,a.rankByDateAdded)(e),r=new Set(i.map(e=>e.guildId));i.length>0&&n.push({header:s.default.Messages.SEARCH_NEWEST,entries:i,appendEndCard:!1});let u=e.filter(e=>!r.has(e.guildId));return(u=(0,a.orderByTotalMemberCount)(u)).length>0&&n.push({header:s.default.Messages.ALL_SERVERS,entries:u,appendEndCard:!0}),n}},30176:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983");n("884691");var l=n("77078"),s=n("646240"),i=n("246053"),r=n("791679"),u=n("782340"),o=n("512233"),d=n("64298"),c=n("16873"),f=e=>{let t,{searchQuery:n,setSearchQuery:f,mostRecentQuery:h,handleClearSearch:p,handleSearchKeyPress:m,handleCreateOrAddGuild:E,searchResults:C,searchFetching:g}=e;if(g)t=(0,a.jsx)("div",{className:o.pageContainer,children:(0,a.jsx)(l.Spinner,{className:o.spinner})});else if(0===C.length){let e=null!=E?u.default.Messages.DIRECTORY_SEARCH_NO_RESULTS_SUBTITLE.format({addServerHook:function(e,t){return(0,a.jsx)(l.Anchor,{onClick:E,children:e},t)}}):u.default.Messages.DIRECTORY_SEARCH_NO_RESULTS_NO_ADD;t=(0,a.jsxs)("div",{className:d.emptySearchWrapper,children:[(0,a.jsx)("img",{className:d.emptySearchImage,alt:"",src:c}),(0,a.jsx)(l.Heading,{variant:"heading-xl/semibold",color:"header-primary",className:d.emptySearchTitle,children:u.default.Messages.DIRECTORY_SEARCH_NO_RESULTS_TITLE}),(0,a.jsx)(l.Text,{variant:"text-md/normal",color:"header-secondary",className:d.emptySearchSubtitle,children:e})]})}else t=(0,a.jsx)("div",{className:o.cardsContainer,children:C.map(e=>(0,a.jsx)(r.default,{entry:e},e.guildId))});return(0,a.jsx)("div",{className:o.pageContainer,children:(0,a.jsxs)(l.ScrollerAuto,{className:o.scroller,children:[(0,a.jsxs)("div",{className:d.searchHeader,children:[(0,a.jsxs)("div",{className:d.headerTitleWrapper,children:[(0,a.jsx)(l.Clickable,{onClick:p,className:d.arrow,children:(0,a.jsx)(i.default,{direction:i.default.Directions.LEFT})}),(0,a.jsx)(l.Heading,{variant:"heading-xl/semibold",className:d.searchPageTitle,children:u.default.Messages.DIRECTORY_SEARCH_RESULTS_HEADER.format({numResults:C.length,query:h})})]}),(0,a.jsx)(s.default,{searchTerm:n,className:d.searchPageBox,inputClassName:d.searchPageInput,label:u.default.Messages.DIRECTORY_SEARCH_PLACEHOLDER,placeholder:u.default.Messages.DIRECTORY_SEARCH_PLACEHOLDER,onChange:f,onClear:p,onKeyPress:m,cta:null!=n&&n.length>0?u.default.Messages.GUILD_DISCOVERY_SEARCH_ENTER_CTA:null})]}),t]})})}},393171:function(e,t,n){"use strict";n.r(t),n.d(t,{useIsDismissibleContentTypeDismissed:function(){return r}});var a=n("446674"),l=n("374363"),s=n("674268"),i=n("846614");function r(e){let t=(0,i.useNewUserDismissibleContent)([e]),n=(0,a.useStateFromStores)([l.default],()=>{var e;return null===(e=l.default.settings.userContent)||void 0===e?void 0:e.dismissedContents});return 0===t.length||null!=n&&(0,s.hasBit)(n,e)}},526812:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n("222007");var a=n("446674"),l=n("913144");let s=new Set;class i extends a.default.PersistedStore{initialize(e){null!=e&&(s=new Set(e))}hasHidden(e){return s.has(e)}getState(){return s}}i.displayName="ForumChannelAdminOnboardingGuideStore",i.persistKey="ForumChannelAdminOnboardingGuideStore";var r=new i(l.default,{ADMIN_ONBOARDING_GUIDE_HIDE:function(e){let{channelId:t,hide:n}=e;n?s.add(t):s.delete(t)}})},258039:function(e,t,n){"use strict";n.r(t),n.d(t,{isOnboardingDismissed:function(){return i}});var a=n("866227"),l=n.n(a),s=n("249654");let i=e=>{let t=s.default.extractTimestamp(e),n=l().isBefore(l(t).add(l.duration(15,"days")));return!n}},327432:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var a=n("37983"),l=n("884691"),s=n("446674"),i=n("272030"),r=n("264732"),u=n("679653"),o=n("176347"),d=n("850391"),c=n("557809"),f=n("393414"),h=n("503220"),p=n("42203"),m=n("474643"),E=n("305961"),C=n("664336"),g=n("867965"),S=n("782340"),_=n("435599");function I(e){let{channelId:t}=e,I=(0,s.useStateFromStores)([p.default],()=>p.default.getChannel(t)),T=(0,s.useStateFromStores)([p.default],()=>p.default.getChannel(null==I?void 0:I.parent_id)),v=(0,s.useStateFromStores)([E.default],()=>E.default.getGuild(null==I?void 0:I.getGuildId())),x=(0,u.default)(I),N=l.useRef(!1);if(l.useEffect(()=>{null!=I&&!N.current&&(N.current=!0,(0,g.trackForumPostSidebarViewed)(I))},[I]),null==I||null==v)return null;let A=(0,a.jsx)(h.default,{channel:I});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{channel:I,draftType:m.DraftType.ChannelMessage}),(0,a.jsx)(C.default,{toolbar:A,"aria-label":S.default.Messages.THREAD_HEADER_BAR_A11Y_LABEL,children:(0,c.renderTitle)({channel:I,parentChannel:T,channelName:x,guild:v,inSidebar:!0,handleContextMenu:function(e){(0,i.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("994827").then(n.bind(n,"994827"));return t=>(0,a.jsx)(e,{...t,channel:I})})},handleClick:function(){null!=I&&(0,f.transitionToGuild)(I.guild_id,I.id)}})}),(0,a.jsx)("div",{className:_.chat,children:(0,a.jsx)(o.default,{channel:I,guild:v,chatInputType:d.ChatInputTypes.SIDEBAR},t)})]})}},845038:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("171644"),l=n("782340");function s(e){switch(e){case a.GameConsoleTypes.XBOX:return l.default.Messages.XBOX_REMOTE_CONNECTED_RAW;case a.GameConsoleTypes.PLAYSTATION:return l.default.Messages.PLAYSTATION_REMOTE_CONNECTED_RAW}}},813893:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var l=n("627445"),s=n.n(l),i=n("917351"),r=n.n(i),u=n("5667"),o=n("49111"),d=n("782340"),c=n("591526"),f=n("21719"),h=n("117861");let p=null;function m(e){let{onDismiss:t,onAccept:n,popoutPosition:l,gameConsoleAccounts:i}=e;s(i.length>0,"Rendering ConsoleNUXTooltip without a game console account"),(null==p||null==i.find(e=>e.type===p))&&(p=r.shuffle(i)[0].type);let m=null,E=null;switch(p){case o.PlatformTypes.XBOX:m=d.default.Messages.CONSOLE_NUX_TOOLTIP_BODY_XBOX,E=h;break;case o.PlatformTypes.PLAYSTATION:case o.PlatformTypes.PLAYSTATION_STAGING:m=d.default.Messages.CONSOLE_NUX_TOOLTIP_BODY_PS5,E=f}return(0,a.jsx)(u.default,{header:d.default.Messages.CONSOLE_NUX_TOOLTIP_HEADER,content:m,asset:(0,a.jsx)("img",{src:E,alt:"",className:c.art}),onClick:n,onSecondaryClick:t,markAsDismissed:t,buttonCTA:d.default.Messages.CONSOLE_NUX_TOOLTIP_ACCEPT,secondaryButtonCTA:d.default.Messages.CONSOLE_NUX_TOOLTIP_DISMISS,caretPosition:"top"===l?u.CaretPosition.BOTTOM_LEFT:u.CaretPosition.TOP_LEFT})}},710560:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}}),n("222007"),n("424973");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("151426"),r=n("77078"),u=n("191145"),o=n("509802"),d=n("124824"),c=n("981913"),f=n("778588"),h=n("235660"),p=n("261552"),m=n("742898"),E=n("813893"),C=n("424024"),g=n("379304"),S=n("171644"),_=n("49111"),I=n("994428"),T=n("782340"),v=n("309607");function x(e){let{onClose:t,channel:n}=e,l=(0,g.default)(n);return(0,a.jsx)(r.Menu,{onClose:t,onSelect:()=>null,navId:"transfer-menu","aria-label":T.default.Messages.TRANSFER,children:l})}function N(e){let{channel:t,showLeftDivider:n=!1,...g}=e,N=(0,p.default)(),A=(0,s.useStateFromStores)([h.default],()=>{var e,t;return null===(e=h.default.getSessionById(null!==(t=null==N?void 0:N.sessionId)&&void 0!==t?t:""))||void 0===e?void 0:e.clientInfo.os}),M=(0,s.useStateFromStores)([f.default],()=>f.default.hasLayers()),[R,j]=(0,s.useStateFromStoresArray)([u.default],()=>[u.default.getMode(t.id),u.default.getLayout(t.id)]),L=(0,r.useModalsStore)(r.hasAnyModalOpenSelector),O=(0,m.default)(),y=O.filter(e=>e.twoWayLink),[P,b]=l.useState(!1);if(null==N&&0===O.length||t.isBroadcastChannel())return null;let D=_.ChannelModes.VOICE!==R&&[_.ChannelLayouts.NO_CHAT,_.ChannelLayouts.FULL_SCREEN].includes(j)?"top":"bottom",U=[];return y.length>0&&U.push(i.DismissibleContent.DONUT_DESKTOP_NUX),(0,a.jsx)(o.default,{contentTypes:U,children:e=>{let{visibleContent:l,markAsDismissed:s}=e,u=l===i.DismissibleContent.DONUT_DESKTOP_NUX;return(0,a.jsxs)(a.Fragment,{children:[n?(0,a.jsx)("div",{className:v.leftDivider}):null,(0,a.jsx)(r.Popout,{position:D,spacing:u?16:void 0,positionKey:"".concat(R,":").concat(j),onRequestClose:()=>b(!1),shouldShow:(u||P)&&!M&&!L,renderPopout:e=>{let{closePopout:n}=e;return(0,a.jsx)(d.default,{children:u?(0,a.jsx)(E.default,{popoutPosition:D,onDismiss:()=>s(I.ContentDismissActionType.UNKNOWN),onAccept:()=>{s(I.ContentDismissActionType.UNKNOWN),b(!0)},gameConsoleAccounts:y}):(0,a.jsx)(x,{onClose:()=>{n()},channel:t})})},children:e=>{var t;return(0,a.jsx)(c.default,{...e,...g,onClick:()=>b(!0),label:null!=(t=A)?t===S.GameConsoleTypes.XBOX?T.default.Messages.XBOX_REMOTE_CONNECTED_RAW:T.default.Messages.PLAYSTATION_REMOTE_CONNECTED_RAW:T.default.Messages.CONSOLE_TRANSFER,iconComponent:(0,C.default)(A)})}})]})}})}},734488:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("446674"),l=n("271938"),s=n("855867"),i=n("205817"),r=n("12307"),u=n("944820"),o=n("49111");function d(e){let t=(0,r.getMaxQuality)(e),n=e.stream.guildId,d=e.stream.ownerId;return(0,a.useStateFromStores)([i.default,s.default,l.default],()=>null!=d?(0,u.default)(i.default.getQuality(),i.default.getStatsHistory(n,d,d===l.default.getId()),d===l.default.getId()&&null!=s.default.getHookError(o.MediaEngineHookTypes.SOUND),t):null,[t,n,d])}},795026:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("374014"),l=n("223913"),s=n("49111"),i=n("782340");function r(e,t,n,r){return null==t||t.state===s.ApplicationStreamStates.ENDED||(0,a.encodeStreamKey)(t)!==(0,a.encodeStreamKey)(e)?(0,l.getStreamCTAString)(r):t.ownerId===n?i.default.Messages.WATCH_STREAM_STREAMING:i.default.Messages.WATCH_STREAM_WATCHING}},944820:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a,l,s=n("117362"),i=n("449008"),r=n("49111"),u=n("782340");function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return e<=5?3:e<=15?10:15}function d(e,t){let n={packetsSentOrReceived:0,packetsLost:0,packetLossRate:0,frameRate:0,resolution:0,numDatapoints:0},a=e.slice(-1*t).filter(i.isNotNullish);if(0===a.length)return{type:"streamer",...n};a.forEach((e,t,a)=>{n.packetsSentOrReceived+=t>0?a[t].packetsSentOrReceived-a[t-1].packetsSentOrReceived:0,n.packetsLost+=t>0?a[t].packetsLost-a[t-1].packetsLost:0,n.frameRate+=e.frameRate,n.resolution+=e.resolution});let l=a[0].type,s=a.length;return{type:l,packetsSentOrReceived:n.packetsSentOrReceived,packetsLost:n.packetsLost,packetLossRate:n.packetsLost/(n.packetsLost+n.packetsSentOrReceived),frameRate:n.frameRate/s,resolution:n.resolution/s,numDatapoints:s}}(a=l||(l={})).PACKET_LOSS="Packet Loss",a.FRAME_RATE_INPUT="Frame Rate Encode",a.FRAME_RATE_NETWORK="Frame Rate Decode",a.SOUNDSHARE_FAILED="Soundshare Failed",a.BAD_CONNECTION="Bad Connection";let c=(0,s.cachedFunction)((e,t)=>({message:e,errorType:t}));function f(e,t){if("streamer"===e.type){if(100*e.packetLossRate>10)return c(u.default.Messages.STREAM_BAD_STREAMER,"Packet Loss");if(e.frameRate<=o(t))return c(u.default.Messages.STREAM_BAD_STREAMER,"Frame Rate Encode")}else{if(100*e.packetLossRate>10)return c(u.default.Messages.STREAM_BAD_SPECTATOR,"Packet Loss");if(e.frameRate<=o(t))return c(u.default.Messages.STREAM_BAD_SPECTATOR,"Frame Rate Decode")}return null}function h(e,t,n,a){if(n)return c(u.default.Messages.STREAM_SOUNDSHARE_FAILED,"Soundshare Failed");if(null!=t){let e=d(t,5),n=d(t,30);if(n.numDatapoints>=5){var l;return null!==(l=f(e,null==a?void 0:a.maxFrameRate))&&void 0!==l?l:f(n,null==a?void 0:a.maxFrameRate)}}return e===r.RTCConnectionQuality.BAD?c(u.default.Messages.STREAM_NETWORK_QUALITY_ERROR,"Bad Connection"):null}},673527:function(e,t,n){"use strict";n.r(t),n.d(t,{DefaultFallback:function(){return f},default:function(){return h}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("410348"),d=n("782340"),c=n("557840");function f(e){let{isLoading:t,noText:n,className:l}=e;return(0,a.jsx)("div",{className:i(c.emptyPreviewContainer,l),children:t?(0,a.jsx)(u.Spinner,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:c.emptyPreviewImage}),n?null:(0,a.jsx)(u.Text,{variant:"text-sm/normal",color:"none",className:c.emptyPreviewText,children:d.default.Messages.STREAM_NO_PREVIEW})]})})}function h(e){let{stream:t,className:n,noText:s=!1}=e,{url:u,isLoading:d}=(0,r.useStateFromStoresObject)([o.default],()=>({url:o.default.getPreviewURL(t.guildId,t.channelId,t.ownerId),isLoading:o.default.getIsPreviewLoading(t.guildId,t.channelId,t.ownerId)})),h=l.useRef(d?null:u);l.useEffect(()=>{!d&&(h.current=u)},[u,d]);let p=null==u||d?h.current:u;return null==p?(0,a.jsx)(f,{className:n,isLoading:d,noText:s}):(0,a.jsx)("div",{className:i(n,c.root),children:(0,a.jsx)("img",{src:p,alt:"",className:c.image})})}},264429:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("463848"),d=n("750560"),c=n("532602"),f=n("76393"),h=n("373469"),p=n("271938"),m=n("305961"),E=n("957255"),C=n("824563"),g=n("800762"),S=n("822332"),_=n("599110"),I=n("223913"),T=n("582415"),v=n("795026"),x=n("673527"),N=n("49111"),A=n("782340"),M=n("995068");class R extends l.PureComponent{componentDidMount(){let{user:e,streamApplication:t}=this.props;_.default.track(N.AnalyticEvents.OPEN_POPOUT,{type:"Stream Preview",other_user_id:e.id,application_id:null!=t?t.id:null,application_name:null!=t?t.name:null,game_id:null!=t?t.id:null,is_streaming:!0})}renderPreview(e){let{onWatch:t,activeStream:n,currentUserId:l,canWatch:s,unavailableReason:i}=this.props;return(0,a.jsxs)(u.Clickable,{onClick:t,className:M.previewContainer,children:[(0,a.jsx)(x.default,{className:M.previewImage,stream:e}),s?(0,a.jsx)("div",{className:M.previewHover,children:(0,a.jsx)(u.Text,{variant:"text-sm/normal",color:"none",className:M.white,children:(0,v.default)(e,n,l,i)})}):null]})}render(){let{activity:e,user:t,stream:n,previewIsOpen:l}=this.props;return null==n?null:(0,a.jsx)("div",{className:i(M.streamPreviewWrapper,{[M.mounted]:l}),children:(0,a.jsxs)("div",{className:M.streamPreview,children:[this.renderPreview(n),(0,a.jsxs)("div",{className:M.body,children:[null!=e?(0,a.jsx)(o.default,{hideHeader:!0,type:o.UserActivityTypes.STREAM_PREVIEW,activity:e,user:t,guildId:n.guildId,channelId:n.channelId}):(0,a.jsx)(c.default,{type:o.UserActivityTypes.STREAM_PREVIEW,applicationStream:n,user:t,guildId:n.guildId,channelId:n.channelId,className:M.activityActions,color:M.watchButton}),(0,a.jsx)(S.default,{type:S.default.Types.INLINE,className:M.protip,children:__OVERLAY__?A.default.Messages.WATCH_STREAM_IN_APP:A.default.Messages.WATCH_STREAM_TIP})]})]})})}}function j(e){let{user:t,channel:n,...s}=e,[i,u]=(0,r.useStateFromStoresArray)([g.default,m.default,E.default,f.default],()=>(0,I.canWatchStream)(n,g.default,m.default,E.default,f.default)),o=(0,r.useStateFromStores)([h.default],()=>h.default.getStreamForUser(t.id,n.getGuildId())),c=(0,r.useStateFromStores)([h.default],()=>h.default.getActiveStreamForApplicationStream(o)),S=(0,r.useStateFromStores)([p.default],()=>p.default.getId()),_=(0,r.useStateFromStores)([C.default],()=>(0,T.getStreamerApplication)(o,C.default)),v=(0,r.useStateFromStores)([C.default],()=>(0,T.getStreamerActivity)(o,C.default)),x=l.useMemo(()=>({[n.guild_id]:[t.id]}),[n.guild_id,t.id]);return(0,d.useSubscribeGuildMembers)(x),(0,a.jsx)(R,{...s,canWatch:i,unavailableReason:u,user:t,streamApplication:_,stream:o,activeStream:c,currentUserId:S,activity:v})}},336804:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("907002"),u=n("617258"),o=n("446674"),d=n("669491"),c=n("769846"),f=n("77078"),h=n("997289"),p=n("685665"),m=n("506885"),E=n("697218"),C=n("216422"),g=n("956089"),S=n("980423"),_=n("599110"),I=n("719923"),T=n("12307"),v=n("734488"),x=n("49111"),N=n("646718"),A=n("782340"),M=n("456802");let R=(0,u.cssValueToNumber)(c.default.LIVE_INDICATOR_BORDER_RADIUS),j={opacity:0,transform:"translate3d(100%, 0, 0)"},L={opacity:1,transform:"translate3d(0%, 0, 0)"},O={opacity:0},y={opacity:1},P={borderRadius:"".concat(R,"px ").concat(R,"px ").concat(R,"px ").concat(R,"px")},b={borderRadius:"0px ".concat(R,"px ").concat(R,"px 0px")},D={mass:1,tension:500,friction:18,clamp:!0},U=e=>{let t,s,{participant:r,isUpsellEnabled:u,shape:c,size:m,didTrackUpsellViewed:R,setDidTrackUpsellViewed:j,className:L}=e,O=(0,T.getMaxQuality)(r),{analyticsLocations:y}=(0,p.default)(),P=null!=(0,v.default)(r);try{t=(0,T.isPremiumFPS)(O)}catch(e){t=!1}try{s=(0,T.isPremiumResolution)(O)}catch(e){s=!1}let b=t||s,{location:D}=(0,h.useAnalyticsContext)(),U=(0,o.useStateFromStores)([E.default],()=>E.default.getCurrentUser()),w=u&&!I.default.isPremium(U,N.PremiumTypes.TIER_1)&&!I.default.canStreamQuality(I.default.StreamQuality.MID,U),F=l.useCallback(()=>{w&&b&&(0,f.openModalLazy)(async()=>{let{default:e}=await n.el("754534").then(n.bind(n,"754534"));return t=>(0,a.jsx)(e,{...t,analyticsSource:D})})},[w,b,D]);if(l.useEffect(()=>{!R&&b&&(_.default.track(x.AnalyticEvents.PREMIUM_UPSELL_VIEWED,{type:N.PremiumUpsellTypes.STREAM_QUALITY_INDICATOR,has_premium_stream_fps:t,has_premium_stream_resolution:s,location_stack:y}),j(!0))},[t,s,b,R,j,y]),null==O)return null;let k=(0,a.jsx)(f.Tooltip,{text:P?A.default.Messages.SCREENSHARE_QUALITY_TOOLTIP_REDUCED:b?A.default.Messages.SCREENSHARE_QUALITY_TOOLTIP_PREMIUM:A.default.Messages.SCREENSHARE_QUALITY_TOOLTIP_NORMAL,position:"bottom",color:f.Tooltip.Colors.GREY,children:e=>(0,a.jsxs)(f.Clickable,{...e,onClick:F,className:i(M.qualityIndicator,m,S.LiveIndicatorShapes[c],P?M.qualityIndicatorLowQuality:M.qualityIndicatorFullQuality,{[M.clickable]:w&&b}),children:[b?(0,a.jsx)(C.default,{className:M.premiumStreamIcon}):null,(0,a.jsx)("span",{className:M.qualityResolution,children:(0,T.getResolutionText)(O.maxResolution)}),(0,a.jsx)("span",{children:(0,T.getFPSText)(O.maxFrameRate)})]})});return(0,a.jsx)(g.TextBadge,{text:k,className:i(L,M.qualityIndicatorBadge),color:d.default.unsafe_rawColors.PRIMARY_500.css,shape:c})};var w=e=>{let{participant:t,showQuality:n,isUpsellEnabled:s=!0,size:u,className:o}=e,[d,c]=l.useState(!1),h=(0,T.getMaxQuality)(t),{reducedMotion:p}=l.useContext(f.AccessibilityPreferencesContext),E=n&&null!=h;l.useEffect(()=>{(0,m.default)(t.stream.ownerId,t.user.getAvatarURL(t.stream.guildId,80),{dispatchWait:!0})},[t]);let C=(0,r.useTransition)(E,{enter:{from:p.enabled?O:j,to:p.enabled?y:L},leave:p.enabled?O:j,config:D}),_=(0,r.useSpring)({to:E?b:P,config:D});return(e=>{let{className:n,popoutProps:l}=e;return(0,a.jsxs)("div",{className:i(M.streamQualityIndicator,n),...l,children:[C((e,n)=>n?(0,a.jsx)(r.animated.div,{style:e,children:(0,a.jsx)(U,{className:M.liveQualityIndicator,participant:t,size:u,shape:g.BadgeShapes.ROUND_LEFT,isUpsellEnabled:s,didTrackUpsellViewed:d,setDidTrackUpsellViewed:c})}):null),(0,a.jsx)(r.animated.div,{style:_,className:M.liveIndicator,children:(0,a.jsx)(S.default,{look:S.LiveIndicatorLooks.RED,size:u,shape:E?g.BadgeShapes.ROUND_RIGHT:g.BadgeShapes.ROUND})})]})})({className:o})}},375202:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("819068");function l(e,t){if(__OVERLAY__){let e=t.getGame(),n=(0,a.getPID)();return null==e||null==n?null:{id:e.id,pid:n,pidPath:[],nativeProcessObserverId:0,hidden:!1,elevated:!1,name:e.name,lastFocused:0,exePath:"",exeName:"",cmdLine:"",processName:"",distributor:null,windowHandle:null,fullscreenType:0}}return e.getVisibleGame()}},237542:function(e,t,n){"use strict";var a;n.r(t),n.d(t,{GuildPrompts:function(){return a}}),(a||(a={})).REAL_NAME_PROMPT="REAL_NAME_PROMPT"},928265:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("913144"),l={viewPrompt:function(e,t){a.default.wait(()=>{a.default.dispatch({type:"GUILD_PROMPT_VIEWED",prompt:e,guildId:t})})}}},204743:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n("222007");var a=n("446674"),l=n("913144");let s={};class i extends a.default.PersistedStore{initialize(e){for(let t in e){let n=e[t];s[t]=new Set(n)}}hasViewedPrompt(e,t){let n=s[t];return null!=n&&(!!n.has(e)||!1)}getState(){return s}}i.displayName="GuildPromptsStore",i.persistKey="GuildPromptsStore";var r=new i(l.default,{GUILD_PROMPT_VIEWED:function(e){let{prompt:t,guildId:n}=e,a=s[n];return null==a?(s[n]=new Set,s[n].add(t),!0):!a.has(t)&&(a.add(t),!0)},GUILD_DELETE:function(e){let{guild:t}=e;return null!=s[t.id]&&!t.unavailable&&(delete s[t.id],!0)}})},278483:function(e,t,n){"use strict";n.r(t),n.d(t,{openDisableCommunication:function(){return s},openEnableCommunication:function(){return i}});var a=n("37983");n("884691");var l=n("77078");function s(e,t,s){(0,l.openModalLazy)(async()=>{let{default:l}=await n.el("693120").then(n.bind(n,"693120"));return n=>(0,a.jsx)(l,{guildId:e,userId:t,anaylticsLocations:s,...n})})}function i(e,t,s){(0,l.openModalLazy)(async()=>{let{default:l}=await n.el("750331").then(n.bind(n,"750331"));return n=>(0,a.jsx)(l,{guildId:e,userId:t,anaylticsLocations:s,...n})})}},209700:function(e,t,n){"use strict";n.r(t),n.d(t,{isInGuildMemberModViewExperiment:function(){return i},useGuildMemberModViewExperiment:function(){return r}});var a=n("812204"),l=n("862205");let s=(0,l.createExperiment)({kind:"guild",id:"2023-08_guild_member_mod_view",label:"Guild Member Mod View",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Guild Member Mod View",config:{enabled:!0}}]}),i=function(e){let{autoTrackExposure:t=!1,disable:n=!1,location:l=a.default.GUILD_MEMBER_MOD_VIEW}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{enabled:i}=s.getCurrentConfig({guildId:e,location:l},{autoTrackExposure:t,disable:n});return i},r=function(e){let{autoTrackExposure:t=!1,disable:n=!1,location:l=a.default.GUILD_MEMBER_MOD_VIEW}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{enabled:i}=s.useExperiment({guildId:e,location:l},{autoTrackExposure:t,disable:n});return i}},459824:function(e,t,n){"use strict";n.r(t),n.d(t,{canAccessGuildMemberModViewWithExperiment:function(){return c},useCanAccessGuildMemberModView:function(){return f}}),n("222007");var a=n("316693"),l=n("446674"),s=n("305961"),i=n("697218"),r=n("991170"),u=n("209700"),o=n("562980");let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[s.default,i.default],[n,l]=t,u=n.getGuild(e);if(null==u)return!1;let d=l.getCurrentUser(),c=a.default.hasAny(r.default.computePermissions({user:d,context:u,checkElevated:!1}),o.MemberSafetyPagePermissions);return c},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,a=d(e),l=(0,u.isInGuildMemberModViewExperiment)(e,{autoTrackExposure:t,disable:!a,location:n});return a&&l};function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,a=(0,l.useStateFromStores)([s.default,i.default],()=>d(e,[s.default,i.default]),[e]),r=(0,u.useGuildMemberModViewExperiment)(e,{autoTrackExposure:t,disable:!a,location:n});return a&&r}},180968:function(e,t,n){"use strict";n.r(t),n.d(t,{HAS_NO_COUNT:function(){return c},useServerActivityForUser:function(){return C}}),n("222007");var a,l,s=n("884691"),i=n("308503"),r=n("16470"),u=n("84339"),o=n("390933"),d=n("49111");let c=-1;(l=a||(a={})).MENTIONS="mentions",l.MESSAGES="messages";let f={searchFetcher:null,messageCount:c,lastMessage:null},h=(0,i.default)(()=>new Map),p=(e,t)=>{h.setState(n=>{let a=n.get(e);return null==a?n.set(e,{...f,...t}):n.set(e,{...a,...t}),n})},m=e=>h(t=>t.get(e),r.default);function E(e,t,n){let a=s.useMemo(()=>{var a,l,s;return a=e,l=t,s=n,"guild_".concat(l,"_search_").concat(s,"_for_").concat(a)},[e,t,n]),l=m(a),i=(0,u.default)(a),[r,h]=s.useState({});return s.useEffect(()=>{if(i!==a){let l=function(e,t){switch(t){case"mentions":return{mentions:e};case"messages":return{author_id:e}}}(e,n),s=new o.default(t,d.SearchTypes.GUILD,l);p(a,{searchFetcher:s,messageCount:c,lastMessage:null}),setTimeout(()=>{s.fetch(e=>{let t=e.body.messages[0];p(a,{searchFetcher:s,messageCount:e.body.total_results,lastMessage:t}),h({})},e=>{},e=>{p(a,{messageCount:0,lastMessage:null}),h({})})})}return()=>{}},[e,t,l,a,n]),null!=l?l:f}function C(e,t){let n=E(e,t,"messages"),a=E(e,t,"mentions");return{messageCount:n.messageCount,mentionsCount:a.messageCount,lastMessage:n.lastMessage,lastMention:a.lastMessage}}},813071:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}}),n("222007");var a,l=n("37983"),s=n("884691"),i=n("811022"),r=n("517001"),u=n("697218");let o=new i.default("ErrorBoundary"),d={error:null,componentStack:null};a=class extends s.Component{static getDerivedStateFromError(e){return{error:e,hasError:!0}}componentDidCatch(e,t){let{componentStack:n}=t;o.error("JANK ErrorBoundary",{error:e,componentStack:n});let{onError:a}=this.props;null==a||a(e,n),this.setState({error:e,componentStack:n})}render(){let{fallback:e,children:t}=this.props,{error:n,componentStack:a}=this.state;if(!(0,r.isStaffEnv)(u.default.getCurrentUser()))return t;if(null!=n){if("function"==typeof e){let t={error:n,componentStack:a,onResetError:this.onResetError};return(0,l.jsx)(e,{...t})}return(0,l.jsx)("h1",{children:n.message})}return t}constructor(...e){super(...e),this.state={...d},this.onResetError=()=>{this.setState({...d})}}}},744568:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("459824"),u=n("813071"),o=n("249957"),d=n("986358"),c=n("623529");function f(e){let{userId:t,guildId:n,onClose:s,className:f,infoPanelClassName:h,style:p}=e,m=(0,r.useCanAccessGuildMemberModView)(n,!0);return(l.useEffect(()=>{!m&&s()},[m,s]),m)?(0,a.jsx)("div",{className:i(c.sidebarContianer,f),style:p,children:(0,a.jsx)(u.default,{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default,{userId:t,guildId:n,onClose:s}),(0,a.jsx)(o.default,{userId:t,guildId:n,className:h})]})})}):null}},703433:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("65597"),r=n("77078"),u=n("917397"),o=n("305961"),d=n("124969"),c=n("36694"),f=n("984678"),h=n("153769"),p=n("83900"),m=n("556081"),E=n("216947"),C=n("136281"),g=n("782340"),S=n("63893");function _(e){let{member:t}=e,n=(0,i.default)([o.default],()=>o.default.getGuild(t.guildId),[t.guildId]),l=(0,u.useUserEmailVerification)(t.userId),_=(0,u.useUserPhoneVerification)(t.userId),I=(0,u.useUserRulesAgreementLevel)(t.userId,t.guildId),T=(0,u.useUserAccountAgeDate)(t.userId),v=(0,u.useGuildMemberJoinedAtDate)(t.userId,t.guildId),x=(0,u.useGuildMemberInviteLinkCode)(t.userId,t.guildId);return null==n?null:(0,a.jsx)("div",{className:s(S.safetySignalsMainContainer),children:(0,a.jsx)(r.FormItem,{title:g.default.Messages.ACCOUNT,titleClassName:S.infoTitle,children:(0,a.jsxs)(C.UserModInfoItemContainer,{children:[(0,a.jsx)(C.UserModInfoItem,{icon:(0,a.jsx)(m.default,{width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX,className:S.unusualDMLabelIcon}),name:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:g.default.Messages.MEMBER_VERIFICATION_EMAIL_VERIFIED}),description:l?(0,a.jsx)(c.default,{className:s(S.verifiedIcon),width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX}):(0,a.jsx)(f.default,{className:s(S.unverifiedIcon),width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX})}),(0,a.jsx)(C.UserModInfoItem,{icon:(0,a.jsx)(E.default,{width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX,className:S.unusualDMLabelIcon}),name:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:g.default.Messages.GUILD_MEMBER_MOD_VIEW_PHONE_VERIFIED}),description:_?(0,a.jsx)(c.default,{className:s(S.verifiedIcon),width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX}):(0,a.jsx)(f.default,{className:s(S.unverifiedIcon),width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX})}),I!==u.UserRulesAgreementLevel.NO_GATE&&(0,a.jsx)(C.UserModInfoItem,{icon:(0,a.jsx)(E.default,{width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX,className:S.unusualDMLabelIcon}),name:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:g.default.Messages.GUILD_MEMBER_MOD_VIEW_AGREE_TO_RULES}),description:I===u.UserRulesAgreementLevel.AGREED?(0,a.jsx)(c.default,{className:s(S.verifiedIcon),width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX}):(0,a.jsx)(f.default,{className:s(S.unverifiedIcon),width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX})}),(0,a.jsx)(C.UserModInfoItem,{icon:(0,a.jsx)(h.default,{width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX}),name:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:g.default.Messages.GUILD_MEMBER_MOD_VIEW_DISCORD_JOIN_DATE}),description:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:T})}),(0,a.jsx)(C.UserModInfoItem,{icon:(0,a.jsx)(d.GuildIcon,{guild:n,size:d.GuildIcon.Sizes.SMOL,animate:!1,className:S.guildIcon}),name:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:g.default.Messages.GUILD_MEMBER_MOD_VIEW_GUILD_JOIN_DATE}),description:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:v})}),(0,a.jsx)(C.UserModInfoItem,{icon:(0,a.jsx)(p.default,{width:C.USER_MOD_ICON_SIZE_PX,height:C.USER_MOD_ICON_SIZE_PX}),name:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:g.default.Messages.GUILD_MEMBER_MOD_VIEW_INVITE_LINK_LABEL}),description:(0,a.jsx)(r.Text,{variant:"text-sm/medium",color:"text-normal",children:null!=x?x:"-"})})]})})})}},21363:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("65597"),u=n("77078"),o=n("178406"),d=n("553275"),c=n("412013"),f=n("305961"),h=n("957255"),p=n("151185"),m=n("136281"),E=n("49111"),C=n("782340"),g=n("63893");function S(e){let{member:t}=e,n=(0,r.default)([f.default],()=>f.default.getGuild(t.guildId),[t.guildId]),s=l.useMemo(()=>{var e;if(null==n)return[];let a=null!==(e=null==n?void 0:n.roles)&&void 0!==e?e:{};return null==t.highestRoleId?t.roles:t.roles.filter(e=>null!=e&&e!==t.highestRoleId).sort((e,t)=>{var n,l,s,i;return null!==(i=null!==(s=null===(n=a[t])||void 0===n?void 0:n.position)&&void 0!==s?s:0-(null===(l=a[e])||void 0===l?void 0:l.position))&&void 0!==i?i:0})},[t.roles,t.highestRoleId,n]),S=(0,r.default)([o.default],()=>o.default.getEnhancedMember(t.guildId,t.userId),[t.guildId,t.userId]),_=(0,d.useHighestRole)(S),I=new Intl.NumberFormat(C.default.getLocale()).format(s.length),T=(0,d.useContextMenuModerateRoles)(t),v=(0,r.default)([h.default],()=>h.default.can(E.Permissions.MANAGE_ROLES,n),[n]);return null==n?null:(0,a.jsx)(u.FormItem,{title:C.default.Messages.ROLES,titleClassName:g.infoTitle,children:(0,a.jsx)(m.UserModInfoItemContainer,{children:(0,a.jsx)(m.UserModInfoItem,{description:(0,a.jsxs)("div",{className:g.roleContainer,children:[null!=_&&(0,a.jsx)(c.default,{className:i(g.roleTooltipItem,g.highestRole),role:_,guildId:t.guildId}),s.length>0&&(0,a.jsx)(u.Tooltip,{"aria-label":C.default.Messages.MEMBER_SAFETY_COMMUNICATION_DISABLED_TOOLTIP,tooltipContentClassName:g.roleTooltip,allowOverflow:!0,text:(0,a.jsx)("div",{className:g.roleTooltipItemContainer,children:s.map(e=>(0,a.jsx)(c.default,{className:i(g.roleTooltipItem),role:n.roles[e],guildId:t.guildId},e))}),children:e=>{let{onMouseEnter:t,onMouseLeave:n}=e;return(0,a.jsx)(u.Clickable,{className:i(g.otherRoles),onMouseEnter:t,onMouseLeave:n,children:(0,a.jsxs)(u.Text,{variant:"text-xs/medium",color:"header-primary",children:["+",I]})})}}),v&&(0,a.jsx)(u.Clickable,{className:i(g.otherRoles,g.addRoleContainer),onClick:T,children:(0,a.jsx)(p.default,{className:i(g.addRoleIcon),width:m.USER_MOD_ICON_SIZE_PX,height:m.USER_MOD_ICON_SIZE_PX})})]})})})})}},136281:function(e,t,n){"use strict";n.r(t),n.d(t,{USER_MOD_ICON_SIZE_PX:function(){return r},UserModInfoItem:function(){return u},UserModInfoItemContainer:function(){return o}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("558595");let r=16;function u(e){let{description:t,name:n,icon:l}=e;return(0,a.jsxs)("div",{className:s(i.modInfoItem),children:[null!=l&&(0,a.jsx)("div",{className:s(i.modInfoItemIcon),children:l}),null!=n&&(0,a.jsx)("div",{className:s(i.modInfoItemName),children:n}),(0,a.jsx)("div",{className:s(i.modInfoItemDescription),children:t})]})}function o(e){let{children:t}=e;return(0,a.jsx)("div",{className:s(i.modInfoItemContainer),children:t})}},249957:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("65597"),r=n("26989"),u=n("697218"),o=n("703433"),d=n("21363"),c=n("608973"),f=n("132881"),h=n("63893");function p(e){let{userId:t,guildId:n,location:l,className:p}=e,m=(0,i.default)([u.default],()=>u.default.getUser(t),[t]),E=(0,i.default)([r.default],()=>r.default.getMember(n,t),[n,t]);return null==m||null==E?null:(0,a.jsxs)("div",{className:s(h.container,p),children:[(0,a.jsx)(c.default,{member:E}),(0,a.jsx)(d.default,{member:E}),(0,a.jsx)(f.default,{member:E}),(0,a.jsx)(o.default,{member:E})]})}},608973:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983"),l=n("884691"),s=n("65597"),i=n("77078"),r=n("509"),u=n("178406"),o=n("998940"),d=n("91551"),c=n("4845"),f=n("491401"),h=n("136281"),p=n("782340"),m=n("63893");function E(e){let{member:t}=e,n=t.userId,E=t.guildId,C=(0,s.default)([u.default],()=>u.default.getEnhancedMember(E,n),[n,E]),g=null!=C?C:t,S=g.unusualDMActivityUntil,_=l.useCallback(e=>{if(null==e)return null;let t=new Date(e).getTime();return(0,o.formatDateRelativeTime)(t,o.MembersTableDateFormats.JOINED_AT)},[]),I=l.useMemo(()=>null==t?null:_(S),[t,_,S]),T=l.useMemo(()=>(0,r.isCommunicationDisabled)(t.communicationDisabledUntil),[t.communicationDisabledUntil]),v=l.useMemo(()=>null==t.communicationDisabledUntil?new Date:new Date(t.communicationDisabledUntil),[t.communicationDisabledUntil]),x=null==S&&!T;return x?null:(0,a.jsx)(i.FormItem,{title:p.default.Messages.MEMBER_SAFETY_TABLE_HEADER_FLAGS,titleClassName:m.infoTitle,children:(0,a.jsxs)(h.UserModInfoItemContainer,{children:[null!=S&&(0,a.jsx)(h.UserModInfoItem,{icon:(0,a.jsx)(c.default,{width:h.USER_MOD_ICON_SIZE_PX,height:h.USER_MOD_ICON_SIZE_PX,className:m.unusualDMLabelIcon}),name:(0,a.jsx)(i.Text,{variant:"text-sm/semibold",color:"text-normal",children:p.default.Messages.MEMBER_SAFETY_UNUSUAL_DM_ACTIVITY}),description:(0,a.jsx)(i.Text,{variant:"text-sm/semibold",color:"text-normal",children:I})}),T&&null!=v&&(0,a.jsx)(h.UserModInfoItem,{icon:(0,a.jsx)(f.default,{width:h.USER_MOD_ICON_SIZE_PX,height:h.USER_MOD_ICON_SIZE_PX,className:m.unusualDMLabelIcon}),name:(0,a.jsx)(i.Text,{variant:"text-sm/semibold",color:"text-normal",children:p.default.Messages.GUILD_COMMUNICATION_DISABLED_ON_MEMBER}),description:(0,a.jsx)(i.Text,{variant:"text-sm/semibold",color:"text-normal",children:(0,a.jsx)(d.default,{deadline:v,showUnits:!0,stopAtOneSec:!0})})})]})})}},132881:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("77078"),s=n("116320"),i=n("109264"),r=n("180968"),u=n("136281"),o=n("782340"),d=n("63893");function c(e){let{member:t}=e,{messageCount:n,mentionsCount:c}=(0,r.useServerActivityForUser)(t.userId,t.guildId),f=new Intl.NumberFormat(o.default.getLocale()).format(n),h=new Intl.NumberFormat(o.default.getLocale()).format(c);return(0,a.jsx)(l.FormItem,{title:o.default.Messages.GUILD_MEMBER_MOD_VIEW_GUILD_MESSAGE_ACTIVITY_TITLE,titleClassName:d.infoTitle,children:(0,a.jsxs)(u.UserModInfoItemContainer,{children:[(0,a.jsx)(u.UserModInfoItem,{icon:(0,a.jsx)(i.default,{width:u.USER_MOD_ICON_SIZE_PX,height:u.USER_MOD_ICON_SIZE_PX}),name:(0,a.jsx)(l.Text,{variant:"text-sm/semibold",color:"text-normal",children:o.default.Messages.MESSAGES}),description:n===r.HAS_NO_COUNT?(0,a.jsx)(l.Spinner,{type:l.SpinnerTypes.SPINNING_CIRCLE,className:d.loadingSpinner}):(0,a.jsx)(l.Text,{variant:"text-sm/semibold",color:"text-muted",children:f})}),(0,a.jsx)(u.UserModInfoItem,{icon:(0,a.jsx)(s.default,{width:u.USER_MOD_ICON_SIZE_PX,height:u.USER_MOD_ICON_SIZE_PX}),name:(0,a.jsx)(l.Text,{variant:"text-sm/semibold",color:"text-normal",children:o.default.Messages.MENTIONS}),description:c===r.HAS_NO_COUNT?(0,a.jsx)(l.Spinner,{type:l.SpinnerTypes.SPINNING_CIRCLE,className:d.loadingSpinner}):(0,a.jsx)(l.Text,{variant:"text-sm/semibold",color:"text-muted",children:h})})]})})}},986358:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("65597"),r=n("77078"),u=n("450911"),o=n("841098"),d=n("509"),c=n("278483"),f=n("700179"),h=n("130037"),p=n("430312"),m=n("271938"),E=n("26989"),C=n("305961"),g=n("957255"),S=n("824563"),_=n("101125"),I=n("697218"),T=n("530346"),v=n("109264"),x=n("491401"),N=n("945330"),A=n("662255"),M=n("152224"),R=n("306160"),j=n("387111"),L=n("158998"),O=n("49111"),y=n("590456"),P=n("782340"),b=n("298028");function D(e){let{user:t,guildId:n,onClose:l}=e,s=t.id,u=(0,i.default)([_.default,S.default,m.default],()=>s===m.default.getId()?_.default.getStatus():S.default.getStatus(s,n),[s,n]);return(0,a.jsxs)("div",{className:b.topRow,children:[(0,a.jsxs)("div",{className:b.memberNameContainer,children:[(0,a.jsx)("div",{className:b.memberAvatar,children:(0,a.jsx)(r.Avatar,{src:t.getAvatarURL(n,48),"aria-label":t.username,size:r.AvatarSizes.SIZE_48,status:u})}),(0,a.jsx)("div",{className:b.memberName,children:(0,a.jsx)(r.Text,{variant:"text-lg/medium",children:(0,a.jsx)(r.NameWithRole,{name:j.default.getName(n,null,t),color:r.tokens.colors.HEADER_PRIMARY.css})})}),(0,a.jsx)("div",{className:b.memberGlobalName,children:(0,a.jsx)(r.Text,{variant:"text-md/medium",color:"text-normal",children:L.default.getUserTag(t)})})]}),(0,a.jsx)("div",{className:b.close,children:(0,a.jsx)(r.Text,{variant:"text-md/medium",color:"text-normal",children:(0,a.jsx)(r.Clickable,{className:b.closeAction,onClick:l,children:(0,a.jsx)(N.default,{})})})})]})}function U(e){let{tag:t="div",disabled:n,children:l,onClick:i,...u}=e;return(0,a.jsx)(r.Clickable,{...u,tag:t,className:s(b.bottomRowAction,{[b.bottomRowActionDisabled]:n}),onClick:n?void 0:i,children:l})}function w(e){let{user:t,member:l,guildId:s,location:o}=e,p=(0,i.default)([C.default],()=>C.default.getGuild(s)),{canKickUser:m,canBanUser:E,canModerateMembers:S}=(0,i.useStateFromStoresObject)([g.default,I.default,C.default],()=>({canKickUser:null!=p&&g.default.canManageUser(O.Permissions.KICK_MEMBERS,t,p),canBanUser:null!=p&&g.default.canManageUser(O.Permissions.BAN_MEMBERS,t,p),canModerateMembers:null!=p&&(0,f.canToggleCommunicationDisableOnUser)(p.id,t.id,[I.default,C.default,g.default])}),[t,p]),_=(0,d.isMemberCommunicationDisabled)(l),N=null!=o?[o]:[],j=(0,h.useTrackModerationAction)(s,{targetUserId:t.id,location:o});return(0,a.jsxs)("div",{className:b.bottomRow,children:[(0,a.jsxs)(U,{"aria-label":P.default.Messages.SEND_DM,onClick:()=>{u.default.openPrivateChannel(t.id)},children:[(0,a.jsx)(v.default,{width:22,height:22}),(0,a.jsx)(r.Text,{variant:"text-sm/normal",color:"none",children:P.default.Messages.SEND_DM})]}),(0,a.jsxs)(U,{disabled:!m,"aria-label":P.default.Messages.KICK,onClick:()=>{(0,r.openModalLazy)(async()=>{let{default:e}=await n.el("125104").then(n.bind(n,"125104"));return n=>(0,a.jsx)(e,{...n,location:o,guildId:s,user:t})})},children:[(0,a.jsx)(M.default,{width:22,height:22,color:r.tokens.colors.TEXT_NORMAL.css}),(0,a.jsx)(r.Text,{variant:"text-sm/normal",color:"none",children:P.default.Messages.KICK})]}),(0,a.jsxs)(U,{disabled:!E,"aria-label":P.default.Messages.BAN,onClick:()=>{(0,r.openModalLazy)(async()=>{let{default:e}=await n.el("743506").then(n.bind(n,"743506"));return n=>(0,a.jsx)(e,{...n,location:o,guildId:s,user:t})})},children:[(0,a.jsx)(T.default,{width:22,height:22,color:r.tokens.colors.TEXT_NORMAL.css}),(0,a.jsx)(r.Text,{variant:"text-sm/normal",color:"none",children:P.default.Messages.BAN})]}),(0,a.jsxs)(U,{disabled:!S,"aria-label":P.default.Messages.TIMEOUT_USER,onClick:()=>{_?(0,c.openEnableCommunication)(l.guildId,l.userId,N):(0,c.openDisableCommunication)(l.guildId,l.userId,N)},children:[(0,a.jsx)(x.default,{width:22,height:22,color:r.tokens.colors.TEXT_NORMAL.css}),(0,a.jsx)(r.Text,{variant:"text-sm/normal",color:"none",children:_?P.default.Messages.REMOVE_TIME_OUT:P.default.Messages.TIMEOUT_USER})]}),(0,a.jsxs)(U,{"aria-label":P.default.Messages.COPY_ID,onClick:()=>{j(h.ModerationActionType.COPY_ID),(0,R.copy)(t.id)},disabled:!R.SUPPORTS_COPY,children:[(0,a.jsx)(A.default,{width:22,height:22,color:r.tokens.colors.TEXT_NORMAL.css}),(0,a.jsx)(r.Text,{variant:"text-sm/normal",color:"none",children:P.default.Messages.COPY_ID})]})]})}function F(e){let{userId:t,guildId:n,onClose:l}=e,r=(0,i.default)([I.default],()=>I.default.getUser(t),[t]),u=(0,i.default)([E.default],()=>E.default.getMember(n,t),[n,t]),d=(0,o.default)();return null==r||null==u?null:(0,a.jsx)(p.default,{user:r,guildId:n,profileType:y.UserProfileTypes.CARD,forceShowPremium:!0,children:(0,a.jsx)("div",{className:s(b.container,"theme-".concat(d)),children:(0,a.jsxs)("div",{className:b.innerBoarderedContainer,children:[(0,a.jsx)(D,{user:r,guildId:n,onClose:l}),(0,a.jsx)(w,{user:r,member:u,guildId:n,location:location})]})})})}},917397:function(e,t,n){"use strict";n.r(t),n.d(t,{useUserPhoneVerification:function(){return C},UserRulesAgreementLevel:function(){return a},useUserRulesAgreementLevel:function(){return g},useUserEmailVerification:function(){return S},useUserAccountAgeDate:function(){return _},useGuildMemberJoinedAtDate:function(){return I},useGuildMemberInviteLinkCode:function(){return T}}),n("702976"),n("222007");var a,l,s=n("884691"),i=n("866227"),r=n.n(i),u=n("65597"),o=n("26989"),d=n("305961"),c=n("697218"),f=n("568734"),h=n("299039"),p=n("178406"),m=n("645266"),E=n("657944");function C(e){let t=(0,u.default)([c.default],()=>c.default.getUser(e),[e]);return null!=t&&t.isPhoneVerified()}function g(e,t){var n,a;let l=(0,u.default)([c.default],()=>c.default.getUser(e),[e]),s=(0,u.default)([o.default],()=>o.default.getMember(t,e),[t,e]),i=(0,u.default)([d.default],()=>d.default.getGuild(t),[t]),r=null==i?void 0:i.hasVerificationGate();return r?null==l||null==s||null==i?1:(0,f.hasFlag)(null!==(n=s.flags)&&void 0!==n?n:0,E.GuildMemberFlags.BYPASSES_VERIFICATION)||(0,f.hasFlag)(null!==(a=s.flags)&&void 0!==a?a:0,E.GuildMemberFlags.COMPLETED_ONBOARDING)?2:1:0}function S(e){let t=(0,u.default)([c.default],()=>c.default.getUser(e),[e]);if(null==t)return!1;let n=(null==t?void 0:t.isPhoneVerified())||(null==t?void 0:t.isStaff());return t.verified||n}function _(e){return s.useMemo(()=>{let t=h.default.extractTimestamp(e);return r(new Date(t)).format("MMM DD, YYYY")},[e])}function I(e,t){let n=(0,u.default)([o.default],()=>o.default.getMember(t,e),[t,e]),a=null==n?void 0:n.joinedAt;return s.useMemo(()=>null==a?"":r(new Date(a)).format("MMM DD, YYYY"),[a])}function T(e,t){var n;let[a,l]=s.useState(null),i=s.useRef(null),r=(0,u.default)([p.default],()=>p.default.getEnhancedMember(t,e),[t,e]),o=null!==(n=null==r?void 0:r.sourceInviteCode)&&void 0!==n?n:null;return s.useEffect(()=>{if(null!=o&&l(o),null!=i.current)return()=>{i.current=null};i.current=(0,m.getMemberSupplemental)(t,[e]).then(e=>{if(e.length>0){var t,n;l(null!==(n=null===(t=e[0])||void 0===t?void 0:t.sourceInviteCode)&&void 0!==n?n:null)}})},[e,t,o]),null!=a?a:null}(l=a||(a={}))[l.NO_GATE=0]="NO_GATE",l[l.NO_AGREEMENT=1]="NO_AGREEMENT",l[l.AGREED=2]="AGREED"},809167:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}}),n("222007"),n("424973");var a=n("884691"),l=n("133797"),s=n("577357"),i=n("41391"),r=n("782340");function u(e){let{includeFlairAsBenefit:t,listing:n,guildId:u}=e,o=0,d=0;for(let e of n.role_benefits.benefits)(0,s.isChannelBenefit)(e)?o+=1:(0,s.isIntangibleBenefit)(e)&&(d+=1);let c=n.role_id,f=(0,i.default)(u),h=f.filter(e=>e.roles.includes(c)).length;return a.useMemo(()=>{let e=[];return!0===t&&e.push(r.default.Messages.GUILD_ROLE_SUBSCRIPTION_BENEFIT_VISUAL_FLAIR),0!==o&&e.push(r.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_LITE_EXCLUSIVE_CHANNELS_SUBTITLE.format({channelCount:o})),0!==d&&e.push(r.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_LITE_BENEFITS_SUBTITLE.format({benefitCount:d})),0!==h&&e.push(r.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_LITE_EMOJI_SUBTITLE.format({emojiCount:h})),new l.default(e)},[o,d,h,t])}},176687:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}}),n("222007");var a=n("884691"),l=n("446674"),s=n("775433"),i=n("10514"),r=n("521012"),u=n("648825"),o=n("136185"),d=n("49111");function c(e){let t=(0,l.useStateFromStores)([r.default],()=>r.default.getSubscriptions()),n=a.useMemo(()=>{if(null==t)return{};let e={};for(let n of Object.values(t))if(n.type===d.SubscriptionTypes.GUILD){let t=(0,o.getRoleSubscriptionPlanId)(n);e[t]=n}return e},[t]),{activeSubscription:c,activeSubscriptionListing:f}=(0,l.useStateFromStoresObject)([u.default],()=>{var t;let a,l=null,s=null!=e?u.default.getSubscriptionGroupListing(e):null,i=null!==(t=null==s?void 0:s.subscription_listings_ids)&&void 0!==t?t:[];for(let e of i){let t=u.default.getSubscriptionListing(e),s=null==t?void 0:t.subscription_plans[0].id;if(null==s)continue;let i=n[s];if(null!=i){l=i,a=t;break}}return{activeSubscription:l,activeSubscriptionListing:a}}),h=null==f?void 0:f.subscription_plans[0],p=null==h?void 0:h.id,m=null==h?void 0:h.sku_id,E=(0,l.useStateFromStores)([i.default],()=>null!=p?i.default.get(p):null),C=null==f?void 0:f.soft_deleted;return a.useEffect(()=>{null==E&&null!=m&&!i.default.isFetchingForSKU(m)&&(0,s.fetchSubscriptionPlansForSKU)(m,void 0,void 0,C)},[E,m,C]),{activeSubscription:c,activeSubscriptionListing:f,activeSubscriptionPlanFromStore:E}}},492548:function(e,t,n){"use strict";n.r(t),n.d(t,{useGetTrialPurchaseEligibility:function(){return s}}),n("222007");var a=n("884691"),l=n("719726");let s=()=>{let[e,t]=a.useState(!1),[n,s]=a.useState(null),i=a.useCallback(async(e,n,a)=>{t(!0),s(null);try{let t=await (0,l.getGuildRoleSubscriptionTrialEligibility)(e,n,a);return t}catch(e){s(e)}finally{t(!1)}},[]);return{loading:e,error:n,getTrialPurchaseEligibility:i}}},595197:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("884691"),l=n("837008");function s(e,t){let n=(0,l.useSubscriptionTrial)(t);return a.useMemo(()=>{var e;return null!=n&&(null==n.max_num_active_trial_users||n.max_num_active_trial_users>(null!==(e=n.num_active_trial_users)&&void 0!==e?e:0))},[n])}},373622:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("617258"),l=n("769846"),s=n("834897"),i=n("677795");let r=(0,a.cssValueToNumber)(l.default.GUILD_ROLE_SUBSCRIPTION_CARD_BASIC_INFO_TIER_IMAGE_SIZE),u=(0,a.cssValueToNumber)(l.default.GUILD_ROLE_SUBSCRIPTION_CARD_BASIC_INFO_TIER_IMAGE_SIZE_MOBILE);function o(){let e=(0,s.default)(i.RESPONSIVE_MOBILE_WIDTH_SIZE_QUERY);return e?u:r}},291444:function(e,t,n){"use strict";n.r(t),n.d(t,{useSubscriptionListingsForChannel:function(){return c}});var a=n("316693"),l=n("446674"),s=n("38654"),i=n("42203"),r=n("305961"),u=n("837008"),o=n("866595"),d=n("49111");function c(e){let{guildId:t,channelId:n}=e,c=(0,u.useSubscriptionListingsForGuild)(t);return(0,l.useStateFromStoresArray)([i.default,r.default,s.default],()=>{let e=i.default.getChannel(n),l=r.default.getGuild(t),u=s.default.isViewingSubscriptionRoles(t);return null!=l&&null!=e?c.filter(t=>(function(e,t,n){let{isPreviewingRoles:l=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!(l||e.published))return!1;let s=n.permissionOverwrites[e.role_id];if((0,o.isChannelAccessGrantedBy)(n,s))return!0;let i=t.getRole(t.id),r=null!=i&&!a.default.has(i.permissions,d.Permissions.VIEW_CHANNEL),u=(0,o.isChannelAccessDeniedBy)(n,n.permissionOverwrites[t.id]),c=t.getRole(e.role_id);return r&&!u&&null!=c&&(0,o.isAllChannelsRole)(c)&&!(0,o.isChannelAccessDeniedBy)(n,s)})(t,l,e,{isPreviewingRoles:u})):[]},[t,n,c])}},847426:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("884691"),l=n("446674"),s=n("716241"),i=n("685665"),r=n("393414"),u=n("599110"),o=n("257869"),d=n("648825"),c=n("176687"),f=n("49111");function h(e){var t;let{guildId:n,groupListingId:h,location:p,relevantSubscriptionListingIds:m}=e,E=(0,o.useGroupListingsFetchContext)("useTrackRoleSubscriptionUpsellAnalytics"),{activeSubscription:C}=(0,c.default)(h),g=null!=C,S=(0,l.useStateFromStoresArray)([d.default],()=>(null!=m?m:[]).filter(e=>{var t;return(null===(t=d.default.getSubscriptionListing(e))||void 0===t?void 0:t.published)===!0}),[m]),{analyticsLocations:_}=(0,i.default)(null!==(t=(0,r.getLastRouteChangeSourceLocationStack)())&&void 0!==t?t:[]),I=a.useRef(!1);a.useEffect(()=>{E&&null!=h&&null!=S&&!I.current&&(I.current=!0,u.default.track(f.AnalyticEvents.ROLE_SUBSCRIPTION_LISTING_UPSELL_PAGE_VIEWED,{role_subscription_group_listing_id:h,role_subscription_listing_ids:S,is_premium_member:g,location_stack:_,location:p,...(0,s.collectGuildAnalyticsMetadata)(n)}))},[n,h,E,p,S,g,_])}},93252:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983");n("884691");var l=n("77078"),s=n("592407"),i=n("479756"),r=n("432153"),u=n("49111"),o=n("782340"),d=n("573431"),c=n("408426");function f(e){let{guildId:t}=e;return(0,a.jsx)("div",{className:d.upsellPage,children:(0,a.jsxs)("div",{className:d.upsellContainer,children:[(0,a.jsx)("img",{src:c,alt:""}),(0,a.jsxs)("div",{className:d.upsellContent,children:[(0,a.jsx)(l.Heading,{variant:"heading-xl/semibold",children:o.default.Messages.GUILD_ROLE_SUBSCRIPTION_TEMPLATE_PREVIEW_CHANNEL_UPSELL_HEADER}),(0,a.jsx)(l.Text,{variant:"text-sm/normal",className:d.bodyText,children:o.default.Messages.GUILD_ROLE_SUBSCRIPTION_TEMPLATE_PREVIEW_CHANNEL_UPSELL_BODY}),(0,a.jsx)(l.Button,{size:l.Button.Sizes.MEDIUM,onClick:()=>{(0,i.stopImpersonating)(t),s.default.open(t,u.GuildSettingsSections.ROLE_SUBSCRIPTIONS,void 0,u.GuildSettingsSubsections.ROLE_SUBSCRIPTION_TIERS),(0,r.announceDeleteTemplateChannels)(t)},className:d.button,children:o.default.Messages.GUILD_ROLE_SUBSCRIPTION_TEMPLATE_PREVIEW_CHANNEL_UPSELL_BUTTON})]})]})})}},548683:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("77078"),u=n("808388"),o=n("782340"),d=n("635845");function c(e){let{text:t,hasScrolled:n}=e;return(0,a.jsxs)("div",{className:i(d.container,{[d.containerHide]:n}),children:[(0,a.jsx)("div",{className:d.notice,children:(0,a.jsx)(r.Text,{className:d.label,variant:"text-md/medium",color:"header-primary",children:t})}),(0,a.jsx)("div",{className:d.noticeArrow})]})}function f(e){let[t,n]=l.useState(),[s,i]=l.useState(),[r,d]=l.useState(!1),[f,h]=l.useState(!1),{enabled:p}=(0,u.useRoleSubscriptionMaxTiersExperiment)(e);l.useEffect(()=>{p&&null!=t&&null!=s?d(t<s):d(!1)},[p,t,s]);let m=l.useMemo(()=>r?(0,a.jsx)(c,{text:o.default.Messages.GUILD_ROLE_SUBSCRIPTION_LISTINGS_SCROLLABLE_NOTICE,hasScrolled:f}):null,[r,f]);return{horizontalScrollNotice:m,handleScroll:()=>h(!0),handleSetScrollerRef:e=>{var t;return i(null==e?void 0:null===(t=e.getScrollerState())||void 0===t?void 0:t.scrollWidth)},handleSetContainerRef:e=>n(null==e?void 0:e.clientWidth)}}},900076:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("394846"),r=n("77078"),u=n("548683"),o=n("158238");function d(e){let{guildId:t,children:n,className:l}=e,{horizontalScrollNotice:d,handleScroll:c,handleSetScrollerRef:f,handleSetContainerRef:h}=(0,u.default)(t),p=(0,a.jsx)("div",{className:o.tierPreviewsContainer,children:(0,a.jsx)("div",{className:s(o.tierPreviews,l),children:n})});return!i.isMobile&&(p=(0,a.jsxs)(a.Fragment,{children:[d,(0,a.jsx)(r.AdvancedScroller,{className:o.scroller,orientation:"horizontal",ref:f,onScroll:c,children:p})]})),(0,a.jsx)("div",{className:o.carouselMaxWidth,ref:h,children:p})}},226965:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("77078"),r=n("484456"),u=n("559979"),o=n("70695"),d=n("441641");function c(e){let{benefit:t,guildId:n}=e,l=(0,o.default)(n,t.ref_id),c=(0,a.jsx)(r.default,{guildId:n,emojiId:t.emoji_id,emojiName:t.emoji_name}),f=null!=l?(0,a.jsx)(i.Clickable,{className:d.channelLink,onClick:l.navigateToChannel,"aria-label":l.ariaLabel,role:"link",children:(0,a.jsx)(i.Text,{variant:"text-md/medium",color:"header-primary",className:s(d.name,d.linkedName),children:(0,u.default)(t)})}):(0,a.jsx)(i.Text,{variant:"text-md/medium",color:"header-primary",className:d.name,children:(0,u.default)(t)});return(0,a.jsxs)("div",{className:d.container,children:[(0,a.jsxs)("div",{className:d.infoContainer,children:[f,(0,a.jsx)(i.Text,{color:"interactive-normal",variant:"text-sm/normal",children:t.description})]}),(0,a.jsx)("div",{className:d.emojiContainer,children:c})]})}},108314:function(e,t,n){"use strict";n.r(t),n.d(t,{GuildRoleSubscriptionBenefits:function(){return F},default:function(){return V}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("834897"),d=n("38654"),c=n("160299"),f=n("191814"),h=n("476765"),p=n("837899"),m=n("425190"),E=n("68238"),C=n("315102"),g=n("577357"),S=n("837008"),_=n("167109"),I=n("176687"),T=n("595197"),v=n("41391"),x=n("549590"),N=n("833531"),A=n("270295"),M=n("246506"),R=n("226965"),j=n("944256"),L=n("97116"),O=n("320946"),y=n("677795"),P=n("49111"),b=n("782340"),D=n("938088");let U=e=>{let{benefits:t,header:n,guildId:s}=e,[i,r]=l.useState(!1),o=i?t:t.slice(0,5),d=t.length>5,c=t.length-5,p=b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_SHOW_MORE_DESCRIPTION_WITH_ITEMS.format({numTruncated:c}),m=(0,h.useUID)();return 0===t.length?null:(0,a.jsxs)("div",{className:D.benefitsSection,children:[(0,a.jsx)(u.Heading,{variant:"text-xs/bold",color:"header-secondary",className:D.sectionHeader,id:m,children:n}),(0,a.jsx)(f.default,{size:12}),(0,a.jsx)("ul",{className:D.benefitsList,"aria-labelledby":m,children:o.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)(R.default,{guildId:s,benefit:e},(0,g.getBenefitKey)(e))},t))}),d&&(0,a.jsx)(k,{isViewAll:i,onToggle:()=>r(e=>!e),showMoreText:p})]})},w=e=>{let{guildId:t,listingId:n}=e,l=(0,v.default)(t),[s]=_.useTierEmojiIds(n,t),i=l.filter(e=>s.has(e.id));return 0===i.length?null:(0,a.jsxs)("div",{className:D.benefitsSection,children:[(0,a.jsx)(u.Heading,{variant:"text-xs/bold",color:"header-secondary",className:D.sectionHeader,children:b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_EMOJI_SECTION_TITLE.format({count:i.length})}),(0,a.jsx)(f.default,{size:12}),(0,a.jsx)("div",{className:D.emojiList,children:i.map((e,t)=>{var n;return(0,a.jsx)(u.Tooltip,{text:e.name,"aria-label":!1,children:t=>{var n;return(0,a.jsx)("img",{...t,className:D.emojiListEmoji,src:(n=e,C.default.getEmojiURL({id:n.id,animated:n.animated,size:24})),width:24,height:24,alt:e.name})}},null!==(n=e.id)&&void 0!==n?n:t)})})]})},F=e=>{let{listingId:t,guildId:n,className:l}=e,s=(0,x.default)(n,t),[r]=_.useChannelBenefits(t),o=(0,N.default)(r),[d]=_.useIntangibleBenefits(t),c=_.useRole(t,n),[h]=_.useTierEmojiIds(t,n);return null==s&&0===o.length&&0===d.length&&0===h.size?null:(0,a.jsxs)("div",{className:i(D.subscriptionPerks,l),children:[null!=s&&(0,a.jsxs)(u.HeadingLevel,{component:(0,a.jsx)(u.Heading,{variant:"text-xs/bold",color:"header-secondary",className:D.sectionHeader,children:b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_REVIEW_MEMBER_PREVIEW}),children:[(0,a.jsx)(f.default,{size:8}),(0,a.jsx)(M.default,{role:c,guildId:n,className:D.roleMessagePreview})]}),(0,a.jsx)(U,{header:b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_EXCLUSIVE_CHANNELS_SECTION_TITLE,benefits:o,guildId:n}),(0,a.jsx)(U,{header:b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_ADDITIONAL_BENEFITS_SECTION_TITLE,benefits:d,guildId:n}),(0,a.jsx)(w,{guildId:n,listingId:t})]})},k=e=>{let t,{onToggle:n,isViewAll:l,showMoreText:s}=e;return t=l?(0,a.jsxs)(a.Fragment,{children:[b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_SHOW_LESS_DESCRIPTION,(0,a.jsx)(m.default,{className:D.toggleTruncationButtonIcon})]}):(0,a.jsxs)(a.Fragment,{children:[s,(0,a.jsx)(p.default,{className:D.toggleTruncationButtonIcon})]}),(0,a.jsx)(u.Button,{look:u.Button.Looks.BLANK,size:u.Button.Sizes.NONE,className:D.toggleTruncationButton,innerClassName:D.toggleTruncationButtonInner,onClick:n,children:t})};var V=e=>{var t;let{listingId:n,guildId:s,groupListingId:h,analyticsLocation:p}=e,m=(0,S.useSubscriptionListing)(n),{openModal:C,canOpenModal:v,cannotOpenReason:x,isCheckingTrialEligibility:N}=(0,O.default)(m,s,h,p),M=(0,r.useStateFromStores)([c.default],()=>c.default.isSyncing),{activeSubscription:R,activeSubscriptionListing:U}=(0,I.default)(h),w=(null==U?void 0:U.id)===n,V=(null==R?void 0:R.status)===P.SubscriptionStatusTypes.CANCELED,[B,H]=l.useState(!1),[G,W]=l.useState(!1),Y=l.useCallback(e=>{let t=!1;null!=e&&(t=e.scrollHeight-e.clientHeight>1),W(t)},[]),[z]=_.useName(n),[K]=_.useDescription(n),[Z]=_.useTrialInterval(n),[X]=_.useTrialLimit(n),J=(0,T.default)(s,n),q=null!=Z&&null==R&&J,Q=(0,o.default)(y.RESPONSIVE_MOBILE_WIDTH_SIZE_QUERY),[$,ee]=l.useState(!1),et=$||!Q,en=(0,r.useStateFromStores)([d.default],()=>d.default.isViewingSubscriptionRoles(s)),ea=(null==m?void 0:m.published)===!0,el=(null==m?void 0:m.soft_deleted)===!0,es=b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_SHOW_MORE_DESCRIPTION;return(ea||en)&&!el?(0,a.jsxs)("article",{className:D.container,"aria-label":z,children:[q&&(0,a.jsxs)("div",{className:i(D.tierTrialIndicator,D.tierTopIndicator),children:[b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TRIAL_PERIOD.format({trialPeriodDuration:(0,g.formatPlanIntervalDuration)({interval:Z.interval,interval_count:Z.interval_count})}),(0,a.jsx)(u.Tooltip,{clickableOnMobile:!0,text:b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TRIAL_DISCLAIMER.format({activeTrialUserLimit:null!=X?X:0}),children:e=>(0,a.jsx)(E.default,{className:D.tierTrialIndicatorIcon,...e})})]}),(0,a.jsxs)("div",{className:q?void 0:D.cardContainerWithoutTopIndicator,children:[(0,a.jsxs)("div",{className:D.tierInfoContainer,children:[Q?(0,a.jsx)(L.GuildRoleSubscriptionCollapsibleCardBasicInfo,{listingId:n,isListingPublished:ea,expanded:et,onToggleExpanded:()=>ee(e=>!e)}):(0,a.jsx)(j.GuildRoleSubscriptionCardBasicInfo,{listingId:n,isListingPublished:ea}),et&&(0,a.jsxs)(a.Fragment,{children:[Q&&(0,a.jsx)("div",{className:D.divider}),w?(0,a.jsx)(u.Button,{fullWidth:!0,look:u.Button.Looks.OUTLINED,color:u.Button.Colors.PRIMARY,disabled:!0,children:V?b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_REVIEW_CANCELED_LABEL:b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_REVIEW_SUBSCRIBED_LABEL}):(0,a.jsx)(u.Tooltip,{text:v?null:x,"aria-label":null!==(t=v&&x)&&void 0!==t&&t,children:e=>(0,a.jsx)(A.default,{...e,fullWidth:!0,disabled:!v||M,submitting:N,onClick:C,onlyShineOnHover:!0,children:b.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_REVIEW_SUBSCRIBE_LABEL})}),(0,a.jsx)(f.default,{size:16}),(0,a.jsx)(u.Text,{variant:"text-sm/normal",color:"text-normal",className:i((!G||!B)&&D.tierDescriptionTruncate),children:(0,a.jsx)("div",{ref:Y,children:K})}),G&&(0,a.jsx)(k,{isViewAll:B,onToggle:()=>H(e=>!e),showMoreText:es})]})]}),et&&(0,a.jsx)(u.HeadingLevel,{children:(0,a.jsx)(F,{listingId:n,guildId:s})})]})]}):null}},944256:function(e,t,n){"use strict";n.r(t),n.d(t,{GuildRoleSubscriptionCardTierName:function(){return h},GuildRoleSubscriptionCardTierImage:function(){return p},GuildRoleSubscriptionCardDraftTierBadge:function(){return m},GuildRoleSubscriptionCardBasicInfo:function(){return E}}),n("222007");var a=n("37983");n("884691");var l=n("669491"),s=n("77078"),i=n("956089"),r=n("153160"),u=n("577357"),o=n("167109"),d=n("373622"),c=n("782340"),f=n("118338");let h=e=>{let{listingName:t}=e;return(0,a.jsx)(s.Heading,{variant:"text-md/normal",color:"interactive-active",className:f.tierName,children:t})};function p(e){let{image:t}=e;return null==t?null:(0,a.jsx)("img",{src:t,alt:"",className:f.tierImage})}let m=()=>(0,a.jsx)(i.TextBadge,{color:l.default.unsafe_rawColors.YELLOW_300.css,text:c.default.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_MANAGEMENT_DRAFT_LABEL,className:f.draftBadge}),E=e=>{let{listingId:t,isListingPublished:n}=e,l=(0,d.default)(),[i]=o.useName(t),[E]=o.useImage(t,l),[C]=o.useSubscriptionPlan(t);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{listingName:i}),(0,a.jsx)(p,{image:E}),!n&&(0,a.jsx)("div",{className:f.draftBadgeContainer,children:(0,a.jsx)(m,{})}),(0,a.jsx)(s.Text,{variant:"heading-xl/semibold",className:f.tierPrice,tag:"div",children:(0,r.formatPrice)(C.price,C.currency)}),(0,a.jsx)(s.Text,{variant:"text-xs/normal",color:"interactive-normal",className:f.tierPeriod,children:c.default.Messages.GUILD_ROLE_SUBSCRIPTION_AMOUNT_PER_PERIOD.format({period:(0,u.formatPlanInterval)({interval:C.interval,interval_count:C.interval_count})})})]})}},97116:function(e,t,n){"use strict";n.r(t),n.d(t,{GuildRoleSubscriptionCollapsibleCardBasicInfo:function(){return p}}),n("222007");var a=n("37983");n("884691");var l=n("77078"),s=n("837899"),i=n("425190"),r=n("153160"),u=n("577357"),o=n("167109"),d=n("373622"),c=n("944256"),f=n("782340"),h=n("948286");let p=e=>{let{listingId:t,isListingPublished:n,expanded:p,onToggleExpanded:m}=e,E=(0,d.default)(),[C]=o.useName(t),[g]=o.useImage(t,E),[S]=o.useSubscriptionPlan(t);return(0,a.jsxs)("div",{className:h.container,children:[(0,a.jsx)(c.GuildRoleSubscriptionCardTierImage,{image:g}),(0,a.jsxs)("div",{className:h.tierTextInfoContainer,children:[(0,a.jsx)(c.GuildRoleSubscriptionCardTierName,{listingName:C}),(0,a.jsxs)("div",{className:h.tierPriceContainer,children:[!n&&(0,a.jsx)(c.GuildRoleSubscriptionCardDraftTierBadge,{}),(0,a.jsxs)(l.Text,{variant:"text-xs/normal",className:h.tierPrice,children:[(0,r.formatPrice)(S.price,S.currency)," ",f.default.Messages.GUILD_ROLE_SUBSCRIPTION_AMOUNT_PER_PERIOD.format({period:(0,u.formatPlanInterval)({interval:S.interval,interval_count:S.interval_count})})]})]})]}),(0,a.jsx)(l.Clickable,{onClick:m,children:p?(0,a.jsx)(i.default,{className:h.toggleButton}):(0,a.jsx)(s.default,{className:h.toggleButton})})]})}},18544:function(e,t,n){"use strict";n.r(t),n.d(t,{PurchaseConfirmationLite:function(){return c}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("724038"),r=n("305961"),u=n("809167"),o=n("782340"),d=n("646839");let c=e=>{let{onClose:t,listing:n,guildId:c}=e,f=(0,l.useStateFromStores)([r.default],()=>r.default.getGuild(c),[c]),h=(0,u.default)({listing:n,guildId:c});return(0,a.jsxs)("div",{className:d.confirmationContainer,children:[(0,a.jsx)(s.Heading,{className:d.confirmationHeader,variant:"heading-lg/extrabold",children:o.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_LITE_TITLE.format({serverName:null==f?void 0:f.toString(),tierName:n.name})}),!h.isEmpty()&&(0,a.jsx)(s.Text,{className:d.confirmationSubtitle,variant:"text-sm/normal",color:"header-secondary",children:o.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_LITE_SUBTITLE.format({benefits:h.asString()})}),(0,a.jsx)(s.Button,{className:d.openDiscordButton,onClick:()=>(0,i.default)("role_sub_mweb_success_modal"),children:o.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_LITE_OPEN_DISCORD_BUTTON}),(0,a.jsx)(s.Button,{className:d.doneButton,look:s.Button.Looks.BLANK,onClick:()=>t(!0),children:o.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_LITE_DONE_BUTTON})]})}},258501:function(e,t,n){"use strict";n.r(t),n.d(t,{Header:function(){return T},PurchaseConfirmation:function(){return v}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("446674"),r=n("77078"),u=n("430568"),o=n("834897"),d=n("85336"),c=n("305961"),f=n("945330"),h=n("271560"),p=n("577357"),m=n("837008"),E=n("41391"),C=n("833531"),g=n("393381"),S=n("677795"),_=n("782340"),I=n("751071");let T=e=>{let{onClose:t,listing:n,step:l,guildId:i}=e,u=(0,m.useSubscriptionsSettings)(i),c=(0,o.default)(S.RESPONSIVE_MOBILE_HEIGHT_SMALL_QUERY);return(0,a.jsxs)("div",{className:s(I.headerContainer,{[I.headerEmpty]:c}),children:[(()=>{var e;if(c)return null;let t=(null==u?void 0:null===(e=u.cover_image_asset)||void 0===e?void 0:e.application_id)!=null?(0,h.getAssetURL)(u.cover_image_asset.application_id,u.cover_image_asset,440):void 0;return(0,a.jsx)("img",{src:t,alt:"",className:I.headerImage})})(),(()=>{if(l!==d.Step.CONFIRM)return null;let e=null==n.image_asset?void 0:(0,h.getAssetURL)(n.application_id,n.image_asset,80);return(0,a.jsx)("div",{className:I.tierImageContainer,children:(0,a.jsx)("img",{src:e,alt:"",className:I.tierImage})})})(),(0,a.jsx)(r.Clickable,{className:I.closeContainer,onClick:()=>t(!1),"aria-label":_.default.Messages.CLOSE,children:(0,a.jsx)(f.default,{className:I.closeIcon})})]})},v=e=>{let{onClose:t,listing:n,guildId:l}=e,s=(0,i.useStateFromStores)([c.default],()=>c.default.getGuild(l),[l]),o=(0,E.default)(l),d=o.filter(e=>e.roles.includes(n.role_id)),f=n.role_benefits.benefits.filter(p.isChannelBenefit).slice(0,null===d.length?4:3),h=(0,C.default)(f).slice(0,null===d.length?4:3);return(0,a.jsxs)("div",{className:I.confirmationContainer,children:[(0,a.jsx)(r.Heading,{className:I.confirmationHeader,variant:"heading-xl/semibold",color:"header-secondary",children:_.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_TITLE.format({serverName:null==s?void 0:s.toString()})}),(0,a.jsx)(r.Text,{className:I.confirmationSubtitle,variant:"text-md/normal",color:"header-secondary",children:_.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_SUBTITLE.format({tier:n.name})}),h.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Text,{variant:"text-xs/normal",color:"header-secondary",className:I.confirmationSectionLabel,children:_.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_CHANNEL_PREVIEW}),(0,a.jsx)("div",{className:I.confirmationBenefits,children:h.map(e=>(0,a.jsx)(g.default,{benefit:e,guildId:l,onClick:()=>t(!0)},(0,p.getBenefitKey)(e)))})]}),(()=>{var e;if(0===d.length)return null;let t=d[0];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Text,{variant:"text-xs/medium",color:"header-secondary",className:I.confirmationSectionLabel,children:_.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_PREMIUM_EMOJI_PREVIEW_TITLE}),(0,a.jsxs)("div",{className:I.emojiBenefitsRow,children:[(0,a.jsx)(u.default,{emojiId:t.id,emojiName:t.name,animated:null!==(e=t.animated)&&void 0!==e&&e,className:I.emojiImage}),(0,a.jsxs)("div",{children:[(0,a.jsx)(r.Text,{variant:"text-md/medium",color:"header-primary",className:I.emojiName,children:_.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_PREMIUM_EMOJI_BENEFIT_TEXT}),(0,a.jsx)(r.Text,{color:"interactive-normal",variant:"text-sm/normal",children:_.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_PREMIUM_EMOJI_BENEFIT_DESCRIPTION.format({count:d.length})})]})]})]})})(),(0,a.jsx)(r.Button,{className:I.confirmationButton,onClick:()=>t(!0),children:_.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_MODAL_CONFIRMATION_DONE_BUTTON})]})}},393381:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("77078"),s=n("461380"),i=n("484456"),r=n("559979"),u=n("70695"),o=n("73495");function d(e){let{benefit:t,guildId:n,onClick:d}=e,c=(0,u.default)(n,t.ref_id),f=(0,a.jsx)(i.default,{guildId:n,emojiId:t.emoji_id,emojiName:t.emoji_name});return(0,a.jsxs)(l.Clickable,{className:o.container,onClick:()=>{null==c||c.navigateToChannel(),d()},"aria-label":null==c?void 0:c.ariaLabel,role:"link",children:[(0,a.jsx)("div",{className:o.emojiContainer,children:f}),(0,a.jsxs)("div",{className:o.infoContainer,children:[(0,a.jsx)(l.Text,{variant:"text-md/medium",color:"header-primary",className:o.name,children:(0,r.default)(t)}),(0,a.jsx)(l.Text,{color:"interactive-normal",variant:"text-sm/normal",children:t.description})]}),(0,a.jsx)(s.default,{direction:s.default.Directions.RIGHT,className:o.caret})]})}},320946:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var a=n("37983"),l=n("884691"),s=n("627445"),i=n.n(s),r=n("866227"),u=n.n(r),o=n("446674"),d=n("913144"),c=n("775433"),f=n("834897"),h=n("685665"),p=n("233322"),m=n("567054"),E=n("982527"),C=n("157186"),g=n("267567"),S=n("666391"),_=n("10514"),I=n("701909"),T=n("577357"),v=n("837008"),x=n("136185"),N=n("176687"),A=n("492548"),M=n("18544"),R=n("258501"),j=n("677795"),L=n("49111"),O=n("782340"),y=(e,t,n,s)=>{let r;let y=(0,o.useStateFromStores)([g.default],()=>g.default.isLurking(t)),P=(0,C.useShowMemberVerificationGate)(t),b=(0,o.useStateFromStores)([E.default],()=>null!=t?E.default.getRequest(t):null),D=(null==b?void 0:b.applicationStatus)===m.GuildJoinRequestApplicationStatuses.SUBMITTED,U=null==e?void 0:e.subscription_plans[0],w=null==U?void 0:U.id,F=(null==e?void 0:e.published)===!0,k=null==U?void 0:U.sku_id,V=(0,o.useStateFromStores)([_.default],()=>null!=w?_.default.get(w):null),{activeSubscription:B,activeSubscriptionPlanFromStore:H}=(0,N.default)(n),G=null==B||null!=H,W=(0,v.useSubscriptionListingsForGroup)(n,{includeSoftDeleted:!0}),Y=W.map(e=>e.subscription_plans[0].id),z=(0,x.getRoleSubscriptionMutationPlanId)(B),K=null!=z,Z=(null==B?void 0:B.trialId)!=null,{loading:X,getTrialPurchaseEligibility:J}=(0,A.useGetTrialPurchaseEligibility)(),q=(0,v.useSubscriptionTrial)(null==e?void 0:e.id),{analyticsLocations:Q}=(0,h.default)(),$=(null==B?void 0:B.paymentGateway)===L.PaymentGateways.APPLE_PARTNER;D?r=O.default.Messages.GUILD_ROLE_SUBSCRIPTIONS_REQUIRE_APPROVED_MEMBER:y&&!P?r=O.default.Messages.GUILD_ROLE_SUBSCRIPTIONS_REQUIRE_APPROVED_MEMBER:z===w?r=O.default.Messages.GUILD_ROLE_SUBSCRIPTION_HAS_PENDING_MUTATION_TO_CURRENT_LISTING.format({changeDate:null!=B?u(B.currentPeriodEnd).format("MMM DD, YYYY"):""}):K?r=O.default.Messages.GUILD_ROLE_SUBSCRIPTION_HAS_PENDING_MUTATION:Z?r=O.default.Messages.GUILD_ROLE_SUBSCRIPTION_CHANGE_TIER_DISABLED_IN_TRIAL:$&&(r=O.default.Messages.GUILD_ROLE_SUBSCRIPTION_CHANGE_TIER_DISABLED_IF_IAP);let ee=(0,f.default)(j.RESPONSIVE_MOBILE_WIDTH_SIZE_QUERY);l.useEffect(()=>{F&&null!=k&&d.default.wait(()=>{(0,c.fetchSubscriptionPlansForSKU)(k)})},[F,k]);let et=l.useCallback(async()=>{let n,l;if(i(null!=e,"No subscription listing"),i(null!=U,"No subscription plan"),i(F,"Cannot purchase this unpublished plan"),(null==q?void 0:q.active_trial)!=null){let a=await J(t,e.id,q.active_trial.id);if((null==a?void 0:a.is_eligible)===!0){var r;n=null==q?void 0:null===(r=q.active_trial)||void 0===r?void 0:r.id}else l=O.default.Messages.GUILD_ROLE_SUBSCRIPTION_INELIGIBLE_TRIAL_DISCLAIMER}(0,S.default)({activeSubscription:B,analyticsSubscriptionType:L.SubscriptionTypes.GUILD,trialId:n,trialFooterMessageOverride:(null==q?void 0:q.active_trial)!=null?O.default.Messages.GUILD_ROLE_SUBSCRIPTION_TRIAL_RENEWAL_FOOTER.format({trialInterval:(0,T.formatPlanIntervalDuration)(q.active_trial),days:1,contactLink:L.MarketingURLs.CONTACT,helpdeskArticle:I.default.getArticleURL(L.HelpdeskArticles.ROLE_SUBSCRIPTION_TRIAL)}):void 0,analyticsLocations:Q,analyticsLocation:s,renderHeader:(n,l,s)=>(0,a.jsx)(R.Header,{onClose:l,listing:e,step:s,guildId:t}),initialPlanId:U.id,skuId:U.sku_id,planGroup:Y,renderPurchaseConfirmation:(n,l)=>ee?(0,a.jsx)(M.PurchaseConfirmationLite,{listing:e,onClose:l,guildId:t}):(0,a.jsx)(R.PurchaseConfirmation,{listing:e,onClose:l,guildId:t}),reviewWarningMessage:l})},[F,e,U,B,Y,t,Q,s,J,q,ee]),en=l.useCallback(()=>{(0,p.openMemberVerificationModal)(t)},[t]);return{openModal:P?en:et,canOpenModal:!y&&null!=V&&G&&!D&&!K&&!Z&&!$,cannotOpenReason:r,isCheckingTrialEligibility:X}}},661455:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}}),n("222007");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("77078"),r=n("42203"),u=n("305961"),o=n("837008"),d=n("291444"),c=n("847426"),f=n("900076"),h=n("108314"),p=n("49111"),m=n("782340"),E=n("528392");function C(e){let{guildId:t,channelId:n}=e,C=(0,d.useSubscriptionListingsForChannel)({guildId:t,channelId:n}),g=(0,o.useGroupListingsForGuild)(t),S=(0,o.useSubscriptionsSettings)(t),_=(0,s.useStateFromStores)([u.default],()=>u.default.getGuild(t),[t]),I=null==_?void 0:_.name,T=(0,s.useStateFromStores)([r.default],()=>r.default.getChannel(n)),v=l.useMemo(()=>{let e={};for(let t of g)for(let n of t.subscription_listings_ids)e[n]=t.id;return e},[g]);return((0,c.default)({guildId:t,location:p.AnalyticsLocations.ROLE_SUBSCRIPTION_GATED_CHANNEL,relevantSubscriptionListingIds:C.map(e=>e.id)}),null==_)?(0,a.jsx)("div",{className:E.spinnerContainer,children:(0,a.jsx)(i.Spinner,{className:E.spinner})}):(0,a.jsxs)(i.ScrollerAuto,{className:E.pageContainer,children:[(0,a.jsx)(i.Heading,{variant:"heading-xl/semibold",className:E.joinCtaTitle,children:m.default.Messages.GUILD_ROLE_SUBSCRIPTION_PURCHASE_UPSELL_PAGE_CTA.format({serverName:I,channelName:null==T?void 0:T.name})}),(0,a.jsx)(i.Text,{className:E.joinCtaSubtitle,variant:"text-md/normal",color:"header-secondary",children:null==S?void 0:S.description}),(0,a.jsx)(f.default,{guildId:t,children:C.filter(e=>null!=v[e.id]).map(e=>(0,a.jsx)(h.default,{guildId:t,listingId:e.id,groupListingId:v[e.id],analyticsLocation:p.AnalyticsLocations.ROLE_SUBSCRIPTION_GATED_CHANNEL},e.id))})]})}},70695:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("446674"),l=n("139375"),s=n("242740"),i=n("393414"),r=n("42203"),u=n("800762"),o=n("848848"),d=n("49111");function c(e,t){let n=(0,a.useStateFromStores)([r.default],()=>r.default.getChannel(t)),{needSubscriptionToAccess:c}=(0,o.default)(null==n?void 0:n.id);if(null==n||c)return null;let f=n.isGuildVocal(),h=(0,l.default)({channel:n});return{navigateToChannel:()=>{f?s.default.handleVoiceConnect({channel:n,connected:u.default.isInChannel(n.id),needSubscriptionToAccess:!1,routeDirectlyToChannel:!0}):(0,i.transitionTo)(d.Routes.CHANNEL(e,n.id))},ariaLabel:h}}},649275:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}}),n("222007");var a=n("271938"),l=n("957255"),s=n("316133"),i=n("991170"),r=n("398604"),u=n("270161");function o(e){if(!e.isGuildVoice())return!1;let t=r.default.getGuildScheduledEventsByIndex(r.StaticGuildEventIndexes.CHANNEL_EVENT_ACTIVE(e.id));if(t.length<1)return!1;let n=l.default.can(u.CREATE_GUILD_EVENT_VOICE_CHANNEL_PERMISSIONS,e);if(!n)return!1;let o=new Set(s.default.getVoiceStatesForChannel(e).map(e=>e.user.id)),d=a.default.getId();for(let t of o)if(t!==d&&i.default.can({permission:u.CREATE_GUILD_EVENT_VOICE_CHANNEL_PERMISSIONS,user:t,context:e}))return!1;return!0}},147257:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("244201"),r=n("817963"),u=n("124824"),o=n("981913"),d=n("42203"),c=n("293137"),f=n("381546"),h=n("374021"),p=n("322224"),m=n("649275"),E=n("534222"),C=n("782340"),g=n("717682");function S(e){let{channelId:t,onClick:n}=e,S=(0,i.useAppContext)(),_=(0,E.useActiveEvent)(t),I=(0,l.useStateFromStores)([d.default],()=>d.default.getChannel(t),[t]),{canManageGuildEvent:T}=(0,r.useManageResourcePermissions)(I),v=T(_);if(null==_)return null;let x=()=>{if(null!=I&&(0,m.default)(I)){(0,h.openEndEventModal)(I,S);return}n()},N=()=>{p.default.endEvent(_.id,_.guild_id)};return v?(0,a.jsx)(s.Popout,{renderPopout:e=>{let{closePopout:t}=e;return(0,a.jsx)(u.default,{children:(0,a.jsx)(s.Menu,{navId:"exit-options",onSelect:()=>{},"aria-label":C.default.Messages.DISCONNECT_MENU,onClose:t,children:(0,a.jsx)(s.MenuItem,{id:"end-voice-event",color:"danger",action:N,label:C.default.Messages.END_EVENT,icon:f.default})})})},align:"center",position:"top",animation:s.Popout.Animation.FADE,children:e=>{let{onClick:t}=e;return(0,a.jsx)(o.CenterControlButton,{label:C.default.Messages.DISCONNECT_SELF,color:"red",iconComponent:c.default,onClick:x,onPopoutClick:t,className:g.buttonSpacing})}}):(0,a.jsx)(o.CenterControlButton,{className:g.buttonSpacing,label:C.default.Messages.DISCONNECT_SELF,color:"red",iconComponent:c.default,onClick:n})}},558286:function(e,t,n){"use strict";n.r(t),n.d(t,{useGuildEventModalStore:function(){return l}});var a=n("308503");let l=(0,a.default)(e=>({canCloseModal:!0,onUpdateCanCloseModal(t){e({canCloseModal:t})}}))},941298:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("77078"),s=n("664336"),i=n("466148"),r=n("393745"),u=n("782340"),o=n("223209");function d(e){let{guildEvent:t,recurrenceId:n}=e,d=(0,i.default)(t.id,n);return null==t?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.default.Divider,{className:o.divider}),(0,a.jsx)(r.GuildEventTimeStatus,{startTime:d.startTime.toISOString(),status:t.status,liveText:u.default.Messages.LIVE_EVENT,className:o.eventSchedule,textVariant:"text-lg/semibold",eventType:t.entity_type,guildEventId:null==t?void 0:t.id,recurrenceId:n}),(0,a.jsx)(l.Text,{color:"header-secondary",variant:"text-md/normal",className:o.eventName,children:t.name})]})}},888237:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("77078"),r=n("772280"),u=n("782340"),o=n("317797");function d(e){let{className:t,iconContainerClassName:n,icon:l,color:d,title:c,description:f,userCount:h,onClick:p,highlight:m}=e;return(0,a.jsxs)(i.Clickable,{className:s(o.container,t,null!=m&&{[o.pulse]:m}),onClick:p,children:[(0,a.jsx)("div",{style:{backgroundColor:d},className:s(o.icon,n),children:l}),(0,a.jsxs)("div",{className:o.textContainer,children:[(0,a.jsx)(i.Heading,{variant:"heading-md/semibold",children:c}),(0,a.jsx)(i.Text,{variant:"text-xs/normal",color:"header-secondary",className:o.inline,children:f}),null!=h&&h>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Text,{variant:"text-xs/normal",color:"header-secondary",className:o.dot,children:"•"}),(0,a.jsx)(i.Text,{variant:"text-xs/normal",color:"header-secondary",className:o.inline,children:u.default.Messages.GUILD_EVENT_INTERESTED.format({count:h})})]}):null]}),(0,a.jsx)(r.default,{height:16,width:16,className:o.caret})]})}},18517:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("669491"),s=n("77078"),i=n("943232"),r=n("842672"),u=n("888237"),o=n("782340");function d(e){let{className:t,guildId:d}=e,c=(0,r.default)();return(0,a.jsx)(u.default,{className:t,icon:(0,a.jsx)(i.default,{height:20,width:20}),color:l.default.unsafe_rawColors.BRAND_500.css,title:o.default.Messages.SCHEDULE_EVENT,description:o.default.Messages.SCHEDULE_EVENT_DESCRIPTION,onClick:function(){(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("590942").then(n.bind(n,"590942"));return t=>(0,a.jsx)(e,{...t,guildId:d})},c)}})}},109526:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}}),n("808653");var a=n("37983");n("884691");var l=n("446674"),s=n("669491"),i=n("77078"),r=n("817963"),u=n("42203"),o=n("943232"),d=n("374021"),c=n("398604"),f=n("534222"),h=n("822516"),p=n("888237"),m=n("782340"),E=n("571835");function C(e){let{channelId:t}=e,C=(0,l.useStateFromStores)([u.default],()=>u.default.getChannel(t),[t]),g=(0,f.useImminentUpcomingGuildEvents)(t),S=null!=(0,f.useActiveEvent)(t),{canManageGuildEvent:_}=(0,r.useManageResourcePermissions)(C),I=(0,l.useStateFromStoresObject)([c.default],()=>g.reduce((e,t)=>(e[t.id]=c.default.getUserCount(t.id,(0,h.getNextRecurrenceIdInEvent)(t)),e),{}));return g.length<1||S?null:(0,a.jsx)(a.Fragment,{children:g.map(e=>(0,a.jsx)(p.default,{icon:(0,a.jsx)(o.default,{height:20,width:20}),color:s.default.unsafe_rawColors.GREEN_360.css,title:(_(e)?m.default.Messages.GUILD_EVENT_START_PROMPT:m.default.Messages.GUILD_EVENT_UPCOMING_PROMPT).format({eventName:e.name}),description:m.default.Messages.GUILD_EVENT_START_PROMPT_DESCRIPTION.format({startTime:(0,h.getEventTimeData)(e.scheduled_start_time).startDateTimeString}),onClick:()=>{var t;_(t=e)?(0,i.openModalLazy)(async()=>{let{default:e}=await n.el("298843").then(n.bind(n,"298843"));return n=>(0,a.jsx)(e,{...n,event:t})}):(0,d.openGuildEventDetails)({eventId:t.id,parentGuildId:t.guild_id})},userCount:I[e.id],className:E.eventPrompt},e.id))})}},487984:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("669491"),s=n("244201"),i=n("751661"),r=n("228427"),u=n("888237"),o=n("782340");function d(e){let{className:t,channel:n,highlight:d}=e,c=(0,s.useAppContext)();return(0,a.jsx)(u.default,{highlight:null!=d&&d,className:t,icon:(0,a.jsx)(r.default,{height:20,width:20}),color:l.default.unsafe_rawColors.GREEN_360.css,title:o.default.Messages.STAGE_CHANNEL_START_TITLE,description:o.default.Messages.STAGE_CHANNEL_START_SUBTITLE,onClick:function(){(0,i.openStageChannelSettings)(n,c)}})}},842672:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("77078"),l=n("244201"),s=n("558286"),i=n("49111");let r="guild-event-modal";var u=()=>{let e=(0,l.useAppContext)(),t=e===i.AppContext.POPOUT?a.POPOUT_MODAL_CONTEXT:a.DEFAULT_MODAL_CONTEXT;return{modalKey:r,contextKey:t,onCloseRequest:()=>{s.useGuildEventModalStore.getState().canCloseModal&&(0,a.closeModal)(r,t)}}}},201380:function(e,t,n){"use strict";n.r(t),n.d(t,{MoreVoiceUser:function(){return b},AudienceVoiceUser:function(){return D},default:function(){return w}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("316693"),u=n("77078"),o=n("255397"),d=n("272030"),c=n("987317"),f=n("990766"),h=n("650912"),p=n("76393"),m=n("845038"),E=n("374014"),C=n("223913"),g=n("709463"),S=n("264429"),_=n("930291"),I=n("506885"),T=n("981601"),v=n("271938"),x=n("305961"),N=n("957255"),A=n("800762"),M=n("272339"),R=n("68148"),j=n("49111"),L=n("171644"),O=n("706530"),y=n("782340"),P=n("375674");function b(e){let{numUsers:t}=e;return(0,a.jsx)("div",{className:P.moreContainer,children:(0,a.jsxs)(u.Text,{color:"text-muted",variant:"text-sm/medium",children:["+",t]})})}function D(e){let{numAudience:t,collapsed:n}=e,l=n?t:y.default.Messages.LISTENING_COUNT.format({count:t});return(0,a.jsxs)("div",{className:i(P.audienceContainer,{[P.audienceContainerCollapsed]:n}),children:[(0,a.jsx)("div",{className:P.audienceIconContainer,children:(0,a.jsx)(M.default,{className:P.audienceIcon})}),(0,a.jsx)(u.Text,{color:"text-muted",variant:"text-sm/medium",children:l})]})}class U extends l.PureComponent{get canWatchStream(){let{channel:e,isStreaming:t}=this.props;return t&&(0,C.canWatchStream)(e,A.default,x.default,N.default,p.default)[0]}render(){let{userPopoutOpen:e}=this.state,{connectUserDragSource:t,canDrag:n,isSelfOnOtherClient:l,user:s,channel:i}=this.props,r=(0,a.jsx)("div",{className:P.draggable,"data-dnd-name":i.name,onMouseEnter:l?void 0:this.handleMouseEnter,onMouseLeave:l?void 0:this.handleHidePreview,children:(0,a.jsx)(u.Popout,{preload:()=>(0,I.default)(s.id,s.getAvatarURL(i.guild_id,80),{guildId:i.guild_id,channelId:i.id}),position:"right",renderPopout:this.renderUserPopout,shouldShow:e,onRequestClose:this.handleCloseUserPopout,children:e=>this.renderUser(e)})});return n?t(r):r}constructor(...e){super(...e),this.domElementRef=l.createRef(),this.state={userPopoutOpen:!1},this.handleClickUser=()=>{this.setState({userPopoutOpen:!this.state.userPopoutOpen})},this.handleCloseUserPopout=()=>{this.setState({userPopoutOpen:!1})},this.handleHidePreview=()=>{let{hidePreview:e,isStreaming:t,user:n,hangStatusActivity:a}=this.props;(t||null!=a)&&(null==e||e(n.id))},this.handleMouseEnter=()=>{let{user:e,showPreview:t,isStreaming:n,hangStatusActivity:a}=this.props;(n||null!=a)&&(null==t||t(e.id))},this.handleWatchStream=()=>{let{user:e,channel:t,isWatching:n,hidePreview:a}=this.props;if(!this.canWatchStream)return;let l={streamType:O.StreamTypes.GUILD,ownerId:e.id,channelId:t.id,guildId:t.guild_id};v.default.getId()!==e.id&&c.default.selectVoiceChannel(t.id),n?((0,g.default)(l),o.default.selectParticipant(l.channelId,(0,E.encodeStreamKey)(l))):(0,f.watchStreamAndTransitionToStream)(l),null==a||a(e.id)},this.handleJoinVoice=()=>{let{user:e,channel:t,hidePreview:n}=this.props;N.default.can(r.default.combine(j.Permissions.CONNECT,j.Permissions.VIEW_CHANNEL),t)&&(c.default.selectVoiceChannel(t.id),null==n||n(e.id))},this.handleUserContextMenu=e=>{let{channel:t,user:l}=this.props;(0,d.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("834247").then(n.bind(n,"834247"));return n=>(0,a.jsx)(e,{...n,user:l,guildId:t.guild_id,channel:t,showMediaItems:!0,showStageChannelItems:t.isGuildStageVoice()})})},this.renderUserPopout=e=>{let{channel:t,user:n}=this.props,l=t.getGuildId();return(0,a.jsx)(T.default,{userId:n.id,guildId:null!=l?l:void 0,channelId:t.id,...e})},this.renderStreamPopout=()=>{let{user:e,channel:t,previewIsOpen:n,location:l}=this.props;return(0,a.jsx)(S.default,{user:e,channel:t,onWatch:this.handleWatchStream,previewIsOpen:n,location:l})},this.renderHangStatusPopout=()=>{let{hangStatusActivity:e,previewIsOpen:t,user:n,channel:l}=this.props;return(0,a.jsx)(_.default,{userId:n.id,channel:l,hangStatusActivity:e,previewIsOpen:t})},this.renderUser=e=>{let{isSelfOnOtherClient:t,otherClientSessionType:n,voicePlatform:l,shouldShowPreview:s,mute:r,localMute:o,localVideoDisabled:d,speaking:c,user:f,deaf:h,priority:p,collapsed:E,isStreaming:C,isGuest:g,nick:S,video:_,serverMute:I,serverDeaf:T,tabIndex:v,embeddedApplication:x,channel:N,hangStatusActivity:A}=this.props,{userPopoutOpen:M}=this.state,j=L.GAME_CONSOLE_SESSIONS.has(null!=n?n:""),O={user:f,speaking:c,mute:r,localMute:o,localVideoDisabled:d,isStreaming:C,isGuest:g,video:_,priority:p,deaf:h,nick:S,collapsed:E,overlap:E,serverMute:I,serverDeaf:T,tabIndex:v,otherClientSessionType:n,voicePlatform:l,embeddedApplication:x,avatarContainerClass:i({[P.userAvatar]:!0}),disabled:t&&!j,selected:M,onClick:j?void 0:this.handleClickUser,onDoubleClick:this.handleWatchStream,onContextMenu:this.handleUserContextMenu,guildId:N.guild_id,hangStatusActivity:A};if(t){var b;return(0,a.jsx)(u.Tooltip,{text:null!==(b=(0,m.default)(n))&&void 0!==b?b:y.default.Messages.CONNECTED_ON_ANOTHER_CLIENT,children:e=>{let{onClick:t,onContextMenu:n,...l}=e;return(0,a.jsx)(R.default,{...O,...l})}})}return(0,a.jsx)(u.Popout,{position:"right",renderPopout:C?this.renderStreamPopout:this.renderHangStatusPopout,shouldShow:s&&!M,onRequestClose:this.handleHidePreview,spacing:0,children:()=>(0,a.jsx)(R.default,{...O,onMouseDown:e.onMouseDown,onKeyDown:e.onKeyDown})})}}}U.defaultProps={isSelfOnOtherClient:!1};var w=(0,h.makeVoiceUserDraggable)(U)},884155:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}}),n("222007"),n("424973");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("862337"),o=n("899633"),d=n("191225"),c=n("442939"),f=n("699209"),h=n("32346"),p=n("835040"),m=n("373469"),E=n("271938"),C=n("26989"),g=n("42887"),S=n("957255"),_=n("824563"),I=n("235660"),T=n("280168"),v=n("800762"),x=n("68148"),N=n("158998"),A=n("201380"),M=n("49111"),R=n("39141"),j=n("707155");let L=l.memo(e=>{var t;let{mute:n,deaf:l,user:s,channel:i,sessionId:u,nick:S}=e,x=s.id,j=(0,r.useStateFromStores)([E.default],()=>E.default.getId()===x,[x]),[L,O,y]=(0,r.useStateFromStoresArray)([g.default],()=>j?[!g.default.isSupported()||g.default.isSelfMute()||g.default.isSelfMutedTemporarily(),g.default.isSelfDeaf(),!1]:[!g.default.isSupported()||g.default.isLocalMute(x),!1,g.default.isLocalVideoDisabled(x)],[j,x]),P=(0,r.useStateFromStores)([T.default],()=>T.default.isPrioritySpeaker(x)),b=(0,o.default)({userId:x,checkSoundSharing:!0}),D=(0,r.useStateFromStores)([C.default],()=>C.default.isGuestOrLurker(i.guild_id,x)),U=(0,r.useStateFromStores)([d.default],()=>d.default.getEmbeddedActivitiesForChannel(i.id).find(e=>{let{connections:t}=e;return t.has(x)}),[x,i.id]),w=(0,c.default)(null!=U?[U.application_id]:[]),[F,k]=(0,r.useStateFromStoresArray)([m.default],()=>[m.default.getStreamForUser(x,i.getGuildId()),m.default.getActiveStreamForUser(x,i.getGuildId())],[i,x]),V=(0,r.useStateFromStores)([I.default],()=>I.default.getSessionById(u)),B=N.default.useName(s),H=(0,r.useStateFromStores)([v.default],()=>v.default.getVoicePlatformForChannel(i.id,x),[i.id,x]),{enableHangStatus:G}=f.HangStatusExperiment.useExperiment({guildId:i.guild_id,location:"VoiceUsers"}),W=(0,r.useStateFromStores)([_.default,h.default],()=>G?j?h.default.getHangStatusActivity():_.default.findActivity(s.id,e=>e.type===M.ActivityTypes.HANG_STATUS):null);return(0,a.jsx)(p.default,{shakeLocation:R.ShakeLocation.VOICE_USER,isShaking:b,children:(0,a.jsx)(A.default,{...e,nick:null!=S?S:B,canDrag:e.canDrag&&!D,otherClientSessionType:null==V?void 0:null===(t=V.clientInfo)||void 0===t?void 0:t.os,voicePlatform:H,localMute:L&&!j,localVideoDisabled:y,mute:n||L,deaf:l||O,speaking:b,priority:P,embeddedApplication:w[0],isStreaming:null!=F&&F.channelId===i.id,isWatching:null!=k&&k.state!==M.ApplicationStreamStates.ENDED,isGuest:D,hangStatusActivity:W})})});L.displayName="ConnectedVoiceUser";class O extends l.Component{renderVoiceUsers(){let{channel:e,allowDragging:t,voiceStates:n,collapsed:l,collapsedMax:s=6,tabIndex:i,location:r,numAudience:u}=this.props,{previewUserId:o,previewIsOpen:d}=this.state;if(null==n||0===n.length)return null;let c=l&&n.length>s+1?n.slice(0,s):n,f=c.map(n=>{var s;let{user:u,nick:c,voiceState:f}=n;return(0,a.jsx)(L,{user:u,nick:c,isSelfOnOtherClient:E.default.getId()===u.id&&f.sessionId!==E.default.getSessionId(),mute:f.isVoiceMuted(),deaf:f.isVoiceDeafened(),video:f.selfVideo,serverMute:f.mute,serverDeaf:f.deaf,sessionId:null!==(s=f.sessionId)&&void 0!==s?s:"",channel:e,collapsed:l,canDrag:t&&S.default.can(M.Permissions.MOVE_MEMBERS,e),showPreview:this.handleShowPreview,hidePreview:this.handleHidePreview,previewIsOpen:d,shouldShowPreview:o===u.id,tabIndex:i,location:r},u.id)});return null!=u&&u>0?f.push((0,a.jsx)(A.AudienceVoiceUser,{collapsed:l,numAudience:u})):l&&n.length>s+1&&f.push((0,a.jsx)(A.MoreVoiceUser,{numUsers:n.length-s})),f}render(){let e=this.renderVoiceUsers(),{collapsed:t,className:n,children:l}=this.props;return null==e&&null==l?null:(0,a.jsxs)(x.VoiceUserList,{className:i(n,j.list,{[j.collapsed]:t}),collapsed:t,children:[e,l]})}constructor(...e){super(...e),this.showPreview=new u.DelayedCall(50,()=>{this.setState({previewUserId:this.previewUserIdAfterDelay}),this.previewUserIdAfterDelay=null}),this.hidePreview=new u.DelayedCall(175,()=>{this.setState({previewUserId:null})}),this.previewUserIdAfterDelay=null,this.state={previewUserId:null,previewIsOpen:!1},this.handleShowPreview=e=>{this.props.allowPreviews&&(this.setState({previewIsOpen:!0}),this.hidePreview.cancel(),this.previewUserIdAfterDelay=e,this.showPreview.delay())},this.handleHidePreview=e=>{if(!this.props.allowPreviews)return;let{previewUserId:t}=this.state;this.showPreview.cancel(),t===e&&(this.setState({previewIsOpen:!1}),this.hidePreview.delay())}}}O.defaultProps={allowPreviews:!0,allowDragging:!0};var y=O},230035:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}}),n("222007");var a=n("37983"),l=n("884691"),s=n("65597"),i=n("151426"),r=n("551042"),u=n("77078"),o=n("509802"),d=n("619443"),c=n("162771"),f=n("994428");function h(e){return"dismissible_content_".concat(f.DismissibleContentGroupName.GUILD_TAKEOVER_MODAL,"-").concat(e)}var p=l.memo(function(){return!function(){let e=function(){let e=(0,s.default)([d.default],()=>d.default.isConnected());return e?[]:[]}(),[t,p]=(0,o.useDismissibleContentGroup)(e,f.DismissibleContentGroupName.GUILD_TAKEOVER_MODAL),m=(0,r.useHasAnyModalOpen)(),E=l.useRef(null);l.useEffect(()=>{if(null==t){E.current=null;return}!m&&E.current!==t&&(!function(e){let{dismissibleContent:t,markAsDismissed:l}=e,s={onCloseCallback:e=>l(null!=e?e:f.ContentDismissActionType.UNKNOWN),modalKey:h(t)},r=c.default.getGuildId();if(t===i.DismissibleContent.SERVER_SHOP_UPSELL)null!=r&&(0,u.openModalLazy)(async()=>{let{default:e}=await n.el("730801").then(n.bind(n,"730801"));return t=>(0,a.jsx)(e,{...t,guildId:r,markAsDismissed:l})},s)}({dismissibleContent:t,markAsDismissed:p}),E.current=t)},[t,m,p]),l.useEffect(()=>()=>{null!=t&&(0,r.closeModal)(h(t))},[t])}(),null})},930291:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var a=n("37983"),l=n("884691"),s=n("65597"),i=n("77078"),r=n("987317"),u=n("271938"),o=n("957255"),d=n("945956"),c=n("697218"),f=n("599110"),h=n("315102"),p=n("233965"),m=n("699209"),E=n("925749"),C=n("342845"),g=n("661743"),S=n("49111"),_=n("782340"),I=n("730039"),T=e=>{let{hangStatusActivity:t,userId:T,channel:v,previewIsOpen:x}=e,{enableHangStatus:N}=m.HangStatusExperiment.useExperiment({guildId:v.guild_id,location:"HangStatusPopout"}),A=(0,s.default)([u.default],()=>u.default.getId()),M=(0,s.default)([c.default],()=>c.default.getUser(T)),R=(0,s.default)([d.default],()=>d.default.getChannelId()===v.id),j=(0,s.default)([o.default],()=>o.default.can(S.Permissions.CONNECT,v));return(l.useEffect(()=>{N&&null!=t&&x&&null!=M&&A!==T&&f.default.track(S.AnalyticEvents.VIEW_HANG_STATUS,{source:"HangStatusPopout",guild_id:v.guild_id,channel_id:v.id})},[N,t,x,M,A,T,v]),N&&null!=t&&x&&null!=M)?A===T?(0,a.jsx)("div",{className:I.popoutWrapper,children:(0,a.jsx)(g.HangStatusPopout,{currentStatus:t})}):(0,a.jsx)("div",{className:I.popoutWrapper,children:(0,a.jsxs)("div",{className:I.popout,children:[(0,a.jsxs)("div",{className:I.contentContainer,children:[(0,a.jsxs)("div",{className:I.statusGroup,children:[(0,a.jsx)(i.Text,{variant:"text-xs/medium",color:"text-muted",children:_.default.Messages.STATUS_LEAD_IN_JUST}),(0,a.jsx)(i.Text,{variant:"text-sm/semibold",color:"text-normal",children:(0,E.getHangStatusText)(t)})]}),(0,a.jsxs)("div",{className:I.iconGroup,children:[(0,a.jsx)(C.default,{className:I.statusIcon,hangStatusActivity:t}),(0,a.jsxs)("div",{className:I.avatarWrapper,children:[(0,a.jsx)(i.Avatar,{className:I.avatar,size:i.AvatarSizes.SIZE_40,src:(0,h.getUserAvatarURL)(M),"aria-hidden":!0}),(0,a.jsx)("div",{className:I.outline})]})]})]}),!R&&j?(0,a.jsx)(i.Button,{className:I.cta,size:i.Button.Sizes.SMALL,onClick:()=>{!R&&j&&(r.default.selectVoiceChannel(v.id),f.default.track(S.AnalyticEvents.HANG_STATUS_CTA_CLICKED,{source:"HangStatusPopout",guild_id:v.guild_id,channel_id:v.id}))},children:_.default.Messages.CUSTOM_HANG_STATUS_CTA}):null,R?(0,a.jsx)(i.Button,{className:I.cta,size:i.Button.Sizes.SMALL,onClick:()=>{let e=t.state;e===S.HangStatusTypes.CUSTOM?(0,i.openModalLazy)(async()=>{let{default:e}=await n.el("579371").then(n.bind(n,"579371"));return n=>(0,a.jsx)(e,{...n,startingText:t.details,startingEmoji:t.emoji})}):(0,p.updateHangStatus)(e,!0),f.default.track(S.AnalyticEvents.SWIPE_HANG_STATUS,{guild_id:v.guild_id,channel_id:v.id,media_session_id:d.default.getMediaSessionId()})},children:_.default.Messages.CUSTOM_HANGS_STATUS_COPY_CTA}):null]})}):null}},661743:function(e,t,n){"use strict";n.r(t),n.d(t,{HangStatusPopout:function(){return I},default:function(){return T}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n.n(r),o=n("77078"),d=n("943722"),c=n("468759"),f=n("987772"),h=n("233965"),p=n("32346"),m=n("925749"),E=n("329537"),C=n("782340"),g=n("492013"),S=n("635348");let _=e=>{e.stopPropagation(),(0,o.openModalLazy)(async()=>{let{default:e}=await n.el("579371").then(n.bind(n,"579371"));return t=>(0,a.jsx)(e,{...t})})},I=e=>{let{currentStatus:t}=e,n=l.useRef(p.default.getRecentCustomStatuses()),s=(0,m.getHangStatusOptions)(),r=(e,t)=>{e.stopPropagation(),(0,h.updateHangStatus)(t,!0)},I=(e,t)=>{e.stopPropagation(),(0,h.updateCustomHangStatus)(t.status,t.emoji,!0)},T=l.useCallback(e=>{e.stopPropagation(),(0,h.clearHangStatus)(!0)},[]);return(0,a.jsxs)("div",{className:g.popout,children:[(0,a.jsxs)("div",{className:g.iconsContainer,children:[Object.entries(s).map(e=>{let[n,l]=e;return(0,a.jsx)(o.Clickable,{"aria-label":l.title,onClick:e=>r(e,n),children:(0,a.jsx)(E.HangStatusIconWidget,{className:i(g.iconWidget,{[g.selectedWidget]:n===(null==t?void 0:t.state)}),name:l.title,icon:(0,a.jsx)("img",{src:l.icon,alt:"",className:g.icon,style:null!=l.size?{width:l.size,height:l.size}:{}}),style:n===(null==t?void 0:t.state)?{backgroundColor:null!=l.color?l.color:void 0}:{}})},n)}),(0,a.jsx)(E.HangStatusIconWidget,{className:i(g.iconWidget,g.disabledWidget),name:C.default.Messages.STATUS_COMING_SOON,icon:(0,a.jsx)("img",{src:S,alt:"",className:i(g.icon,g.comingSoonIcon)})}),(0,a.jsx)(o.Clickable,{"aria-label":C.default.Messages.STATUS_POPOUT_CLEAR_STATUS,onClick:T,children:(0,a.jsx)(E.HangStatusIconWidget,{className:g.optionButton,name:C.default.Messages.STATUS_POPOUT_CLEAR_STATUS,icon:(0,a.jsx)(c.default,{className:g.editIcon,foreground:g.editIconColor})})})]}),(0,a.jsx)("div",{className:g.divider}),(0,a.jsxs)("div",{className:g.iconsContainer,children:[n.current.map((e,n)=>{let l=e.status===(null==t?void 0:t.details)&&u.isEqual(e.emoji,null==t?void 0:t.emoji);return(0,a.jsx)(o.Clickable,{"aria-label":e.status,onClick:t=>I(t,e),children:(0,a.jsx)(E.HangStatusIconWidget,{className:i(g.iconWidget,{[g.selectedWidget]:l}),name:e.status,icon:null!=e.emoji?(0,a.jsx)(d.ActivityEmoji,{className:g.customIcon,emoji:e.emoji,hideTooltip:!0}):null,style:l?{backgroundColor:"#7174B7B3"}:{backgroundColor:"#6466914D"}})},"custom-status-".concat(n))}),n.current.length>0?(0,a.jsx)(o.Clickable,{"aria-label":null!=t?C.default.Messages.STATUS_POPOUT_EDIT_CUSTOM:C.default.Messages.STATUS_POPOUT_SET_CUSTOM,onClick:_,children:(0,a.jsx)(E.HangStatusIconWidget,{className:g.optionButton,name:null!=t?C.default.Messages.STATUS_POPOUT_EDIT_CUSTOM:C.default.Messages.STATUS_POPOUT_SET_CUSTOM,icon:(0,a.jsx)(f.default,{width:20,height:20,foreground:g.editIconColor})})},"custom-status-edit"):(0,a.jsxs)(o.Clickable,{"aria-label":C.default.Messages.STATUS_POPOUT_SET_CUSTOM,onClick:_,className:g.setCustomButton,children:[(0,a.jsx)(f.default,{className:g.editIcon,foreground:g.editIconColor}),(0,a.jsx)(o.Text,{variant:"text-xs/medium",color:"header-primary",children:C.default.Messages.STATUS_POPOUT_SET_CUSTOM})]},"custom-status-edit-full")]})]})};var T=e=>{let{currentStatus:t}=e,[n,s]=l.useState(!1);return(0,a.jsx)("div",{className:g.statusButtonRegion,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:(0,a.jsx)(o.Popout,{position:"right",renderPopout:()=>(0,a.jsxs)("div",{className:g.popoutWrapper,children:[(0,a.jsx)(I,{currentStatus:t})," "]}),shouldShow:n,onRequestClose:()=>s(!1),spacing:0,children:e=>(0,a.jsx)(E.default,{...e,className:g.statusWidget,hangStatusActivity:t,name:null==t?C.default.Messages.STATUS_NONE:null})})})}},329537:function(e,t,n){"use strict";n.r(t),n.d(t,{HangStatusIconWidget:function(){return p},default:function(){return m}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("927003"),r=n("77078"),u=n("284679"),o=n("925749"),d=n("342845"),c=n("49111"),f=n("782340"),h=n("207509");let p=e=>{let{style:t,className:n,name:l,icon:i}=e;return(0,a.jsx)(r.Tooltip,{text:l,children:e=>(0,a.jsx)("div",{className:s(n,h.iconWidget),style:t,...e,children:null!=i&&i})})};var m=e=>{var t;let{className:n,hangStatusActivity:l,selected:p,name:m,color:E,icon:C}=e,g=(null==l?void 0:l.state)===c.HangStatusTypes.CUSTOM,S=(0,o.getHangStatusDetails)(l),_=null!=m?m:g?l.details:(0,o.getHangStatusText)(l),I=null!==(t=null!=E?E:null==S?void 0:S.color)&&void 0!==t?t:i.default.PRIMARY_500;return(0,a.jsxs)("div",{className:s(n,h.statusGroup),style:p?{backgroundColor:(0,u.hexWithOpacity)(I,.5)}:{},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.Text,{variant:"text-xs/medium",color:"header-secondary",children:f.default.Messages.STATUS_LEAD_IN_JUST}),(0,a.jsx)(r.Text,{className:h.statusText,variant:"text-sm/semibold",color:"text-normal",children:_})]}),null!=C?(0,a.jsx)("img",{src:C,alt:"",className:h.statusIcon}):(0,a.jsx)(d.default,{className:h.statusIcon,hangStatusActivity:l})]})}},993063:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("862205");let l=(0,a.createExperiment)({kind:"user",id:"2021-04_longer_group_dm_invites",label:"Longer Group DM Invites",defaultConfig:{inviteMaxAgeSeconds:86400},treatments:[{id:1,label:"Makes group DM invites expire after 1 week.",config:{inviteMaxAgeSeconds:604800}}]});var s=l},155832:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("37983");n("884691");var l=n("446674"),s=n("289867"),i=n("716241"),r=n("982108"),u=n("162771"),o=n("155207"),d=n("664336"),c=n("49111"),f=n("782340");function h(e){let{channelId:t}=e,n=(0,l.useStateFromStores)([r.default],()=>r.default.getSection(t)),h=(0,l.useStateFromStores)([u.default],()=>u.default.getGuildId()),p=n===c.ChannelSections.MEMBERS;return(0,a.jsx)(d.Icon,{tooltip:p?f.default.Messages.MEMBER_LIST_SHOWN:f.default.Messages.MEMBER_LIST_HIDDEN,icon:o.default,onClick:()=>{i.default.trackWithMetadata(c.AnalyticEvents.MEMBER_LIST_TOGGLED,{channel_id:t,guild_id:h,member_list_open:!p}),s.default.toggleMembersSection()},selected:p})}},353054:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}}),n("222007");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("77078"),r=n("519705"),u=n("282109"),o=n("660279"),d=n("998650"),c=n("664336"),f=n("659500"),h=n("957825"),p=n("49111"),m=n("782340"),E=n("290236");function C(e){let{channel:t}=e,n=(0,i.useRedesignIconContext)().enabled,[C,g]=(0,s.useStateFromStoresArray)([u.default],()=>[u.default.isChannelMuted(t.getGuildId(),t.id),u.default.resolvedMessageNotifications(t)],[t]),[S,_]=l.useState(!1);l.useEffect(()=>{let e=()=>_(!0);return f.ComponentDispatch.subscribe(p.ComponentActions.OPEN_THREAD_NOTIFICATION_SETTINGS,e),()=>{f.ComponentDispatch.unsubscribe(p.ComponentActions.OPEN_THREAD_NOTIFICATION_SETTINGS,e)}},[]);let I=e=>{e.shiftKey?r.default.updateChannelOverrideSettings(t.guild_id,t.id,{muted:!C}):_(e=>!e)},T=m.default.Messages.NOTIFICATION_SETTINGS;return(0,a.jsx)(i.Popout,{shouldShow:S,animation:i.Popout.Animation.NONE,position:"bottom",align:"right",autoInvert:!1,onRequestClose:()=>_(!1),renderPopout:e=>(0,a.jsx)(h.default,{...e,channel:t,navId:"channel-context",label:m.default.Messages.CHANNEL_ACTIONS_MENU_LABEL}),children:(e,t)=>{let{isShown:l}=t;return(0,a.jsx)(c.default.Icon,{...e,onClick:I,tooltip:l?null:T,icon:C||g!==p.UserNotificationSettings.ALL_MESSAGES?d.default:o.default,foreground:C&&!n?E.strikethrough:null,"aria-label":T,selected:l})}})}},262956:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}}),n("222007");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("77078"),r=n("112821"),u=n("244201"),o=n("274870"),d=n("247013"),c=n("660478"),f=n("697218"),h=n("566998"),p=n("664336"),m=n("659500"),E=n("49111"),C=n("782340"),g=function(e){let{channel:t}=e,n=(0,s.useStateFromStores)([d.default,f.default],()=>{let e=f.default.getCurrentUser();return null==e||t.isNSFW()&&(!e.nsfwAllowed||!d.default.didAgree(t.getGuildId()))},[t]),[g,S]=l.useState(!1),_=(0,s.useStateFromStores)([c.default],()=>c.default.hasUnreadPins(t.id),[t]),I=(0,u.useWindowDispatch)(),T=(0,o.useIsBroadcastingGDM)(t.id),v=l.useCallback(()=>{!n&&S(e=>!e)},[n]);function x(e){!(null==e?void 0:e.shiftKey)&&I.dispatch(E.ComponentActions.POPOUT_CLOSE)}return(l.useEffect(()=>(m.ComponentDispatch.subscribe(E.ComponentActions.TOGGLE_CHANNEL_PINS,v),()=>{m.ComponentDispatch.unsubscribe(E.ComponentActions.TOGGLE_CHANNEL_PINS,v)}),[v]),T)?null:(0,a.jsx)(i.Popout,{shouldShow:g,animation:i.Popout.Animation.NONE,position:"bottom",align:"right",autoInvert:!1,ignoreModalClicks:!0,onRequestClose:()=>S(!1),renderPopout:function(e){return(0,a.jsx)(r.default,{...e,onJump:x,channel:t})},children:(e,t)=>{let{isShown:l}=t;return(0,a.jsx)(p.Icon,{...e,onClick:v,tooltip:l?null:C.default.Messages.PINNED_MESSAGES,icon:h.default,"aria-label":C.default.Messages.PINNED_MESSAGES,disabled:n,showBadge:_,selected:l})}})}},723431:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("37983");n("884691");var l=n("446674"),s=n("793237"),i=n("347738"),r=n("909004"),u=n("664336"),o=n("599110"),d=n("49111"),c=n("995307"),f=n("782340");function h(e){let{channel:t}=e,n=(0,l.useStateFromStores)([i.default],()=>i.default.shouldShowTopicsBar());return(0,a.jsx)(u.default.Icon,{icon:r.default,onClick:()=>{o.default.track(d.AnalyticEvents.SUMMARIES_SIDEBAR_TOGGLED,{summaries_sidebar_open:!n,source:c.SummariesSidebarToggledSource.TOOLBAR_BUTTON,guild_id:t.guild_id,channel_id:t.id,channel_type:t.type}),(0,s.toggleTopicsBar)()},tooltip:n?f.default.Messages.SUMMARIES_SHOWN:f.default.Messages.SUMMARIES_HIDDEN,selected:n,"aria-expanded":n})}},977983:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var l=n("446674"),s=n("526812"),i=n("404607"),r=n("670902"),u=n("339792"),o=n("680986"),d=n("258039"),c=n("821343"),f=n("68238"),h=n("664336"),p=n("782340");function m(e){var t,n;let{channel:m}=e,E=(0,o.useCanManageChannel)(m),C=(0,l.useStateFromStores)([s.default],()=>s.default.hasHidden(m.id)),g=(0,d.isOnboardingDismissed)(m.id),{sortOrder:S,tagFilter:_}=(0,u.useForumChannelStore)(m.id),I=(0,l.useStateFromStores)([r.default,c.default],()=>{let e=r.default.getThreadIds(m.id,S,_);if(e.length>0)return!0;let t=c.default.getThreads(m.id,S,_);return!!(t.length>0)||!1},[m.id,S,_]),T=m.isMediaChannel();if(!E||g||T&&I)return null;let v=(t=C,n=T,t?n?p.default.Messages.MEDIA_CHANNEL_ADMIN_EDUCATION_SHOW:p.default.Messages.FORUM_CHANNEL_ONBOARDING_SHOW:n?p.default.Messages.MEDIA_CHANNEL_ADMIN_EDUCATION_HIDE:p.default.Messages.FORUM_CHANNEL_ONBOARDING_HIDE);return(0,a.jsx)(h.Icon,{tooltip:v,icon:f.default,onClick:()=>i.default.hideAdminOnboarding(m.id,!C),selected:!C})}},849324:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("974667"),r=n("446674"),u=n("77078"),o=n("145079"),d=n("87657"),c=n("824563"),f=n("145131"),h=n("158998"),p=n("539058");function m(e){let{user:t,row:n,hideDiscriminator:l,comparator:m,selected:E,checked:C,onClick:g,onMouseEnter:S,"aria-setsize":_,"aria-posinset":I}=e,T=(0,r.useStateFromStores)([c.default],()=>c.default.getStatus(t.id)),v=(0,i.useListItem)(String(t.id));return(0,a.jsx)(u.Clickable,{id:"user-row-".concat(n),className:p.friendWrapper,onClick:()=>{null!=g&&g(t.id)},onMouseEnter:()=>{null!=S&&S(n)},...v,role:"option","aria-selected":C,"aria-setsize":_,"aria-posinset":I,children:(0,a.jsxs)(f.default,{align:f.default.Align.CENTER,className:s(p.friend,{[p.friendSelected]:E}),children:[(0,a.jsx)(d.default,{user:t,status:T,className:p.avatar}),(0,a.jsxs)(f.default,{className:p.match,align:f.default.Align.BASELINE,children:[(0,a.jsx)(u.Text,{tag:"strong",className:p.nickname,"aria-hidden":!0,variant:"text-md/medium",children:null!=m&&m===t.tag?h.default.getName(t):null!=m&&""!==m?m:h.default.getName(t)}),(0,a.jsx)(o.default,{user:t,hideDiscriminator:l,className:p.discordTag,usernameClass:p.weightMedium,discriminatorClass:p.weightMedium,forceUsername:!0})]}),(0,a.jsx)(u.Checkbox,{displayOnly:!0,size:22,value:C,className:p.checkbox})]})})}},853189:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}}),n("222007"),n("424973");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("151426"),r=n("77078"),u=n("561288"),o=n("987317"),d=n("244201"),c=n("206230"),f=n("702173"),h=n("191145"),p=n("10641"),m=n("509802"),E=n("889014"),C=n("5667"),g=n("19065"),S=n("727284"),_=n("950104"),I=n("778588"),T=n("42887"),v=n("27618"),x=n("697218"),N=n("800762"),A=n("887657"),M=n("437825"),R=n("664336"),j=n("58608"),L=n("659500"),O=n("701909"),y=n("49111"),P=n("994428"),b=n("353927"),D=n("782340"),U=n("367731");class w extends l.PureComponent{componentDidMount(){L.ComponentDispatch.subscribe(y.ComponentActions.CALL_START,this.handleVoiceClick)}componentWillUnmount(){L.ComponentDispatch.unsubscribe(y.ComponentActions.CALL_START,this.handleVoiceClick)}renderVideoCallButton(){let e,t;let{inCall:n,callActive:l,callUnavailable:s,isBlocked:i,channel:u,mode:o}=this.props;if(n||l&&o===y.ChannelModes.VOICE)return null;let d=u.isManaged(),c=null,f=!1;return T.default.supports(b.Features.VIDEO)?i?(c=D.default.Messages.CALL_UNAVAILABLE_BLOCKED_USERS,e=r.Tooltip.Colors.RED,f=!0):l&&o===y.ChannelModes.VIDEO?(t=this.handleJoinVideoCall,c=d?D.default.Messages.CONNECT:D.default.Messages.JOIN_VIDEO_CALL):(t=this.handleStartVideoCall,c=d?D.default.Messages.CONNECT:D.default.Messages.START_VIDEO_CALL):(f=!0,t=this.handleBrowserNotSupported,c=D.default.Messages.BROWSER_NOT_SUPPORTED),(0,a.jsx)(R.default.Icon,{icon:M.default,onClick:t,disabled:f||s,tooltip:c,tooltipColor:e})}renderVoiceCallButton(){let e;let{inCall:t,canShowTooltip:n,callActive:l,callUnavailable:s,isBlocked:u,channel:o,canShowActivityGdmTooltip:d,dismissibleContentTypes:c,useReducedMotion:f}=this.props;if(t)return null;let h=o.isManaged(),p="",E=!1;s?(p=h?D.default.Messages.VOICE_UNAVAILABLE:D.default.Messages.CALL_UNAVAILABLE,e=r.Tooltip.Colors.RED,E=!0):u?(p=D.default.Messages.CALL_UNAVAILABLE_BLOCKED_USERS,e=r.Tooltip.Colors.RED,E=!0):p=l?h?D.default.Messages.CONNECT:D.default.Messages.JOIN_VOICE_CALL:h?D.default.Messages.CONNECT:D.default.Messages.START_VOICE_CALL;let g=(0,a.jsx)(R.default.Icon,{icon:A.default,onClick:this.handleVoiceClick,disabled:E,tooltip:p,tooltipColor:e});return(0,a.jsx)(m.default,{contentTypes:c,children:e=>{let{visibleContent:l,markAsDismissed:s}=e;if(l===i.DismissibleContent.ACTIVITY_GDM_CALL_TOOLTIP)return(0,a.jsx)(r.Popout,{position:"bottom",align:"center",animation:r.Popout.Animation.TRANSLATE,shouldShow:n&&d&&!t,renderPopout:e=>{let{closePopout:t}=e;return(0,a.jsx)(C.default,{header:(0,a.jsxs)("div",{children:[(0,a.jsx)(j.default,{className:U.tooltipImage,autoPlay:!f,src:"https://cdn.discordapp.com/attachments/860252504826445825/1078051428028924006/mobile_coachmark.mp4",width:248,height:139.5,loop:!0,muted:!0}),(0,a.jsx)(r.Heading,{variant:"heading-md/bold",color:"always-white",children:D.default.Messages.EMBEDDED_ACTIVITIES_DM_TOOLTIP_HEADER})]}),content:(0,a.jsxs)("div",{children:[(0,a.jsx)(r.Text,{variant:"text-sm/normal",color:"always-white",children:D.default.Messages.EMBEDDED_ACTIVITIES_DM_TOOLTIP_BODY}),(0,a.jsx)(r.Anchor,{href:O.default.getArticleURL(y.HelpdeskArticles.ACTIVITIES),children:D.default.Messages.LEARN_MORE})]}),buttonCTA:D.default.Messages.GOT_IT,onClick:()=>{t(),s(P.ContentDismissActionType.UNKNOWN)},className:U.tooltip})},children:()=>g});return g}})}render(){return(0,a.jsxs)(l.Fragment,{children:[this.renderVoiceCallButton(),this.renderVideoCallButton()]})}constructor(...e){super(...e),this.handleStartCall=(e,t)=>{let{channel:n,notFriend:a,appContext:l}=this.props,s=a?n.getRecipientId():null,i=()=>u.default.call(n.id,t,!a&&!n.isManaged()&&!(null==e?void 0:e.shiftKey),s);t?(0,S.default)(i,l):i()},this.handleJoinCall=e=>{o.default.selectVoiceChannel(this.props.channel.id,e)},this.handleVoiceClick=e=>{let{callUnavailable:t,callActive:n,canShowActivityGdmTooltip:a}=this.props;if(a&&(0,p.markDismissibleContentAsDismissed)(i.DismissibleContent.ACTIVITY_GDM_CALL_TOOLTIP,{dismissAction:P.ContentDismissActionType.AUTO}),t);else if(n)return this.handleJoinCall(!1);else return this.handleStartCall(e,!1)},this.handleStartVideoCall=e=>{this.handleStartCall(e,!0)},this.handleJoinVideoCall=()=>{let{appContext:e}=this.props;(0,S.default)(()=>this.handleJoinCall(!0),e)},this.handleBrowserNotSupported=()=>{(0,g.default)()}}}function F(e){let{channel:t}=e,n=(0,E.default)(),r=(0,s.useStateFromStores)([h.default],()=>h.default.getMode(t.id)),u=(0,s.useStateFromStores)([N.default],()=>N.default.isInChannel(t.id)),o=(0,s.useStateFromStores)([c.default],()=>c.default.useReducedMotion),{callActive:p,callUnavailable:m}=(0,s.useStateFromStoresObject)([_.default],()=>({callActive:_.default.isCallActive(t.id),callUnavailable:_.default.isCallUnavailable(t.id)})),C=t.getRecipientId(),{notFriend:g,isBlocked:S}=(0,s.useStateFromStoresObject)([v.default],()=>({notFriend:t.type===y.ChannelTypes.DM&&null!=C&&!v.default.isFriend(C),isBlocked:t.type===y.ChannelTypes.DM&&null!=C&&v.default.isBlocked(C)})),T=(0,s.useStateFromStores)([x.default],()=>x.default.getUser(C)),A=(0,d.useAppContext)(),M=[],R=(0,f.default)(t.id),j=(0,s.useStateFromStores)([I.default],()=>I.default.hasLayers());R&&!j&&M.push(i.DismissibleContent.ACTIVITY_GDM_CALL_TOOLTIP);let[L,O]=l.useState(!1);return(l.useEffect(()=>{let e=setTimeout(()=>{O(!0)},250);return()=>clearTimeout(e)},[]),n||(null==T?void 0:T.bot))?null:(0,a.jsx)(w,{channel:t,mode:r,inCall:u,callActive:p,callUnavailable:m,notFriend:g,isBlocked:S,appContext:A,canShowTooltip:L,canShowActivityGdmTooltip:R,dismissibleContentTypes:M,useReducedMotion:o})}},718091:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ed}}),n("70102"),n("424973"),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n.n(r),o=n("866227"),d=n.n(o),c=n("394846"),f=n("249654"),h=n("446674"),p=n("77078"),m=n("913144"),E=n("561288"),C=n("450911"),g=n("630086"),S=n("970728"),_=n("369008"),I=n("736964"),T=n("304580"),v=n("137223"),x=n("244201"),N=n("716241"),A=n("274870"),M=n("843962"),R=n("679653"),j=n("52393"),L=n("393414"),O=n("233069"),y=n("42203"),P=n("330154"),b=n("501090"),D=n("945956"),U=n("660478"),w=n("27618"),F=n("102985"),k=n("697218"),V=n("145131"),B=n("476765"),H=n("570443"),G=n("76539"),W=n("664336"),Y=n("599110"),z=n("306160"),K=n("659500"),Z=n("449008"),X=n("158998"),J=n("993063"),q=n("849324"),Q=n("49111"),$=n("782340"),ee=n("629722"),et=n("905518"),en=n("926622");let ea=(0,B.uid)(),el=(0,B.uid)();function es(e){let{className:t,children:n}=e;return(0,a.jsxs)(V.default,{align:V.default.Align.CENTER,justify:V.default.Justify.CENTER,direction:V.default.Direction.VERTICAL,className:i(ee.errorState,t),children:[(0,a.jsx)("div",{className:i(ee.errorStateIcon,en.marginBottom20)}),n]})}let ei=e=>{var t;let{channel:n,onClose:l}=e,s=null!==(t=(0,R.default)(n))&&void 0!==t?t:"",i=(0,h.useStateFromStores)([U.default],()=>{var e;return null!==(e=U.default.lastMessageId(n.id))&&void 0!==e?e:n.id});return(0,a.jsx)(p.Clickable,{onClick:()=>{(0,L.transitionToGuild)(Q.ME,n.id),l()},children:(0,a.jsxs)("div",{className:ee.confirmChannelItemContainer,children:[(0,a.jsx)(p.Avatar,{src:(0,M.getChannelIconURL)(n),size:p.AvatarSizes.SIZE_24,"aria-label":s}),(0,a.jsx)("span",{className:ee.confirmChannelName,children:s}),(0,a.jsx)("span",{className:ee.lastActiveTimestamp,children:d(f.default.extractTimestamp(i)).fromNow()})]})})},er=e=>{let{onConfirm:t,channelIds:n,...l}=e,s=(0,h.useStateFromStoresArray)([y.default],()=>Array.from(n).map(y.default.getChannel),[n]);return(0,a.jsxs)(p.ConfirmModal,{header:$.default.Messages.GROUP_DM_INVITE_CONFIRM,confirmText:$.default.Messages.GROUP_DM_INVITE_CONFIRM_BUTTON,cancelText:$.default.Messages.CANCEL,onConfirm:t,confirmButtonColor:p.Button.Colors.BRAND,...l,children:[(0,a.jsx)(p.Text,{variant:"text-md/normal",children:$.default.Messages.GROUP_DM_INVITE_CONFIRM_DESCRIPTION}),(0,a.jsx)(p.FormTitle,{className:ee.selectExistingFormHeader,children:$.default.Messages.GROUP_DM_INVITE_SELECT_EXISTING}),(0,a.jsx)(p.Scroller,{className:ee.confirmInviteScroller,children:s.filter(Z.isNotNullish).sort((e,t)=>{var n,a;let l=null!==(n=e.lastMessageId)&&void 0!==n?n:e.id,s=null!==(a=t.lastMessageId)&&void 0!==a?a:t.id;return f.default.compare(s,l)}).map(e=>(0,a.jsx)(ei,{onClose:l.onClose,channel:e},e.id))})]})};class eu extends l.PureComponent{componentDidMount(){let{channel:e}=this.props;m.default.wait(()=>_.default.open(null==e?void 0:e.id));let t=(0,N.collectChannelAnalyticsMetadata)(e);null!=e?e.isDM()?Y.default.track(Q.AnalyticEvents.OPEN_POPOUT,{...t,type:"Add Friends to DM",source:"DM",is_friend:!this.isNotFriends()}):Y.default.track(Q.AnalyticEvents.OPEN_POPOUT,{...t,type:"Add Friends to DM",source:"Group DM"}):Y.default.track(Q.AnalyticEvents.OPEN_POPOUT,{...t,type:"New Group DM",source:"Friends List"}),K.ComponentDispatch.subscribe(Q.ComponentActions.SCROLL_PAGE_UP,this.scrollPageUp),K.ComponentDispatch.subscribe(Q.ComponentActions.SCROLL_PAGE_DOWN,this.scrollPageDown)}componentWillUnmount(){K.ComponentDispatch.unsubscribe(Q.ComponentActions.SCROLL_PAGE_UP,this.scrollPageUp),K.ComponentDispatch.unsubscribe(Q.ComponentActions.SCROLL_PAGE_DOWN,this.scrollPageDown),null!=this.copyTimeout&&clearTimeout(this.copyTimeout),m.default.wait(()=>_.default.close())}isNotFriends(){let{channel:e}=this.props;if(null==e||!e.isDM())return!1;let t=e.getRecipientId();if(null==t)throw Error("no recipient in DM");return!w.default.isFriend(t)}createInvite(){let{channel:e}=this.props;if(null==e||!e.isMultiUserDM()||this.isPartyFull())return;let{inviteMaxAgeSeconds:t}=J.default.getCurrentConfig({location:"5326c5_1"},{autoTrackExposure:!1});S.default.createInvite(e.id,{max_age:t},Q.InstantInviteSources.GROUP_DM)}isPartyFull(){let{channel:e}=this.props;return null!=e&&e.recipients.length+1>=this.getMaxParticipants()}getMaxParticipants(){let{channel:e}=this.props,t=k.default.getCurrentUser();return null!=t&&t.isStaff()?Q.MAX_GROUP_DM_STAFF_PARTICIPANTS:null!=e&&e.isBroadcastChannel()?Q.MAX_GROUP_DM_BROADCAST_PARTICIPANTS:null!=e&&e.userLimit>0?e.userLimit:Q.MAX_GROUP_DM_PARTICIPANTS}getRemaining(){let{channel:e,selectedUsers:t}=this.props,n=(null==e?0:e.recipients.length)+1;return this.getMaxParticipants()-t.size-n}renderCreateGroupButton(){let{channel:e,selectedUsers:t}=this.props,n=this.getRemaining(),l=null!=e&&0===t.size||n<0,s=t.size>1?$.default.Messages.CREATE_GROUP_DM:$.default.Messages.CREATE_DM;return(0,a.jsx)(p.Button,{fullWidth:!0,disabled:l,onClick:this.handleInviteUsers,children:s})}renderAddUsersButton(){let{channel:e,selectedUsers:t}=this.props;if(null==e||e.isDM())return;let n=this.getRemaining(),l=0===t.size||n<0;return(0,a.jsx)("div",{className:ee.addButton,children:(0,a.jsx)(p.Button,{size:p.Button.Sizes.SMALL,disabled:l,onClick:this.handleInviteUsers,children:$.default.Messages.ADD})})}renderSubtitle(){if(!this.props.hasFriends||this.isNotFriends()||this.isPartyFull())return null;let e=this.getRemaining(),t=e<=0?$.default.Messages.GROUP_DM_INVITE_FULL_SUB2.format({number:this.getMaxParticipants()}):$.default.Messages.GROUP_DM_INVITE_REMAINING.format({number:e});return(0,a.jsx)(p.Text,{variant:"text-xs/normal",className:i(ee.subtitle,{[ee.subtitleWarning]:e<0},en.marginTop4),children:t})}renderSearchBar(){var e;let{query:t,hasFriends:n,results:l,selectedRow:s,selectedUsers:r}=this.props;if(!n||this.isNotFriends())return null;let u=[];return r.forEach(e=>{let t=k.default.getUser(e);null!=t&&u.push(X.default.getName(t))}),(0,a.jsxs)(V.default,{className:i(ee.searchBar,en.marginTop20),children:[(0,a.jsx)(v.default,{ref:this.searchBarRef,className:ee.searchBarComponent,autoFocus:!0,placeholder:0===r.size?$.default.Messages.GROUP_DM_SEARCH_PLACEHOLDER:void 0,disabled:this.isPartyFull(),size:v.default.Sizes.MEDIUM,query:t,selectedRow:s,sections:[null!==(e=null==l?void 0:l.length)&&void 0!==e?e:0],tags:u,onSelect:this.handleSelect,onSelectionChange:this.handleSelectionChange,onQueryChange:this.handleQueryChange,onRemoveTag:this.handleRemoveUser,inputProps:{"aria-labelledby":ea,"aria-controls":el,"aria-expanded":!0,"aria-activedescendant":"user-row-".concat(s)}}),this.renderAddUsersButton()]})}renderHeader(){let e=null!=this.scrollerRef.current&&this.state.separator,t=this.isNotFriends()?$.default.Messages.GROUP_DM_ADD_FRIENDS:$.default.Messages.GROUP_DM_HEADER;return(0,a.jsxs)(p.ModalHeader,{direction:V.default.Direction.VERTICAL,align:V.default.Align.STRETCH,className:ee.header,separator:e,children:[c.isMobile?this.renderMobileCloseButton():null,(0,a.jsx)(p.Heading,{id:ea,variant:"heading-lg/semibold",children:t}),this.renderSubtitle(),this.renderSearchBar()]})}renderBody(){let{channel:e,hasFriends:t,results:n}=this.props;if(this.isNotFriends()){let t=null!=e?e.getRecipientId():null;if(null==t)throw Error("no recipient in DM");let n=k.default.getUser(t),l=null!=n?n.username:"",s=null!=n&&w.default.getRelationshipType(n.id)===Q.RelationshipTypes.PENDING_OUTGOING;return(0,a.jsxs)(es,{className:ee.notFriends,children:[(0,a.jsx)("div",{children:$.default.Messages.GROUP_DM_INVITE_NOT_FRIENDS.format({username:l})}),(0,a.jsx)(p.Button,{disabled:s,size:p.Button.Sizes.SMALL,onClick:()=>null!=n?this.handleAddFriend(n):null,className:en.marginTop20,children:s?$.default.Messages.ADD_FRIEND_BUTTON_AFTER:$.default.Messages.ADD_FRIEND_BUTTON})]})}return t?this.isPartyFull()?(0,a.jsxs)(es,{className:ee.partyFull,children:[(0,a.jsx)("div",{children:$.default.Messages.GROUP_DM_INVITE_FULL_MAIN}),(0,a.jsx)("div",{children:$.default.Messages.GROUP_DM_INVITE_FULL_SUB2.format({number:this.getMaxParticipants()})})]}):0===n.length?(0,a.jsx)(es,{className:i(ee.noResults,en.marginBottom20),children:(0,a.jsx)("div",{children:$.default.Messages.GROUP_DM_INVITE_EMPTY})}):(0,a.jsx)(p.List,{ref:this.scrollerRef,sections:[n.length],className:ee.scroller,renderRow:this.renderRow,rowHeight:this.getRowHeight,renderSection:this.renderSection,sectionHeight:0,onScroll:this.handleScroll,paddingTop:0,paddingBottom:14,fade:!0,role:void 0,innerRole:"listbox",innerId:el,innerAriaMultiselectable:!0,innerAriaOrientation:"vertical"}):(0,a.jsxs)(es,{className:ee.noFriends,children:[(0,a.jsx)("div",{children:$.default.Messages.GROUP_DM_INVITE_NO_FRIENDS}),(0,a.jsx)(p.Button,{autoFocus:!0,color:p.Button.Colors.GREEN,fullWidth:!0,size:p.Button.Sizes.SMALL,onClick:this.handleAddFriendNavigation,className:en.marginTop20,children:$.default.Messages.ADD_FRIEND})]})}renderSection(){return null}renderInviteLink(){let{channel:e,invite:t,hideInstantInvites:n}=this.props,{copied:s}=this.state;if(null==e||!e.isMultiUserDM()||this.isPartyFull())return null;let r=null!=t?(0,j.default)(t.code):"";return(0,a.jsxs)(l.Fragment,{children:[(0,a.jsx)(p.FormTitle,{tag:"h5",className:en.marginBottom8,children:$.default.Messages.GROUP_DM_INVITE_LINK_TITLE}),(0,a.jsxs)(V.default,{className:i(et.input,{[et.success]:s}),justify:V.default.Justify.BETWEEN,align:V.default.Align.CENTER,children:[r.length>0?(0,a.jsx)(p.TextInput,{className:ee.copyInput,name:"invite",value:n?$.default.Messages.INSTANT_INVITE_HIDDEN:r,editable:!1,inputClassName:ee.noBorder,spellCheck:"false",onClick:e=>e.currentTarget.select()}):(0,a.jsx)(p.TextInput,{className:ee.copyInput,name:"invite",value:r,placeholder:(0,j.default)($.default.Messages.GROUP_DM_INVITE_LINK_EXAMPLE),editable:!1,inputClassName:ee.noBorder,spellCheck:"false",onClick:()=>this.createInvite()}),z.SUPPORTS_COPY&&r.length>0?(0,a.jsx)(p.Button,{size:p.Button.Sizes.SMALL,color:s?p.Button.Colors.GREEN:p.Button.Colors.BRAND,className:ee.copyButton,onClick:()=>this.handleCopyInvite(r),children:s?$.default.Messages.INVITE_COPIED:$.default.Messages.COPY}):null,0===r.length?(0,a.jsx)(p.Button,{size:p.Button.Sizes.SMALL,color:p.Button.Colors.BRAND,className:ee.copyButton,onClick:()=>this.createInvite(),children:$.default.Messages.GROUP_DM_INVITE_LINK_CREATE}):null]}),r.length>0?(0,a.jsx)(p.Text,{variant:"text-xs/normal",className:i(en.marginTop8,ee.footerText),children:$.default.Messages.INVITE_EXPIRES_HOURS.format({numHours:"".concat(24)})}):null]})}renderFooter(){let{hasFriends:e,channel:t}=this.props;if(this.isNotFriends()||!e||this.isPartyFull())return null;let n=null==t||t.isDM()?this.renderCreateGroupButton():this.renderInviteLink();if(null!=n)return(0,a.jsxs)(l.Fragment,{children:[(0,a.jsx)("div",{className:ee.footerSeparator}),(0,a.jsx)(V.default,{direction:V.default.Direction.VERTICAL,className:ee.footer,children:n})]})}render(){let{transitionState:e}=this.props;return(0,a.jsxs)(p.ModalRoot,{transitionState:null!=e?e:p.ModalTransitionState.ENTERED,className:ee.popout,children:[this.renderHeader(),this.renderBody(),this.renderFooter()]})}handleAddFriend(e){this.props.onClose(),I.default.sendRequest({discordTag:X.default.getUserTag(e,{identifiable:"always"}),context:{location:"Group DM"}})}constructor(...e){super(...e),this.state={separator:!1,copied:!1},this.scrollerRef=l.createRef(),this.searchBarRef=l.createRef(),this._mobileCloseRef=l.createRef(),this.scrollPageUp=()=>{var e;null===(e=this.scrollerRef.current)||void 0===e||e.scrollPageUp({animate:!0})},this.scrollPageDown=()=>{var e;null===(e=this.scrollerRef.current)||void 0===e||e.scrollPageDown({animate:!0})},this.renderMobileCloseButton=()=>(0,a.jsx)("div",{className:i(ee.mobileToolsContainer),ref:this._mobileCloseRef,children:(0,a.jsx)(p.FocusRingScope,{containerRef:this._mobileCloseRef,children:(0,a.jsx)("div",{children:(0,a.jsx)(T.default,{className:ee.mobileToolsCloseIcon,closeAction:this.props.onClose,keybind:"ESC"})})})}),this.getRowHeight=(e,t)=>{if(e>0)return 0;let{results:n}=this.props,a=n[t];return null!=a?42:0},this.renderRow=e=>{let{section:t,row:n}=e;if(t>0)return null;let{results:l,selectedUsers:s,selectedRow:i,hideDiscriminator:r}=this.props,u=l[n];if(null==u)return null;let{user:o,comparator:d}=u,c=s.has(o.id);return(0,a.jsx)(q.default,{row:n,user:o,hideDiscriminator:r,comparator:d,checked:c,selected:n===i,onClick:this.handleClick,onMouseEnter:this.focusResult,"aria-posinset":n+1,"aria-setsize":l.length},o.id)},this.forceFocus=()=>{let e=this.searchBarRef.current;null==e||e.focus()},this.focusResult=e=>{_.default.select(e)},this.handleSelect=(e,t)=>{let{results:n,channel:a}=this.props;null==t?_.default.clear(null==a?void 0:a.id):null!=n&&this.handleClick(n[t].user.id)},this.handleSelectionChange=(e,t)=>{_.default.select(t);let n=this.scrollerRef.current;null!=n&&n.scrollToIndex({section:e,row:t,padding:8})},this.handleQueryChange=e=>{let{channel:t}=this.props;_.default.search(e,null==t?void 0:t.id)},this.handleRemoveUser=e=>{let t=Array.from(this.props.selectedUsers);_.default.removeUser(t[e]),this.forceFocus()},this.handleClick=e=>{let{selectedUsers:t,query:n,channel:a}=this.props,l=!t.has(e);l?(_.default.addUser(e),n.length>0&&_.default.clear(null==a?void 0:a.id)):_.default.removeUser(e),this.forceFocus()},this.handleAddFriendNavigation=()=>{(0,L.transitionTo)(Q.Routes.FRIENDS),g.default.setSection(Q.FriendsSections.ADD_FRIEND),this.props.onClose()},this.handleScroll=()=>{let e=this.scrollerRef.current;null!=e&&this.setState({separator:!e.isScrolledToTop()})},this.createNewDM=e=>{C.default.openPrivateChannel(e,!1,!1,"New Group DM")},this.pushToExistingDM=(e,t)=>{let n=D.default.getChannelId()===e.id;C.default.addRecipients(e.id,t,Q.AnalyticsLocations.ADD_FRIENDS_TO_DM).then(a=>{if(n){if(e.isDM()&&a!==e.id){E.default.call(a,!1,!0);return}E.default.ring(a,t)}})},this.handleInviteUsers=()=>{let{channel:e,selectedUsers:t,onClose:n}=this.props,l=Array.from(t);if(null!=e){let t=ec(Array.from(new Set([...e.recipients,...l])));t.size>0?(0,p.openModal)(n=>(0,a.jsx)(er,{...n,onConfirm:()=>this.pushToExistingDM(e,l),channelIds:t}),{},(0,p.modalContextFromAppContext)(this.context.appContext)):this.pushToExistingDM(e,l)}else{let e=ec(l);l.length>1&&e.size>0?(0,p.openModal)(t=>(0,a.jsx)(er,{...t,onConfirm:()=>this.createNewDM(l),channelIds:e}),{},(0,p.modalContextFromAppContext)(this.context.appContext)):this.createNewDM(l)}n()},this.handleCopyInvite=e=>{let{channel:t,invite:n}=this.props;null!=n&&(0,z.copy)(e),null!=this.copyTimeout&&clearTimeout(this.copyTimeout),this.setState({copied:!0}),this.copyTimeout=setTimeout(()=>{this.setState({copied:!1})},1e3),Y.default.track(Q.AnalyticEvents.COPY_INSTANT_INVITE,{server:null,channel:null!=t?t.id:null,channel_type:null!=t?t.type:null,location:Q.AnalyticsLocations.ADD_FRIENDS_TO_DM,code:null!=n?n.code:null})}}}eu.contextType=x.default;let eo=h.default.connectStores([b.default,P.default,F.default],e=>{let t,{channel:n}=e;return null!=n&&null!=(t=P.default.getInvite(n.id))&&t.isExpired()&&(t=null),{...b.default.getState(),invite:t,hideDiscriminator:F.default.hidePersonalInformation,hideInstantInvites:F.default.hideInstantInvites}})(eu);function ed(e){let{channel:t,iconClassName:n,icon:s,tooltip:i,tooltipPosition:r="bottom",popoutPosition:u="bottom",popoutAlign:o="right",subscribeToGlobalHotkey:d=!1}=e,[c,f]=l.useState(null!=t&&t.isGroupDM()&&0===t.recipients.length),h=(0,A.useIsBroadcastingGDM)(null==t?void 0:t.id),m=l.useCallback(()=>f(e=>!e),[]);return(l.useEffect(()=>(d&&K.ComponentDispatch.subscribe(Q.ComponentActions.TOGGLE_DM_CREATE,m),()=>{K.ComponentDispatch.unsubscribe(Q.ComponentActions.TOGGLE_DM_CREATE,m)}),[d,m]),h)?null:(0,a.jsx)(p.Popout,{renderPopout:e=>(0,a.jsx)(eo,{...e,onClose:e.closePopout,channel:t}),position:u,shouldShow:c,align:o,onRequestClose:()=>f(!1),animation:p.Popout.Animation.NONE,children:e=>(0,a.jsx)(W.default.Icon,{...e,onClick:m,icon:null!=s?s:null==t?H.default:G.default,className:n,iconClassName:n,tooltip:i,tooltipPosition:r})})}function ec(e){let t=ef(e);return new Set(u(y.default.getMutablePrivateChannels()).values().filter(e=>(0,O.isMultiUserDM)(e.type)).filter(e=>ef(e.recipients)===t).map(e=>e.id).value())}function ef(e){return JSON.stringify(e.sort())}},922164:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var l=n("446674"),s=n("289867"),i=n("217513"),r=n("893980"),u=n("58351"),o=n("982108"),d=n("849483"),c=n("664336"),f=n("49111"),h=n("782340");function p(e){let{channel:t,showCall:n}=e,p=(0,l.useStateFromStores)([o.default],()=>o.default.getSection(t.id,null==t?void 0:t.isDM())),m=(0,i.default)(t.getRecipientId()),E=(0,u.default)(),C=p===f.ChannelSections.PROFILE&&!E;return(0,a.jsx)(c.Icon,{disabled:E||n,tooltip:E||n?h.default.Messages.SHOW_USER_PROFILE_UNAVAILABLE:C?h.default.Messages.HIDE_USER_PROFILE:h.default.Messages.SHOW_USER_PROFILE,icon:d.default,onClick:()=>{(0,r.trackProfilePanelToggled)(m,!C),s.default.toggleProfilePanelSection()},selected:C&&!E&&!n})}},148205:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var a=n("37983"),l=n("884691"),s=n("917351"),i=n.n(s),r=n("446674"),u=n("242740"),o=n("889014"),d=n("848848"),c=n("300322"),f=n("957255"),h=n("800762"),p=n("887657"),m=n("664336"),E=n("659500"),C=n("49111"),g=n("782340"),S=l.memo(function(e){let{channel:t}=e,n=(0,o.default)(),s=(0,r.useStateFromStores)([h.default],()=>h.default.isInChannel(t.id)),S=(0,r.useStateFromStores)([h.default],()=>!i.isEmpty(h.default.getVoiceStatesForChannel(t.id))),_=(0,r.useStateFromStores)([f.default],()=>f.default.can(C.Permissions.CONNECT,t)),{needSubscriptionToAccess:I}=(0,d.default)(t.id),T=(0,c.useIsActiveChannelOrUnarchivableThread)(t),v=l.useCallback(()=>{u.default.handleVoiceConnect({channel:t,connected:s,needSubscriptionToAccess:I,locked:!1})},[t,s,I]);return(l.useEffect(()=>(E.ComponentDispatch.subscribe(C.ComponentActions.CALL_START,v),()=>{E.ComponentDispatch.unsubscribe(C.ComponentActions.CALL_START,v)}),[v]),c.VoiceInThreadsExperiment.useExperiment({guildId:t.guild_id,location:"63250c_1"},{autoTrackExposure:!1}).enabled&&!n&&!s&&_&&T&&t.isVocalThread())?(0,a.jsx)(m.default.Icon,{icon:p.default,onClick:v,tooltip:S?g.default.Messages.JOIN_VOICE_CALL:g.default.Messages.START_VOICE_CALL}):null})},431923:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}}),n("222007");var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("446674"),r=n("397485"),u=n("170152"),o=n("782340"),d=n("850324");function c(e){let t,{channelId:n,userId:l}=e,[c,f]=(0,i.useStateFromStoresArray)([u.default],()=>[u.default.getWaitingHighFive(n,l),u.default.getCompletedHighFive(n,l)]);if(null!=f)t=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{alt:o.default.Messages.CALL_HIGH_FIVE_EXCLAMATION,src:(0,r.getEffectUrl)({name:f[0],id:null,animated:!1}),className:s(d.completeLeft,d.highFive)}),(0,a.jsx)("img",{alt:o.default.Messages.CALL_HIGH_FIVE_EXCLAMATION,src:(0,r.getEffectUrl)({name:f[1],id:null,animated:!1}),className:s(d.completeRight,d.highFive)})]});else{if(null==c)return null;t=(0,a.jsx)("img",{alt:o.default.Messages.CALL_HIGH_FIVE_EXCLAMATION,src:(0,r.getEffectUrl)({name:c,id:null,animated:!1}),className:s(d.waiting,d.highFive)})}return(0,a.jsx)("div",{className:d.root,children:t})}},27978:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var a=(0,n("862205").createExperiment)({kind:"guild",id:"2021-11_hub_events",label:"Hub Events",defaultConfig:{showHubEventsList:!1},treatments:[{id:1,label:"Show Hub Events List",config:{showHubEventsList:!0}}]})},969103:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("884691"),l=n("446674"),s=n("928265"),i=n("204743"),r=n("26989"),u=n("697218"),o=n("49111"),d=n("237542"),c=e=>{let t=(0,l.useStateFromStores)([i.default],()=>(null==e?void 0:e.hasFeature(o.GuildFeatures.HUB))?i.default.hasViewedPrompt(d.GuildPrompts.REAL_NAME_PROMPT,e.id):null),n=(0,l.useStateFromStores)([u.default],()=>u.default.getCurrentUser()),c=(0,l.useStateFromStores)([r.default],()=>(null==e?void 0:e.id)!=null&&null!=n?r.default.getMember(null==e?void 0:e.id,n.id):null),f=(null==c?void 0:c.nick)!=null;return a.useEffect(()=>{f&&null!=e&&!1===t&&s.default.viewPrompt(d.GuildPrompts.REAL_NAME_PROMPT,e.id)},[f,e,t]),!1===t&&!f}},666391:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("77078"),s=n("635357"),i=n("49111");function r(e){let{initialPlanId:t,activeSubscription:r,trialId:u,trialFooterMessageOverride:o,onClose:d,analyticsObject:c,analyticsLocation:f,analyticsLocations:h,analyticsSubscriptionType:p,renderHeader:m,renderPurchaseConfirmation:E,planGroup:C,reviewWarningMessage:g,skuId:S}=e;(0,l.openModalLazy)(async()=>{let{PaymentContextProvider:e}=await n.el("642906").then(n.bind(n,"642906")),{PaymentModal:l}=await n.el("385179").then(n.bind(n,"385179")),{STEPS:i}=await n.el("646139").then(n.bind(n,"646139"));return n=>{let{onClose:_,...I}=n;return(0,a.jsx)(e,{activeSubscription:r,stepConfigs:i,skuIDs:[S],children:(0,a.jsx)(s.GiftContextProvider,{children:(0,a.jsx)(l,{...I,initialPlanId:t,onClose:e=>{_(),null==d||d(e)},analyticsLocations:h,analyticsObject:c,analyticsLocation:f,analyticsSubscriptionType:p,skuId:S,renderHeader:m,renderPurchaseConfirmation:E,planGroup:C,trialId:u,trialFooterMessageOverride:o,reviewWarningMessage:g})})})}},{onCloseCallback:()=>{null==d||d(!1)},onCloseRequest:i.NOOP})}},719761:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983"),l=n("884691"),s=n("232268"),i=n("759432"),r=n("798592"),u=n("39141");function o(e){let{callTileRef:t,isFiring:n}=e,a=(0,r.default)(),s=(0,i.default)(t);return l.useEffect(()=>{n&&null!=s&&null!=t&&a.fire(s.x+t.clientWidth/2,s.y+t.clientHeight/2,{countMultiplier:4})},[t,a,n,s]),null}function d(e){return(0,a.jsx)(s.default,{confettiLocation:u.ConfettiLocation.CALL_TILE,children:(0,a.jsx)(o,{...e})})}},835040:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("65597"),s=n("77078"),i=n("880731"),r=n("300586");function u(e){let{isShaking:t,shakeLocation:n,children:u,className:o}=e,d=(0,r.default)(n),c=(0,l.default)([i.default],()=>i.default.isEnabled({shakeLocation:n}));return c?(0,a.jsx)(s.Shaker,{isShaking:t,intensity:d,className:o,children:u}):(0,a.jsx)(a.Fragment,{children:u})}},292508:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("627445"),u=n.n(r),o=n("90915"),d=n("446674"),c=n("77078"),f=n("988738"),h=n("244201"),p=n("206230"),m=n("320679"),E=n("191225"),C=n("229661"),g=n("812204"),S=n("685665"),_=n("338733"),I=n("779601"),T=n("967889"),v=n("160139"),x=n("983689"),N=n("628922"),A=n("928741"),M=n("915639"),R=n("161778"),j=n("168973"),L=n("471671"),O=n("983782"),y=n("587974"),P=n("773336"),b=n("439932"),D=n("50885"),U=n("336921"),w=n("292687"),F=n("49111"),k=n("782340"),V=n("604279");class B extends l.Component{componentDidMount(){let{guestWindow:e}=this.props,t=e.document,n=t.querySelector("title");null==n&&null!=t.head&&t.head.appendChild(t.createElement("title")),this.updateTitle(),this.updateFontScale(),this.updateLocale(),this.updateClientTheme(),this.updateSaturationFactor(),(0,U.setupWindow)(e),e.addEventListener("blur",this.handleBlur),t.addEventListener("contextmenu",this.handleContextMenu,!0),e.addEventListener("beforeunload",this.warnPopoutClose)}componentDidUpdate(e){let{title:t,fontScale:n,locale:a,clientThemesCSS:l}=this.props;e.title!==t&&this.updateTitle(),e.fontScale!==n&&this.updateFontScale(),e.locale!==a&&this.updateLocale(),e.clientThemesCSS!==l&&this.updateClientTheme(),e.saturation!==this.props.saturation&&this.updateSaturationFactor()}componentWillUnmount(){let{guestWindow:e}=this.props,t=e.document;e.removeEventListener("blur",this.handleBlur),t.removeEventListener("contextmenu",this.handleContextMenu,!0),c.useModalsStore.setState(e=>({...e,[c.POPOUT_MODAL_CONTEXT]:[]})),e.removeEventListener("beforeunload",this.warnPopoutClose)}updateSaturationFactor(){let{saturation:e,guestWindow:t}=this.props,n=t.document.documentElement;u(null!=n,"Window document element was null"),n.style.setProperty("--saturation-factor",e.toString())}updateLocale(){let{locale:e,guestWindow:t}=this.props,n=t.document.documentElement;u(null!=n,"Window document element was null"),n.lang=e}updateTitle(){let{title:e,guestWindow:t}=this.props,n=t.document.querySelector("title");null!=n&&(n.innerText=e)}updateFontScale(){let{fontScale:e,guestWindow:t}=this.props,n=t.document.documentElement;u(null!=n,"Window document element was null"),n.style.fontSize="".concat(e,"%")}updateClientTheme(){let{clientThemesCSS:e,guestWindow:t}=this.props,n=t.document,a=(0,n.head);u(null!=a,"Window document ".concat("head"," was null"));let l=a.querySelector("style[".concat(_.CLIENT_THEMES_DATA_ATTRIBUTE,"]"));if(null!=l){l.textContent=e;return}let s=n.createElement("style");s.setAttribute(_.CLIENT_THEMES_DATA_ATTRIBUTE,"true"),s.textContent=e,a.appendChild(s)}render(){let{theme:e,forcedColors:t,focused:n,appFocused:l,children:s,windowKey:r,mouseModeEnabled:u,keyboardModeEnabled:d,reducedMotionEnabled:p,fontScaleClass:E,saturation:C,withTitleBar:g,guestWindow:S,clientThemesClassName:_,contentClassName:x}=this.props,N=(0,P.getPlatform)(),M=i(E,{"mouse-mode":u,"reduce-motion":p,"full-motion":!p,"keyboard-mode":d,"app-focused":n||l,"low-saturation":C<=.4});return(0,a.jsx)(o.BrowserRouter,{children:(0,a.jsx)(A.default,{children:(0,a.jsx)(c.ThemeContextProvider,{theme:e,children:(0,a.jsx)(c.RedesignIconContextProvider,{children:(0,a.jsx)("div",{"data-popout-root":!0,ref:this.rootRef,className:i((0,b.getThemeClass)(e),(0,I.default)(),M,_),children:(0,a.jsx)(c.FocusRingScope,{containerRef:this.rootRef,children:(0,a.jsx)(m.default,{children:(0,a.jsxs)(T.default,{children:[(0,a.jsx)(y.MaskLibrary,{}),(0,a.jsx)(h.AppWindowContextProvider,{appContext:F.AppContext.POPOUT,renderWindow:S,children:(0,a.jsxs)(O.AppLayerProvider,{children:[(0,a.jsxs)("div",{className:V.popout,children:[g&&null!=N?(0,a.jsx)(v.default,{focused:n,type:N,windowKey:r,macOSFrame:!0}):null,(0,a.jsx)("div",{className:i(V.content,x),children:s})]}),(0,a.jsx)(c.Modals,{}),(0,a.jsx)(f.default,{}),(0,a.jsx)(O.AppLayerContainer,{})]})})]})})})})})})},t)})}constructor(...e){super(...e),this.rootRef=l.createRef(),this._cleanupWindowActionCreators=void 0,this.warnPopoutClose=e=>{this.props.connectedToEmbeddedActivity&&!j.default.disableEmbeddedActivityPopOutAlert&&(e.returnValue=k.default.Messages.EMBEDDED_ACTIVITIES_ARE_YOU_SURE_WANT_TO_LEAVE,P.isPlatformEmbedded&&(0,C.default)(()=>{w.default.unmountWindow(this.props.windowKey),P.isPlatformEmbedded&&D.default.close(this.props.windowKey)}))},this.handleBlur=()=>{var e,t;null===(e=(t=this.props).onBlur)||void 0===e||e.call(t)},this.handleContextMenu=e=>{e.preventDefault()}}}B.defaultProps={withTitleBar:!0};let H=l.forwardRef(function(e,t){let{guestWindow:n,focused:l}=(0,d.useStateFromStoresObject)([w.default],()=>({guestWindow:w.default.getWindow(e.windowKey),focused:w.default.getWindowFocused(e.windowKey)}));u(null!=n,"Missing guestWindow reference");let s=(0,d.useStateFromStores)([L.default],()=>L.default.isFocused()),{locale:i,theme:r}=(0,d.useStateFromStoresObject)([R.default,M.default],()=>({locale:M.default.locale,theme:R.default.theme})),o=(0,d.useStateFromStores)([p.default],()=>p.default.useForcedColors?"yes":"no"),{fontScale:f,keyboardModeEnabled:h,reducedMotionEnabled:m,fontScaleClass:C,saturation:I}=(0,d.useStateFromStoresObject)([p.default],()=>({fontScale:p.default.fontScale,keyboardModeEnabled:p.default.keyboardModeEnabled,reducedMotionEnabled:p.default.useReducedMotion,fontScaleClass:p.default.fontScaleClass,saturation:p.default.saturation})),T=(0,d.useStateFromStores)([E.default],()=>null!=e.channelId&&null!==E.default.getSelfEmbeddedActivityForChannel(e.channelId));(0,x.default)(n,!1);let v=(0,N.default)(n,l),{AnalyticsLocationProvider:A}=(0,S.default)(g.default.POPOUT_WINDOW),{clientThemesClassName:j,clientThemesCSS:O}=(0,_.default)();return null==n?null:(0,a.jsx)(c.DnDProvider,{children:(0,a.jsx)(A,{children:(0,a.jsx)(B,{ref:t,...e,guestWindow:n,focused:l,appFocused:s,locale:i,theme:r,forcedColors:o,fontScale:f,keyboardModeEnabled:h,mouseModeEnabled:v,reducedMotionEnabled:m,connectedToEmbeddedActivity:T,fontScaleClass:C,saturation:I,clientThemesClassName:j,clientThemesCSS:O})})})});var G=H},788220:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}}),n("222007");var a=n("884691"),l=n("862337");function s(e,t){let[n,s]=a.useState(!1),i=a.useRef(new l.DelayedCall(t,()=>s(!1))),r=a.useRef(new l.DelayedCall(e,()=>s(!0))),u=a.useCallback(()=>{i.current.cancel(),r.current.cancel()},[]);a.useEffect(()=>u,[u]);let o=a.useCallback(()=>{u(),i.current.delay()},[u]),d=a.useCallback(()=>{u(),r.current.delay()},[u]);return{isHovered:n,setIsHovered:s,onMouseEnter:d,onMouseLeave:o,cancelTimers:u}}},724110:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}}),n("222007");var a=n("37983"),l=n("884691"),s=n("746379"),i=n.n(s),r=n("77078"),u=n("716241"),o=n("368639"),d=n("33942"),c=n("506885"),f=n("401642"),h=n("315102"),p=n("701909"),m=n("253981"),E=n("252063"),C=n("49111"),g=n("782340"),S=n("402739"),_=n("271861");let I=new Set(["Spacebar"," ","Enter"]);function T(e){let{channelId:t,transitionState:n,onClose:s}=e,{fetched:T,applicationsShelf:v,installedIntegrations:x}=(0,E.usePrivateChannelIntegrationState)({channelId:t});l.useEffect(()=>{(0,u.trackWithMetadata)(C.AnalyticEvents.GDM_STARTER_APPS_VIEWED)},[]);let N=e=>{var t;(0,c.default)(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"",null==e?void 0:e.getAvatarURL(void 0,80),{dispatchWait:!0})},A=(e,t)=>{I.has(e.key)&&N(t)},M=l.useCallback(e=>{let{application:t,location:n}=e;if(null==n)return!1;let{host:a,path:l}=i.parse(n,!0),r=m.default.isDiscordHostname(a)||window.location.host===a;return!!r&&l===C.Routes.OAUTH2_AUTHORIZED&&(null!=t&&s(),!0)},[s]);return(0,a.jsxs)(r.ModalRoot,{transitionState:n,size:r.ModalSize.DYNAMIC,className:S.modal,children:[(0,a.jsx)(r.ModalContent,{className:S.modalContent,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:_,alt:"",className:S.image}),(0,a.jsxs)("div",{className:S.headingContainer,children:[(0,a.jsx)(r.Heading,{variant:"heading-xl/bold",className:S.modalHeader,children:g.default.Messages.PRIVATE_CHANNEL_AVAILABLE_APPS}),(0,a.jsx)(r.Text,{variant:"text-md/medium",className:S.modalHeader,children:g.default.Messages.PRIVATE_CHANNEL_INTEGRATION_MORE_APPS_INFO_LINKED.format({helpCenterLink:p.default.getArticleURL(C.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)})})]}),(0,a.jsx)("div",{className:S.applicationRowContainer,children:T?v.map(e=>{if(null!=x.find(t=>t.application.id===e.id))return null;let n=null!=e.description?(0,o.parseBioReact)(e.description):null,l=h.default.getApplicationIconURL({id:e.id,icon:e.icon,size:40}),s=(0,a.jsxs)(a.Fragment,{children:[null!=l&&(0,a.jsx)("img",{className:S.applicationIcon,alt:"","aria-hidden":!0,src:l,width:40,height:40}),(0,a.jsxs)("div",{className:S.applicationRowContent,children:[(0,a.jsxs)("div",{className:S.applicationText,children:[(0,a.jsx)(r.Heading,{variant:"heading-md/medium",children:e.name}),null!=e.description&&(0,a.jsx)(r.Text,{variant:"text-sm/normal",color:"text-muted",lineClamp:1,children:n})]}),(0,a.jsx)(r.Button,{type:"button",innerClassName:S.applicationButtonHack,onClick:n=>{n.stopPropagation(),(0,d.openOAuth2Modal)({clientId:e.id,scopes:[C.OAuth2Scopes.APPLICATIONS_COMMANDS],channelId:t,disableGuildSelect:!0,callback:M})},size:r.Button.Sizes.SMALL,color:r.Button.Colors.PRIMARY,children:g.default.Messages.ADD})]})]}),{bot:i}=e;return null!=i?(0,a.jsx)(r.ClickableContainer,{onMouseDown:()=>N(i),onKeyDown:e=>A(e,i),className:S.applicationRow,onClick:()=>{(0,f.openUserProfileModal)({userId:i.id,channelId:t,analyticsLocation:{section:C.AnalyticsSections.ADD_PRIVATE_CHANNEL_INTEGRATION_MODAL}})},"aria-label":g.default.Messages.PRIVATE_CHANNEL_INTEGRATION_ADD_MODAL_ROW_INFO.format({appName:e.name}),children:s},e.id):(0,a.jsx)("div",{className:S.applicationRow,children:s},e.id)}):(0,a.jsx)(r.Spinner,{className:S.spinner,type:r.Spinner.Type.SPINNING_CIRCLE})})]})}),(0,a.jsxs)(r.ModalFooter,{className:S.modalFooter,children:[(0,a.jsx)(r.Button,{onClick:s,children:g.default.Messages.DONE}),(0,a.jsx)(r.Button,{look:r.Button.Looks.LINK,onClick:s,color:r.Button.Colors.PRIMARY,children:g.default.Messages.CANCEL})]})]})}},632892:function(e,t,n){"use strict";n.r(t),n.d(t,{FeatureBorderTypes:function(){return l},default:function(){return c}});var a,l,s=n("37983"),i=n("884691"),r=n("414456"),u=n.n(r),o=n("623682");(a=l||(l={})).PREMIUM="premium",a.LIMITED="limited";let d={premium:{border:o.premiumFeatureBorder,background:o.premiumBackground},limited:{border:o.limitedFeatureBorder,background:o.limitedBackground}};var c=i.forwardRef(function(e,t){let{children:n,type:a="premium",isShown:l,hasBackground:i=!1,className:r,backgroundClassName:c}=e;if(!l)return(0,s.jsx)(s.Fragment,{children:n});let{border:f,background:h}=d[a];return(0,s.jsx)("div",{ref:t,className:u(f,r),children:(0,s.jsx)("div",{className:u(i?h:o.background,c),children:n})})})},767094:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}}),n("222007");var a=n("446674"),l=n("419135"),s=n("574933"),i=n("692038"),r=n("95045"),u=n("27618"),o=n("744983");function d(e){let t=(0,a.useStateFromStores)([o.default,s.default],()=>{var t;let n=o.default.getQuery(e),a=o.default.getRawResults(e);if(null==n||null==a)return[];let u=(0,l.createASTHighlighter)(null!==(t=n.content)&&void 0!==t?t:"");return a.map(e=>e.map(e=>{let t=s.default.getMessage(e.id,e.channel_id),n=(0,i.createMessageRecord)(e);return null!=t&&(n=n.merge({attachments:t.attachments,embeds:t.embeds})),n.isSearchHit?n.set("customRenderedContent",(0,r.default)(n,{postProcessor:u,allowHeading:!0,allowList:!0})):n}))},[e],a.statesWillNeverBeEqual),[n,d]=(0,a.useStateFromStores)([u.default],()=>{let e=0,n=t.map(t=>t.filter(t=>{let n=u.default.isBlocked(t.author.id);return n&&t.isSearchHit&&e++,!n||t.isSearchHit}));return[n,e]},[t],a.statesWillNeverBeEqual);return{searchResults:n,blockCount:d}}},565996:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("77078"),s=n("701909"),i=n("49111"),r=n("782340"),u=n("14310");function o(e){let{searchMode:t,searchByMode:n}=e;return(0,a.jsxs)("header",{className:u.searchHeader,children:[(0,a.jsx)(d,{...e}),(0,a.jsxs)(l.TabBar,{orientation:"horizontal",className:u.searchHeaderTabList,selectedItem:t,onItemSelect:n,children:[(0,a.jsx)(l.TabBar.Item,{id:i.SearchModes.NEWEST,children:r.default.Messages.SEARCH_NEWEST_SHORT}),(0,a.jsx)(l.TabBar.Item,{id:i.SearchModes.OLDEST,children:r.default.Messages.SEARCH_OLDEST_SHORT}),(0,a.jsx)(l.TabBar.Item,{id:i.SearchModes.MOST_RELEVANT,children:r.default.Messages.SEARCH_MOST_RELEVANT_SHORT})]})]})}function d(e){let t;let{isSearching:n,isIndexing:s,documentsIndexed:i}=e;(s||n)&&(t=(0,a.jsx)("div",{className:u.spinnerWrapper,children:(0,a.jsx)(l.Spinner,{type:l.Spinner.Type.SPINNING_CIRCLE,className:u.spinner,itemClassName:u.spinnerPath})}));let o=s&&!n;return(0,a.jsxs)("div",{className:u.totalResults,role:"status",children:[o?(0,a.jsx)(l.Tooltip,{text:r.default.Messages.SEARCH_STILL_INDEXING_HINT.format({count:i}),children:n=>(0,a.jsxs)("div",{className:u.totalResultsWrapper,...n,children:[(0,a.jsx)(c,{...e}),t]})}):(0,a.jsx)(c,{...e}),o?null:t]})}function c(e){let{isSearching:t,isIndexing:n,totalResults:o}=e;if(t)return(0,a.jsx)(l.Text,{variant:"text-md/normal",color:"header-primary",children:r.default.Messages.SEARCHING});{if(n)return(0,a.jsx)(l.Text,{variant:"text-md/normal",children:(0,a.jsx)(l.Anchor,{className:u.helpdeskLink,href:s.default.getArticleURL(i.HelpdeskArticles.SEARCH_INDEXING),children:r.default.Messages.STILL_INDEXING})});let e=o.toLocaleString();return(0,a.jsx)(l.Text,{variant:"text-md/normal",color:"header-primary",children:r.default.Messages.TOTAL_RESULTS.format({count:e})})}}},420861:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var l=n("77078"),s=n("102499");function i(e){let{changePage:t,offset:n,totalResults:i,pageLength:r}=e;return(0,a.jsx)("div",{className:s.container,children:(0,a.jsx)(l.Paginator,{currentPage:Math.floor(n/r)+1,totalCount:i,pageSize:r,onPageChange:t,maxVisiblePages:5})})}},18061:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}}),n("222007");var a,l=n("37983"),s=n("884691"),i=n("917351"),r=n.n(i),u=n("118810"),o=n("77078"),d=n("272030"),c=n("699473"),f=n("42203"),h=n("782340"),p=n("821867");a=class extends s.PureComponent{render(){let{result:e,listItemProps:t,searchOffset:n,index:a,totalResults:s}=this.props,i=r.find(e,e=>e.isSearchHit);if(null==i)return null;let u=f.default.getChannel(i.channel_id);if(null==u)return null;let d="search-result-".concat(i.id);return(0,l.jsx)(o.FocusRing,{ringTarget:this.hitRef,ringClassName:p.searchResultFocusRing,offset:4,children:(0,l.jsxs)("li",{className:p.container,...t,"aria-posinset":1+n+a,"aria-setsize":s,"aria-labelledby":d,children:[(0,l.jsx)(o.Clickable,{tabIndex:-1,onClick:this.handleMessageClick,innerRef:this.containerRef,className:p.searchResult,focusProps:{enabled:!1},children:(0,l.jsx)("div",{ref:this.hitRef,className:p.message,children:(0,l.jsx)(c.default,{id:d,message:i,channel:u,onContextMenu:e=>this.handleContextMenu(e,i),animateAvatar:!1,subscribeToComponentDispatch:!1,trackAnnouncementViews:!0})},i.id)}),(0,l.jsx)("div",{className:p.buttonsContainer,"aria-hidden":!0,children:(0,l.jsx)(o.Clickable,{className:p.button,onClick:this.jumpTo,children:h.default.Messages.JUMP})})]})})}constructor(...e){super(...e),this.containerRef=s.createRef(),this.hitRef=s.createRef(),this.handleContextMenu=(e,t)=>{let a=f.default.getChannel(t.channel_id);null!=a&&(e.stopPropagation(),(0,d.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("13406").then(n.bind(n,"13406"));return n=>(0,l.jsx)(e,{...n,message:t,channel:a})}))},this.jumpTo=e=>{null!=e&&(e.preventDefault(),e.stopPropagation());let{onJump:t,result:n}=this.props,a=n.find(e=>e.isSearchHit);null!=a&&t(a)},this.handleMessageClick=e=>{if(function(e,t){var n;let a=null===(n=window)||void 0===n?void 0:n.getSelection();if(null!=a&&!a.isCollapsed)return!0;if(null==e||null==t)return!1;for(;(0,u.isElement)(e)&&e!==t;){;let{tagName:t}=e;if("A"===t||"IMG"===t||"BUTTON"===t)return!0;e=e.parentNode}return!1}(e.target,this.containerRef.current)){e.stopPropagation();return}this.jumpTo(e)}}}},535260:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}}),n("808653"),n("424973"),n("222007");var a=n("37983"),l=n("884691"),s=n("880317"),i=n("77078"),r=n("404118"),u=n("819689"),o=n("378438"),d=n("419135"),c=n("206230"),f=n("679653"),h=n("619335"),p=n("70845"),m=n("95045"),E=n("393414"),C=n("144491"),g=n("845579"),S=n("42203"),_=n("957255"),I=n("27618"),T=n("744983"),v=n("18494"),x=n("697218"),N=n("505684"),A=n("593195"),M=n("420861"),R=n("18061"),j=n("49111"),L=n("782340"),O=n("211631");function y(e){var t;let{search:n,searchId:f,renderEmbeds:h,scrollTo:p,searchResults:m,blockCount:C}=e,{offset:g,totalResults:_,isSearching:v,showBlockedResults:x}=n,N=l.useCallback(e=>{!v&&o.changePage(f,e-1)},[f,v]),A=l.useCallback(e=>{if(e.blocked)r.default.show({title:L.default.Messages.UNBLOCK_TO_JUMP_TITLE,body:L.default.Messages.UNBLOCK_TO_JUMP_BODY.format({name:e.author.username}),confirmText:L.default.Messages.OKAY});else{let t=S.default.getChannel(e.channel_id),n=null!=t?t.getGuildId():null;u.default.trackJump(e.channel_id,e.id,"Search Results",{search_id:T.default.getAnalyticsId(f)}),(0,E.transitionTo)(j.Routes.CHANNEL(n,e.channel_id,e.id))}},[f]),R=l.useMemo(()=>{let e;if(null==m)return[];let t=0;return m.reduce((n,a)=>{let l=a.find(e=>e.isSearchHit);if(!x&&null!=l&&I.default.isBlocked(l.author.id))return n;let s=S.default.getChannel(a[0].channel_id);return null==s?n:((null==e||e!==s.id)&&n.push({channel:s,results:[],startIndex:t}),t+=1,n[n.length-1].results.push(a),e=null==s?void 0:s.id,n)},[])},[m,x]),y=l.useRef([]),b=R.reduce((e,t)=>e+1+t.results.length,0),D=l.useCallback((e,t)=>{if(!c.default.keyboardModeEnabled)return;let n=y.current,a=null!=t?n[t]:void 0;if(null==a||null==a.hitRef.current)return;let l=a.hitRef.current.getClientRects()[0],s=l.top-.5*l.height;p(s,!1,()=>{var t;null===(t=document.getElementById(e))||void 0===t||t.focus()})},[p]),U=l.useCallback(e=>{let t=y.current[e];null==t||t.jumpTo()},[]),w=(0,s.useListNavigator)({navId:"search-results",itemCount:b,focusedIndex:0,setFocus:D,onSelect:U}),F=T.default.getQuery(f),k=(0,d.createASTHighlighter)(null!==(t=null==F?void 0:F.content)&&void 0!==t?t:""),V=R.map(e=>{let{channel:t,results:n,startIndex:l}=e;return(0,a.jsx)(P,{channel:t,results:n,highlighter:k,startIndex:l,resultRefs:y,totalResults:_,scrollTo:p,searchId:f,renderEmbeds:h,offset:g,jumpToMessage:A,listNavigator:w},"".concat(t.id,"-").concat(l))});V.push();let B=l.useRef(null);l.useLayoutEffect(()=>{var e;null===(e=B.current)||void 0===e||e.focus()},[m]);let H=(0,i.useFocusJumpSection)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:B,...w.getContainerProps(),...H,"aria-busy":v,children:V}),C>0?(0,a.jsxs)(i.Clickable,{tag:"div",className:O.resultsBlocked,onClick:()=>o.setShowBlockedResults(f,!x),children:[(0,a.jsx)("div",{className:O.resultsBlockedImage}),(0,a.jsx)("div",{className:O.resultsBlockedText,children:x?L.default.Messages.SEARCH_HIDE_BLOCKED_MESSAGES.format({count:C}):L.default.Messages.SEARCH_NUM_RESULTS_BLOCKED_NOT_SHOWN.format({count:C})})]}):null,!v&&(0,a.jsx)(M.default,{changePage:N,offset:g,totalResults:_,pageLength:j.SEARCH_PAGE_SIZE})]})}function P(e){var t;let{channel:n,results:s,highlighter:r,startIndex:u,resultRefs:o,totalResults:d,scrollTo:c,searchId:E,renderEmbeds:T,offset:M,jumpToMessage:L,listNavigator:y}=e,P=g.RenderSpoilers.useSetting(),b=l.useCallback(e=>{if(e===v.default.getChannelId())return;let t=S.default.getChannel(e);if(null!=t)_.default.can(j.Permissions.VIEW_CHANNEL,t)&&(0,C.transitionToChannel)(t.id)},[]),D=null!=n?(0,f.computeChannelName)(n,x.default,I.default,!1):"???",U=(null==n?void 0:n.parent_id)!=null?S.default.getChannel(n.parent_id):null,w=null!=U?U.name:null,F=null!==(t=(0,h.default)(n))&&void 0!==t?t:A.default,k=null!=U?(0,h.default)(U):null,V=_.default.can(j.Permissions.MANAGE_MESSAGES,n),{content:B}=(0,m.default)({content:D,embeds:[]},{postProcessor:r}),H=l.useRef(null),[G,W]=l.useState(!1);return l.useEffect(()=>{let e=H.current;null!=e&&null!=e.offsetWidth&&null!=e.scrollWidth&&W(e.offsetWidth<e.scrollWidth)},[]),(0,a.jsx)(N.ObscuredDisplayContext.Provider,{value:(0,p.default)(P,V),children:(0,a.jsxs)("ul",{role:"group",className:O.searchResultGroup,"aria-label":null==w?D:"".concat(D,", ").concat(w),children:[(0,a.jsx)(i.Clickable,{onClick:()=>b(n.id),children:(0,a.jsxs)("div",{className:O.channelNameContainer,children:[(0,a.jsx)(F,{className:O.channelNameIcon,width:16,height:16}),(0,a.jsx)(i.Tooltip,{text:D,shouldShow:G,children:e=>(0,a.jsx)("span",{...e,ref:H,className:O.channelNameText,children:B})}),null!=U&&null!=w&&null!=k?(0,a.jsxs)(i.Clickable,{className:O.parentChannelNameClickable,onClick:e=>{e.stopPropagation(),b(U.id)},children:[(0,a.jsx)(k,{className:O.parentChannelNameIcon,width:12,height:12}),(0,a.jsx)(i.Text,{className:O.parentChannelNameText,variant:"text-xs/medium",color:"header-secondary",children:w})]}):null]})}),s.map((e,t)=>{let n=u+t;return(0,a.jsx)(R.default,{ref:e=>o.current[n]=e,totalResults:d,scrollTo:c,searchId:E,renderEmbeds:T,searchOffset:M,pageResultsLength:s.length,result:e,index:n,onJump:L,listItemProps:y.getItemProps({index:n})},"search-result-".concat(n))})]})})}},56778:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n.n(r),o=n("446674"),d=n("77078"),c=n("970728"),f=n("378438"),h=n("716241"),p=n("161778"),m=n("845579"),E=n("744983"),C=n("18494"),g=n("230559"),S=n("659500"),_=n("767094"),I=n("565996"),T=n("535260"),v=n("49111"),x=n("782340"),N=n("557398");class A extends l.Component{componentDidMount(){this.autoAnalytics()}componentDidUpdate(e){(this.props.searchAnalyticsId!==e.searchAnalyticsId||this.props.searchOffset!==e.searchOffset)&&this.autoAnalytics(e.searchAnalyticsId)}render(){return null}constructor(...e){var t;super(...e),t=this,this.autoAnalytics=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t.props.searchAnalyticsId)return;let n=0,a=0,l=0,s=0;null!=t.props.searchResults&&u(t.props.searchResults).flatten().filter(e=>e.isSearchHit).forEach(e=>{null!=e.content&&""!==e.content&&(n++,/https?:\/\/[^\s]+/.test(e.content)&&s++),null!=e.embeds&&e.embeds.length>0&&l++,null!=e.attachments&&e.attachments.length>0&&a++}),h.default.trackWithMetadata(v.AnalyticEvents.SEARCH_RESULT_VIEWED,{search_type:t.props.searchType,search_id:t.props.searchAnalyticsId,prev_search_id:e!==t.props.searchAnalyticsId?e:null,is_error:t.props.searchHasError,limit:t.props.searchLimit,offset:t.props.searchOffset,page:Math.floor(t.props.searchOffset/t.props.searchLimit)+1,total_results:t.props.searchTotalResults,page_results:null!=t.props.searchResults?t.props.searchResults.length:null,is_indexing:t.props.searchIsIndexing,page_num_messages:n,page_num_links:s,page_num_embeds:l,page_num_attach:a})}}}let M=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:N.emptyResultsWrap,children:(0,a.jsx)("div",{className:N.emptyResultsContent,children:t})})};class R extends l.PureComponent{componentDidMount(){S.ComponentDispatch.subscribe(v.ComponentActions.SEARCH_RESULTS_CLOSE,this.handleSearchResultsClose)}componentWillUnmount(){S.ComponentDispatch.unsubscribe(v.ComponentActions.SEARCH_RESULTS_CLOSE,this.handleSearchResultsClose)}componentDidUpdate(e){let{search:t}=e;if(this.props.search.showBlockedResults!==t.showBlockedResults){let e=this.scrollerRef.current;if(null==e)return;e.scrollToBottom()}let n=E.default.getQuery(this.props.searchId);JSON.stringify(n)!==JSON.stringify(this.state.searchQuery)&&this.setState({searchQuery:n,searchMode:v.SearchModes.NEWEST})}render(){let{searchAnalyticsId:e,searchType:t,searchResults:n}=this.props,{offset:l,hasError:s,totalResults:i,isHistoricalIndexing:r}=this.props.search;return(0,a.jsxs)("section",{className:N.searchResultsWrap,"aria-label":x.default.Messages.SEARCH_RESULTS_SECTION_LABEL,children:[this.renderHeader(),(0,a.jsx)(d.AdvancedScroller,{ref:this.scrollerRef,className:N.scroller,children:this.renderContent()}),(0,a.jsx)(A,{searchType:t,searchAnalyticsId:e,searchResults:n,searchOffset:l,searchLimit:v.SEARCH_PAGE_SIZE,searchHasError:s,searchTotalResults:i,searchIsIndexing:r})]})}constructor(...e){super(...e),this.state={searchMode:v.SearchModes.NEWEST,searchQuery:null},this.scrollerRef=l.createRef(),this.scrollTo=(e,t,n)=>{let a=this.scrollerRef.current;if(null==a)return;let l=a.getScrollerState().scrollTop-e;a.scrollTo({to:l,animate:t,callback:n})},this.selectChannel=e=>{e!==C.default.getChannelId()&&c.default.transitionToInviteChannelSync(e)},this.searchPrevious=()=>{let{searchId:e,search:{isSearching:t}}=this.props;!t&&f.searchPreviousPage(e)},this.searchNext=()=>{let{searchId:e,search:{isSearching:t}}=this.props;!t&&f.searchNextPage(e)},this.handleSearchResultsClose=()=>{let{searchId:e}=this.props;f.clearSearchState(e)},this.searchByMode=e=>{let{searchId:t,search:{isSearching:n}}=this.props,{searchMode:a}=this.state;e!==a&&!n&&(h.default.trackWithMetadata(v.AnalyticEvents.SEARCH_RESULT_SORT_CHANGED,{search_id:E.default.getAnalyticsId(t),new_sort_type:e}),f.searchByMode(t,e),this.setState({searchMode:e}))},this.toggleShowBlockedMessages=()=>{let{searchId:e,search:{showBlockedResults:t}}=this.props;f.setShowBlockedResults(e,!t)},this.renderHeader=()=>{let{searchMode:e}=this.state,{totalResults:t,isSearching:n,isHistoricalIndexing:l,documentsIndexed:s}=this.props.search;return(0,a.jsx)(I.default,{searchMode:e,searchByMode:this.searchByMode,totalResults:t,isSearching:n,isIndexing:l,documentsIndexed:s})},this.renderIndexing=()=>{let e=E.default.getSearchType(this.props.searchId),t=e===v.SearchTypes.GUILD?x.default.Messages.SEARCH_GUILD_STILL_INDEXING:x.default.Messages.SEARCH_DM_STILL_INDEXING;return(0,a.jsxs)(M,{children:[(0,a.jsx)(g.default,{}),(0,a.jsx)("div",{className:(N.emptyResultsText,N.stillIndexing),children:t})]})},this.renderNoResults=()=>{let{showNoResultsAlt:e}=this.props.search,t=e?x.default.Messages.SEARCH_NO_RESULTS_ALT:x.default.Messages.SEARCH_NO_RESULTS;return(0,a.jsxs)(M,{children:[(0,a.jsx)("div",{className:i(N.noResultsImage,{[N.alt]:e})}),(0,a.jsx)("div",{className:i(N.emptyResultsText,N.noResults,{[N.alt]:e}),children:t})]})},this.renderError=()=>(0,a.jsxs)(M,{children:[(0,a.jsx)("div",{className:N.errorImage}),(0,a.jsx)("div",{className:i(N.emptyResultsText,N.errorMessage),children:x.default.Messages.SEARCH_ERROR})]}),this.renderContent=()=>{let{searchResults:e,blockCount:t}=this.props,{totalResults:n,isSearching:l,isIndexing:s,hasError:i}=this.props.search;return i?this.renderError():s?this.renderIndexing():l?null:n>0?(0,a.jsx)(T.default,{search:this.props.search,searchResults:e,blockCount:t,searchId:this.props.searchId,renderEmbeds:this.props.renderEmbeds,scrollTo:this.scrollTo}):this.renderNoResults()}}}function j(e){let{searchId:t}=e;return(0,a.jsx)(R,{searchId:t,...(0,o.useStateFromStoresObject)([E.default],()=>({search:E.default.getResultsState(t),searchAnalyticsId:E.default.getAnalyticsId(t),searchType:E.default.getSearchType()}),[t]),...(0,_.default)(t),renderEmbeds:m.RenderEmbeds.useSetting(),developerMode:m.DeveloperMode.useSetting(),...(0,o.useStateFromStoresObject)([p.default],()=>{let{theme:e}=p.default;return{theme:e}})})}},760679:function(e,t,n){"use strict";n.r(t),n.d(t,{drawLinePoint:function(){return u},addLinePoints:function(){return o},updateLinePoints:function(){return d},startEmojiHose:function(){return c},stopEmojiHose:function(){return f},stopRenderedEmojiHose:function(){return h},updateEmojiHose:function(){return p},clearDrawables:function(){return m},setDrawMode:function(){return E},toggleOverlayCanvas:function(){return C}});var a=n("981980"),l=n("872717"),s=n("913144"),i=n("315841"),r=n("49111");function u(e,t,n,a,l){s.default.dispatch({type:"SHARED_CANVAS_DRAW_LINE_POINT",channelId:e,userId:n,lineId:t,streamerId:a,point:l})}function o(e,t,n,a){return l.default.post({url:r.Endpoints.SHARED_CANVAS_LINES(e,n),body:{line_id:t,points:a}})}function d(e,t,n,a){s.default.dispatch({type:"SHARED_CANVAS_UPDATE_LINE_POINTS",userId:t,lineId:e,newPoints:a,streamerId:n})}function c(e,t,n){return l.default.post({url:r.Endpoints.SHARED_CANVAS_EMOJI_HOSES(e,t),body:{emoji_hose:n}})}function f(e,t,n){l.default.delete({url:r.Endpoints.SHARED_CANVAS_EMOJI_HOSE(e,t,n),backoff:new a.default})}function h(e,t){t.state=i.EmojiHoseState.STOP,s.default.dispatch({type:"SHARED_CANVAS_UPDATE_EMOJI_HOSE",emojiHose:t,userId:t.userId,streamerId:e})}function p(e,t,n){s.default.dispatch({type:"SHARED_CANVAS_UPDATE_EMOJI_HOSE",emojiHose:e,userId:t,streamerId:n})}function m(e,t){s.default.dispatch({type:"SHARED_CANVAS_CLEAR_DRAWABLES",drawables:e,streamerId:t})}function E(e){s.default.dispatch({type:"SHARED_CANVAS_SET_DRAW_MODE",drawMode:e})}function C(){s.default.dispatch({type:"TOGGLE_OVERLAY_CANVAS"})}},827520:function(e,t,n){"use strict";n.r(t),n.d(t,{AVATAR_COLOR_AVATAR_SIZE:function(){return a},EMOJI_HOSE_EMOJI_SIZE:function(){return l},OUTLINE_WIDTH:function(){return s},EVENT_TICK_RATE:function(){return i},EMOJI_HOSE_PING_DELAY:function(){return r}});let a=80,l=48,s=3,i=500,r=5e3},780166:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("862205");let l=(0,a.createExperiment)({kind:"guild",id:"2023-01_shared_canvas",label:"Shared Canvas",defaultConfig:{isSharedCanvasEnabled:!1},treatments:[{id:1,label:"Enable Shared Canvas",config:{isSharedCanvasEnabled:!0}}]});var s=l},242260:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}}),n("424973"),n("222007");var a=n("446674"),l=n("913144"),s=n("867805"),i=n("697218"),r=n("402671"),u=n("315841"),o=n("52477"),d=n("827520");let c={},f={},h={},p=!0,m=null;function E(e){if(null==f[e]){let t=i.default.getUser(e);if(null==t)return;let n=t.getAvatarURL(null,d.AVATAR_COLOR_AVATAR_SIZE),a=new Image;a.src=n,f[e]=a}}class C extends a.default.Store{get visibleOverlayCanvas(){return p}getDrawables(e){return null!=c[e]?c[e]:[]}getAvatarImage(e){return f[e]}getEmojiImage(e){return h[e]}getDrawMode(){return m}}C.displayName="SharedCanvasStore";let g=new C(l.default,{SHARED_CANVAS_UPDATE_LINE_POINTS:function(e){let{lineId:t,newPoints:n,userId:a,streamerId:l}=e,s=c[l];if(null==s)c[l]=[{type:u.DrawableType.LINE,id:t,userId:a,points:n}];else{let e=s.find(e=>e.id===t);null==e?s.push({type:u.DrawableType.LINE,id:t,userId:a,points:n}):(0,o.isLine)(e)&&e.points.push(...n)}E(a)},SHARED_CANVAS_UPDATE_EMOJI_HOSE:function(e){var t,n,a;let{emojiHose:l,streamerId:i,userId:o}=e,f={...l,type:u.DrawableType.EMOJI_HOSE};if(null==c[i])c[i]=[f];else{let e=c[i].findIndex(e=>e.id===l.id);e>=0?c[i][e]={...c[i][e],...f}:c[i].push(f)}let p=null!==(n=null!==(t=l.emojiId)&&void 0!==t?t:l.emojiName)&&void 0!==n?n:"";if(null==h[p]){let e=null!=l.emojiName?s.default.convertNameToSurrogate(l.emojiName):null;h[p]=new Image,h[p].src=(0,r.getEmojiUrl)({id:l.emojiId,name:null!==(a=null!=e?e:l.emojiName)&&void 0!==a?a:"",animated:!1},d.EMOJI_HOSE_EMOJI_SIZE)}E(o)},SHARED_CANVAS_CLEAR_DRAWABLES:function(e){let{drawables:t,streamerId:n}=e;if(null!=c[n]){let e=new Set;t.forEach(t=>e.add(t.id)),c[n]=c[n].filter(t=>!e.has(t.id))}},SHARED_CANVAS_SET_DRAW_MODE:function(e){let{drawMode:t}=e;m=t},TOGGLE_OVERLAY_CANVAS:function(e){let{}=e;p=!p}});var S=g},315841:function(e,t,n){"use strict";var a,l,s,i;n.r(t),n.d(t,{DrawableType:function(){return a},EmojiHoseState:function(){return l}}),(s=a||(a={})).LINE="line",s.EMOJI_HOSE="emoji_hose",(i=l||(l={})).START="START",i.STOP="STOP"},52477:function(e,t,n){"use strict";n.r(t),n.d(t,{clearCanvas:function(){return d},getMouseCoordinatesPercent:function(){return c},normalizeCoordinate:function(){return f},normalizeCoordinates:function(){return h},isLine:function(){return p},getUserColors:function(){return m}});var a=n("656280"),l=n.n(a),s=n("509043"),i=n("462274"),r=n("697218"),u=n("315841"),o=n("827520");function d(e){let t=e.current,n=null==t?void 0:t.getContext("2d");null!=t&&null!=n&&n.clearRect(0,0,t.width,t.height)}function c(e,t){let{width:n,height:a,left:l,top:s}=e.getBoundingClientRect(),i=(t.clientX-l)/n,r=(t.clientY-s)/a;return{x:i,y:r}}function f(e,t){return Math.round(e*t*window.devicePixelRatio)}function h(e,t,n){return{x:f(e.x,t),y:f(e.y,n),deltaTime:e.deltaTime}}function p(e){return e.type===u.DrawableType.LINE}function m(e,t,n,a){var u;let d=r.default.getUser(e),c=null==d?void 0:d.getAvatarURL(null,o.AVATAR_COLOR_AVATAR_SIZE),f=null!=c?null===(u=i.useColorStore.getState().palette[c])||void 0===u?void 0:u[0]:null,h=null!=f?"#".concat(l({r:f[0],g:f[1],b:f[2]}).toHex()):a,p=(0,s.getDarkness)((0,s.hex2int)(h))>.5?n:t;return{fillColor:h,outlineColor:p}}},357304:function(e,t,n){"use strict";n.r(t),n.d(t,{renderAvatarCursorOutline:function(){return l},renderAvatarCursor:function(){return s}});var a=n("242260");function l(e,t,n,a,l){e.save(),e.beginPath(),e.fillStyle=a,e.arc(t,n,Math.round(20*window.devicePixelRatio)/2+l,0,2*Math.PI),e.fill(),e.restore()}function s(e,t,n,l){e.save();let s=a.default.getAvatarImage(l);if(null==s)return;let i=20*window.devicePixelRatio;e.beginPath(),e.arc(t,n,i/2,0,2*Math.PI),e.clip(),e.drawImage(s,t-i/2,n-i/2,i,i),e.restore()}},553930:function(e,t,n){"use strict";n.r(t),n.d(t,{useEmojiHoseStore:function(){return p},default:function(){return E}}),n("424973");var a=n("917351"),l=n.n(a),s=n("748820"),i=n("308503"),r=n("760679"),u=n("242260"),o=n("315841"),d=n("52477"),c=n("357304"),f=n("827520");let h={X_OFFSET:2*f.EMOJI_HOSE_EMOJI_SIZE,Y_OFFSET:25,X_SPEED:.5,Y_SPEED_MIN:-1,Y_SPEED_MAX:-5,OPACITY:1,OPACITY_SPEED_MIN:.01,OPACITY_SPEED_MAX:.05,SIZE_MIN:f.EMOJI_HOSE_EMOJI_SIZE/2,SIZE_MAX:f.EMOJI_HOSE_EMOJI_SIZE},p=(0,i.default)(()=>({particles:{},lastSpawned:{}}));function m(e,t){var n;l(null!==(n=p.getState().particles[e.id])&&void 0!==n?n:{}).forEach(t)}function E(e){var t,n,a,i;let{emojiHose:E,context:C,canvasWidth:g,canvasHeight:S,fallbackColor:_,outlineColorDark:I,outlineColorLight:T,streamerId:v,deadDrawables:x}=e;C.save();let N=u.default.getEmojiImage(null!==(n=null!==(t=E.emojiId)&&void 0!==t?t:E.emojiName)&&void 0!==n?n:""),A=(0,d.normalizeCoordinate)(E.x,g),M=(0,d.normalizeCoordinate)(E.y,S),{outlineColor:R}=(0,d.getUserColors)(E.userId,I,T,_);if(m(E,e=>{var t,n;return t=E,n=e,void(n.x+=n.xSpeed*window.devicePixelRatio,n.y+=n.ySpeed*window.devicePixelRatio,n.opacity-=n.opacitySpeed,n.opacity<=0&&p.setState(e=>(delete e.particles[t.id][n.id],0===Object.keys(e.particles[t.id]).length&&delete e.particles[t.id],e)))}),!function(e,t,n){var a;let i=null!==(a=p.getState().lastSpawned[e.id])&&void 0!==a?a:0,r=Date.now();if(!(i+100>r)&&e.state!==o.EmojiHoseState.STOP)(.8>=Math.random()||i+300<r)&&p.setState(a=>{var i,r,u;let o=null!==(i=a.particles[e.id])&&void 0!==i?i:{},d=l.random(1,2);for(let e=0;e<d;e++){;let e=(r=t,u=n,{id:(0,s.v4)(),x:r+l.random(-h.X_OFFSET,h.X_OFFSET),y:u+l.random(-h.Y_OFFSET,h.Y_OFFSET),xSpeed:l.random(-h.X_SPEED,h.X_SPEED),ySpeed:l.random(h.Y_SPEED_MIN,h.Y_SPEED_MAX),opacity:h.OPACITY,opacitySpeed:l.random(h.OPACITY_SPEED_MIN,h.OPACITY_SPEED_MAX),size:l.random(h.SIZE_MIN,h.SIZE_MAX)});o[e.id]=e}return a.particles[e.id]=o,a.lastSpawned[e.id]=Date.now(),a})}(E,A,M),(0,c.renderAvatarCursorOutline)(C,A,M,R,f.OUTLINE_WIDTH),(0,c.renderAvatarCursor)(C,A,M,E.userId),m(E,e=>(function(e,t,n){if(null==t)return;let a=n.size*window.devicePixelRatio,l=n.x-a/2*window.devicePixelRatio,s=n.y-1.2*a*window.devicePixelRatio;e.globalAlpha=n.opacity,e.drawImage(t,a/2+l,a/2+s,a,a)})(C,N,e)),E.lastUpdatedAt+f.EMOJI_HOSE_PING_DELAY<Date.now()&&(0,r.stopRenderedEmojiHose)(v,E),E.state===o.EmojiHoseState.STOP&&(a=E,!(Object.keys(null!==(i=p.getState().particles[a.id])&&void 0!==i?i:{}).length>0)))x.push(E);C.restore()}},717482:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}}),n("424973");var a=n("52477"),l=n("357304"),s=n("827520");function i(e){let{line:t,context:n,canvasWidth:i,canvasHeight:r,fallbackColor:u,outlineColorDark:o,outlineColorLight:d,linesDrawnAt:c,deadDrawables:f}=e;null==c.current[t.id]&&(c.current[t.id]=Date.now()),n.lineCap="round",n.lineJoin="round";let h=t.points.map(e=>(0,a.normalizeCoordinates)(e,i,r)),p=c.current[t.id],m=e=>p+e.deltaTime,E=e=>m(e)+1500>=Date.now(),C=e=>m(e)<=Date.now()&&E(e),g=h.find(C);if(null==g){!E(t.points[t.points.length-1])&&f.push(t);return}let S=(e,t)=>{let a=null;n.lineWidth=t*window.devicePixelRatio,n.strokeStyle=e,n.beginPath(),n.moveTo(g.x,g.y);for(let e=1;e<h.length;e++){let t=h[e];C(t)&&(n.lineTo(t.x,t.y),a=t)}return n.stroke(),a},{fillColor:_,outlineColor:I}=(0,a.getUserColors)(t.userId,o,d,u),T=S(I,6+s.OUTLINE_WIDTH),v=null!=T&&C(T);v&&(0,l.renderAvatarCursorOutline)(n,T.x,T.y,I,s.OUTLINE_WIDTH),S(_,6),v&&(0,l.renderAvatarCursor)(n,T.x,T.y,t.userId)}},306645:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("884691"),l=n("446674"),s=n("374014"),i=n("205817"),r=n("599110"),u=n("49111"),o=n("646718");function d(e,t){let{handleMouseDown:n,handleMouseMove:d,handleMouseUp:c,handleMouseEnter:f}=e,h=a.useRef(null),p=(0,l.useStateFromStores)([i.default],()=>i.default.getRTCConnection((0,s.encodeStreamKey)(t))),m=a.useCallback((e,t,a)=>{h.current=Date.now(),n(e,t,a)},[n]),E=a.useCallback((e,t,n)=>{if(c(e,t,n),null!=h.current){if(null!=p){var a,l,s;a=e,l=p,s=Date.now()-h.current,r.default.track(u.AnalyticEvents.PREMIUM_FEATURE_USAGE,{feature_name:"".concat(o.AnalyticsPremiumFeatureNames.SHARED_CANVAS,"_").concat(a.type),feature_tier:o.AnalyticsPremiumFeatureTiers.FREE,media_session_id:l.getMediaSessionId(),parent_media_session_id:l.parentMediaSessionId,guild_id:l.guildId,duration:s})}h.current=null}},[c,p]);return{handleMouseUp:E,handleMouseDown:m,handleMouseMove:d,handleMouseEnter:f}}},195513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("884691"),l=n("748820"),s=n("760679");let i=()=>{};function r(e,t,n){let r=a.useRef((0,l.v4)()),u=a.useRef(Date.now()),o=a.useCallback((a,l)=>{let i={x:a,y:l,deltaTime:Date.now()-u.current};(0,s.drawLinePoint)(t,r.current,e,n,i),(0,s.updateLinePoints)(r.current,e,n,[i])},[t,n,e]),d=a.useCallback((e,t,n)=>{r.current=(0,l.v4)(),u.current=Date.now(),o(t,n)},[o]),c=a.useCallback((e,t,n)=>o(t,n),[o]),f=a.useCallback((e,t,n)=>d(e,t,n),[d]);return a.useMemo(()=>({handleMouseDown:d,handleMouseMove:c,handleMouseUp:i,handleMouseEnter:f}),[d,f,c])}},107517:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("884691"),l=n("917351"),s=n.n(l),i=n("748820"),r=n("862337"),u=n("760679"),o=n("315841"),d=n("827520");let c=s.debounce(u.startEmojiHose,d.EVENT_TICK_RATE,{maxWait:d.EVENT_TICK_RATE});function f(e,t,n){let l=a.useRef((0,i.v4)()),s=a.useRef(new r.Interval),f=a.useCallback(a=>{a.lastUpdatedAt=Date.now(),(0,u.updateEmojiHose)(a,e,n),(0,u.startEmojiHose)(t,n,a)},[t,n,e]),h=a.useCallback((a,r,c)=>{l.current=(0,i.v4)();let h={...a,id:l.current,x:r,y:c,userId:e,state:o.EmojiHoseState.START,lastUpdatedAt:Date.now()};(0,u.startEmojiHose)(t,n,h),(0,u.updateEmojiHose)(h,e,n),s.current.start(d.EMOJI_HOSE_PING_DELAY,()=>f(h))},[e,t,n,f]),p=a.useCallback((a,i,r)=>{let h={...a,id:l.current,x:i,y:r,userId:e,state:o.EmojiHoseState.START,lastUpdatedAt:Date.now()};c(t,n,h),(0,u.updateEmojiHose)(h,e,n),s.current.start(d.EMOJI_HOSE_PING_DELAY,()=>f(h))},[e,t,n,f]),m=a.useCallback((a,i,r)=>{c.cancel(),(0,u.stopEmojiHose)(t,n,l.current),(0,u.updateEmojiHose)({...a,id:l.current,x:i,y:r,userId:e,state:o.EmojiHoseState.STOP,lastUpdatedAt:Date.now()},e,n),s.current.stop()},[t,n,e]),E=a.useCallback((e,t,n)=>p(e,t,n),[p]);return a.useMemo(()=>({handleMouseDown:h,handleMouseMove:p,handleMouseUp:m,handleMouseEnter:E}),[h,E,p,m])}},291499:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("884691"),l=n("65597"),s=n("242260"),i=n("315841"),r=n("52477"),u=n("306645"),o=n("195513"),d=n("107517");function c(e){let{user:t,channelId:n,streamerId:c,stream:f,focused:h,canvas:p}=e,m=a.useRef(!1),E=(0,l.default)([s.default],()=>s.default.getDrawMode()),C=(0,u.default)((0,o.default)(t.id,n,c),f),g=(0,u.default)((0,d.default)(t.id,n,c),f),S=a.useCallback((e,t,n)=>{if(null==p)return;let{x:a,y:l}=(0,r.getMouseCoordinatesPercent)(p,n);switch(t.type){case i.DrawableType.LINE:return C[e](t,a,l);case i.DrawableType.EMOJI_HOSE:return g[e](t,a,l)}},[p,C,g]),_=a.useCallback(e=>{h&&null!=E&&(e.stopPropagation(),m.current=!0,S("handleMouseDown",E,e))},[S,E,h]),I=a.useCallback(e=>{h&&null!=E&&(e.stopPropagation(),m.current&&S("handleMouseMove",E,e))},[S,E,h]),T=a.useCallback(e=>{h&&null!=E&&(e.stopPropagation(),m.current=!1,S("handleMouseUp",E,e))},[S,E,h]),v=a.useCallback(e=>{m.current&&null!=E&&S("handleMouseEnter",E,e)},[S,E]);a.useEffect(()=>{let e=e=>{null!=E&&(m.current=!1,S("handleMouseUp",E,e))};return window.addEventListener("mouseup",e),()=>window.removeEventListener("mouseup",e)},[S,E]);let x=a.useCallback(e=>{h&&null!=E&&e.stopPropagation()},[E,h]);return{handleClick:x,handleMouseDown:_,handleMouseEnter:v,handleMouseMove:I,handleMouseUp:T}}},154891:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}}),n("424973");var a=n("884691"),l=n("862337"),s=n("669491"),i=n("77078"),r=n("462274"),u=n("800762"),o=n("760679"),d=n("242260"),c=n("315841"),f=n("52477"),h=n("553930"),p=n("717482"),m=n("827520");let E=1e3/60;function C(e,t,n,C){let g=(0,i.useToken)(s.default.unsafe_rawColors.BRAND_500).hex(),S=(0,i.useToken)(s.default.unsafe_rawColors.BLACK_500).hex(),_=(0,i.useToken)(s.default.unsafe_rawColors.WHITE_500).hex(),I=a.useRef({}),T=a.useRef(new l.Interval),v=a.useCallback(t=>{let n=d.default.getDrawables(t);(0,f.clearCanvas)(e),!function(e){let{canvasRef:t,drawables:n,fallbackColor:a,linesDrawnAt:l,streamerId:s,channelId:i,outlineColorDark:r,outlineColorLight:d}=e;if(0===n.length)return;let f=t.current;if(null==f)return;let m=f.getContext("2d");if(null==m)return;let{width:E,height:C}=f.getBoundingClientRect(),g=[];n.forEach(e=>{let t=null!=u.default.getVoiceStateForChannel(i,e.userId);if(!t){g.push(e);return}!function(e){let{drawable:t,context:n,canvasWidth:a,canvasHeight:l,fallbackColor:s,outlineColorDark:i,outlineColorLight:r,linesDrawnAt:u,streamerId:o,deadDrawables:d}=e;switch(t.type){case c.DrawableType.LINE:return(0,p.default)({line:t,context:n,canvasWidth:a,canvasHeight:l,fallbackColor:s,outlineColorDark:i,outlineColorLight:r,linesDrawnAt:u,deadDrawables:d});case c.DrawableType.EMOJI_HOSE:return(0,h.default)({emojiHose:t,context:n,canvasWidth:a,canvasHeight:l,fallbackColor:s,outlineColorDark:i,outlineColorLight:r,streamerId:o,deadDrawables:d})}}({drawable:e,context:m,canvasWidth:E,canvasHeight:C,fallbackColor:a,outlineColorDark:r,outlineColorLight:d,linesDrawnAt:l,deadDrawables:g,streamerId:s})}),g.length>0&&(0,o.clearDrawables)(g,s)}({canvasRef:e,drawables:n,fallbackColor:g,linesDrawnAt:I,streamerId:t,outlineColorDark:S,outlineColorLight:_,channelId:C})},[e,C,g,S,_]);a.useEffect(()=>{let t=new ResizeObserver(()=>{let t=e.current;if(null==t)return;let{width:a,height:l}=t.getBoundingClientRect();t.width=a*window.devicePixelRatio,t.height=l*window.devicePixelRatio,v(n)});return null!=e.current&&t.observe(e.current),()=>t.disconnect()},[e,v,n]);let x=a.useCallback(()=>{let t=d.default.getDrawables(n),a=h.useEmojiHoseStore.getState().particles,l=t.length>0||Object.keys(a).length>0;l&&null==T.current._ref&&(null==T.current._ref?(v(n),T.current.start(E,()=>v(n))):!l&&null!=T.current._ref&&(T.current.stop(),(0,f.clearCanvas)(e)))},[e,v,n]);a.useEffect(()=>{let e=T.current;return d.default.addChangeListener(x),x(),(0,r.maybeFetchColors)(t.getAvatarURL(null,m.AVATAR_COLOR_AVATAR_SIZE)),()=>{d.default.removeChangeListener(x),e.stop()}})}},952221:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983"),l=n("884691"),s=n("627445"),i=n.n(s),r=n("65597"),u=n("550410"),o=n("697218"),d=n("780166"),c=n("291499"),f=n("154891"),h=n("522253");function p(e){let{focused:t,channelId:n,streamerId:s,stream:d}=e,p=l.useRef(null),m=(0,r.default)([o.default],()=>o.default.getCurrentUser());i(null!=m,"user cannot be null"),(0,f.default)(p,m,s,n);let{handleClick:E,handleMouseDown:C,handleMouseEnter:g,handleMouseMove:S,handleMouseUp:_}=(0,c.default)({user:m,channelId:n,streamerId:s,stream:d,focused:t,canvas:p.current});return(0,a.jsx)(u.default,{children:(0,a.jsx)("canvas",{ref:p,onClick:E,onMouseDown:C,onMouseEnter:g,onMouseMove:S,onMouseUp:_,className:h.sharedCanvas})})}function m(e){let{isSharedCanvasEnabled:t}=d.default.useExperiment({guildId:e.guildId,location:"d0de1c_1"},{autoTrackExposure:!0});return!t||e.hasScreenMessage?null:(0,a.jsx)(p,{...e})}},429829:function(e,t,n){"use strict";n.r(t),n.d(t,{CustomCallSoundUpsell:function(){return T}});var a=n("37983");n("884691");var l=n("446674"),s=n("271841"),i=n("605451"),r=n("577776"),u=n("77078"),o=n("79112"),d=n("635956"),c=n("632892"),f=n("697218"),h=n("945330"),p=n("216422"),m=n("719923"),E=n("49111"),C=n("994428"),g=n("646718"),S=n("397336"),_=n("782340"),I=n("948197");function T(e){var t;let{onClose:n,markAsDismissed:T}=e,v=(0,l.useStateFromStores)([f.default],()=>f.default.getCurrentUser());let x=(t=null==v?void 0:v.premiumType)===g.PremiumTypes.TIER_2?_.default.Messages.CALL_SOUNDS_UPSELL_DESCRIPTION_TIER_2:null==t?_.default.Messages.CALL_SOUNDS_UPSELL_DESCRIPTION_NON_SUB:_.default.Messages.CALL_SOUNDS_UPSELL_DESCRIPTION_NON_TIER_2,N=m.default.canUseCustomCallSounds(v);return(0,a.jsxs)(c.default,{isShown:!0,type:c.FeatureBorderTypes.PREMIUM,className:I.upsellOuter,backgroundClassName:I.upsellInner,children:[null!=T?(0,a.jsx)(u.Clickable,{className:I.close,onClick:()=>null==T?void 0:T(C.ContentDismissActionType.DISMISS),"aria-label":_.default.Messages.CLOSE,children:(0,a.jsx)(h.default,{className:I.closeIcon,width:16,height:16})}):null,(0,a.jsxs)("div",{className:I.upsellTitle,children:[(0,a.jsx)(p.default,{className:I.nitroWheel,width:18,height:18}),(0,a.jsx)(i.Heading,{variant:"heading-sm/bold",children:_.default.Messages.CALL_SOUNDS_UPSELL_TITLE_NON_SUB})]}),(0,a.jsx)(r.Text,{variant:"text-sm/normal",children:x}),N?(0,a.jsx)(s.Button,{onClick:function(){o.default.open(E.UserSettingsSections.VOICE,S.SOUNDBOARD_SUBSECTION),null==n||n(),null==T||T(C.ContentDismissActionType.PRIMARY)},children:_.default.Messages.CHECK_IT_OUT}):(0,a.jsx)(d.default,{buttonText:_.default.Messages.PREMIUM_UPSELL_GET_NITRO,subscriptionTier:g.PremiumSubscriptionSKUs.TIER_2,premiumModalAnalyticsLocation:{section:E.AnalyticsSections.SOUNDBOARD_SOUND_PICKER,object:E.AnalyticsObjects.BUTTON_CTA},color:s.Button.Colors.GREEN,onSubscribeModalClose:()=>null==T?void 0:T(C.ContentDismissActionType.PRIMARY)})]})}},844208:function(e,t,n){"use strict";n.r(t),n.d(t,{participantMemberInfo:function(){return s}});var a=n("158998"),l=n("782340");function s(e){var t,n,s;if((0,a.isNewUser)(e.user))return l.default.Messages.REQUEST_TO_SPEAK_MEMBER_INFO_NEW_TO_DISCORD;let i=null===(t=e.member)||void 0===t?void 0:t.joinedAt;if(null==i)return l.default.Messages.REQUEST_TO_SPEAK_MEMBER_INFO_NON_MEMBER;if(null!=e.member&&e.member.roles.length>0)return null!==(s=null===(n=e.role)||void 0===n?void 0:n.name)&&void 0!==s?s:l.default.Messages.REQUEST_TO_SPEAK_MEMBER_INFO_MEMBER_ROLES;let r=new Date().getTime()-Date.parse(i);return r<864e5?l.default.Messages.REQUEST_TO_SPEAK_MEMBER_INFO_NEW_MEMBER:l.default.Messages.REQUEST_TO_SPEAK_MEMBER_INFO_MEMBER}},111542:function(e,t,n){"use strict";n.r(t),n.d(t,{updateStageMusicMuted:function(){return l},updateStageMusicShouldPlay:function(){return s}});var a=n("913144");function l(e){a.default.dispatch({type:"STAGE_MUSIC_MUTE",muted:e})}function s(e){a.default.dispatch({type:"STAGE_MUSIC_PLAY",play:e})}},734019:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("271938"),l=n("488464"),s=n("998716"),i=n("325861"),r=n("834052");function u(e){if(!e.isGuildStageVoice())return!1;let t=r.default.isLive(e.id);if(!t)return!1;let n=a.default.getId(),u=i.default.isModerator(n,e.id);if(!u)return!1;let o=i.default.isSpeaker(n,e.id);if(!o)return!1;let d=l.default.getMutableParticipants(e.id),c=d.find(t=>t.user.id!==n&&i.default.isModerator(t.user.id,e.id));if(null==c)return!0;let f=l.default.getMutableParticipants(e.id,s.StageChannelParticipantNamedIndex.SPEAKER),h=f.find(t=>t.user.id!==n&&i.default.isModerator(t.user.id,e.id));return null==h}},519581:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("446674"),l=n("271938"),s=n("808422");function i(e){let t=(0,a.useStateFromStores)([l.default],()=>l.default.getId()),n=(0,s.default)(t,e);return n===s.RequestToSpeakStates.ON_STAGE}},413882:function(e,t,n){"use strict";n.r(t),n.d(t,{useRequestToSpeakPermission:function(){return o}}),n("222007");var a=n("884691"),l=n("446674"),s=n("42203"),i=n("991170"),r=n("244480"),u=n("49111");function o(e){let t=(0,l.useStateFromStores)([s.default],()=>s.default.getChannel(e),[e]),n=i.default.canEveryoneRole(u.Permissions.REQUEST_TO_SPEAK,t),[o,d]=a.useState(n);return a.useEffect(()=>{n!==o&&d(n)},[n]),[o,e=>{null!=t&&(d(e),(0,r.setEveryoneRolePermissionAllowed)(t,u.Permissions.REQUEST_TO_SPEAK,e))}]}},223378:function(e,t,n){"use strict";n.r(t),n.d(t,{useThrottleDurationForChannel:function(){return p},useStageChannelParticipantsListThrottled:function(){return m}}),n("424973"),n("222007");var a,l,s=n("884691"),i=n("917351"),r=n("446674"),u=n("560103"),o=n("191145"),d=n("334572"),c=n("488464"),f=n("567469"),h=n("998716");function p(e){let t=(0,f.useStageParticipantsCount)(e,h.StageChannelParticipantNamedIndex.AUDIENCE),[n,a]=s.useState(!1);return s.useEffect(()=>{t>100?a(!0):t<75&&a(!1)},[t]),n?5e3:0}function m(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=function(e,t,n){let a=(0,r.useStateFromStores)([c.default],()=>[e,c.default.getParticipantsVersion(e)],[e],d.isVersionEqual),l=(0,r.useStateFromStores)([o.default],()=>o.default.getSelectedParticipantId(e),[e]);return s.useMemo(()=>{let s=[],r=[],u=-1,o=[];if(n){let t=c.default.getMutableParticipants(e,h.StageChannelParticipantNamedIndex.SPEAKER);for(let e of t)if(e.type===h.StageChannelParticipantTypes.STREAM)e.id!==l&&o.push(e),u++;else break}let d=(e,t,n)=>{let a=n?e.filter((e,t)=>e.id!==l&&t>u):e,o=(0,i.chunk)(a,t);r.push(o),s.push(o.length)},f=null!=l?c.default.getParticipant(e,l):null;return(null==f?void 0:f.speaker)?d([f],1,!1):d([],1,!1),[h.StageChannelParticipantNamedIndex.SPEAKER,h.StageChannelParticipantNamedIndex.AUDIENCE].forEach(e=>{d(c.default.getMutableParticipants(a[0],e),t[e],e===h.StageChannelParticipantNamedIndex.SPEAKER)}),d(o,1,!1),[s,r]},[a,t,l,n,e])}(e,t,a),[f,p]=l,[m,E]=(0,u.useThrottledState)(l,n,[t[h.StageChannelParticipantNamedIndex.AUDIENCE]]),C=[f[a?3:0],f[1],m[2]],g=[p[a?3:0],p[1],E[2]];return[C,g]}(l=a||(a={}))[l.SELECTED=0]="SELECTED",l[l.SPEAKER=1]="SPEAKER",l[l.AUDIENCE=2]="AUDIENCE",l[l.MEDIA=3]="MEDIA"},759718:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n("222007"),n("424973");var a=n("446674"),l=n("334572"),s=n("488464"),i=n("998716");function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,[n]=(0,a.useStateFromStores)([s.default],()=>{let n=s.default.getMutableParticipants(e).filter(e=>e.type===i.StageChannelParticipantTypes.VOICE),a=[];for(let e of n){if(a.length>=t)break;null==a.find(t=>t.id===e.user.id)&&a.push(e.user)}return[{participants:n,usersInSummary:a},s.default.getParticipantsVersion(e)]},[e,t],l.isVersionEqual);return n}},709752:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}}),n("222007");var a=n("884691"),l=n("446674"),s=n("271938"),i=n("244480"),r=n("808422");function u(e){let t=(0,l.useStateFromStores)([s.default],()=>s.default.getId()),n=(0,r.default)(t,e.id),u=n===r.RequestToSpeakStates.REQUESTED_TO_SPEAK||n===r.RequestToSpeakStates.REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK,[o,d]=a.useState(u);return a.useEffect(()=>{d(u)},[u]),[o,function(){n===r.RequestToSpeakStates.REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK?(0,i.audienceAckRequestToSpeak)(e,!0):(0,i.toggleRequestToSpeak)(e,!o),d(!o)}]}},973137:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n("424973");var a=n("37983"),l=n("884691"),s=n("552700"),i=n("894233"),r=l.memo(function(e){let{channel:t,participants:n,maxTiles:l}=e;if(0===n.length)return null;let r=[];for(let e=0;e<l;e++)if(e<n.length){let l=n[e];r.push((0,a.jsx)(s.default,{channel:t,participant:l},l.id))}else r.push((0,a.jsx)(s.AudienceEmptyTile,{},e));return(0,a.jsx)("div",{className:i.participants,children:r})})},552700:function(e,t,n){"use strict";n.r(t),n.d(t,{AudienceEmptyTile:function(){return N},default:function(){return A}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("627445"),u=n.n(r),o=n("446674"),d=n("669491"),c=n("77078"),f=n("272030"),h=n("244201"),p=n("506885"),m=n("981601"),E=n("26989"),C=n("328275"),g=n("118503"),S=n("711486"),_=n("387111"),I=n("808422"),T=n("5668");let v=l.memo(function(e){let{guildId:t,channelId:n,user:l,isPremium:s,isBlocked:i}=e;return(0,a.jsxs)("div",{className:T.textContainer,children:[i?(0,a.jsx)(C.default,{className:T.blockedIcon,color:d.default.unsafe_rawColors.RED_400.css}):null,(0,a.jsx)(c.Text,{className:T.text,variant:"text-sm/normal",color:"header-primary",children:_.default.getName(t,n,l)}),s?(0,a.jsx)(g.default,{className:T.boost,color:d.default.unsafe_rawColors.GUILD_BOOSTING_PINK.css}):null]})}),x=l.memo(function(e){var t;let{participant:n,guildId:l,channel:s,isPremium:r}=e,{user:u,blocked:o,rtsState:d}=n,c=d===I.RequestToSpeakStates.REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK,f=d===I.RequestToSpeakStates.REQUESTED_TO_SPEAK||c;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:T.avatarContainer,children:[f&&(0,a.jsx)(S.default,{className:i(T.icon,{[T.invited]:c})}),(0,a.jsx)("img",{src:null!==(t=u.getAvatarURL(s.guild_id,56,!1))&&void 0!==t?t:void 0,alt:u.username,"aria-label":u.username,className:i(T.avatar,{[T.faded]:o})})]}),(0,a.jsx)(v,{guildId:l,channelId:s.id,user:u,isPremium:r,isBlocked:o})]})}),N=()=>(0,a.jsx)("div",{className:T.tileBaseContainer});var A=l.memo(function(e){let{participant:t,channel:s}=e,{user:r,blocked:d}=t,C=s.getGuildId(),g=(0,h.useAppContext)(),S=(0,o.useStateFromStores)([E.default],()=>{var e;return null!=C&&(null===(e=E.default.getMember(C,r.id))||void 0===e?void 0:e.premiumSince)!=null},[C,r.id]);u(null!=C,"Channel cannot be guildless");let _=l.useCallback(e=>{(0,f.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("834247").then(n.bind(n,"834247"));return t=>(0,a.jsx)(e,{...t,user:r,guildId:C,channel:s,showMediaItems:!0,showStageChannelItems:!0,showChatItems:!1})},{context:g})},[r,C,s,g]),I=l.useCallback(e=>(0,a.jsx)(m.default,{...e,guildId:C,channelId:s.id,userId:r.id}),[s.id,C,r.id]);return(0,a.jsx)(c.Popout,{preload:()=>(0,p.default)(r.id,r.getAvatarURL(s.guild_id,80),{guildId:s.guild_id,channelId:s.id}),renderPopout:I,position:"right",spacing:8,children:e=>(0,a.jsx)(c.Clickable,{className:i(T.tileContainer,{[T.singleIcon]:S||d,[T.doubleIcon]:S&&d}),onContextMenu:_,...e,children:(0,a.jsx)(x,{participant:t,guildId:C,channel:s,isPremium:S})})})})},584199:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("679243"),s=n("42887"),i=n("944832"),r=n("929018");function u(e){let{aspectRatio:t,blocked:n,channel:u,className:o,focused:d,children:c,inCall:f,inPopout:h,noBorder:p,onClick:m,onContextMenu:E,onDoubleClick:C,onVideoResize:g,paused:S,pulseSpeakingIndicator:_,participant:I,width:T,...v}=e,x=s.default.getVideoComponent();return(0,a.jsx)("div",{style:{width:T},className:r.spaceBetweenTiles,children:(0,a.jsxs)(i.default,{className:r.tileSizer,aspectRatio:t,children:[(0,a.jsx)(l.default,{blocked:n,channel:u,className:o,focused:d,inCall:f,inPopout:h,noBorder:p,onClick:m,onContextMenu:E,onDoubleClick:C,onVideoResize:g,participant:I,paused:S,pulseSpeakingIndicator:_,videoComponent:x,width:T,...v}),c]})})}},119184:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("782340"),r=n("53061"),u=n("284434"),o=n("315956");function d(e){let{className:t,children:n}=e;return(0,a.jsxs)("div",{className:s(r.container,t),children:[(0,a.jsx)("img",{alt:i.default.Messages.MEMBER_VERIFICATION_VERIFICATION_ICON,src:o,className:s(r.sparkleIcon,r.sparkleBottom)}),n,(0,a.jsx)("img",{alt:i.default.Messages.MEMBER_VERIFICATION_VERIFICATION_ICON,src:u,className:s(r.sparkleIcon,r.sparkleTop)})]})}},116386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("669491"),s=n("77078"),i=n("625687"),r=n("782340"),u=n("32352"),o=()=>(0,a.jsx)(s.Tooltip,{text:r.default.Messages.STAGE_MODERATOR_TOOLTIP,children:e=>(0,a.jsx)("div",{...e,className:u.container,children:(0,a.jsx)(i.default,{color:l.default.unsafe_rawColors.WHITE_500.css})})})},876534:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("228427"),s=n("119184"),i=n("984742");function r(e){let{className:t}=e;return(0,a.jsx)(s.default,{className:t,children:(0,a.jsx)("div",{className:i.background,children:(0,a.jsx)(l.default,{className:i.foreground,width:32,height:32})})})}},506466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("748820"),u=n("337062"),o=n("77078"),d=n("981913"),c=n("782340"),f=n("281848");function h(e){let{width:t=24,height:n=24,isBadged:s=!1}=e,[i]=l.useState(()=>(0,r.v4)()),d=(0,o.useRedesignIconContext)().enabled;return(0,a.jsxs)("svg",{width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("mask",{id:i,children:[(0,a.jsx)("rect",{fill:"white",width:"100%",height:"100%"}),s&&(0,a.jsx)("circle",{cx:"20",cy:"19",r:"10",fill:"black"})]})}),d?(0,a.jsx)("g",{mask:"url(#".concat(i,")"),children:(0,a.jsx)(u.HandRequestSpeakListIcon,{})}):(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M20.53 7.76998C20.455 7.60998 20.31 7.48998 20.135 7.44498C20.075 7.42832 20.0106 7.41165 19.9462 7.39498L19.85 7.36998C19.305 7.22998 18.635 7.56498 18.35 8.11498L17.37 9.99998C17.085 10.55 16.725 10.51 16.57 9.90998L14.395 1.38498C14.24 0.779981 13.64 0.459981 13.05 0.664981C12.46 0.869981 12.095 1.52498 12.225 2.13498L13.495 7.95998C13.63 8.56998 13.575 9.11498 13.375 9.18498C13.175 9.25498 12.85 8.83498 12.65 8.24498L10.55 2.07498C10.35 1.48498 9.71004 1.17498 9.12004 1.37998C8.53004 1.58498 8.21504 2.22998 8.41004 2.81998L10.47 8.99998C10.665 9.58998 10.665 10.125 10.465 10.195C10.265 10.265 9.88504 9.86498 9.62504 9.29998L7.27504 4.29998C7.01004 3.73998 6.32004 3.44498 5.73004 3.64998C5.14504 3.85498 4.87504 4.47498 5.14004 5.03998L8.10004 11.045C8.36004 11.61 8.41004 12.125 8.21004 12.195C8.01004 12.265 7.53004 11.93 7.14004 11.445L5.10504 8.82498C4.71504 8.33998 4.04004 8.07498 3.59504 8.22998C3.15504 8.38498 3.04004 8.94498 3.34504 9.48998L5.84504 13.865C5.90004 14.02 7.35504 16.8 7.46004 16.915C8.50004 18.565 10.145 19.51 12.23 18.79L12.96 18.5372V15.84C12.96 14.2494 14.2494 12.96 15.84 12.96H18.3887C18.763 12.143 19.1735 11.2467 19.5492 10.4262L19.5592 10.4045L19.5647 10.3926L19.5648 10.3922L19.5702 10.3804L19.581 10.3569C19.9595 9.53048 20.3003 8.78624 20.53 8.28498C20.605 8.11498 20.605 7.92998 20.53 7.76998ZM11.81 20.51L12.96 20.0792V23.395H11.815L11.185 22.03C11.055 21.75 11.045 21.425 11.165 21.135C11.285 20.845 11.52 20.62 11.81 20.51ZM14.4 16.32C14.4 15.2596 15.2596 14.4 16.32 14.4H22.08C23.1404 14.4 24 15.2596 24 16.32V22.08C24 23.1404 23.1404 24 22.08 24H16.32C15.2596 24 14.4 23.1404 14.4 22.08V16.32ZM16.32 16.56H22.08V17.52H16.32V16.56ZM22.08 18.72H16.32V19.68H22.08V18.72ZM16.32 20.88H22.08V21.84H16.32V20.88Z",mask:"url(#".concat(i,")")})]})}function p(e){let{className:t,numRequestToSpeak:n}=e,l=n>0;return(0,a.jsxs)("div",{className:i(f.raisedHandIcon,t),children:[(0,a.jsx)(h,{isBadged:l}),l?(0,a.jsx)(o.Text,{className:f.raisedHandCount,variant:"text-xs/semibold",children:n>99?"99+":n}):null]})}function m(e){let{toggleRequestToSpeakSidebar:t,showRequestToSpeakSidebar:n,className:s,numRequestToSpeak:i,onClick:r,...u}=e,o=l.useCallback(()=>{null==r||r(),t()},[r,t]);return(0,a.jsx)(d.default,{onClick:o,label:n?c.default.Messages.REQUEST_TO_SPEAK_AREA_CLOSE:c.default.Messages.REQUEST_TO_SPEAK_AREA_OPEN,className:s,iconComponent:()=>(0,a.jsx)(p,{numRequestToSpeak:i,className:s}),...u})}},145635:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}}),n("222007");var a,l,s=n("37983"),i=n("884691"),r=n("414456"),u=n.n(r),o=n("627445"),d=n.n(o),c=n("446674"),f=n("77078"),h=n("272030"),p=n("308289"),m=n("750560"),E=n("506885"),C=n("981601"),g=n("26989"),S=n("957255"),_=n("824563"),I=n("945330"),T=n("277174"),v=n("711486"),x=n("664336"),N=n("244480"),A=n("567469"),M=n("844208"),R=n("808422"),j=n("413882"),L=n("876534"),O=n("843455"),y=n("782340"),P=n("455518");let b=i.memo(function(e){let{toggleRequestToSpeakSidebar:t,chatOpen:n}=e,a=(0,s.jsx)(x.default.Icon,{icon:I.default,tooltip:y.default.Messages.CLOSE,onClick:t});return(0,s.jsxs)(x.default,{toolbar:a,className:u(P.headerContainer,{[P.chatOpen]:n}),children:[(0,s.jsx)(x.default.Icon,{icon:v.default,disabled:!0,"aria-label":y.default.Messages.REQUEST_TO_SPEAK_AREA_TITLE}),(0,s.jsx)(x.default.Title,{children:y.default.Messages.REQUEST_TO_SPEAK_AREA_TITLE})]})}),D=i.memo(function(e){let{channel:t,participant:a,tempDisableOnInit:l=!1}=e,[r,o]=i.useState(l);i.useEffect(()=>{if(!r)return;let e=setTimeout(()=>o(!1),1e3);return()=>clearTimeout(e)},[]);let S=t.getGuildId();d(null!=S,"Channel cannot be guildless");let{isMobile:v,status:x}=(0,c.useStateFromStoresObject)([_.default],()=>({isMobile:_.default.isMobileOnline(a.user.id),status:_.default.getStatus(a.user.id,S)})),A=(0,c.useStateFromStores)([g.default],()=>g.default.getMember(S,a.user.id)),j=i.useMemo(()=>({[S]:[a.user.id]}),[S,a.user.id]);(0,m.useSubscribeGuildMembers)(j);let L=a.rtsState===R.RequestToSpeakStates.REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK;function O(){(0,N.setUserSuppress)(t,a.user.id,!1)}function b(){(0,N.setUserSuppress)(t,a.user.id,!0)}let D=e=>{(0,h.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("834247").then(n.bind(n,"834247"));return n=>(0,s.jsx)(e,{...n,user:a.user,guildId:S,channel:t,showMediaItems:!0})})};return(0,s.jsxs)("div",{className:P.participantRowContainer,children:[(0,s.jsx)(f.Popout,{preload:()=>(0,E.default)(a.user.id,a.user.getAvatarURL(t.guild_id,80),{guildId:t.guild_id,channelId:t.id}),renderPopout:e=>(0,s.jsx)(C.default,{...e,userId:a.user.id,guildId:S,channelId:t.id}),position:"left",spacing:16,children:e=>{var t;return(0,s.jsxs)(f.Clickable,{className:P.participantMemberContainer,onContextMenu:D,...e,children:[(0,s.jsx)(p.default,{size:f.AvatarSizes.SIZE_40,className:P.participantAvatar,user:a.user,isMobile:v,status:x}),(0,s.jsxs)("div",{className:P.participantTextContainer,children:[(0,s.jsx)(f.NameWithRole,{name:a.userNick,color:null!==(t=null==A?void 0:A.colorString)&&void 0!==t?t:void 0,className:P.participantName}),(0,s.jsx)(f.Text,{variant:"text-xs/normal",color:"header-secondary",children:(0,M.participantMemberInfo)(a)})]})]})}}),(0,s.jsx)(f.Tooltip,{text:L?y.default.Messages.REQUEST_TO_SPEAK_INVITATION_SEND:y.default.Messages.REQUEST_TO_SPEAK_ACCEPT,children:e=>(0,s.jsx)(f.Button,{...e,innerClassName:P.buttonContainer,look:f.Button.Looks.BLANK,size:f.Button.Sizes.NONE,onClick:O,disabled:L||r,children:(0,s.jsx)(T.default,{width:16,height:16})})}),(0,s.jsx)(f.Tooltip,{text:y.default.Messages.REQUEST_TO_SPEAK_DECLINE,children:e=>(0,s.jsx)(f.Button,{...e,innerClassName:u(P.buttonContainer,P.buttonMargin),look:f.Button.Looks.BLANK,size:f.Button.Sizes.NONE,onClick:b,children:(0,s.jsx)(I.default,{width:16,height:16})})})]})}),U=i.memo(function(e){let{channel:t}=e,[n,a]=(0,j.useRequestToSpeakPermission)(t.id);return(0,s.jsx)(f.FormSwitch,{className:P.toggle,onChange:a,value:n,children:y.default.Messages.MODERATOR_ALLOW_EVERYONE_RAISE_HAND})}),w=i.memo(function(){return(0,s.jsxs)("div",{className:P.emptyStateContainer,children:[(0,s.jsx)(L.default,{}),(0,s.jsx)(f.Text,{className:P.emptyStateTitle,variant:"text-lg/semibold",color:"header-primary",children:y.default.Messages.REQUEST_TO_SPEAK_EMPTY_LIST_TITLE}),(0,s.jsx)(f.Text,{className:P.emptyStateBody,variant:"text-sm/normal",color:"header-secondary",children:y.default.Messages.REQUEST_TO_SPEAK_EMPTY_LIST_BODY})]})});function F(e){let{channel:t,toggleRequestToSpeakSidebar:n,chatOpen:a}=e,l=(0,A.useSortedRequestToSpeakParticipants)(t.id),i=(0,c.useStateFromStores)([S.default],()=>S.default.can(O.Permissions.MANAGE_CHANNELS,t)||S.default.can(O.Permissions.MANAGE_ROLES,t)),r=[i?1:0,Math.max(1,l.length)];return(0,s.jsxs)("div",{className:u(P.container,{[P.chatOpen]:a}),children:[(0,s.jsx)(b,{toggleRequestToSpeakSidebar:n,chatOpen:a}),(0,s.jsx)(f.List,{className:P.contentContainer,sections:r,sectionHeight:function(e){if(1===e)return 40;return 0},rowHeight:function(e){switch(e){case 0:return 66;case 1:if(0===l.length)return 178;return 48}return 0},renderRow:function(e){let{section:n,row:a}=e;switch(n){case 0:return(0,s.jsx)(U,{channel:t},"rts-toggle");case 1:{if(0===l.length)return(0,s.jsx)(w,{},"participants-empty");let e=l[a];return(0,s.jsx)(D,{channel:t,participant:e,tempDisableOnInit:!0},e.id)}}return null},renderSection:function(e){let{section:t}=e;if(1===t)return(0,s.jsx)(f.Text,{className:P.listTitle,variant:"text-xs/bold",color:"header-secondary",children:l.length>0?y.default.Messages.REQUEST_TO_SPEAK_LIST_TITLE.format({numHands:l.length}):y.default.Messages.REQUEST_TO_SPEAK_AREA_TITLE},"participants-section");return null}})]})}(l=a||(a={}))[l.TOGGLE_REQUEST_TO_SPEAK=0]="TOGGLE_REQUEST_TO_SPEAK",l[l.PARTICIPANTS=1]="PARTICIPANTS"},58343:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return es}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n("446674"),o=n("95410"),d=n("77078"),c=n("913144"),f=n("731898"),h=n("244201"),p=n("191145"),m=n("161306"),E=n("412090"),C=n("452027"),g=n("383294"),S=n("292687"),_=n("393414"),I=n("486030"),T=n("115531"),v=n("620592"),x=n("336971"),N=n("555038"),A=n("634472"),M=n("271938"),R=n("712234"),j=n("305961"),L=n("957255"),O=n("18494"),y=n("773336"),P=n("439932"),b=n("50885"),D=n("716214"),U=n("567469"),w=n("998716"),F=n("834052"),k=n("534471"),V=n("145635"),B=n("277354"),H=n("100082"),G=n("598050"),W=n("977026"),Y=n("679703"),z=n("276086"),K=n("96151"),Z=n("49111"),X=n("99795"),J=n("782340"),q=n("580105");let Q="HasBeenInStageChannel",$=(e,t)=>()=>{let n=e.getGuildId();null!=n&&null!=t&&(0,_.transitionToGuild)(n,t),g.openChannelCallPopout(e)},ee=()=>{c.default.wait(()=>g.close(Z.PopoutWindowKeys.CHANNEL_CALL_POPOUT))},et=e=>{g.setAlwaysOnTop(Z.PopoutWindowKeys.CHANNEL_CALL_POPOUT,e)};function en(e){let{channel:t,appContext:n,popoutOpen:s,popoutWindow:i,popoutWindowAlwaysOnTop:r,selectedParticipant:o}=e,d=t.getGuildId(),c=(0,u.useStateFromStores)([O.default],()=>O.default.getMostRecentSelectedTextChannelId(d),[d]),f=M.default.getId(),h=(0,u.useStateFromStores)([p.default],()=>p.default.isFullscreenInContext(n)),E=!h&&(!y.isPlatformEmbedded||y.isPlatformEmbedded&&b.default.supportsFeature(Z.NativeFeatures.POPOUT_WINDOWS)),C=null!=o&&o.type!==X.ParticipantTypes.ACTIVITY&&o.user.id!==f,g=l.useMemo(()=>{var e;return null!==(e=null==i?void 0:i.window)&&void 0!==e?e:window},[i]),S=(0,z.default)({channel:t,appContext:n,popoutOpen:s,popoutWindow:i,currentWindow:g}),_=n===Z.AppContext.POPOUT&&y.isPlatformEmbedded&&b.default.supportsFeature(Z.NativeFeatures.POPOUT_WINDOWS);return(0,a.jsxs)(a.Fragment,{children:[C?(0,a.jsx)(A.default,{context:(0,m.default)(o.type),userId:o.user.id,currentWindow:g,sliderClassName:q.volumeSlider}):null,_?(0,a.jsx)(N.default,{className:q.rightTrayIcon,popoutWindowAlwaysOnTop:r,onToggleStayOnTop:et}):null,E?(0,a.jsx)(x.default,{className:q.rightTrayIcon,popoutOpen:s,onOpenPopout:$(t,c),onClosePopout:ee}):null,S]})}function ea(e){let{channel:t}=e,n=(0,h.useAppContext)(),l=(0,u.useStateFromStores)([L.default],()=>L.default.can(Z.Permissions.CREATE_INSTANT_INVITE,t)),s=(0,u.useStateFromStores)([j.default],()=>j.default.getGuild(t.guild_id)),i=(0,u.useStateFromStores)([F.default],()=>F.default.getStageInstanceByChannel(t.id)),r=l||(null==i?void 0:i.invite_code)!=null;return null!=s&&r?(0,a.jsx)(I.default,{channel:t,appContext:n,className:q.leftTrayIcon,analyticsLocation:Z.AnalyticsPages.GUILD_CHANNEL}):null}function el(e){let t,{channel:n,toggleRequestToSpeakSidebar:s,showRequestToSpeakSidebar:o,popoutWindow:d,popoutWindowAlwaysOnTop:c,popoutOpen:f,chatOpen:m}=e,C=(0,h.useAppContext)(),g=(0,u.useStateFromStores)([O.default],()=>O.default.getVoiceChannelId()===n.id,[n.id]),S=(0,u.useStateFromStores)([L.default],()=>L.default.can(Z.Permissions.CONNECT,n)),_=(0,U.useStageParticipants)(n.id,w.StageChannelParticipantNamedIndex.SPEAKER),I=(0,u.useStateFromStores)([p.default],()=>p.default.getSelectedParticipant(n.id)),x=f&&C!==Z.AppContext.POPOUT,[N,A]=l.useState(0),{isOnStartStageScreen:M}=(0,k.default)();(0,k.useUpdateIsOnStartStageScreenEffect)(n);let j=(0,u.useStateFromStores)([R.default],()=>R.default.getToastsEnabled(n.id)),y=(0,K.default)(n),P=y?null!=I?"84px":"124px":null!=I?"0px":"48px";return t=M?(0,a.jsx)(Y.default,{channel:n,onContinueClick:()=>{(0,k.setIsOnStartStageScreen)(!1),!g&&(0,D.connectToStage)(n)}}):g?(0,a.jsx)(G.default,{channel:n,onScroll:e=>{let{scrollTop:t}=e.target;(0,r.debounce)(()=>A(t),1e3,{leading:!0})()}}):(0,a.jsx)(B.default,{participants:_,channel:n,hasConnectPermission:S}),(0,a.jsx)(v.default,{style:{height:"calc(100% - ".concat(P,")"),paddingTop:P},disableGradients:0===N&&v.DisableGradient.TOP,renderBottomLeft:()=>(0,a.jsx)(ea,{channel:n}),renderBottomCenter:()=>g?(0,a.jsx)(W.default,{channel:n,isOnStartStageScreen:M}):null,renderBottomRight:()=>g?(0,a.jsx)(en,{channel:n,appContext:C,popoutOpen:f,popoutWindow:d,popoutWindowAlwaysOnTop:c,selectedParticipant:I}):null,renderHeader:()=>(0,a.jsx)(H.default,{inPopout:C===Z.AppContext.POPOUT,toggleRequestToSpeakSidebar:s,showRequestToSpeakSidebar:o,channel:n}),renderChatToasts:()=>!j||m||x?null:(0,a.jsx)(E.default,{children:(0,a.jsx)(T.default,{className:i(q.chatToasts,{[q.rtsSidebarOpen]:o}),channelId:n.id})}),onActive:()=>{},onPreventIdle:()=>{},onAllowIdle:()=>{},onForceIdle:()=>{},screenMessage:x?{mainText:J.default.Messages.POPOUT_PLAYER_OPENED}:null,idle:!1,children:!x&&t})}function es(e){let{channel:t}=e,[s,r]=l.useState(!1),c=l.useCallback(()=>{r(!s)},[s,r]),{popoutWindow:m,popoutWindowAlwaysOnTop:g}=(0,u.useStateFromStoresObject)([S.default],()=>({popoutWindow:S.default.getWindow(Z.PopoutWindowKeys.CHANNEL_CALL_POPOUT),popoutWindowAlwaysOnTop:S.default.getIsAlwaysOnTop(Z.PopoutWindowKeys.CHANNEL_CALL_POPOUT)})),_=null!=m&&!m.closed,I=(0,h.useAppContext)(),T=(0,u.useStateFromStores)([p.default],()=>p.default.getChatOpen(t.id),[t.id]),v=(0,u.useStateFromStores)([j.default],()=>j.default.getGuild(t.guild_id),[t.guild_id]);l.useEffect(()=>{null==o.default.get(Q)&&((0,d.openModalLazy)(async()=>{let{default:e}=await n.el("108838").then(n.bind(n,"108838"));return t=>(0,a.jsx)(e,{...t})}),o.default.set(Q,Date.now()))},[]);let{width:x=0,ref:N}=(0,f.default)();return(0,a.jsxs)(E.ChannelCallChatLayerProvider,{children:[(0,a.jsxs)("div",{className:q.container,ref:N,children:[(0,a.jsx)("div",{className:i(q.callContainer,(0,P.getThemeClass)(Z.ThemeTypes.DARK),{[q.sidebarVisible]:s,[q.sidebarOrChatVisible]:s||T}),children:(0,a.jsx)(el,{channel:t,toggleRequestToSpeakSidebar:c,showRequestToSpeakSidebar:s,popoutWindow:m,popoutWindowAlwaysOnTop:g,popoutOpen:_,chatOpen:T})}),s?(0,a.jsx)(V.default,{channel:t,toggleRequestToSpeakSidebar:c,chatOpen:T}):null,(0,a.jsx)("div",{className:q.channelChatWrapper,children:T&&(!_||_&&I===Z.AppContext.POPOUT)&&(0,a.jsx)(C.default,{channel:t,guild:v,maxWidth:x-550})})]}),(0,a.jsx)(E.ChannelCallChatLayerContainer,{})]})}},277354:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var a=n("37983"),l=n("884691"),s=n("446674"),i=n("77078"),r=n("987317"),u=n("191145"),o=n("233322"),d=n("157186"),c=n("679243"),f=n("449008"),h=n("387111"),p=n("998716"),m=n("782340"),E=n("704414");let C=(e,t)=>h.default.getName(e.getGuildId(),e.id,t.user);var g=function(e){var t,n;let{participants:h,channel:g,hasConnectPermission:S}=e,_=(0,d.useShowMemberVerificationGate)(g.guild_id),I=l.useCallback(()=>{_?(0,o.openMemberVerificationModal)(g.guild_id,()=>r.default.selectVoiceChannel(g.id)):r.default.selectVoiceChannel(g.id)},[g.id,g.guild_id,_]),T=h.filter(e=>e.type===p.StageChannelParticipantTypes.VOICE),v=4===T.length?2:3,x=(0,s.useStateFromStoresArray)([u.default],()=>T.map(e=>u.default.getParticipant(g.id,e.id)).filter(f.isNotNullish),[g.id,T]);return(0,a.jsxs)("div",{className:E.container,children:[(0,a.jsx)("div",{className:E.tiles,style:{maxWidth:168*v},children:x.slice(0,5).map(e=>(0,a.jsx)(c.default,{participant:e,channel:g,className:E.tile,paused:!0,inCall:!0,noVideoRender:!0,inPopout:!1,width:48},e.id))}),(0,a.jsx)(i.Heading,{className:E.channelName,variant:"heading-xxl/semibold",children:g.name}),(0,a.jsx)("div",{className:E.participantsRow,children:(0,a.jsx)(i.Text,{color:"header-secondary",variant:"text-sm/normal",children:(t=g,0===(n=T).length?m.default.Messages.CURRENTLY_IN_STAGE_EMPTY:1===n.length?m.default.Messages.CURRENTLY_IN_STAGE_1.format({a:C(t,n[0])}):2===n.length?m.default.Messages.CURRENTLY_IN_STAGE_2.format({a:C(t,n[0]),b:C(t,n[1])}):n.length>2?m.default.Messages.CURRENTLY_IN_STAGE_2_N.format({a:C(t,n[0]),b:C(t,n[1]),n:n.length-2}):void 0)})}),(0,a.jsx)(i.Button,{disabled:!S,className:E.joinButton,color:S?i.Button.Colors.GREEN:i.Button.Colors.PRIMARY,onClick:I,size:i.Button.Sizes.MEDIUM,children:S?m.default.Messages.STAGE_CHANNEL_JOIN:m.default.Messages.CHANNEL_LOCKED_SHORT})]})}},100082:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("669491"),o=n("77078"),d=n("255397"),c=n("789394"),f=n("244201"),h=n("191145"),p=n("777274"),m=n("679653"),E=n("56947"),C=n("76813"),g=n("992207"),S=n("95039"),_=n("539938"),I=n("557809"),T=n("311197"),v=n("550410"),x=n("124824"),N=n("640553"),A=n("104815"),M=n("305961"),R=n("957255"),j=n("181114"),L=n("849467"),O=n("155207"),y=n("228427"),P=n("664336"),b=n("599110"),D=n("439932"),U=n("567469"),w=n("998716"),F=n("619395"),k=n("923510"),V=n("834052"),B=n("506466"),H=n("199811"),G=n("96151"),W=n("49111"),Y=n("646718"),z=n("782340"),K=n("76066");function Z(e){let{inPopout:t,channel:n,toggleRequestToSpeakSidebar:s,showRequestToSpeakSidebar:u}=e,c=(0,f.useAppContext)(),m=(0,r.useStateFromStores)([h.default],()=>h.default.getChatOpen(n.id)),S=(0,F.useCanModerateRequestToSpeak)(n.id),_=(0,U.useStageParticipantsCount)(n.id,w.StageChannelParticipantNamedIndex.REQUESTED_TO_SPEAK_ONLY),{preventIdle:I,allowIdle:M}=(0,v.usePreventIdle)("popup"),{showClipsHeaderEntrypoint:R}=E.ClipsExperiment.useExperiment({location:"StageChannelCallHeaderToolbar"},{autoTrackExposure:!1});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.default,{channelId:n.id},"clips-enabled-indicator"),(0,a.jsx)(o.Popout,{position:"bottom",animation:o.Popout.Animation.NONE,align:"right",renderPopout:e=>(0,a.jsx)(x.default,{children:(0,a.jsx)(H.default,{...e,channelId:n.id,appContext:c})}),autoInvert:!1,children:(e,t)=>{let{isShown:n}=t;return(0,l.createElement)(A.default,{...e,key:"more-options",isActive:n,className:K.button,iconClassName:K.buttonIcon})}},"more-options-popout"),R&&!t&&(0,a.jsx)(C.default,{className:K.button},"clips"),(0,a.jsx)(T.default,{onOpen:I,onClose:M,className:K.button},"recents"),!u&&S?(0,a.jsx)("div",{className:K.button,children:(0,a.jsx)(B.default,{toggleRequestToSpeakSidebar:()=>{m&&d.default.updateChatOpen(n.id,!1),s()},showRequestToSpeakSidebar:u,numRequestToSpeak:_})}):null,(0,a.jsx)(p.CallscopeChannelCallIssueMarker,{className:K.button}),!m&&(0,a.jsx)("div",{className:i(K.button,{[K.sidebarOpen]:u}),children:(0,a.jsx)(N.ChatButton,{channelId:n.id,showRequestToSpeakSidebar:u,toggleRequestToSpeakSidebar:s,iconClassName:K.buttonIcon})})]})}function X(e){var t,n;let{inPopout:s,channel:f,toggleRequestToSpeakSidebar:h,showRequestToSpeakSidebar:p}=e,E=(0,m.default)(f),C=(0,r.useStateFromStores)([V.default],()=>V.default.getStageInstanceByChannel(f.id)),g=(0,U.useActualStageSpeakerCount)(f.id),T=(0,U.useStageParticipantsCount)(f.id,w.StageChannelParticipantNamedIndex.AUDIENCE),v=(0,r.useStateFromStores)([M.default],()=>M.default.getGuild(f.guild_id),[f.guild_id]),x=null!==(t=null==v?void 0:v.maxStageVideoChannelUsers)&&void 0!==t?t:0,N=(null==v?void 0:v.isCommunity())?x<W.MAX_STAGE_VIDEO_USER_LIMIT_UNCAPPED:(null==v?void 0:v.premiumTier)!==W.BoostedGuildTiers.TIER_3&&x<=W.MAX_STAGE_VIDEO_USER_LIMIT_TIER2,A=(0,G.default)(f),F=(0,r.useStateFromStores)([R.default],()=>R.default.can(k.MODERATE_STAGE_CHANNEL_PERMISSIONS,f)),B=()=>{d.default.updateStageVideoLimitBoostUpsellDismissed(f.id,!0),b.default.track(W.AnalyticEvents.BOOSTING_UPSELL_CLICKED,{guild_id:f.guild_id,type:Y.PremiumUpsellTypes.VIDEO_STAGE_LIMIT,is_moderator:F,action:Y.BoostingUpsellAction.DISMISS})};l.useEffect(()=>{A&&b.default.track(W.AnalyticEvents.BOOSTING_UPSELL_VIEWED,{guild_id:f.guild_id,type:Y.PremiumUpsellTypes.VIDEO_STAGE_LIMIT,is_moderator:F,listener_count:g+T})},[A]);let{enabled:H,left:X}=c.ChannelEmojisExperiment.useExperiment({location:"f2c6da_2"},{autoTrackExposure:!1}),q=H&&(0,a.jsx)(I.ChannelEmoji,{channel:f}),Q=(0,a.jsxs)(P.default,{toolbar:(0,a.jsx)(Z,{inPopout:s,toggleRequestToSpeakSidebar:h,showRequestToSpeakSidebar:p,channel:f}),onDoubleClick:_.handleDoubleClick,transparent:!0,className:i((0,D.getThemeClass)(W.ThemeTypes.DARK),K.participants),children:[X&&q,(0,a.jsx)(P.default.Icon,{icon:y.default,disabled:!0,"aria-label":z.default.Messages.STAGE_CHANNEL,className:K.icon,color:null!=C?u.default.unsafe_rawColors.GREEN_360.css:void 0}),!X&&q,(0,a.jsx)(P.default.Title,{className:K.channelName,wrapperClassName:K.channelNameWrapper,children:null!==(n=null==C?void 0:C.topic)&&void 0!==n?n:E}),(0,a.jsx)(P.default.Divider,{className:K.divider}),(0,a.jsxs)(P.default.Title,{children:[(0,a.jsx)(L.default,{width:16,height:16}),(0,a.jsx)(o.Text,{variant:"text-xs/medium",color:"header-secondary",className:K.speakerCount,children:z.default.Messages.SPEAKING_COUNT.format({count:g})}),(0,a.jsx)(O.default,{width:16,height:16}),(0,a.jsx)(o.Text,{variant:"text-xs/medium",color:"header-secondary",className:K.speakerCount,children:z.default.Messages.LISTENING_COUNT.format({count:T})})]})]});return A?(0,a.jsxs)("div",{children:[Q,(0,a.jsxs)("div",{className:K.boostUpsell,children:[(0,a.jsx)(J,{}),(0,a.jsxs)("div",{className:K.text,children:[(0,a.jsx)(o.Text,{variant:"text-md/medium",color:"header-primary",children:N?z.default.Messages.STAGE_FULL_MODERATOR_TITLE:z.default.Messages.STAGE_FULL_MODERATOR_MAX_TITLE}),(0,a.jsx)(o.Text,{variant:"text-xs/medium",color:"text-normal",children:N?z.default.Messages.STAGE_FULL_MODERATOR_BODY:z.default.Messages.STAGE_FULL_MAX_BODY})]}),(0,a.jsx)("div",{className:K.buttons,children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Button,{className:K.notNowButton,onClick:B,look:o.Button.Looks.BLANK,size:o.Button.Sizes.SMALL,children:z.default.Messages.NOT_NOW}),(0,a.jsx)(j.default,{size:o.Button.Sizes.SMALL,onClick:()=>{(0,S.openGuildBoostingMarketingModal)({guildId:f.guild_id,location:{section:W.AnalyticsSections.STAGE_VIDEO_LIMIT}}),b.default.track(W.AnalyticEvents.BOOSTING_UPSELL_CLICKED,{guild_id:f.guild_id,type:Y.PremiumUpsellTypes.VIDEO_STAGE_LIMIT,is_moderator:F,action:Y.BoostingUpsellAction.BOOST})},className:K.boostButton,children:z.default.Messages.PREMIUM_GUILD_SUBSCRIPTION})]}):(0,a.jsx)(o.Button,{className:K.notNowButton,onClick:B,look:o.Button.Looks.BLANK,size:o.Button.Sizes.SMALL,children:z.default.Messages.DISMISS})})]})]}):Q}function J(){return(0,a.jsxs)("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_595_59940)",children:[(0,a.jsx)("path",{d:"M36 18C36 19.8 33.075 21.15 32.625 22.725C32.175 24.3 33.525 27.225 32.625 28.575C31.725 29.925 28.35 29.25 27 30.375C25.65 31.5 25.2 34.425 23.625 35.1C22.05 35.775 19.8 33.3 18 33.3C16.2 33.3 13.95 35.55 12.375 35.1C10.8 34.65 10.35 31.275 9 30.375C7.65 29.475 4.5 29.925 3.375 28.575C2.25 27.225 3.825 24.525 3.375 22.725C2.925 20.925 0 19.8 0 18C0 16.2 2.925 14.85 3.375 13.275C3.825 11.7 2.475 8.77497 3.375 7.42496C4.275 6.07497 7.65 6.74997 9 5.62497C10.35 4.49997 10.8 1.57497 12.375 0.899965C13.95 0.224965 16.2 2.69997 18 2.69997C19.8 2.69997 22.05 0.449965 23.625 0.899965C25.2 1.34997 25.65 4.49997 27 5.62497C28.35 6.74997 31.5 6.07497 32.625 7.42496C33.75 8.77497 32.175 11.475 32.625 13.275C33.075 15.075 36 16.2 36 18Z",fill:"url(#paint0_linear_595_59940)"}),(0,a.jsx)("path",{d:"M15.75 20.7001L18 22.9501L20.25 20.7001V15.3001L18 13.0501L15.75 15.3001V20.7001Z",fill:"white"}),(0,a.jsx)("path",{d:"M18 6.75L11.25 13.5V22.5L18 29.25L24.75 22.5V13.5L18 6.75ZM22.5 21.6L18 26.1L13.5 21.6V14.4L18 9.9L22.5 14.4V21.6Z",fill:"white"})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"paint0_linear_595_59940",x1:"2.4046e-06",y1:"35.2166",x2:"35.7182",y2:"-1.45185",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#3E70DD"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#B377F3"})]}),(0,a.jsx)("clipPath",{id:"clip0_595_59940",children:(0,a.jsx)("rect",{width:"36",height:"36",fill:"white"})})]})]})}},199811:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n("37983");n("884691");var l=n("627445"),s=n.n(l),i=n("446674"),r=n("77078"),u=n("244201"),o=n("191145"),d=n("769928"),c=n("321135"),f=n("976074"),h=n("639537"),p=n("619436"),m=n("625399"),E=n("47495"),C=n("42203"),g=n("957255"),S=n("751661"),_=n("923510"),I=n("834052"),T=n("99795"),v=n("782340");function x(e){let{channelId:t,closePopout:n,appContext:l,onSelect:x}=e,N=(0,i.useStateFromStores)([o.default],()=>o.default.getSelectedParticipant(t)),A=(null==N?void 0:N.type)===T.ParticipantTypes.STREAM?N.stream:null,M=(0,h.default)(t);return(0,a.jsxs)(r.Menu,{navId:"stage-channel-call-overflow-popout",onClose:n,"aria-label":v.default.Messages.CHANNEL_CALL_OVERFLOW_MENU_LABEL,onSelect:x,children:[function(e){let t=(0,i.useStateFromStores)([C.default],()=>C.default.getChannel(e),[e]),n=(0,i.useStateFromStores)([g.default],()=>g.default.can(_.MODERATE_STAGE_CHANNEL_PERMISSIONS,t)),l=(0,i.useStateFromStores)([I.default],()=>I.default.getStageInstanceByChannel(e),[e]),s=(0,u.useAppContext)(),o=()=>null!=t&&(0,S.openStageChannelSettings)(t,s);return(null==t?void 0:t.isGuildStageVoice())&&n?null!=l?(0,a.jsx)(r.MenuItem,{id:"edit-stage",label:v.default.Messages.EDIT_STAGE_SUBTITLE,action:o}):(0,a.jsx)(r.MenuItem,{id:"start-stage",label:v.default.Messages.STAGE_CHANNEL_START_TITLE,action:o}):null}(t),function(e){let t=(0,i.useStateFromStores)([C.default],()=>C.default.getChannel(e),[e]);s(null!=t,"useNotificationSettingsItem: channel cannot be undefined");let n=(0,E.useShouldUseNewNotificationSystem)("StageChannelCallOverflowMenu"),a=(0,m.default)(t),l=(0,p.default)(t);return n?a:l}(t),(0,c.default)(),(0,d.default)(t),M,(0,f.default)(A,l)]})}},598050:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}}),n("222007");var a,l,s=n("37983"),i=n("884691"),r=n("446674"),u=n("737960"),o=n("191145"),d=n("488464"),c=n("567469"),f=n("998716"),h=n("223378"),p=n("973137"),m=n("661917"),E=n("85427"),C=n("620103"),g=n("297446"),S=n("782340"),_=n("478107");let I={singleSpeaker:424,twoSpeakers:624,threeSpeakers:824};(l=a||(a={}))[l.SELECTED=0]="SELECTED",l[l.SPEAKER=1]="SPEAKER",l[l.AUDIENCE=2]="AUDIENCE";let T=(e,t)=>{let n=Math.floor(e/t-8),a=Math.floor(n/g.SPEAKER_TILE_ASPECT_RATIO);return{speakerTileWidth:n,speakerTileHeight:a}},v=(e,t)=>e<I.singleSpeaker?1:e<I.twoSpeakers?2:e<I.threeSpeakers?3:t?3:4,x=e=>Math.floor((e-32)/102);var N=(0,u.default)(e=>{var t,n;let{channel:a,width:l,onScroll:u}=e,{selectedParticipantId:I,largeStream:N,chatOpen:A}=(0,r.useStateFromStoresObject)([o.default],()=>({selectedParticipantId:o.default.getSelectedParticipantId(a.id),largeStream:o.default.getStageStreamSize(a.id),chatOpen:o.default.getChatOpen(a.id)}),[a.id]),M=(0,c.useActualStageSpeakerCount)(a.id),R=(0,c.useStageParticipantsCount)(a.id,f.StageChannelParticipantNamedIndex.AUDIENCE),j=(0,r.useStateFromStores)([d.default],()=>null!=I?d.default.getParticipant(a.id,I):null),L=(0,c.useStageParticipants)(a.id,f.StageChannelParticipantNamedIndex.SPEAKER),O=L.filter(e=>e.type===f.StageChannelParticipantTypes.VOICE),y=null!=L.find(e=>e.type===f.StageChannelParticipantTypes.STREAM),P=x(l),b=v(l,A),D={[f.StageChannelParticipantNamedIndex.SPEAKER]:b,[f.StageChannelParticipantNamedIndex.AUDIENCE]:P,[f.StageChannelParticipantNamedIndex.SELECTED]:1},U=(0,h.useThrottleDurationForChannel)(a.id),[w,F]=(0,h.useStageChannelParticipantsListThrottled)(a.id,D,U),k=[Math.max(null!==(t=w[0])&&void 0!==t?t:1,1),Math.max(null!==(n=w[1])&&void 0!==n?n:1,1),w[2]],{speakerTileWidth:V,speakerTileHeight:B}=T(l,b),H=N?l-32:Math.min(l-64,3*V+8),G=e=>e===w.length-1||0===R&&1===e,[W,Y]=i.useState(!1),[z,K]=i.useState(!1);return(0,s.jsx)(m.default,{sections:k,renderSection:e=>{let{section:t}=e;if(1===t)return 0===M?null:(0,s.jsx)(C.default,{participantCount:M,label:S.default.Messages.SPEAKER_LABEL,className:_.header,onClick:()=>Y(!W),collapsed:W,speakers:O,channel:a,isStreamLive:y},"speaker-header-".concat(t));if(2===t)return 0===R?null:(0,s.jsx)(C.default,{participantCount:R,label:S.default.Messages.AUDIENCE_LABEL,className:_.header,onClick:()=>K(!z),collapsed:z,channel:a},"audience-header-".concat(t));return null},sectionHeight:e=>48,renderRow:e=>{let{section:t,row:n}=e,l=F[t][n];if((null==l?void 0:l.length)==null)return null;switch(t){case 0:if(0===l.length||null==l[0])return null;return(0,s.jsx)("div",{className:_.focusedRow,children:(0,s.jsx)(g.default,{channel:a,participant:l[0],width:H})},"selected-participant");case 1:if(W)return null;return(0,s.jsx)(i.Fragment,{children:(0,s.jsx)(E.default,{tileWidth:V,channel:a,participants:l,selectedParticipant:j})},"speakers-".concat(t,"-").concat(n));case 2:if(z)return null;return(0,s.jsx)(p.default,{channel:a,participants:l,maxTiles:P},"audience-".concat(t,"-").concat(n));default:return null}},rowHeight:e=>{let t=null==F[e][0];return t?0:0===e?H/g.SPEAKER_TILE_ASPECT_RATIO+8:1===e?W?0:B:z?0:98},renderFooter:e=>{let{section:t}=e;return G(t)?(0,s.jsx)("div",{className:_.spacer},"bottom-spacer"):null},footerHeight:e=>1===e?8:0===e?12:G(e)?88:0,className:_.scroller,chunkSize:60,onScroll:u})})},977026:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eC}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("987317"),d=n("244201"),c=n("191145"),f=n("266392"),h=n("458685"),p=n("338677"),m=n("76393"),E=n("479788"),C=n("398604"),g=n("109526"),S=n("487984"),_=n("817963"),I=n("999180"),T=n("830210"),v=n("289180"),x=n("244390"),N=n("581389"),A=n("19065"),M=n("124824"),R=n("981913"),j=n("785344"),L=n("116439"),O=n("271938"),y=n("42887"),P=n("957255"),b=n("18494"),D=n("697218"),U=n("887657"),w=n("293137"),F=n("381546"),k=n("293499"),V=n("277174"),B=n("711486"),H=n("394640"),G=n("343571"),W=n("751661"),Y=n("244480"),z=n("716214"),K=n("619395"),Z=n("923510"),X=n("325861"),J=n("834052"),q=n("819450"),Q=n("111542"),$=n("924872"),ee=n("274438"),et=n("734019"),en=n("519581"),ea=n("58763"),el=n("709752"),es=n("49111"),ei=n("782340"),er=n("134095");function eu(e){let{channel:t,appContext:n}=e,a=(0,et.default)(t);if(a){(0,W.openEndStageModal)(t,n);return}o.default.disconnect()}function eo(e){var t,n;let{channel:l}=e,s=(0,en.default)(l.id),[i,u]=(0,el.default)(l),o=(0,r.useStateFromStores)([P.default],()=>P.default.can(es.Permissions.REQUEST_TO_SPEAK,l));if(s)return null;return(0,a.jsx)(R.CenterControlButton,{isActive:i,label:(t=i,n=o,t?ei.default.Messages.AUDIENCE_LOWER_HAND:n?ei.default.Messages.AUDIENCE_RAISE_HAND_CTA:ei.default.Messages.AUDIENCE_RAISE_HAND_NO_PERMISSION),iconComponent:()=>(0,a.jsx)(B.default,{className:i?er.raisedHandButtonIconActive:er.raisedHandButtonIcon}),onClick:u,className:er.buttonSpacing,disabled:!o&&!i})}let ed=l.memo(function(e){let{channel:t}=e,n=(0,r.useStateFromStores)([b.default],()=>b.default.getVoiceChannelId()===t.id,[t.id]);return(0,a.jsxs)("div",{className:er.container,children:[(0,a.jsx)(ep,{channelId:t.id}),n?(0,a.jsx)(eo,{channel:t}):null,(0,a.jsx)(ef,{channel:t})]})});function ec(e){let{onClick:t}=e;return(0,a.jsx)(u.Button,{size:u.Button.Sizes.MEDIUM,color:er.primaryButtonColor,className:i(er.buttonSpacing,er.buttonWithTextButton),onClick:t,children:(0,a.jsxs)("div",{className:er.buttonWithTextInnerContainer,children:[(0,a.jsx)(V.default,{height:24,width:24,className:er.buttonWithTextIcon}),(0,a.jsx)(u.Text,{color:"none",variant:"text-sm/medium",children:ei.default.Messages.MODERATOR_RAISE_OWN_HAND})]})})}function ef(e){let{channel:t,onSelect:n}=e,l=(0,d.useAppContext)(),{canManageGuildEvent:s}=(0,_.useManageResourcePermissions)(t),o=(0,r.useStateFromStores)([J.default],()=>J.default.getStageInstanceByChannel(t.id),[t.id]),c=(0,r.useStateFromStores)([C.default],()=>C.default.getGuildScheduledEvent(null==o?void 0:o.guild_scheduled_event_id)),f=(0,r.useStateFromStores)([b.default],()=>b.default.getVoiceChannelId()===t.id,[t.id]),{suppress:h}=(0,x.default)(t),p=O.default.getId(),[m]=(0,el.default)(t),E=X.default.isModerator(p,t.id),g=(0,K.useCanModerateRequestToSpeak)(t.id),S=s(c);return f?(E||S)&&null!=o?(0,a.jsx)(u.Popout,{renderPopout:e=>{let{closePopout:s}=e;return(0,a.jsx)(M.default,{children:(0,a.jsx)(u.Menu,{navId:"exit-options","aria-label":ei.default.Messages.SET_STATUS,onClose:s,onSelect:n,children:(0,a.jsx)(u.MenuItem,{id:"end-stage",color:"danger",action:()=>(0,W.openEndGuildEventConfirmationModal)(t,l),label:ei.default.Messages.END_GUILD_EVENT_FOR_EVERYONE,icon:F.default})})})},align:"center",position:"top",animation:u.Popout.Animation.FADE,children:(e,n)=>{let{onClick:s}=e,{isShown:i}=n;return(0,a.jsx)(R.CenterControlButton,{className:er.buttonSpacing,label:ei.default.Messages.EXIT_EVENT_STAGE_OPTIONS_LABEL,color:"red",iconComponent:()=>(0,a.jsx)(w.default,{height:24,width:24}),onClick:()=>eu({channel:t,appContext:l}),onPopoutClick:s,popoutOpen:i})}}):h&&!g||m?(0,a.jsx)(u.Button,{size:u.Button.Sizes.MEDIUM,color:u.Button.Colors.RED,className:i(er.buttonSpacing,er.buttonWithTextButton),onClick:()=>eu({channel:t,appContext:l}),children:(0,a.jsxs)("div",{className:er.buttonWithTextInnerContainer,children:[(0,a.jsx)(w.default,{height:24,width:24,className:er.buttonWithTextIcon}),(0,a.jsx)(u.Text,{color:"none",variant:"text-sm/medium",children:ei.default.Messages.AUDIENCE_DISCONNECT})]})}):(0,a.jsx)(R.CenterControlButton,{className:er.buttonSpacing,label:ei.default.Messages.EXIT_EVENT_STAGE_OPTIONS_LABEL,color:"red",iconComponent:()=>(0,a.jsx)(w.default,{height:24,width:24}),onClick:()=>eu({channel:t,appContext:l})}):(0,a.jsx)(u.Button,{size:u.Button.Sizes.MEDIUM,color:u.Button.Colors.GREEN,className:i(er.buttonSpacing,er.buttonWithTextButton),onClick:()=>{var e;return e=t,void(0,z.connectToStage)(e)},children:(0,a.jsxs)("div",{className:er.buttonWithTextInnerContainer,children:[(0,a.jsx)(U.default,{height:24,width:24,className:er.buttonWithTextIcon}),(0,a.jsx)(u.Text,{color:"none",variant:"text-sm/medium",children:ei.default.Messages.STAGE_CHANNEL_JOIN})]})})}function eh(e){let{onClick:t}=e;return(0,a.jsx)(u.Button,{size:u.Button.Sizes.MEDIUM,color:er.primaryButtonColor,className:i(er.buttonSpacing,er.buttonWithTextButton),onClick:t,children:(0,a.jsxs)("div",{className:er.buttonWithTextInnerContainer,children:[(0,a.jsx)(k.default,{height:24,width:24,className:er.buttonWithTextIcon}),(0,a.jsx)(u.Text,{color:"none",variant:"text-sm/medium",children:ei.default.Messages.MOVE_ME_TO_AUDIENCE})]})})}function ep(e){let{channelId:t}=e,n=(0,r.useStateFromStores)([ee.default],()=>ee.default.isMuted()),l=(0,$.useShowStageMusicMuteButton)(t),s=(0,r.useStateFromStores)([ee.default],()=>ee.default.shouldPlay());return l?(0,a.jsx)(R.CenterControlButton,{isActive:n,className:er.buttonSpacing,label:n?ei.default.Messages.STAGE_MUSIC_UNMUTE:ei.default.Messages.STAGE_MUSIC_MUTE,iconComponent:()=>n?(0,a.jsx)(G.default,{height:24,width:24}):(0,a.jsx)(H.default,{height:24,width:24}),onClick:()=>(0,Q.updateStageMusicMuted)(!n)}):(0,a.jsx)(R.CenterControlButton,{isActive:s,className:er.buttonSpacing,label:s?ei.default.Messages.STAGE_MUSIC_MUTE:ei.default.Messages.STAGE_MUSIC_UNMUTE,iconComponent:()=>s?(0,a.jsx)(H.default,{height:24,width:24}):(0,a.jsx)(G.default,{height:24,width:24}),onClick:()=>(0,Q.updateStageMusicShouldPlay)(!s)})}let em=l.memo(function(e){let{channel:t}=e,{suppress:n,selfMute:l,mute:s}=(0,x.default)(t),o=(0,K.useCanModerateRequestToSpeak)(t.id),d=(0,r.useStateFromStores)([m.default],()=>null!=m.default.getAwaitingRemoteSessionInfo()),{cameraUnavailable:C,enabled:g}=(0,I.default)(),S=(0,v.default)(t),{limit:_,reachedLimit:R}=(0,T.default)(t),O=(0,r.useStateFromStores)([D.default],()=>D.default.getCurrentUser()),P=(0,r.useStateFromStores)([y.default],()=>(0,E.default)(y.default)),U=(0,r.useStateFromStores)([b.default],()=>b.default.getVoiceChannelId()===t.id,[t.id]),w=(0,r.useStateFromStores)([c.default],()=>c.default.getStreamParticipants(t.id)[0],[t.id]),F=(0,q.useStageHasMedia)(t.id),k=_>0,V=R&&!F||null!=w&&w.user.id!==(null==O?void 0:O.id);if(null==O)return null;let B=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Popout,{renderPopout:e=>{let{closePopout:t}=e;return(0,a.jsx)(M.default,{children:(0,a.jsx)(h.default,{onClose:t})})},position:"top",align:"center",animation:u.Popout.Animation.FADE,children:(e,t)=>{let{onClick:n}=e,{isShown:l}=t;return(0,a.jsx)(L.default,{centerButton:!0,hasPermission:S,enabled:g,cameraUnavailable:C,onChange:N.handleToggleVideo,onCameraUnavailable:A.default,channelLimitReached:R,channelLimit:_,popoutOpen:l,onPopoutClick:n})}}),(0,a.jsx)(N.GoLiveButton,{channel:t,currentUser:O,exitFullScreen:()=>null,canGoLive:P,hasPermission:S,disabled:V})]});return(0,a.jsxs)("div",{className:er.container,children:[(0,a.jsx)(ep,{channelId:t.id}),U&&(0,a.jsx)(eo,{channel:t}),U&&!n?(0,a.jsxs)("div",{className:i(er.avControls,er.buttonSpacing),children:[k&&_>0&&B,(0,a.jsx)(u.Popout,{renderPopout:e=>{let{closePopout:t}=e;return(0,a.jsx)(M.default,{children:(0,a.jsx)(f.default,{onClose:t,renderInputDevices:!0,renderOutputDevices:!0})})},align:"center",position:"top",animation:u.Popout.Animation.FADE,children:(e,t)=>{let{onClick:i}=e,{isShown:r}=t;return(0,a.jsx)(j.default,{centerButton:!0,onPopoutClick:i,selfMute:l,serverMute:s,suppress:n,popoutOpen:r,onClick:()=>(0,p.default)(s,n),awaitingRemote:d})}})]}):null,U&&o&&n&&(0,a.jsx)(ec,{onClick:()=>(0,Y.audienceAckRequestToSpeak)(t,!1)}),U&&!n&&(0,a.jsx)(eh,{onClick:()=>(0,Y.moveSelfToAudience)(t)}),(0,a.jsx)(ef,{channel:t})]})});function eE(e){let{channel:t}=e;return(0,a.jsxs)("div",{className:er.container,children:[(0,a.jsx)(ep,{channelId:t.id}),(0,a.jsx)(ef,{channel:t})]})}var eC=l.memo(function(e){let{channel:t,isOnStartStageScreen:n}=e,l=(0,en.default)(t.id),s=(0,K.useCanModerateRequestToSpeak)(t.id),i=(0,r.useStateFromStores)([P.default],()=>P.default.can(Z.MODERATE_STAGE_CHANNEL_PERMISSIONS,t),[t]),u=(0,ea.default)(t.id),o=(0,r.useStateFromStores)([c.default],()=>null!=t?c.default.getSelectedParticipant(t.id):null),d=!u&&null==o;return n?(0,a.jsx)(eE,{channel:t}):l||s?(0,a.jsxs)("div",{className:er.containerColumn,children:[(0,a.jsxs)("div",{className:er.eventPrompts,children:[d?(0,a.jsx)(g.default,{channelId:null==t?void 0:t.id}):null,(0,a.jsx)("div",{className:er.separator}),d&&i?(0,a.jsx)(S.default,{highlight:!0,channel:t}):null,(0,a.jsx)("div",{className:er.separator})]}),(0,a.jsx)(em,{channel:t})]}):(0,a.jsx)(ed,{channel:t})})},661917:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a,l=n("405665"),s=n("77078"),i=n("657454"),r=n("517614");let u=(0,s.createListScroller)(i.auto,i.fade,r.customTheme,null!==(a=window.ResizeObserver)&&void 0!==a?a:l.ResizeObserver);var o=u},85427:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983"),l=n("884691"),s=n("297446"),i=n("602580"),r=l.memo(function(e){let{channel:t,participants:n,tileWidth:l,selectedParticipant:r}=e;return(0,a.jsx)("div",{className:i.rowContainer,children:n.map(e=>e.id===(null==r?void 0:r.id)?null:(0,a.jsx)(s.default,{channel:t,participant:e,width:l},e.id))})})},620103:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("77078"),u=n("837899"),o=n("849467"),d=n("155207"),c=n("980423"),f=n("215536"),h=n("154017"),p=l.memo(function(e){let{label:t,participantCount:n,onClick:l,className:s,collapsed:p,speakers:m,channel:E,isStreamLive:C}=e;return(0,a.jsxs)(r.Clickable,{onClick:l,className:i(h.container,s),children:[null==m?(0,a.jsx)(d.default,{width:20,height:20,className:h.micIcon}):(0,a.jsx)(o.default,{width:20,height:20,className:h.micIcon}),(0,a.jsxs)(r.Text,{color:"header-primary",variant:"text-md/semibold",className:h.text,children:[t," — ",n]}),p&&null!=E&&null!=m&&m.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.default,{channel:E,speakers:m}),C&&(0,a.jsx)(c.default,{})]}),(0,a.jsx)(u.default,{width:20,height:20,className:i(h.downIcon,{[h.upIcon]:p})})]})})},215536:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("77078"),u=n("272030"),o=n("899633"),d=n("244201"),c=n("506885"),f=n("981601"),h=n("533403"),p=n("315102"),m=n("324328");function E(e){let{channel:t,speaker:s,className:h}=e,E=(0,d.useAppContext)(),{reducedMotion:C}=l.useContext(r.AccessibilityPreferencesContext),g=(0,o.default)({userId:s.id}),S=null!=s.member?(0,p.getGuildMemberAvatarURL)(s.member):null,_=e=>{(0,u.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("834247").then(n.bind(n,"834247"));return n=>(0,a.jsx)(e,{...n,user:s.user,guildId:t.guild_id,channel:t,showMediaItems:!0,showStageChannelItems:!0,showChatItems:!1})},{context:E})};return(0,a.jsx)(r.Popout,{preload:()=>(0,c.default)(s.user.id,s.user.getAvatarURL(t.guild_id,80),{guildId:t.guild_id,channelId:t.id}),renderPopout:e=>(0,a.jsx)(f.default,{...e,guildId:t.guild_id,channelId:t.id,userId:s.id}),position:"right",spacing:8,children:e=>(0,a.jsx)(r.Tooltip,{text:s.userNick,position:"bottom",children:n=>(0,a.jsx)(r.Clickable,{...n,...e,onClick:t=>{t.stopPropagation(),e.onClick(t)},onContextMenu:_,children:(0,a.jsx)(r.Avatar,{src:null!=S?S:s.user.getAvatarURL(t.guild_id,24),size:r.AvatarSizes.SIZE_24,className:i(m.avatar,h),"aria-label":s.userNick,isSpeaking:g&&!C.enabled})})})})}function C(e){let{speakers:t,channel:n}=e;return(0,a.jsx)(h.default,{className:m.summary,guildId:n.guild_id,users:t,max:10,renderUser:(e,t,l)=>(0,a.jsx)(E,{channel:n,speaker:e,className:t},l),renderMoreUsers:(e,t,n)=>(0,a.jsx)("div",{className:i(m.speakers,t),children:e},n)})}},297446:function(e,t,n){"use strict";n.r(t),n.d(t,{SPEAKER_TILE_ASPECT_RATIO:function(){return L},default:function(){return P}});var a=n("37983"),l=n("884691"),s=n("627445"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("255397"),d=n("272030"),c=n("990766"),f=n("244201"),h=n("191145"),p=n("76393"),m=n("374014"),E=n("223913"),C=n("506885"),g=n("981601"),S=n("373469"),_=n("305961"),I=n("957255"),T=n("800762"),v=n("512264"),x=n("325861"),N=n("584199"),A=n("116386"),M=n("49111"),R=n("99795"),j=n("649381");let L=16/9,O=e=>{let{stageParticipant:t,rtcParticipant:n,channel:s,guildId:i,user:r,width:o,isModerator:d,onContextMenu:c,inPopout:f}=e,{reducedMotion:h}=l.useContext(u.AccessibilityPreferencesContext),{blocked:p,id:m}=t;return(0,a.jsx)(u.Popout,{preload:null==n?void 0:()=>(0,C.default)(n.user.id,n.user.getAvatarURL(s.guild_id,80),{guildId:s.guild_id,channelId:s.id}),renderPopout:e=>(0,a.jsx)(g.default,{...e,guildId:i,channelId:s.id,userId:r.id}),position:"right",spacing:8,children:e=>(0,a.jsx)(u.Clickable,{onContextMenu:e=>c(n,e),...e,children:(0,a.jsx)(N.default,{participant:n,aspectRatio:L,blocked:p,channel:s,className:j.tile,inCall:!0,inPopout:f,paused:!1,pulseSpeakingIndicator:!h.enabled,width:o,children:d&&(0,a.jsx)(A.default,{})},m)})})},y=e=>{let{stageParticipant:t,rtcParticipant:n,channel:s,width:i,isModerator:d,onContextMenu:f,inPopout:C}=e,{reducedMotion:g}=l.useContext(u.AccessibilityPreferencesContext),{id:x,blocked:O}=t,y=(0,r.useStateFromStoresArray)([S.default],()=>S.default.getAllActiveStreams(),[]),{selectedParticipant:P,largeStream:b}=(0,r.useStateFromStoresObject)([h.default],()=>({selectedParticipant:null!=s?h.default.getSelectedParticipant(s.id):null,largeStream:null!=s&&h.default.getStageStreamSize(s.id)})),D=l.useCallback((e,t)=>{if(e.type===R.ParticipantTypes.STREAM){let n=y.filter(t=>(0,m.encodeStreamKey)(t)===e.id&&t.state!==M.ApplicationStreamStates.ENDED);if(0===n.length){if(!(0,E.canWatchStream)(s,T.default,_.default,I.default,p.default)[0])return;(0,c.watchStream)((0,m.decodeStreamKey)(e.id),{forceMultiple:t.shiftKey})}}(null==P?void 0:P.id)===e.id?b?(o.default.selectParticipant(s.id,null),o.default.updateStageStreamSize(s.id,!1)):o.default.updateStageStreamSize(s.id,!0):(o.default.updateStageStreamSize(s.id,!1),o.default.selectParticipant(s.id,e.id))},[y,s,P,b]);return(0,a.jsx)(N.default,{participant:n,aspectRatio:L,fit:n.type===R.ParticipantTypes.USER?v.VideoStreamFit.COVER:void 0,blocked:O,channel:s,className:j.tile,inCall:!0,inPopout:C,onClick:D,onContextMenu:f,paused:!1,pulseSpeakingIndicator:!g.enabled,width:i,children:d&&n.type===R.ParticipantTypes.USER&&(0,a.jsx)(A.default,{})},x)};var P=l.memo(function(e){var t;let{participant:l,channel:s,width:u}=e,o=(0,f.useAppContext)(),c=s.getGuildId();i(null!=c,"Channel cannot be guildless");let{user:p}=l,m=(0,r.useStateFromStores)([h.default],()=>h.default.getParticipant(s.id,l.id),[s.id,l.id]),E=(0,r.useStateFromStores)([x.default],()=>x.default.isModerator(p.id,s.id),[s.id,p.id]);if(null==m||m.type===R.ParticipantTypes.ACTIVITY)return null;let C=(e,t)=>{switch(e.type){case R.ParticipantTypes.HIDDEN_STREAM:case R.ParticipantTypes.STREAM:(0,d.openContextMenuLazy)(t,async()=>{let{default:t}=await n.el("172844").then(n.bind(n,"172844"));return n=>(0,a.jsx)(t,{...n,stream:e.stream,appContext:o,exitFullscreen:()=>{}})},{context:o});return;case R.ParticipantTypes.USER:default:(0,d.openContextMenuLazy)(t,async()=>{let{default:e}=await n.el("834247").then(n.bind(n,"834247"));return t=>(0,a.jsx)(e,{...t,user:p,guildId:c,channel:s,showMediaItems:!0,showStageChannelItems:!0,showChatItems:!1})},{context:o})}},g=m.type===R.ParticipantTypes.USER&&!(null===(t=m.voiceState)||void 0===t?void 0:t.selfVideo);return(0,a.jsx)(a.Fragment,{children:g?(0,a.jsx)(O,{stageParticipant:l,rtcParticipant:m,channel:s,guildId:c,user:p,width:u,isModerator:E,onContextMenu:C,inPopout:o===M.AppContext.POPOUT}):(0,a.jsx)(y,{stageParticipant:l,rtcParticipant:m,channel:s,guildId:c,user:p,width:u,isModerator:E,onContextMenu:C,inPopout:o===M.AppContext.POPOUT})})})},679703:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var a=n("37983");n("884691");var l=n("446674"),s=n("669491"),i=n("77078"),r=n("888237"),u=n("18517"),o=n("109526"),d=n("487984"),c=n("817963"),f=n("957255"),h=n("228427"),p=n("811305"),m=n("923510"),E=n("759718"),C=n("58763"),g=n("119184"),S=n("782340"),_=n("563040");function I(e){let{onClick:t}=e;return(0,a.jsx)(r.default,{iconContainerClassName:_.continueIconContainer,icon:(0,a.jsx)(h.default,{className:_.continueIcon,height:20,width:20}),color:s.default.unsafe_rawColors.PRIMARY_700.css,title:S.default.Messages.STAGE_CONTINUE_PROMPT_TITLE,description:S.default.Messages.STAGE_CONTINUE_PROMPT_SUBTITLE,onClick:t})}function T(e){let{channel:t}=e,{participants:n,usersInSummary:l}=(0,E.default)(t.id);return(0,a.jsxs)("div",{className:_.audienceSummary,children:[(0,a.jsx)(p.default,{className:_.summaryItem,guildId:t.guild_id,users:l,size:p.Sizes.SIZE_16}),(0,a.jsx)(i.Text,{variant:"text-sm/normal",color:"header-secondary",children:function(e){if(0===e.length)return"";if(1===e.length)return S.default.Messages.STAGE_AUDIENCE_WAITING_ONE.format({first:e[0].userNick});if(2===e.length)return S.default.Messages.STAGE_AUDIENCE_WAITING_TWO.format({first:e[0].userNick,second:e[1].userNick});let t=e.length-2;return S.default.Messages.STAGE_AUDIENCE_WAITING_MANY.format({first:e[0].userNick,second:e[1].userNick,numOthers:t})}(n)})]})}function v(e){let{channel:t,onContinueClick:n}=e,s=(0,l.useStateFromStores)([f.default],()=>f.default.can(m.MODERATE_STAGE_CHANNEL_PERMISSIONS,t),[t]),r=t.guild_id,{canCreateGuildEvent:p}=(0,c.useManageResourcePermissions)(t),v=(0,C.default)(t.id),{usersInSummary:x}=(0,E.default)(t.id);return(0,a.jsxs)("div",{children:[(0,a.jsx)(g.default,{children:(0,a.jsx)("div",{className:_.iconBackground,children:(0,a.jsx)(h.default,{width:40,height:40,className:_.icon})})}),(0,a.jsxs)("div",{className:_.headerContainer,children:[(0,a.jsx)(i.Heading,{className:_.title,variant:"heading-xl/semibold",children:S.default.Messages.STAGE_START_PROMPT_TITLE_MODERATOR}),(0,a.jsx)(i.Text,{className:_.subtitle,variant:"text-sm/normal",children:S.default.Messages.STAGE_START_PROMPT_SUBTITLE})]}),v?null:(0,a.jsx)(o.default,{channelId:t.id}),s?(0,a.jsx)(d.default,{className:_.eventPrompt,channel:t}):null,p?(0,a.jsx)(u.default,{className:_.eventPrompt,guildId:r}):null,(s||x.length>0)&&(0,a.jsx)("hr",{className:_.separator}),s?(0,a.jsx)(I,{onClick:n}):null,(0,a.jsx)(T,{channel:t})]})}},276086:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n("37983"),l=n("884691"),s=n("446674"),i=n("913144"),r=n("255397"),u=n("716241"),o=n("191145"),d=n("383294"),c=n("95032"),f=n("18494"),h=n("599110"),p=n("659500"),m=n("773336"),E=n("563680"),C=n("49111"),g=n("580105");let S=()=>{i.default.wait(()=>d.close(C.PopoutWindowKeys.CHANNEL_CALL_POPOUT))};function _(e){let{channel:t,appContext:n,popoutOpen:i,popoutWindow:d,currentWindow:_}=e,I=n===C.AppContext.POPOUT,T=l.useRef(null),{currentLayout:v,mode:x}=(0,s.useStateFromStoresObject)([o.default],()=>{let e=o.default.getMode(t.id),a=n===C.AppContext.POPOUT;a&&(e=C.ChannelModes.VIDEO);let l=e===C.ChannelModes.VIDEO?o.default.getLayout(t.id,n):C.ChannelLayouts.MINIMUM;return a&&l!==C.ChannelLayouts.FULL_SCREEN&&(l=C.ChannelLayouts.NO_CHAT),{currentLayout:l,mode:e}},[t,n]),N=(0,s.useStateFromStores)([f.default],()=>f.default.getVoiceChannelId()===t.id,[t.id]);l.useEffect(()=>{T.current=x});let A=l.useRef(v),{currentDocument:M,rootNode:R}=l.useMemo(()=>{let e=null!=d&&I?d.document:document,t=_.document.getElementById("app-mount");return{currentWindow:_,currentDocument:e,rootNode:t}},[d,I,_]),j=i&&!I,L=x===C.ChannelModes.VIDEO&&N&&!j,O=l.useCallback((e,a)=>{a!==e&&(r.default.updateLayout(t.id,a,n),a===C.ChannelLayouts.FULL_SCREEN&&t.isPrivate()&&p.ComponentDispatch.dispatch(C.ComponentActions.TEXTAREA_BLUR))},[n,t]),y=l.useCallback(e=>{if(null!=R)e===C.ChannelLayouts.FULL_SCREEN&&(O(e,A.current),(0,E.exitFullScreen)(e=>{A.current=e},M))},[M,O,R]),P=l.useCallback(e=>()=>{null!=R&&(e!==C.ChannelLayouts.FULL_SCREEN?(A.current=e,O(e,C.ChannelLayouts.FULL_SCREEN),(0,E.requestFullScreen)(R)):y(e))},[O,y,R]);return(l.useEffect(()=>{let e=()=>{null!=R&&!(0,E.isFullScreen)(R,M)&&v===C.ChannelLayouts.FULL_SCREEN&&P(v)()};return M.addEventListener(E.FULLSCREEN_CHANGE_EVENT,e),()=>{M.removeEventListener(E.FULLSCREEN_CHANGE_EVENT,e)}},[M,v,P,R]),l.useEffect(()=>(h.default.track(C.AnalyticEvents.VIDEO_LAYOUT_TOGGLED,{video_layout:I?"popout":v,...(0,u.collectVoiceAnalyticsMetadata)(t.id)}),()=>{!(I&&(0,m.isMac)())&&y(v)}),[v,I]),l.useEffect(()=>{null!=R&&T.current===C.ChannelModes.VIDEO&&x===C.ChannelModes.VOICE&&(0,E.exitFullScreen)(R,M)},[M,x,T,R]),l.useEffect(()=>{!N&&I&&S()},[N,I]),L)?(0,a.jsx)(c.default,{themeable:!1,node:R,guestWindow:d,className:g.rightTrayIcon,onClick:P(v)}):null}},96151:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("446674"),l=n("191145"),s=n("305961"),i=n("957255"),r=n("567469"),u=n("998716"),o=n("923510"),d=n("819450"),c=n("49111");function f(e){var t;let n=(0,a.useStateFromStores)([l.default],()=>l.default.getStageVideoLimitBoostUpsellDismissed(e.id),[e.id]),f=(0,r.useActualStageSpeakerCount)(e.id),h=(0,r.useStageParticipantsCount)(e.id,u.StageChannelParticipantNamedIndex.AUDIENCE),p=(0,d.useStageHasMedia)(e.id),m=(0,a.useStateFromStores)([s.default],()=>s.default.getGuild(e.guild_id),[e.guild_id]),E=(0,a.useStateFromStores)([i.default],()=>i.default.can(o.MODERATE_STAGE_CHANNEL_PERMISSIONS,e),[e]),C=null!==(t=null==m?void 0:m.maxStageVideoChannelUsers)&&void 0!==t?t:0,g=!(null==m?void 0:m.isCommunity())&&C>c.MAX_STAGE_VIDEO_USER_LIMIT_TIER3;return p&&!n&&E&&!g&&f+h>=C}},910927:function(e,t,n){"use strict";n.r(t),n.d(t,{makeEmptyTitleError:function(){return o},makeEmptyMessageError:function(){return d},makeAutomodViolationError:function(){return c},renderError:function(){return f}});var a,l,s=n("600798"),i=n("782340");function r(e,t){return{type:e,message:null!=t?t:null}}function u(e){return r(0,e)}function o(){return r(0,i.default.Messages.FORM_THREAD_NAME_REQUIRED_ERROR)}function d(){return r(0,i.default.Messages.FORM_THREAD_STARTER_MESSAGE_REQUIRED_ERROR)}function c(e,t){return r(1,(0,s.getAutomodErrorMessageFromErrorResponse)(e,null==t?void 0:t.id))}function f(e,t){var n;return null==e||0===e.type&&null!=t.content&&t.content.trim().length>0?null:null!==(n=e.message)&&void 0!==n?n:null}(a=l||(l={}))[a.EmptyContent=0]="EmptyContent",a[a.AutomodViolation=1]="AutomodViolation"},256648:function(e,t,n){"use strict";n.r(t),n.d(t,{useThreadMemberListSections:function(){return d}}),n("222007"),n("424973");var a=n("884691"),l=n("917351"),s=n.n(l),i=n("446674"),r=n("593752"),u=n("782340");let o=[];function d(e,t){let{version:n,members:l}=(0,i.useStateFromStoresObject)([r.default],()=>({version:r.default.getMemberListVersion(e),members:r.default.getMemberListSections(e)})),d=a.useMemo(()=>{if(null==t)return o;let e=s(t.roles).values().filter(e=>e.hoist).sortBy(e=>e.position).reverse().map(e=>e.id).value();return e.push("online","offline"),e.map(e=>{var n,a;let s=t.roles[e],i="online"===e?u.default.Messages.STATUS_ONLINE:"offline"===e?u.default.Messages.STATUS_OFFLINE:s.name,r=null!==(a=null==l?void 0:null===(n=l[e])||void 0===n?void 0:n.userIds)&&void 0!==a?a:[];return{label:i,userIds:r,id:e,roleId:e}})},[null==t?void 0:t.roles,l,n]);return null!=l?d:o}},593752:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}}),n("222007"),n("424973"),n("808653");var a=n("917351"),l=n.n(a),s=n("249654"),i=n("446674"),r=n("913144"),u=n("42203"),o=n("26989"),d=n("10802"),c=n("824563"),f=n("101125"),h=n("697218"),p=n("449008"),m=n("991170"),E=n("158998"),C=n("49111");let g={};class S{rebuild(e){this.version++,this.sections={},null!=e&&(this.allUserIds=new Set(e));let t=u.default.getChannel(this.parentId);l(Array.from(this.allUserIds)).map(e=>{let[n,a,l]=this.calculateNewState(e,t);return{userId:e,sectionId:n,displayName:a,canViewChannel:l}}).sort((e,t)=>s.default.compare(e.userId,t.userId)).sortBy(e=>e.displayName).forEach(e=>{this.addUser(e.userId,e.sectionId,e.displayName,e.canViewChannel,!0)})}updateMultipleUserIds(e,t){return(null==t||this.guildId===t)&&0!==(e=e.filter(e=>this.allUserIds.has(e))).length&&(e.length>50?this.rebuild():e.forEach(e=>this.updateUserId(e)),!0)}updateUserId(e){if(!this.allUserIds.has(e))return!1;let[t,n,a]=this.findOldState(e),[l,s,i]=this.calculateNewState(e,u.default.getChannel(this.parentId));return(t!==l||n!==s||a!==i)&&(this.removeUserId(e,t),this.addUser(e,l,s,i),!0)}addUserId(e){let[t,n,a]=this.calculateNewState(e,u.default.getChannel(this.parentId));this.addUser(e,t,n,a)}removeUserId(e,t){if(this.allUserIds.delete(e),null!=t&&this.removeUserIdFromSection(e,t))return!0;for(let t in this.sections)if(this.removeUserIdFromSection(e,t))return!0;return!1}addUser(e,t,n,a,l){this.allUserIds.add(e);let s=h.default.getUser(e);if(null==s||""===s.username)return;!(t in this.sections)&&(this.sections[t]={sectionId:t,usersById:{},userIds:[]});let i=this.sections[t];if(i.usersById[e]={userId:e,displayName:n,canViewChannel:a},l)i.userIds.push(e);else{let t=this.findUserIdSortedPosition(i,e,n);i.userIds.splice(t,0,e)}this.version++}findUserIdSortedPosition(e,t,n){let{userIds:a,usersById:l}=e;for(let e=0;e<a.length;e++){let s=a[e],i=l[s].displayName;if(i===n){if(t<s)return e}else if(null==i){if(null!=n)return e}else if(null!=n&&n<i)return e}return a.length}removeUserIdFromSection(e,t){let n=this.sections[t];return null!=t&&e in n.usersById&&(delete n.usersById[e],n.userIds=n.userIds.filter(t=>t!==e),this.version++,!0)}findOldState(e){for(let t in this.sections){let n=this.sections[t];if(e in n.usersById){let a=n.usersById[e];return[t,a.displayName,a.canViewChannel]}}return[void 0,void 0,!1]}calculateNewState(e,t){var n,a;let l=o.default.getMember(this.guildId,e),s=h.default.getUser(e),i=h.default.getCurrentUser(),r=(null==s?void 0:s.id)===(null==i?void 0:i.id),u=r?f.default.getStatus():c.default.getStatus(e,this.guildId),d=null!=s&&null!=t&&m.default.can({permission:C.Permissions.VIEW_CHANNEL,user:s,context:t}),p=u!==C.StatusTypes.OFFLINE&&u!==C.StatusTypes.INVISIBLE&&u!==C.StatusTypes.UNKNOWN,g=p?null!==(n=null==l?void 0:l.hoistRoleId)&&void 0!==n?n:"online":"offline",S=null!==(a=null==l?void 0:l.nick)&&void 0!==a?a:E.default.getName(s);return[g,null==S?void 0:S.toLowerCase(),d]}constructor(e,t,n){this.guildId=e,this.parentId=t,this.threadId=n,this.version=0,this.sections={},this.allUserIds=new Set}}function _(e){return I(e.user.id)}function I(e){if(null==e)return!1;let t=!1;for(let n in g)g[n].updateUserId(e)&&(t=!0);return t}function T(e){let{guildId:t}=e,n=!1;for(let e in g)g[e].guildId===t&&(g[e].rebuild(),n=!0);return n}class v extends i.default.Store{initialize(){this.waitFor(u.default,o.default,d.default,c.default,f.default,h.default),this.syncWith([d.default],()=>{let e=d.default.getSubscribedThreadIds(),t=!1;for(let n in g)!e.has(n)&&(delete g[n],t=!0);return t}),this.syncWith([f.default],()=>{var e;return I(null===(e=h.default.getCurrentUser())||void 0===e?void 0:e.id)})}getMemberListVersion(e){var t;return null===(t=g[e])||void 0===t?void 0:t.version}getMemberListSections(e){var t;return null===(t=g[e])||void 0===t?void 0:t.sections}canUserViewChannel(e,t,n){var a,l;let s=g[e];if(null==s)return!1;let i=null===(a=s.sections[t])||void 0===a?void 0:a.usersById[n];return null!==(l=null==i?void 0:i.canViewChannel)&&void 0!==l&&l}}v.displayName="ThreadMemberListStore";var x=new v(r.default,{CONNECTION_OPEN:function(){g={}},THREAD_MEMBERS_UPDATE:function(e){var t,n;if(!(e.id in g))return!1;null===(t=e.addedMembers)||void 0===t||t.forEach(t=>{let{userId:n}=t;return g[e.id].addUserId(n)}),null===(n=e.removedMemberIds)||void 0===n||n.forEach(t=>g[e.id].removeUserId(t))},THREAD_UPDATE:function(e){var t;let{channel:n}=e;if(!(n.id in g)||(null===(t=n.threadMetadata)||void 0===t?void 0:t.archived)!==!0)return!1;delete g[n.id]},THREAD_DELETE:function(e){let{channel:t}=e;if(!(t.id in g))return!1;delete g[t.id]},CHANNEL_UPDATES:function(e){let{channels:t}=e,n=new Set(t.map(e=>e.id)),a=!1;for(let e in g)n.has(g[e].parentId)&&(g[e].rebuild(),a=!0);return a},THREAD_MEMBER_LIST_UPDATE:function(e){let{threadId:t,guildId:n,members:a}=e,l=u.default.getChannel(t),s=null==l?void 0:l.parent_id;null!=s&&(g[t]=new S(n,s,t),g[t].rebuild(a.map(e=>e.user_id)))},USER_UPDATE:_,PRESENCE_UPDATES:function(e){let{updates:t}=e;return t.map(e=>{let{user:t}=e;return I(t.id)}).some(e=>e)},GUILD_MEMBER_ADD:_,GUILD_MEMBER_UPDATE:_,GUILD_MEMBER_REMOVE:_,PRESENCES_REPLACE:function(e){let{presences:t}=e,n=l(t).map(e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.id}).filter(p.isNotNullish).uniq().value(),a=!1;for(let e in g)g[e].updateMultipleUserIds(n)&&(a=!0);return a},GUILD_MEMBERS_CHUNK:function(e){let{guildId:t,members:n}=e,a=n.map(e=>e.user.id),l=!1;for(let e in g)g[e].updateMultipleUserIds(a,t)&&(l=!0);return l},GUILD_ROLE_UPDATE:T,GUILD_ROLE_DELETE:T,PASSIVE_UPDATE_V1:function(e){var t;return null===(t=e.members)||void 0===t?void 0:t.reduce((e,t)=>I(t.user.id)||e,!1)}})},445375:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("295426"),d=n("352674"),c=n("125667"),f=n("264732"),h=n("206230"),p=n("812204"),m=n("685665"),E=n("850391"),C=n("149022"),g=n("681060"),S=n("376215"),_=n("172554"),I=n("699473"),T=n("328511"),v=n("467094"),x=n("845579"),N=n("42203"),A=n("474643"),M=n("377253"),R=n("957255"),j=n("585722"),L=n("476765"),O=n("945330"),y=n("745183"),P=n("959097"),b=n("664336"),D=n("378765"),U=n("718422"),w=n("412861"),F=n("910927"),k=n("730498"),V=n("24337"),B=n("967241"),H=n("517141"),G=n("49111"),W=n("782340"),Y=n("276159"),z=n("881812");let K=E.ChatInputTypes.THREAD_CREATION;function Z(e){let{parentChannelId:t,parentMessageId:n,location:l}=e,s=(0,r.useStateFromStores)([N.default],()=>N.default.getChannel(t)),{AnalyticsLocationProvider:i}=(0,m.default)(p.default.CREATE_THREAD);return null==s?null:(0,a.jsx)(i,{children:(0,a.jsx)(D.ComponentDispatchGroupProvider,{children:(0,a.jsxs)("section",{"aria-label":W.default.Messages.CREATE_THREAD,className:Y.container,children:[(0,a.jsx)(f.default,{channel:s,draftType:A.DraftType.FirstThreadMessage}),(0,a.jsxs)(b.default,{toolbar:(0,a.jsx)(b.default.Icon,{icon:O.default,tooltip:W.default.Messages.CLOSE,onClick:()=>(0,B.closeAndClearThreadSidebar)(t)}),children:[(0,a.jsx)(b.default.Icon,{icon:P.default,disabled:!0,"aria-label":W.default.Messages.THREAD}),(0,a.jsx)(b.default.Title,{children:W.default.Messages.NEW_THREAD})]}),(0,a.jsx)(X,{parentChannel:s,parentMessageId:n,location:l})]})})})}function X(e){let{parentChannel:t,parentMessageId:n,location:s}=e,d=(0,r.useStateFromStores)([h.default],()=>h.default.messageGroupSpacing),f=function(){let e=l.useContext(D.ComponentDispatchGroupContext);return l.useCallback(()=>{e.bumpDispatchPriority()},[e])}(),{threadSettings:p,setThreadSettings:m,updateThreadSettings:E}=function(e,t){let[n,a]=l.useState({}),s=l.useCallback(n=>{a(e=>({...e,...n})),o.default.changeThreadSettings(e.id,{...n,parentMessageId:t})},[e.id,t]);return{threadSettings:n,setThreadSettings:a,updateThreadSettings:s}}(t,n),{textAreaState:g,setTextAreaState:S}=function(e,t){let[n,a]=l.useState((0,C.createEmptyState)());return l.useEffect(()=>{function n(n){var l;let s=A.default.getDraft(e.id,A.DraftType.FirstThreadMessage);(0===s.length||!0===n)&&a((0,C.createState)(s)),t(null!==(l=A.default.getThreadSettings(e.id))&&void 0!==l?l:{})}return n(!0),A.default.addChangeListener(n),()=>{A.default.removeChangeListener(n)}},[e.id,t]),{textAreaState:n,setTextAreaState:a}}(t,m),I=(0,k.usePrivateThreadMode)(t),{nameError:x,messageError:N,submit:M}=function(e){let{parentChannel:t,parentMessageId:n,threadSettings:a,privateThreadMode:s,textAreaState:i,location:r}=e,[u,o]=l.useState(null),[d,c]=l.useState(null),f=(0,H.default)({parentChannel:t,parentMessageId:n,threadSettings:a,privateThreadMode:s,location:r,onThreadCreated:B.openThreadSidebarForViewing,useDefaultThreadName:!0}),h=l.useCallback(async(e,l,s)=>{var r,u,d;null==e&&(e=i.textValue),e=e.trim(),(null==l||0===l.length)&&(l=null===(r=T.default.getStickerPreview(t.id,K.drafts.type))||void 0===r?void 0:r.map(e=>e.id)),(null==s||0===s.length)&&(s=j.default.getUploads(t.id,A.DraftType.FirstThreadMessage));let h=null!==(u=a.name)&&void 0!==u?u:"",p=null==n&&0===h.length,m=""===e&&(null==l||0===l.length)&&0===s.length;if(o(p?(0,F.makeEmptyTitleError)():null),c(m?(0,F.makeEmptyMessageError)():null),p||m)return{shouldClear:!1,shouldRefocus:!0};if(null==n){let{valid:n}=await (0,U.applyChatRestrictions)({content:e,stickers:l,uploads:s,type:K,channel:t});if(!n)return{shouldClear:!1,shouldRefocus:!0}}try{await f(e,l,s)}catch(e){return(null===(d=e.body)||void 0===d?void 0:d.code)===G.AbortCodes.AUTOMOD_TITLE_BLOCKED&&o((0,F.makeAutomodViolationError)(e.body,t)),{shouldClear:!1,shouldRefocus:!0}}return(0,v.clearStickerPreview)(t.id,K.drafts.type),{shouldClear:!0,shouldRefocus:!1}},[f,i.textValue,a.name,n,t]);return{nameError:u,messageError:d,submit:h}}({parentChannel:t,parentMessageId:n,threadSettings:p,privateThreadMode:I,textAreaState:g,location:s}),R=(0,k.getIsPrivate)(p,I)?y.default:P.default;return(0,a.jsx)("div",{className:Y.chat,onMouseDown:f,onFocus:f,children:(0,a.jsx)("div",{className:i(Y.messagesWrapper,"group-spacing-".concat(d)),children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),M()},className:Y.form,children:[(0,a.jsx)(u.Scroller,{className:Y.scroller,fade:!0,children:(0,a.jsxs)("div",{className:Y.scrollerInner,children:[(0,a.jsxs)(_.default,{channelId:"create-thread-null",children:[(0,a.jsx)("div",{className:z.iconWrapper,children:(0,a.jsx)(R,{className:z.icon})}),(0,a.jsx)(q,{parentChannel:t,parentMessageId:n,threadSettings:p,updateThreadSettings:E,error:x}),t.type===G.ChannelTypes.GUILD_TEXT?(0,a.jsx)(J,{startedFromMessage:null!=n,threadSettings:p,updateThreadSettings:E,privateThreadMode:I}):null]}),(0,a.jsx)($,{parentChannel:t,parentMessageId:n})]})}),(0,a.jsxs)("div",{className:Y.submitContainer,children:[(0,a.jsx)(Q,{parentChannel:t,textAreaState:g,setTextAreaState:S,submit:M,error:N}),(0,a.jsx)(c.default,{channel:t,isThreadCreation:!0})]})]})})})}function J(e){let{startedFromMessage:t,threadSettings:n,updateThreadSettings:l,privateThreadMode:s}=e,r=(0,k.getIsPrivate)(n,s),o=(0,a.jsx)("div",{className:Y.privateThreadFormTitle,children:(0,a.jsx)("span",{className:Y.privateThreadFormTitleText,children:W.default.Messages.PRIVATE_THREAD})}),d=(0,a.jsx)(u.Checkbox,{className:i(Y.checkbox),type:u.Checkbox.Types.INVERTED,disabled:s===k.PrivateThreadMode.PrivateOnly,value:r,onChange:(e,t)=>l({isPrivate:t}),children:(0,a.jsx)(u.Text,{variant:"text-md/normal",color:"none",children:W.default.Messages.FORM_THREAD_PRIVATE_THREAD_SECTION_LABEL})});return t||s===k.PrivateThreadMode.Disabled?null:(0,a.jsxs)(u.FormSection,{title:o,className:Y.formSection,children:[d,r?(0,a.jsx)(u.Text,{className:Y.privateThreadDescription,variant:"text-xs/normal",color:"header-secondary",children:W.default.Messages.FORM_THREAD_PRIVATE_THREAD_DESCRIPTION}):null]})}function q(e){var t;let{parentChannel:n,parentMessageId:l,threadSettings:s,updateThreadSettings:i,error:r}=e,o=null!==(t=s.name)&&void 0!==t?t:"",c=(0,F.renderError)(r,{content:o}),f=(0,k.getDefaultThreadName)(n,l),h=null!=l,p=(0,L.useUID)();return(0,a.jsx)(u.FormSection,{tag:"label",htmlFor:p,title:W.default.Messages.THREAD_NAME+(h?" (Optional)":""),className:Y.formSection,children:(0,a.jsx)(u.TextInput,{value:o,id:p,placeholder:""!==f?f:W.default.Messages.FORM_THREAD_NAME_PLACEHOLDER,maxLength:G.MAX_CHANNEL_NAME_LENGTH,onChange:e=>{i({name:(0,V.default)(e,!1)}),""!==e?d.default.startTyping(n.id):d.default.stopTyping(n.id)},onBlur:()=>{let e=(0,V.default)(o,!0);e!==o&&i({name:e})},error:c})})}function Q(e){let{parentChannel:t,textAreaState:n,setTextAreaState:s,submit:c,error:f}=e,[h,p]=l.useState(!0),m=l.useCallback(()=>p(!0),[]),E=l.useCallback(()=>p(!1),[]),C=l.useCallback((e,n,a)=>{o.default.saveDraft(t.id,n,A.DraftType.FirstThreadMessage),s(e=>(""!==n&&e.textValue!==n?d.default.startTyping(t.id):""===n&&d.default.stopTyping(t.id),{textValue:n,richValue:a}))},[t.id,s]),_=l.useCallback(e=>{let{value:t,uploads:n,stickers:a}=e;return c(t,a,n)},[c]);(0,D.useComponentAction)({event:G.ComponentActions.TEXTAREA_FOCUS,handler:m}),(0,D.useComponentAction)({event:G.ComponentActions.TEXTAREA_BLUR,handler:E});let I=(0,r.useStateFromStores)([R.default],()=>R.default.can(G.Permissions.ATTACH_FILES,t)),T=(0,F.renderError)(f,{content:n.textValue});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.default,{channelId:t.id,type:K,canAttachFiles:I}),(0,a.jsx)("div",{className:Y.starterMessageError,children:(0,a.jsx)(u.InputError,{error:T})}),(0,a.jsx)(g.default,{type:K,channel:t,placeholder:W.default.Messages.FORM_THREAD_STARTER_MESSAGE_PLACEHOLDER,textValue:n.textValue,richValue:n.richValue,focused:h,className:Y.channelTextArea,innerClassName:i(Y.channelTextAreaInner,{[Y.channelTextAreaInnerError]:null!=T}),onFocus:m,onBlur:E,onChange:C,onSubmit:_,promptToUpload:w.promptToUpload})]})}function $(e){let{parentChannel:t,parentMessageId:n}=e,l=(0,r.useStateFromStores)([M.default],()=>null==n?null:M.default.getMessage(t.id,n)),s=x.MessageDisplayCompact.useSetting();return null!=l?(0,a.jsx)(I.default,{className:Y.messagePreview,message:l,channel:t,compact:s,renderThreadAccessory:!1,trackAnnouncementViews:!0}):null}},38861:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}}),n("222007");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("77078"),r=n("247013"),u=n("697218"),o=n("959097"),d=n("664336"),c=n("487269"),f=n("537560"),h=n("782340"),p=n("16064");function m(e){let{channel:t}=e,[n,m]=l.useState(!1),E=(0,s.useStateFromStores)([r.default,u.default],()=>{let e=u.default.getCurrentUser();return null==e||t.isNSFW()&&(!e.nsfwAllowed||!r.default.didAgree(t.getGuildId()))},[t]),C=l.useCallback(()=>{m(!1)},[]),g=l.useCallback(()=>{!n&&(0,c.trackThreadBrowserOpened)("Popout"),m(!n)},[n]);return(0,a.jsx)(i.Popout,{animation:i.Popout.Animation.NONE,position:"bottom",align:"right",autoInvert:!1,shouldShow:n,onRequestClose:C,renderPopout:function(){return(0,a.jsx)(i.Dialog,{children:(0,a.jsx)(f.default,{className:p.browser,channel:t,onClose:C})})},children:(e,t)=>{let{isShown:n}=t;return(0,a.jsx)(d.Icon,{...e,className:p.icon,onClick:g,icon:o.default,"aria-label":h.default.Messages.THREADS,tooltip:n?null:h.default.Messages.THREADS,disabled:E,selected:n})}})}},31673:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}}),n("222007");var a=n("37983"),l=n("884691"),s=n("77078"),i=n("660279"),r=n("998650"),u=n("664336"),o=n("659500"),d=n("414833"),c=n("547772"),f=n("648564"),h=n("49111"),p=n("782340"),m=n("496913");function E(e){let{channel:t}=e,n=(0,d.useThreadNotificationSetting)(t),[E,C]=l.useState(!1),g=(0,s.useRedesignIconContext)().enabled;l.useEffect(()=>{let e=()=>C(!0);return o.ComponentDispatch.subscribe(h.ComponentActions.OPEN_THREAD_NOTIFICATION_SETTINGS,e),()=>{o.ComponentDispatch.unsubscribe(h.ComponentActions.OPEN_THREAD_NOTIFICATION_SETTINGS,e)}},[]);let S=p.default.Messages.NOTIFICATION_SETTINGS;return(0,a.jsx)(s.Popout,{shouldShow:E,animation:s.Popout.Animation.NONE,position:"bottom",align:"right",autoInvert:!1,onRequestClose:()=>C(!1),renderPopout:e=>(0,a.jsx)(c.default,{...e,channel:t,navId:"thread-context",label:p.default.Messages.THREAD_ACTIONS_MENU_LABEL}),children:(e,t)=>{let{isShown:l}=t;return(0,a.jsx)(u.default.Icon,{...e,onClick:()=>C(e=>!e),tooltip:l?null:S,icon:n===f.ThreadMemberFlags.NO_MESSAGES?r.default:i.default,foreground:n!==f.ThreadMemberFlags.NO_MESSAGES||g?null:m.strikethrough,"aria-label":S,selected:l})}})}},338273:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}}),n("222007");var a=n("37983"),l=n("884691"),s=n("917351"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("30874"),d=n("458574"),c=n("308798"),f=n("64016"),h=n("13777"),p=n("37774"),m=n("117399"),E=n("400501"),C=n("542640"),g=n("604656"),S=n("861370"),_=n("845579"),I=n("800762"),T=n("433487"),v=n("664336"),x=n("967241"),N=n("782340");function A(e){let{channel:t}=e,[n,s]=l.useState(!1);function i(){s(e=>!e)}let r=N.default.Messages.MORE;return(0,a.jsx)(u.Popout,{shouldShow:n,animation:u.Popout.Animation.NONE,position:"bottom",align:"right",autoInvert:!1,onRequestClose:()=>s(!1),renderPopout:function(e){return(0,a.jsx)(M,{...e,channel:t})},children:(e,t)=>{let{isShown:n}=t;return(0,a.jsx)(v.default.Icon,{...e,onClick:i,tooltip:n?null:r,icon:T.default,"aria-label":r,selected:n})}})}function M(e){let{channel:t,closePopout:n,onSelect:l}=e,s=(0,o.default)(t),T=(0,p.default)(t),v=(0,C.default)(t.id),A=(0,E.default)(t),M=(0,S.default)({id:t.id,label:N.default.Messages.COPY_ID_THREAD}),R=(0,d.default)(t),j=(0,c.default)(t),L=(0,f.default)(t,"Toolbar Overflow"),O=(0,m.default)(t),y=(0,h.default)(t),P=(0,g.default)(t),b=_.UseThreadSidebar.useSetting(),D=(0,r.useStateFromStores)([I.default],()=>!i.isEmpty(I.default.getVoiceStatesForChannel(t.id)));return(0,a.jsxs)(u.Menu,{navId:"thread-context",onClose:n,"aria-label":N.default.Messages.THREAD_ACTIONS_MENU_LABEL,onSelect:l,children:[(0,a.jsxs)(u.MenuGroup,{children:[L,y]}),(0,a.jsxs)(u.MenuGroup,{children:[A,O,v,b&&!D?(0,a.jsx)(u.MenuItem,{id:"open",label:N.default.Messages.OPEN_IN_SPLIT_VIEW,action:function(){(0,x.openThreadSidebarForViewing)(t)}}):null]}),(0,a.jsxs)(u.MenuGroup,{children:[P,s,T,j]}),(0,a.jsxs)(u.MenuGroup,{children:[R,M]})]})}},503220:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}}),n("222007");var a=n("37983"),l=n("884691"),s=n("77078"),i=n("30874"),r=n("308798"),u=n("64016"),o=n("37774"),d=n("117399"),c=n("400501"),f=n("542640"),h=n("255228"),p=n("772371"),m=n("604656"),E=n("861370"),C=n("565298"),g=n("144491"),S=n("945330"),_=n("758710"),I=n("433487"),T=n("664336"),v=n("659500"),x=n("31673"),N=n("967241"),A=n("49111"),M=n("782340");function R(e){let{channel:t}=e,[n,i]=l.useState(!1);function r(){i(e=>!e)}let u=M.default.Messages.MORE;return(0,a.jsx)(s.Popout,{shouldShow:n,animation:s.Popout.Animation.NONE,position:"bottom",align:"right",autoInvert:!1,onRequestClose:()=>i(!1),renderPopout:function(e){return(0,a.jsx)(j,{...e,channel:t})},children:(e,t)=>{let{isShown:n}=t;return(0,a.jsx)(T.default.Icon,{...e,onClick:r,tooltip:n?null:u,icon:I.default,"aria-label":u,selected:n})}})}function j(e){let{channel:t,closePopout:n,onSelect:l}=e,C=(0,u.default)(t,"Sidebar Overflow"),S=(0,d.default)(t),I=(0,h.default)(t),T=(0,p.default)(t),x=(0,i.default)(t),N=(0,o.default)(t),R=(0,f.default)(t.id),j=(0,c.default)(t),L=(0,r.default)(t),O=(0,E.default)({id:t.id,label:M.default.Messages.COPY_ID_THREAD}),y=(0,m.default)(t);function P(){(0,g.transitionToChannel)(t.id)}return(0,a.jsxs)(s.Menu,{navId:"thread-context",onClose:n,"aria-label":M.default.Messages.THREAD_ACTIONS_MENU_LABEL,onSelect:l,children:[(0,a.jsxs)(s.MenuGroup,{children:[C,(0,a.jsx)(s.MenuItem,{id:"open",label:M.default.Messages.OPEN_IN_FULL_VIEW,action:P})]}),(0,a.jsxs)(s.MenuGroup,{children:[I,T]}),(0,a.jsxs)(s.MenuGroup,{children:[j,S,R]}),(0,a.jsxs)(s.MenuGroup,{children:[(0,a.jsx)(s.MenuItem,{id:"search",label:M.default.Messages.SEARCH,icon:_.default,action:function(){P(),setTimeout(()=>{v.ComponentDispatch.dispatch(A.ComponentActions.FOCUS_SEARCH,{prefillCurrentChannel:!1})},2e3)}}),(0,a.jsx)(s.MenuItem,{id:"pins",label:M.default.Messages.PINS,icon:_.default,action:function(){P(),v.ComponentDispatch.dispatch(A.ComponentActions.TOGGLE_CHANNEL_PINS)}})]}),(0,a.jsxs)(s.MenuGroup,{children:[y,x,N,L]}),(0,a.jsx)(s.MenuGroup,{children:O})]})}function L(e){let{channel:t,baseChannelId:n}=e;return(0,a.jsxs)(a.Fragment,{children:[t.isForumPost()?null:(0,a.jsx)(x.default,{channel:t}),(0,a.jsx)(R,{channel:t}),(0,a.jsx)(T.default.Icon,{icon:S.default,tooltip:M.default.Messages.CLOSE,onClick:()=>(0,N.closeThreadSidebar)((0,C.getGuildIdForGenericRedirect)(t),null!=n?n:t.parent_id)})]})}},861570:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var a=n("37983"),l=n("884691"),s=n("917351"),i=n.n(s),r=n("446674"),u=n("913144"),o=n("272030"),d=n("264732"),c=n("716241"),f=n("701916"),h=n("679653"),p=n("176347"),m=n("850391"),E=n("557809"),C=n("144491"),g=n("42203"),S=n("474643"),_=n("305961"),I=n("800762"),T=n("664336"),v=n("503220"),x=n("648564"),N=n("49111"),A=n("782340"),M=n("176692");function R(e){let{channelId:t,baseChannelId:s,channelViewSource:R="Split View"}=e,j=(0,r.useStateFromStores)([g.default],()=>g.default.getChannel(t)),L=(0,r.useStateFromStores)([_.default],()=>_.default.getGuild(null==j?void 0:j.getGuildId())),O=(0,h.default)(j);(function(e){let t=(0,r.useStateFromStores)([I.default],()=>null!=e&&!i.isEmpty(I.default.getVoiceStatesForChannel(e.id)));l.useEffect(()=>{t&&null!=e&&(u.default.dispatch({type:"SIDEBAR_CLOSE",baseChannelId:e.parent_id}),(0,C.transitionToThread)(e,x.OpenThreadAnalyticsLocations.VOICE_AUTO_OPEN))},[t,e])})(j);let y=l.useRef(!1);if(l.useEffect(()=>{if(null==j||y.current)return;y.current=!0;let e=(0,f.collectThreadMetadata)(g.default.getChannel(j.id),!0);(0,c.trackWithMetadata)(N.AnalyticEvents.CHANNEL_OPENED,{...e,channel_id:j.id,guild_id:j.guild_id,parent_id:j.parent_id,channel_view:R})},[j,R]),null==j||null==L)return null;let P=(0,a.jsx)(v.default,{channel:j,baseChannelId:s});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default,{channel:j,draftType:S.DraftType.ChannelMessage}),(0,a.jsx)(T.default,{toolbar:P,"aria-label":A.default.Messages.THREAD_HEADER_BAR_A11Y_LABEL,children:(0,E.renderTitle)({channel:j,channelName:O,guild:L,inSidebar:!0,handleContextMenu:function(e){(0,o.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("994827").then(n.bind(n,"994827"));return t=>(0,a.jsx)(e,{...t,channel:j})})},handleClick:function(){null!=j&&(0,C.transitionToChannel)(j.id)}})}),(0,a.jsx)("div",{className:M.chat,children:(0,a.jsx)(p.default,{channel:j,guild:L,chatInputType:m.ChatInputTypes.SIDEBAR},t)})]})}},517141:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E},useCreateForumPost:function(){return C}});var a=n("884691"),l=n("16470"),s=n("404118"),i=n("783480"),r=n("681736"),u=n("578198"),o=n("884351"),d=n("474643"),c=n("305961"),f=n("254490"),h=n("730498"),p=n("49111"),m=n("782340");function E(e){let{parentChannel:t,parentMessageId:n,threadSettings:l,privateThreadMode:s,location:r,onThreadCreated:u,useDefaultThreadName:c}=e,f=a.useCallback((e,t,n,a)=>{i.default.uploadFiles({channelId:e.id,uploads:t,draftType:d.DraftType.FirstThreadMessage,options:{stickerIds:a},parsedMessage:o.default.parse(e,n)})},[]);return(0,h.useCreateThreadCommon)({parentChannel:t,parentMessageId:n,threadSettings:l,privateThreadMode:s,location:r,onThreadCreated:u,useDefaultThreadName:c,uploadHandler:f})}function C(e){let{parentChannel:t}=e,{name:n,appliedTags:a}=(0,u.useForumPostComposerStore)(e=>{let{name:t,appliedTags:n}=e;return{name:t,appliedTags:n}},l.default);return(0,h.useCreateForumPostCommon)({parentChannel:t,name:n,appliedTags:a,upload:function(e,n,a){return new Promise((l,i)=>{let u=new r.default(e);u.on("error",(e,n,a)=>{if(n===p.AbortCodes.EXPLICIT_CONTENT){var l;let e=c.default.getGuild(null!==(l=t.getGuildId())&&void 0!==l?l:"");null!=e&&s.default.show({title:m.default.Messages.UPLOAD_AREA_UPLOAD_FAILED_TITLE,body:m.default.Messages.BOT_GUILD_EXPLICIT_CONTENT.format({name:e.toString()})})}else if(n===p.AbortCodes.ENTITY_TOO_LARGE){let e=(0,f.maxFileSize)(t.getGuildId());s.default.show({title:m.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,body:m.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:(0,f.sizeString)(e)})})}else n===p.AbortCodes.TOO_MANY_ATTACHMENTS&&s.default.show({title:m.default.Messages.ATTACHMENT_TOO_MANY_ERROR_TITLE,body:m.default.Messages.ATTACHMENT_TOO_MANY_ERROR_MESSAGE.format({limit:p.MAX_UPLOAD_COUNT})});i({body:a})}),u.on("complete",(e,t)=>{l({body:t})}),u.uploadFiles(a,n,{addFilesTo:"message.attachments"})})}})}},893980:function(e,t,n){"use strict";n.r(t),n.d(t,{trackProfilePanelViewed:function(){return u},trackProfilePanelToggled:function(){return o}});var a=n("373469"),l=n("824563"),s=n("27618"),i=n("599110"),r=n("49111");let u=e=>{let{displayProfile:t,isMobile:n,loadDurationMs:a,activity:l,customStatusActivity:s,status:u}=e;i.default.track(r.AnalyticEvents.DM_PROFILE_VIEWED,{has_mobile_indicator:n,has_activity:null!=l&&(null==l?void 0:l.type)!==r.ActivityTypes.CUSTOM_STATUS,has_game_activity:(null==l?void 0:l.type)===r.ActivityTypes.PLAYING,load_duration_ms:a,profile_user_status:u,has_custom_status:null!=s,has_profile_effect:null!=t.profileEffectId,...d(t)})},o=(e,t)=>{i.default.track(r.AnalyticEvents.DM_PROFILE_TOGGLED,{is_profile_open:t,...d(e)})},d=e=>{var t;if(null==e)return{};let n=e.userId,i=null!=a.default.getAnyStreamForUser(n),u=l.default.findActivity(n,e=>{let{type:t}=e;return i?t===r.ActivityTypes.PLAYING:t!==r.ActivityTypes.CUSTOM_STATUS}),o=null==u?void 0:u.assets,d=s.default.isFriend(n);return{has_images:!!(null!==(t=null==o?void 0:o.large_image)&&void 0!==t?t:null==o?void 0:o.small_image),is_friend:d,viewed_profile_user_id:n,profile_has_nitro_customization:e.hasPremiumCustomization(),profile_has_theme_color_customized:e.hasThemeColors(),profile_has_theme_animation:null!=e.popoutAnimationParticleType}}},69682:function(e,t,n){"use strict";n.r(t),n.d(t,{FriendRow:function(){return E},default:function(){return C}});var a=n("37983"),l=n("884691"),s=n("446674"),i=n("77078"),r=n("272030"),u=n("327037"),o=n("145079"),d=n("824563"),c=n("713135"),f=n("401642"),h=n("49111"),p=n("782340"),m=n("568719");function E(e){let{user:t,status:n,onSelect:l,onContextMenu:r}=e,u=(0,s.useStateFromStores)([d.default],()=>d.default.isMobileOnline(t.id));return(0,a.jsxs)(i.Clickable,{className:m.listRow,onClick:()=>l(t.id),onContextMenu:e=>r(e,t),children:[(0,a.jsx)(i.Avatar,{src:t.getAvatarURL(void 0,40),"aria-label":t.username,size:i.AvatarSizes.SIZE_40,status:n,isMobile:u,className:m.listAvatar}),(0,a.jsx)(o.default,{user:t,className:m.listName,discriminatorClass:m.listDiscriminator})]})}function C(e){let t,{user:o,onClose:d}=e,C=(0,s.useStateFromStores)([c.default],()=>c.default.getMutualFriends(o.id));function g(e){d(),(0,f.openUserProfileModal)({userId:e,analyticsLocation:{section:h.AnalyticsSections.USER_PROFILE_MUTUAL_FRIENDS}})}function S(e,t){(0,r.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("406784").then(n.bind(n,"406784"));return n=>(0,a.jsx)(e,{...n,user:t})})}return l.useEffect(()=>{null==C&&(0,u.fetchMutualFriends)(o.id)},[C,o.id]),t=null==C?(0,a.jsx)("div",{className:m.empty,children:(0,a.jsx)(i.Spinner,{})}):0===C.length?(0,a.jsxs)("div",{className:m.empty,children:[(0,a.jsx)("div",{className:m.emptyIconFriends}),(0,a.jsx)("div",{className:m.emptyText,children:p.default.Messages.NO_MUTUAL_FRIENDS})]}):C.map(e=>(0,a.jsx)(E,{user:e.user,status:e.status,onSelect:g,onContextMenu:S},e.key)),(0,a.jsx)(i.ScrollerThin,{className:m.listScroller,fade:!0,children:t})}},446509:function(e,t,n){"use strict";n.r(t),n.d(t,{GuildRow:function(){return I},default:function(){return T}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("446674"),r=n("819855"),u=n("77078"),o=n("272030"),d=n("54239"),c=n("841098"),f=n("449918"),h=n("239380"),p=n("476263"),m=n("158998"),E=n("713135"),C=n("49111"),g=n("782340"),S=n("568719"),_=n("175321");function I(e){let{guild:t,nick:n,theme:l,onSelect:i,onContextMenu:o,user:d}=e,c=d.hasAvatarForGuild(t.id);return(0,a.jsxs)(u.Clickable,{focusProps:{offset:{right:8}},className:S.listRow,onClick:()=>i(t.id),onContextMenu:e=>o(e,t),children:[(0,a.jsx)(p.default,{tabIndex:-1,guild:t,showBadge:!0,className:s(S.listAvatar,null==t.icon?_.guildAvatarWithoutIcon:null),badgeStrokeColor:(0,f.getColor)((0,r.isThemeDark)(l)?C.Color.PRIMARY_600:C.Color.WHITE_500),size:p.default.Sizes.MEDIUM,active:!0}),(0,a.jsxs)("div",{className:S.listRowContent,children:[(0,a.jsx)("div",{className:S.listName,children:t.toString()}),c||null!=n?(0,a.jsxs)("div",{className:_.guildNick,children:[c&&(0,a.jsx)(u.Avatar,{src:d.getAvatarURL(t.id,16),size:u.AvatarSizes.SIZE_16,className:_.guildAvatar,"aria-hidden":!0}),null!=n?n:m.default.getName(d)]}):null]})]})}function T(e){let t,{user:l,onClose:s}=e,r=(0,i.useStateFromStores)([E.default],()=>E.default.getMutualGuilds(l.id)),f=(0,c.default)();function p(e){(0,h.transitionToGuild)(e),s(),(0,d.popLayer)()}function m(e,t){(0,o.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("374705").then(n.bind(n,"374705"));return n=>(0,a.jsx)(e,{...n,guild:t})})}return t=null==r||0===r.length?(0,a.jsxs)("div",{className:S.empty,children:[(0,a.jsx)("div",{className:S.emptyIconGuilds}),(0,a.jsx)("div",{className:S.emptyText,children:g.default.Messages.NO_MUTUAL_GUILDS})]}):r.map(e=>{let{guild:t,nick:n}=e;return(0,a.jsx)(I,{user:l,guild:t,nick:n,theme:f,onSelect:p,onContextMenu:m},t.id)}),(0,a.jsx)(u.ScrollerThin,{className:S.listScroller,fade:!0,children:t})}},817080:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("394846"),u=n("77078"),o=n("272030"),d=n("754474"),c=n("315102"),f=n("506885"),h=n("981601"),p=n("568719"),m=n("599466");function E(e){var t;let{channel:s,integration:E}=e,C=c.default.getApplicationIconURL({id:E.application.id,icon:E.application.icon,size:40}),g=l.useCallback(e=>{(0,o.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("348866").then(n.bind(n,"348866"));return t=>(0,a.jsx)(e,{...t,channel:s,integration:E})})},[E,s]),S=(0,a.jsxs)("div",{className:p.listRow,onContextMenu:g,children:[(0,a.jsx)("img",{className:i(p.listAvatar,m.icon),alt:"","aria-hidden":!0,src:C,width:40,height:40}),(0,a.jsx)("div",{className:p.listRowContent,children:(0,a.jsx)(d.default,{name:E.application.name,botType:d.BotTypes.BOT,botVerified:null===(t=E.application.bot)||void 0===t?void 0:t.isVerifiedBot(),className:p.listName})})]}),{bot:_}=E.application;return null==_?(0,a.jsx)("li",{children:S}):(0,a.jsx)(u.Popout,{preload:()=>(0,f.default)(_.id,C),renderPopout:e=>(0,a.jsx)(h.default,{...e,userId:_.id,channelId:s.id}),position:r.isMobile?"window_center":"left",children:e=>(0,a.jsx)("li",{...e,children:S})})}},390413:function(e,t,n){"use strict";n.r(t),n.d(t,{ListType:function(){return a},default:function(){return p}}),n("222007");var a,l,s=n("37983"),i=n("884691"),r=n("414456"),u=n.n(r),o=n("77078"),d=n("461380"),c=n("67602"),f=n("89195"),h=n("980662");(l=a||(a={}))[l.MutualFriendsList=0]="MutualFriendsList",l[l.MutualGuildList=1]="MutualGuildList",l[l.AppsList=2]="AppsList";var p=e=>{let{header:t,children:n,itemType:a=1,isLoadingHeader:l,isLoadingContents:r,loadingContentsCount:p=0,className:m,onHover:E,onFocus:C}=e,[g,S]=i.useState(!0),_=(0,s.jsx)("div",{className:f.iconWrapper,children:(0,s.jsx)(d.default,{direction:g?d.default.Directions.RIGHT:d.default.Directions.DOWN})});return(0,s.jsxs)("div",{className:u(f.listWrapper,m),children:[(0,s.jsx)(o.Button,{className:f.collapseBtn,innerClassName:f.collapseBtnContent,color:o.ButtonColors.CUSTOM,onMouseEnter:E,onFocus:C,onClick:()=>S(!g),children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.ContentBlob,{width:34,opacity:.08}),(0,s.jsx)(c.ContentBlob,{width:135,opacity:.08})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Text,{variant:"text-sm/medium",children:t}),_]})}),(0,s.jsx)("ul",{className:u(f.connectionList,{[f.isCollapsed]:g}),children:r?Array.from({length:p}).map((e,t)=>(0,s.jsxs)("div",{className:u({[h.mutualFriendItem]:0===a,[h.mutualGuildsItem]:1===a}),children:[(0,s.jsx)(c.ContentBlob,{width:34,opacity:.08}),(0,s.jsx)(c.ContentBlob,{width:135,opacity:.08})]},t)):n})]})}},104649:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("446674"),s=n("272030"),i=n("824563"),r=n("401642"),u=n("69682"),o=n("49111"),d=e=>{let{connection:t}=e,{user:d}=t,c=d.isNonUserBot(),f=(0,l.useStateFromStores)([i.default],()=>c?null:i.default.getStatus(d.id));return(0,a.jsx)(u.FriendRow,{user:d,status:null!=f?f:o.StatusTypes.UNKNOWN,onSelect:()=>{(0,r.openUserProfileModal)({userId:d.id,analyticsLocation:{section:o.AnalyticsSections.DM_PROFILE}})},onContextMenu:e=>{var t,l;return t=e,l=d,void(0,s.openContextMenuLazy)(t,async()=>{let{default:e}=await n.el("406784").then(n.bind(n,"406784"));return t=>(0,a.jsx)(e,{...t,user:l})})}})}},80615:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("272030"),s=n("239380"),i=n("446509"),r=e=>{let{connection:t,user:r,theme:u}=e,{guild:o,nick:d}=t;return(0,a.jsx)(i.GuildRow,{guild:o,nick:d,theme:u,user:r,onContextMenu:function(e,t){(0,l.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("374705").then(n.bind(n,"374705"));return n=>(0,a.jsx)(e,{...n,guild:t})})},onSelect:s.transitionToGuild})}},514917:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("627445"),u=n.n(r),o=n("446674"),d=n("77078"),c=n("327037"),f=n("841098"),h=n("252063"),p=n("724110"),m=n("373469"),E=n("824563"),C=n("102985"),g=n("697218"),S=n("387111"),_=n("158998"),I=n("713135"),T=n("765698"),v=n("506885"),x=n("217513"),N=n("893980"),A=n("58351"),M=n("430312"),R=n("789321"),j=n("627601"),L=n("10532"),O=n("915712"),y=n("369869"),P=n("802279"),b=n("465215"),D=n("301998"),U=n("491250"),w=n("453649"),F=n("849674"),k=n("817080"),V=n("390413"),B=n("104649"),H=n("80615"),G=n("80531"),W=n("590456"),Y=n("49111"),z=n("782340"),K=n("666204"),Z=e=>{var t;let{channel:n,showCall:s}=e,r=n.recipients[0],[Z,X]=l.useState(!1),J=l.useRef(0),q=(0,A.default)(),Q=(0,o.useStateFromStores)([g.default],()=>g.default.getUser(r)),$=null==Q?void 0:Q.isNonUserBot();u(null!=Q,"Profile Panel: user cannot be undefined");let ee=(0,x.default)(Q.id),{installedIntegrations:et,fetched:en,appsInGDMEnabled:ea,availableApplications:el}=(0,h.usePrivateChannelIntegrationState)({channelId:n.id}),es=!q&&!s,{activity:ei,customStatusActivity:er,isApplicationStreaming:eu,isMobile:eo,status:ed}=(0,o.useStateFromStoresObject)([m.default,E.default],()=>{let e=null!=m.default.getAnyStreamForUser(Q.id);return{activity:E.default.findActivity(Q.id,t=>{let{type:n}=t;return e?n===Y.ActivityTypes.PLAYING:n!==Y.ActivityTypes.CUSTOM_STATUS}),customStatusActivity:E.default.findActivity(Q.id,e=>{let{type:t}=e;return t===Y.ActivityTypes.CUSTOM_STATUS}),isApplicationStreaming:e,isMobile:E.default.isMobileOnline(Q.id),status:$?null:E.default.getStatus(Q.id)}}),ec=null!=ei||eu,ef=null!==(t=S.default.getNickname(null,n.id,Q))&&void 0!==t?t:_.default.getName(Q),eh=(0,o.useStateFromStores)([C.default],()=>C.default.hidePersonalInformation),[ep,em,eE,eC,eg]=(0,o.useStateFromStoresArray)([I.default],()=>[I.default.getMutualFriendsCount(Q.id),I.default.getMutualFriends(Q.id),I.default.getMutualGuilds(Q.id),I.default.isFetchingProfile(Q.id),I.default.isFetchingFriends(Q.id)]),eS=(0,w.useGetVoiceChannelInfoForVoiceActivitySection)(Q.id),e_=null!=eS&&!eu,{showVoiceActivityInProfile:eI}=T.VoiceActivityProfileExperiment.useExperiment({location:"user DM panel"},{autoTrackExposure:e_&&es}),eT=!Q.bot&&null!=eE&&eE.length>0,ev=!Q.bot&&null!=ep&&ep>0,ex=(0,F.useShouldShowUserPopoutCollectiblesUpsell)({popoutUser:Q,source:j.UserPopoutUpsellSource.PROFILE_PANEL}),eN=(0,f.default)();l.useEffect(()=>{J.current=Date.now()},[]),l.useEffect(()=>{(0,v.default)(Q.id,Q.getAvatarURL(void 0,80),{withMutualGuilds:!Q.bot,withMutualFriendsCount:!Q.bot})},[Q]),l.useEffect(()=>{null!=ee&&es&&(0,N.trackProfilePanelViewed)({displayProfile:ee,isMobile:eo,loadDurationMs:Date.now()-J.current,activity:ei,customStatusActivity:er,status:ed})},[ee,eo,ei,er,ed,es]);let eA=null==eE?void 0:eE.map(e=>(0,a.jsx)(H.default,{connection:e,user:Q,theme:eN},e.guild.id)),eM=null==em?void 0:em.map(e=>(0,a.jsx)(B.default,{connection:e},e.key)),eR=et.map(e=>(0,a.jsx)(k.default,{channel:n,integration:e},e.application.id)),ej=l.useCallback(()=>{!Q.bot&&!eg&&null==eM&&(0,c.fetchMutualFriends)(Q.id)},[eg,eM,Q.id,Q.bot]),eL=l.useCallback(()=>X(!0),[]),eO=l.useCallback(()=>X(!1),[]);return es?(0,a.jsx)("aside",{className:K.profilePanel,onMouseEnter:eL,onMouseLeave:eO,children:(0,a.jsxs)(M.default,{user:Q,profileType:W.UserProfileTypes.PANEL,useDefaultClientTheme:!0,children:[ex.shouldShow&&(0,a.jsx)(R.default,{user:Q,upsellSource:j.UserPopoutUpsellSource.PROFILE_PANEL,displayProfile:ee,isInSidebar:!0,...ex},Q.id),(0,a.jsxs)(d.ScrollerNone,{children:[(0,a.jsx)(G.default,{user:Q,displayProfile:ee,channel:n,animateAssets:Z,forceShowPremiumBadge:Z}),(0,a.jsxs)(M.default.Inner,{children:[(0,a.jsx)(U.default,{user:Q,nickname:ef,pronouns:null==ee?void 0:ee.pronouns}),(0,a.jsx)(P.default,{customStatusActivity:er,animate:Z}),(0,a.jsx)(L.default,{}),(0,a.jsx)(y.default,{bio:null==ee?void 0:ee.bio,hidePersonalInformation:eh,animateOnHover:!0,isHovering:Z}),!Q.isSystemUser()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.default,{userId:r}),(0,a.jsx)(L.default,{})]}),(0,a.jsx)(D.default,{user:Q,setNote:!1,hideNote:!1})]}),eI&&e_?(0,a.jsx)(M.default.Inner,{children:(0,a.jsx)(w.default,{voiceGuild:eS.voiceGuild,voiceChannel:eS.voiceChannel,color:K.appButtonColor})}):null,ec?(0,a.jsx)(M.default.Inner,{children:(0,a.jsx)(O.default,{activity:ei,user:Q,channelId:n.id})}):null,(0,a.jsxs)(M.default.Inner,{className:K.profilePanelConnections,children:[eT?(0,a.jsx)(V.default,{className:K.mutualGuildsList,header:z.default.Messages.MUTUAL_GUILDS_COUNT.format({count:null==eE?void 0:eE.length}),isLoadingHeader:eC,children:eA}):null,ev?(0,a.jsx)(V.default,{className:i(K.mutualFriendsList,{[K.mutualFriendsDivider]:eT}),header:z.default.Messages.MUTUAL_FRIENDS_COUNT.format({count:ep}),isLoadingHeader:eC,isLoadingContents:eg,loadingContentsCount:ep,onFocus:ej,onHover:ej,itemType:V.ListType.MutualFriendsList,children:eM}):null]}),(0,a.jsx)(M.default.Inner,{className:i(K.profilePanelConnections,K.appListThemedContainer),children:ea&&(0,a.jsxs)(V.default,{header:eR.length>0?z.default.Messages.PRIVATE_CHANNEL_APPS_HEADER_COUNT.format({count:eR.length}):z.default.Messages.PRIVATE_CHANNEL_APPS_HEADER,isLoadingContents:!en,isLoadingHeader:!1,itemType:V.ListType.AppsList,children:[eR,el.length>0&&(0,a.jsxs)("div",{className:K.appButtonContainer,children:[0===et.length&&(0,a.jsx)(d.Text,{variant:"text-xs/normal",color:"header-secondary",children:z.default.Messages.PRIVATE_CHANNEL_ADD_APPS_INFO}),(0,a.jsx)(d.Button,{onClick:()=>{(0,d.openModal)(e=>(0,a.jsx)(p.default,{channelId:n.id,...e}))},color:K.appButtonColor,className:K.appButton,fullWidth:!0,size:d.ButtonSizes.SMALL,children:z.default.Messages.PRIVATE_CHANNEL_ADD_APPS})]})]})})]})]})}):null}},80531:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}}),n("222007");var a=n("37983");n("884691");var l=n("446674"),s=n("635471"),i=n("824563"),r=n("289918"),u=n("590006"),o=n("935409"),d=n("590456"),c=n("327828"),f=e=>{let{user:t,displayProfile:n,channel:f,animateAssets:h,forceShowPremiumBadge:p}=e,m=t.isNonUserBot(),[E,C]=(0,l.useStateFromStoresArray)([i.default],()=>[m?null:i.default.getStatus(t.id),i.default.isMobileOnline(t.id)]),g=null==n?void 0:n.profileEffectId;return(0,a.jsxs)("div",{children:[(0,a.jsx)(r.default,{user:t,displayProfile:n,profileType:d.UserProfileTypes.PANEL,showPremiumBadgeUpsell:!0,isHovering:p,animateOnHover:!h}),(0,a.jsx)(o.UserPopoutAvatar,{user:t,displayProfile:n,status:E,isMobile:C,channelId:f.id,disableUserProfileLink:!0,hasBanner:(null==n?void 0:n.banner)!=null,profileType:d.UserProfileTypes.PANEL,animateOnHover:!h}),(0,a.jsx)("div",{className:c.badgelistGroup,children:(0,a.jsx)(u.default,{className:c.badgeList,user:t,size:u.BadgeSizes.SIZE_22})}),null!=g&&(0,a.jsx)(s.default,{profileEffectId:g,maxLoops:0,resetOnHover:!0,isHovering:p,urlQueryString:"dm-view",noBorderRadius:!0})]})}},58351:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}}),n("222007");var a=n("884691");function l(){var e;let[t,n]=a.useState((e=window.innerWidth<1132,e));return a.useEffect(()=>{function e(){n(window.innerWidth<1132)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[n]),t}},143082:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("629109"),r=n("42887"),u=n("829536"),o=n("782340");function d(){let e=(0,l.useStateFromStores)([r.default],()=>(0,u.amplitudeToPerceptual)(r.default.getInputVolume()));return(0,a.jsx)(s.MenuControlItem,{id:"input",label:o.default.Messages.FORM_LABEL_INPUT_VOLUME,control:(t,n)=>(0,a.jsx)(s.MenuSliderControl,{...t,ref:n,value:e,onChange:e=>i.default.setInputVolume((0,u.perceptualToAmplitude)(e)),"aria-label":o.default.Messages.FORM_LABEL_INPUT_VOLUME})})}},252227:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("629109"),r=n("42887"),u=n("773336"),o=n("49111"),d=n("782340");function c(){let e=!u.isPlatformEmbedded,t=(0,l.useStateFromStores)([r.default],()=>r.default.getMode()),n=(e,n)=>(0,a.jsx)(s.MenuRadioItem,{id:e,group:"input-modes",label:n,checked:t===e,action:()=>i.default.setMode(e)},e);return[n(o.InputModes.VOICE_ACTIVITY,d.default.Messages.INPUT_MODE_VAD),n(o.InputModes.PUSH_TO_TALK,e?d.default.Messages.INPUT_MODE_PTT_LIMITED:d.default.Messages.INPUT_MODE_PTT)]}},832759:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("446674"),s=n("77078"),i=n("629109"),r=n("42887"),u=n("829536"),o=n("773336"),d=n("782340");function c(){let e=(0,l.useStateFromStores)([r.default],()=>(0,u.amplitudeToPerceptual)(r.default.getOutputVolume()));return(0,a.jsx)(s.MenuControlItem,{id:"output",label:d.default.Messages.FORM_LABEL_OUTPUT_VOLUME,control:(t,n)=>(0,a.jsx)(s.MenuSliderControl,{...t,ref:n,value:e,maxValue:o.isPlatformEmbedded?200:100,onChange:e=>i.default.setOutputVolume((0,u.perceptualToAmplitude)(e)),"aria-label":d.default.Messages.FORM_LABEL_OUTPUT_VOLUME})})}},648911:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("446674"),l=n("42887"),s=n("512244");function i(){return(0,a.useStateFromStores)([l.default],()=>(0,s.default)(l.default))}},491519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("26989"),l=n("387111"),s=n("99795"),i=n("782340");function r(e,t,n){var r,u;if(t.type===s.ParticipantTypes.ACTIVITY)return null!==(u=null==n?void 0:n.name)&&void 0!==u?u:null;let o=a.default.isGuestOrLurker(e.guild_id,null===(r=t.user)||void 0===r?void 0:r.id);return l.default.getName(e.getGuildId(),e.id,t.user)+(o?" ".concat(i.default.Messages.GUEST_NAME_SUFFIX):"")}},830251:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}}),n("446674"),n("271938"),n("42887");var a=n("99795");function l(e){var t,n;return e.type!==a.ParticipantTypes.ACTIVITY&&((0,a.isStreamParticipant)(e)?null!=e.streamId:null!==(n=null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)&&void 0!==n&&n)}},999180:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}}),n("222007");var a=n("917351"),l=n.n(a),s=n("446674"),i=n("42887"),r=n("353927");function u(){let{enabled:e,cameraUnavailable:t}=(0,s.useStateFromStoresObject)([i.default],()=>{var e,t;let n=null===(t=null===(e=l(i.default.getVideoDevices()).values().first())||void 0===e?void 0:e.disabled)||void 0===t||t;return{enabled:i.default.isVideoEnabled(),cameraUnavailable:n||!i.default.supports(r.Features.VIDEO)}});return{enabled:e,cameraUnavailable:t}}},244390:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("446674"),l=n("38654"),s=n("271938"),i=n("42887"),r=n("957255"),u=n("800762"),o=n("49111");function d(e){return(0,a.useStateFromStoresObject)([s.default,u.default,i.default,r.default,l.default],()=>(function(e){var t;let{channel:n,authenticationStore:a=s.default,voiceStateStore:d=u.default,mediaEngineStore:c=i.default,permissionStore:f=r.default,impersonateStore:h=l.default}=e,p=null!=n?d.getVoiceState(n.getGuildId(),a.getId()):null,m=c.isSelfMute()||c.isSelfMutedTemporarily(),E=null==n?void 0:n.getGuildId(),C=h.isViewingRoles(E)&&!f.can(o.Permissions.SPEAK,n);return{selfMute:m,suppress:(null==p?void 0:p.suppress)||C,mute:null!==(t=null==p?void 0:p.mute)&&void 0!==t&&t}})({channel:e,authenticationStore:s.default,voiceStateStore:u.default,mediaEngineStore:i.default,permissionStore:r.default,impersonateStore:l.default}))}},444657:function(e,t,n){"use strict";n.r(t),n.d(t,{ActivityEntryPointTile:function(){return y}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("151426"),u=n("669491"),o=n("77078"),d=n("997289"),c=n("860345"),f=n("865821"),h=n("441821"),p=n("478272"),m=n("812204"),E=n("685665"),C=n("10641"),g=n("36562"),S=n("945330"),_=n("381546"),I=n("564875"),T=n("82636"),v=n("924506"),x=n("599110"),N=n("439932"),A=n("784981"),M=n("49111"),R=n("954016"),j=n("782340"),L=n("38064"),O=n("861948");function y(e){let{channel:t,guild:n,width:l,inPopout:s,handleClose:i,userParticipantCount:r}=e,{enabled:u}=c.PaxVcTileActivitiesExperiment.useExperiment({location:"4934f1_1"},{autoTrackExposure:!1});return l<250?(0,a.jsx)(P,{channel:t,guild:n,width:l,inPopout:s,handleClose:i,userParticipantCount:r}):r>1||u?(0,a.jsx)(U,{channel:t,guild:n,width:l,inPopout:s,handleClose:i,userParticipantCount:r}):(0,a.jsx)(b,{channel:t,guild:n,width:l,inPopout:s})}function P(e){let{channel:t,inPopout:n,handleClose:l}=e,{analyticsLocations:s,AnalyticsLocationProvider:r}=(0,E.default)(m.default.VC_TILE_ACTIVITY_SHELF_BUTTON),c=(0,d.useAnalyticsContext)(),f=(0,o.useToken)(u.default.colors.INTERACTIVE_NORMAL).hex(),h=()=>{(0,p.default)({channel:t,guildId:t.guild_id,locationObject:c.location,openInPopout:n,analyticsLocations:s})};return(0,a.jsx)(r,{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Tooltip,{text:j.default.Messages.EMBEDDED_ACTIVITIES_START_AN_ACTIVITY,children:e=>{let{onClick:t,...n}=e;return(0,a.jsx)(o.Clickable,{...n,className:L.clickableTile,onClick:()=>{null==t||t(),h()},children:(0,a.jsx)(A.default,{className:L.root,children:(0,a.jsx)("div",{className:L.iconContainer,children:(0,a.jsx)(v.default,{width:40,height:40})})})})}}),(0,a.jsx)(o.Clickable,{onClick:l,className:i((0,N.getThemeClass)(M.ThemeTypes.DARK),L.shelfButtonCloseButton),children:(0,a.jsx)(_.default,{width:24,height:24,className:L.closeButtonIcon,backgroundColor:f})})]})})}function b(e){let{channel:t,guild:s,inPopout:i,width:r}=e;l.useEffect(()=>{x.default.track(M.AnalyticEvents.VC_TILE_ACTIVITIES_ENTRY_POINT_VIEWED,{tile_type:"activity invite",n_participants:1})},[]);let u=(0,d.useAnalyticsContext)(),{analyticsLocations:c,AnalyticsLocationProvider:f}=(0,E.default)(m.default.VC_TILE_ACTIVITY_INVITE);return(0,a.jsx)(f,{children:(0,a.jsxs)(A.default,{className:L.root,children:[r>400?(0,a.jsx)("img",{src:O,className:L.art,alt:j.default.Messages.EMBEDDED_ACTIVITIES_SHELF_CHARACTERS_ALT_TEXT}):null,(0,a.jsx)(o.Text,{className:L.heading,variant:"text-md/semibold",children:j.default.Messages.EMBEDDED_ACTIVITIES_VC_TILE_ENTRY_POINT_INVITE}),(0,a.jsxs)("div",{className:L.buttonContainer,children:[(0,a.jsxs)(o.Button,{size:o.Button.Sizes.LARGE,color:o.Button.Colors.PRIMARY,className:L.button,innerClassName:L.buttonContents,onClick:function(){(0,o.openModalLazy)(async()=>{let{default:e}=await n.el("310688").then(n.bind(n,"310688"));return n=>(0,a.jsx)(e,{...n,guild:s,channel:t,source:M.InstantInviteSources.ACTIVITY_ENTRY_POINT_TILE})},{contextKey:i?o.POPOUT_MODAL_CONTEXT:o.DEFAULT_MODAL_CONTEXT})},children:[(0,a.jsx)(I.default,{width:16,height:16}),(0,a.jsx)(o.Text,{variant:"text-sm/medium",children:j.default.Messages.INVITE_FRIENDS})]}),(0,a.jsxs)(o.Button,{size:o.Button.Sizes.LARGE,className:L.button,innerClassName:L.buttonContents,onClick:function(){(0,p.default)({channel:t,guildId:t.guild_id,locationObject:u.location,openInPopout:i,analyticsLocations:c})},children:[(0,a.jsx)(T.default,{width:16,height:16}),(0,a.jsx)(o.Text,{variant:"text-sm/medium",children:j.default.Messages.EMBEDDED_ACTIVITIES_ACTIVITY_ENTRY_POINT_TILE_CHOOSE_AN_ACTIVITY})]})]})]})})}let D=e=>{let{userParticipantCount:t,guildId:n}=e,{enabled:a}=c.PaxVcTileActivitiesExperiment.useExperiment({location:"4934f1_2"},{autoTrackExposure:!1}),l=(0,f.default)({guildId:n});if(a){let e=new Set([R.PUTT_PARTY_APPLICATION_ID,R.LAND_IO_APPLICATION_ID,R.GARTIC_PHONE_APPLICATION_ID]);return l.filter(t=>e.has(t.application.id))}if(2===t){let e=[],t=[(0,R.WATCH_YOUTUBE_PROD_APP_ID),(0,R.PUTT_PARTY_APPLICATION_ID),(0,R.CHESS_IN_THE_PARK_APP_ID)].filter(Boolean).slice(0,3);return l.forEach(n=>{let a=t.indexOf(n.application.id);!(a<0)&&(e[a]=n)}),e}return l.slice(0,3)};function U(e){let{channel:t,guild:n,handleClose:s,width:u,userParticipantCount:d}=e;l.useEffect(()=>{x.default.track(M.AnalyticEvents.VC_TILE_ACTIVITIES_ENTRY_POINT_VIEWED,{tile_type:"activity suggestion",n_participants:d})},[]);let c=D({userParticipantCount:d,guildId:n.id}),{AnalyticsLocationProvider:f}=(0,E.default)(m.default.VC_TILE_ACTIVITY_SUGGESTION);return(0,a.jsx)(f,{children:(0,a.jsxs)(A.default,{className:L.root,children:[u>480?(0,a.jsx)("img",{className:L.art,src:O,alt:j.default.Messages.EMBEDDED_ACTIVITIES_SHELF_CHARACTERS_ALT_TEXT}):null,u>300?(0,a.jsx)(o.Text,{className:L.heading,variant:u>550?"text-md/semibold":"text-sm/semibold",children:j.default.Messages.EMBEDDED_ACTIVITIES_VC_TILE_ENTRY_POINT_TITLE}):null,(0,a.jsx)("div",{className:i(L.activitiesContainer,{[L.activitiesContainerSmol]:u<=300}),children:c.map(e=>(0,a.jsx)(h.ActivitySuggestion,{channel:t,activityItem:e,aspectRatio:h.ActivitySuggestion.AspectRatio.SIXTEEN_BY_NINE,animatedDivClass:L.activitySuggestion},e.application.id))}),(0,a.jsxs)(o.Clickable,{className:L.checkboxContainer,onClick:function(){x.default.track(M.AnalyticEvents.VC_TILE_ACTIVITIES_ENTRY_POINT_CLOSED,{tile_type:"activity suggestion",close_type:"permanent",n_participants:d}),(0,C.markDismissibleContentAsDismissed)(r.DismissibleContent.VC_TILE_ACTIVITIES_ENTRY_POINT)},children:[(0,a.jsx)(g.default,{}),(0,a.jsx)(o.Text,{variant:"text-sm/medium",children:j.default.Messages.DONT_SHOW_AGAIN})]}),(0,a.jsx)(o.Clickable,{className:L.closeButtonContainer,onClick:function(){x.default.track(M.AnalyticEvents.VC_TILE_ACTIVITIES_ENTRY_POINT_CLOSED,{tile_type:"activity suggestion",close_type:"temporary",n_participants:d}),s()},children:(0,a.jsx)(S.default,{className:L.closeButton})})]})})}},395763:function(e,t,n){"use strict";n.r(t),n.d(t,{Avatars:function(){return O},default:function(){return P}}),n("222007");var a,l,s=n("37983");n("884691");var i=n("414456"),r=n.n(i),u=n("446674"),o=n("77078"),d=n("997289"),c=n("191225"),f=n("706508"),h=n("501260"),p=n("577261"),m=n("698372"),E=n("969380"),C=n("401207"),g=n("141962"),S=n("320817"),_=n("812204"),I=n("685665"),T=n("442939"),v=n("271938"),x=n("697218"),N=n("811305"),A=n("449008"),M=n("387111"),R=n("782340"),j=n("699996");(l=a||(a={}))[l.SMALL=0]="SMALL",l[l.MEDIUM=1]="MEDIUM",l[l.LARGE=2]="LARGE";let L=["embedded_background"];function O(e){let{avatarSize:t,guildId:n,channelId:a,users:l}=e,i=null!=t?t:o.AvatarSizes.SIZE_32,r=(0,o.getAvatarSize)(i);return(0,s.jsx)(N.default,{size:r,guildId:n,users:l,max:4,renderUser:e=>{if(null==e)return null;let t=M.default.getName(n,a,e);return(0,s.jsx)(o.TooltipContainer,{text:t,color:o.TooltipColors.GREY,children:(0,s.jsx)("img",{src:e.getAvatarURL(n,r),alt:t,className:j.avatar},e.id)},e.id)}})}function y(e){var t,n,a,l;let{participants:i,application:p,currentEmbeddedApplication:m,channel:E,width:C}=e;let S=(a=C)>400?2:a>300?1:0;let[_]=(l=C)>400?[o.AvatarSizes.SIZE_56,56]:l>300?[o.AvatarSizes.SIZE_32,32]:[o.AvatarSizes.SIZE_24,24],T=(0,u.useStateFromStoresArray)([x.default,v.default],()=>Array.from(i).map(e=>v.default.getId()===e?null:x.default.getUser(e)).filter(A.isNotNullish)),N=(0,u.useStateFromStores)([c.default],()=>c.default.getEmbeddedActivitiesForChannel(E.id).find(e=>e.application_id===p.id)),{analyticsLocations:L}=(0,I.default)(),y=(0,d.useAnalyticsContext)(),P=M.default.getName(E.getGuildId(),E.id,null==T?void 0:T[0]),b=(0,h.useEmbeddedActivityJoinability)({userId:null===(t=x.default.getCurrentUser())||void 0===t?void 0:t.id,activity:N,channelId:E.id,application:p}),D=b===h.EmbeddedActivityJoinability.CAN_JOIN,U=null!==(n=E.getGuildId())&&void 0!==n?n:void 0;return(0,s.jsxs)("div",{className:j.splash,children:[(0,s.jsx)(O,{avatarSize:_,guildId:U,channelId:E.id,users:T}),(0,s.jsx)(o.Text,{className:r(j.subheader,{[j.small]:0===S,[j.medium]:1===S}),variant:"text-sm/normal",children:T.length>1?R.default.Messages.EMBEDDED_ACTIVITIES_USERNAME_AND_OTHERS.format({username:P,count:T.length-1}):R.default.Messages.EMBEDDED_ACTIVITIES_IS_PLAYING.format({username:P})}),(0,s.jsx)(o.Text,{className:r(j.header,{[j.small]:0===S,[j.medium]:1===S}),variant:"text-sm/normal",children:p.name}),(0,s.jsx)("div",{className:j.buttons,children:D?(0,s.jsx)(o.Button,{onClick:function(e){e.stopPropagation(),null!=N&&(0,f.default)({activity:N,currentEmbeddedApplication:m,activityChannelId:E.id,locationObject:y.location,embeddedActivitiesManager:g.default,analyticsLocations:L})},size:function(e){switch(e){case 2:return o.Button.Sizes.LARGE;case 1:return o.Button.Sizes.MEDIUM;case 0:return o.Button.Sizes.SMALL}}(S),className:j.button,color:o.Button.Colors.PRIMARY,children:R.default.Messages.EMBEDDED_ACTIVITIES_JOIN_ACTIVITY}):null})]})}function P(e){let{participant:t,width:n,selected:a,interactible:l,channel:i}=e,{AnalyticsLocationProvider:r}=(0,I.default)(_.default.ACTIVITY_TILE),{id:u}=t,o=(0,p.default)(),d=(null==o?void 0:o.channelId)===i.id&&o.application_id===u,c=(0,m.default)(),[f]=(0,T.default)([u]),{url:h}=(0,E.default)({applicationId:u,names:L,size:1024}),g=!d;return(0,s.jsx)(r,{children:(0,s.jsx)("div",{className:j.container,children:(0,s.jsxs)(s.Fragment,{children:[!a&&d&&(0,s.jsx)(C.default,{className:j.iframe,embedId:(0,S.default)(i.id,u)}),g&&null!=f&&null!=h&&""!==h?(0,s.jsx)("img",{className:j.splashImage,alt:f.name,src:h}):null,!d&&!a&&null!=f&&(0,s.jsx)(y,{width:n,channel:i,participants:t.participants,application:f,currentEmbeddedApplication:c}),l||g?null:(0,s.jsx)("div",{className:j.clickShield})]})})})}},679243:function(e,t,n){"use strict";n.r(t),n.d(t,{CallTileFit:function(){return el},default:function(){return es}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("669491"),o=n("966900"),d=n("838048"),c=n("359902"),f=n("780624"),h=n("77078"),p=n("629109"),m=n("901582"),E=n("442939"),C=n("161306"),g=n("397443"),S=n("170152"),_=n("431923"),I=n("719761"),T=n("835040"),v=n("908583"),x=n("568088"),N=n("560289"),A=n("271938"),M=n("42887"),R=n("800762"),j=n("512264"),L=n("328275"),O=n("437825"),y=n("142303"),P=n("200639"),b=n("97347"),D=n("216947"),U=n("267675"),w=n("433487"),F=n("998564"),k=n("420145"),V=n("368121"),B=n("570511"),H=n("491519"),G=n("395763"),W=n("784981"),Y=n("729185"),z=n("715764"),K=n("144565"),Z=n("85208"),X=n("49111"),J=n("99795"),q=n("39141"),Q=n("353927"),$=n("782340"),ee=n("146789");let et=l.memo(e=>{var t,n,s,u,o;let{participant:d,onDoubleClick:c,onContextMenu:f,onClick:L,onMouseDown:y,onKeyDown:P,className:b,style:D,channel:U,width:w,inPopout:F,onVideoResize:k,inCall:V=!1,selected:B=!1,noBorder:K=!1,noVideoRender:et=!1,focused:en=!1,blocked:el=!1,fit:es=j.VideoStreamFit.CONTAIN,paused:ei=!1,pulseSpeakingIndicator:er=!1}=e,eu=l.useContext(v.IdleStateContext),[eo,ed]=l.useState(!1),ec=(0,r.useStateFromStores)([A.default],()=>A.default.getId()),ef=d.type===J.ParticipantTypes.ACTIVITY?null:null===(t=d.user)||void 0===t?void 0:t.id,[eh]=(0,E.default)(d.type===J.ParticipantTypes.ACTIVITY?[d.id]:[]),ep=(0,r.useStateFromStores)([S.default],()=>S.default.getEnabled()),em=(0,r.useStateFromStores)([M.default],()=>null!=ef&&M.default.isLocalVideoDisabled(ef,(0,C.default)(d.type)),[ef,d.type]),eE=(0,r.useStateFromStores)([M.default],()=>null!=ef?M.default.getVideoToggleState(ef,(0,C.default)(d.type)):X.VideoToggleState.NONE,[ef,d.type]);et=eE===X.VideoToggleState.AUTO_PROBING;let{speaking:eC,ringing:eg,hasVideo:eS}=(0,Z.default)(d,ec),e_=function(e,t,n){var a,l,s,i;let u=(0,r.useStateFromStoresObject)([R.default],()=>{var e,a,l;let s=R.default.getVoiceState(n,t.id);return{muted:null!==(e=null==s?void 0:s.mute)&&void 0!==e&&e,deafened:null!==(a=null==s?void 0:s.deaf)&&void 0!==a&&a,suppressed:null!==(l=null==s?void 0:s.suppress)&&void 0!==l&&l,voiceChannelId:null==s?void 0:s.channelId}}),o=(0,r.useStateFromStoresObject)([M.default],()=>e===t.id?{muted:!1,deafened:!1}:{muted:M.default.isLocalMute(t.id,Q.MediaEngineContextTypes.DEFAULT),localVideoDisabled:M.default.isLocalVideoDisabled(t.id,Q.MediaEngineContextTypes.DEFAULT),localVideoAutoDisabled:M.default.isLocalVideoAutoDisabled(t.id,Q.MediaEngineContextTypes.DEFAULT)},[e,t.id]);return{serverMuted:u.muted,serverDeafened:u.deafened,suppressed:u.suppressed,localMuted:o.muted,muted:null!==(s=t.type===J.ParticipantTypes.USER&&(null===(a=t.voiceState)||void 0===a?void 0:a.isVoiceMuted()))&&void 0!==s&&s,deafened:null!==(i=t.type===J.ParticipantTypes.USER&&(null===(l=t.voiceState)||void 0===l?void 0:l.isVoiceDeafened()))&&void 0!==i&&i}}(ec,d,U.getGuildId()),eI=d.type===J.ParticipantTypes.STREAM&&ef===ec,eT=(0,r.useStateFromStores)([x.default],()=>null!=ef?x.default.getEffectForUserId(ef):null),ev=(0,r.useStateFromStores)([R.default],()=>R.default.getVoicePlatformForChannel(U.id,null!=ef?ef:""));l.useEffect(()=>{ed(en)},[en]);let ex=l.useCallback(()=>{null!=ef&&p.default.toggleLocalMute(ef,Q.MediaEngineContextTypes.STREAM)},[ef]),eN=l.useCallback(e=>{null==L||L(d,e)},[L,d]),eA=l.useCallback(e=>{null==c||c(d,e)},[c,d]),eM=l.useCallback(e=>{null==f||f(d,e)},[f,d]),eR=null,ej=null,eL="";switch(d.type){case J.ParticipantTypes.STREAM:eR=(0,a.jsx)(Y.default,{participant:d,selected:B,width:w,fit:es,onVideoResize:k,paused:ei,inPopout:F,focused:en}),ej=(0,a.jsx)(Y.StreamTileIndicators,{participant:d,selected:B,width:w,focused:en,idle:eu}),eL=$.default.Messages.CALL_TILE_A11Y_LABEL_STREAM.format({streamerName:d.user.username});break;case J.ParticipantTypes.USER:eR=(0,a.jsx)(z.default,{channel:U,inCall:V,participant:d,fit:es,onVideoResize:k,paused:ei,selected:B,width:w,blocked:el,noVideoRender:et,pulseSpeakingIndicator:er}),eL=$.default.Messages.CALL_TILE_A11Y_LABEL_USER.format({username:d.user.username});break;case J.ParticipantTypes.ACTIVITY:eR=(0,a.jsx)(G.default,{interactible:en,participant:d,selected:B,channel:U,width:w}),eL=$.default.Messages.CALL_TILE_A11Y_LABEL_ACTIVITY.format({activityName:null==eh?void 0:eh.name});break;case J.ParticipantTypes.HIDDEN_STREAM:eR=(0,a.jsx)(Y.default,{participant:d,selected:B,width:w,fit:es,onVideoResize:k,paused:ei,inPopout:F,focused:en})}let eO=l.useRef(null);return(0,a.jsx)(m.default,{section:X.AnalyticsSections.VOICE_CHANNEL_TILE,children:(0,a.jsx)("div",{className:i(ee.wrapper,{[ee.ringing]:eg},b),children:(0,a.jsxs)(T.default,{shakeLocation:q.ShakeLocation.VOICE_USER,isShaking:eC,className:ee.tile,children:[(0,a.jsx)(W.default,{ref:eO,className:i(ee.tile,{[ee.noBorder]:K,[ee.noInteraction]:null==L,[ee.idle]:eu}),noBorder:K,style:D,participantUserId:ef,children:(0,a.jsxs)(h.ClickableContainer,{"aria-label":eL,className:ee.tileChild,onDoubleClick:eA,onContextMenu:eM,onClick:eN,onMouseDown:y,onKeyDown:P,focusProps:{offset:1},children:[d.type===J.ParticipantTypes.USER&&null!=ef&&null!=eT?(0,a.jsx)(N.default,{voiceChannelEffect:eT,onComplete:()=>(0,x.clearVoiceChannelEffectForUser)(ef),userId:ef}):null,d.type===J.ParticipantTypes.USER?(0,a.jsx)("div",{className:ee.voiceChannelEffectsContainer,children:(0,a.jsx)(g.default,{userId:ef,channelId:U.id,guildId:U.getGuildId(),containerDimensions:{width:null!==(u=null==eO?void 0:null===(n=eO.current)||void 0===n?void 0:n.clientWidth)&&void 0!==u?u:0,height:null!==(o=null==eO?void 0:null===(s=eO.current)||void 0===s?void 0:s.clientHeight)&&void 0!==o?o:0}})}):null,eR,K?null:(0,a.jsx)("div",{className:ee.indicators,children:ej}),B?(0,a.jsx)("div",{className:ee.selectedScreen,children:(0,a.jsx)(O.default,{className:ee.selectedIcon})}):null,d.type!==J.ParticipantTypes.ACTIVITY?(0,a.jsx)(ea,{focused:en,width:w,inCall:V,participantType:d.type,hasVideo:null!=eS&&eS,...e_,idle:eu,platform:ev,title:(0,H.default)(U,d),blocked:el,localVideoDisabled:em,videoToggleState:eE,hideAudioIcon:eI,onContextMenu:eM,onToggleMute:ex,participantUserId:ef}):null,d.type===J.ParticipantTypes.USER&&ep?(0,a.jsx)(_.default,{userId:d.id,channelId:U.id}):null,V&&!K?(0,a.jsx)("div",{className:i(ee.border,{[ee.voiceChannelEffect]:!en&&null!=eT,[ee.speaking]:eC&&!en})}):null]})}),(0,a.jsx)(I.default,{isFiring:eo,callTileRef:eO.current})]})})})});function en(e){let{participantType:t,platform:n,className:l}=e;if(t===J.ParticipantTypes.STREAM)return n===J.VoicePlatforms.XBOX?(0,a.jsx)(k.default,{className:l}):(0,a.jsx)(U.default,{className:l});switch(n){case J.VoicePlatforms.MOBILE:return(0,a.jsx)(D.default,{className:l});case J.VoicePlatforms.XBOX:return(0,a.jsx)(k.default,{className:l});case J.VoicePlatforms.PLAYSTATION:return(0,a.jsx)(F.default,{className:l});default:return null}}et.displayName="CallTile";let ea=l.memo(e=>{let{muted:t,deafened:n,localMuted:l,serverMuted:s,serverDeafened:p,idle:m,title:E,width:g,hasVideo:S,inCall:_,localVideoDisabled:I,videoToggleState:T,focused:v,blocked:x,hideAudioIcon:N,participantType:A,participantUserId:R,onContextMenu:j,onToggleMute:D,platform:U}=e,F=null,k=null,H=null,G=(0,K.isVideoCompact)(g),W=(0,K.isNamesCompact)(g),Y=(0,r.useStateFromStores)([M.default],()=>null!=R&&M.default.isLocalVideoAutoDisabled(R,(0,C.default)(A)),[R,A]),z=(0,h.useRedesignIconContext)().enabled;if(!N){if(l&&A===J.ParticipantTypes.STREAM&&S&&!v)F=(0,a.jsx)(h.Tooltip,{text:$.default.Messages.UNMUTE,children:e=>{let{onClick:t,...n}=e;return(0,a.jsx)(h.Clickable,{...n,onClick:e=>{e.stopPropagation(),null==t||t(),D()},className:i(ee.interactive),children:(0,a.jsx)(B.default,{})})}});else if(l||A!==J.ParticipantTypes.STREAM||!S||G||v){if(z){let e;p?e=o.HeadphonesDenyIcon:s?e=c.MicrophoneDenyIcon:n?e=d.HeadphonesSlashIcon:l?e=c.MicrophoneDenyIcon:t&&(e=f.MicrophoneSlashIcon),F=null!=e?(0,a.jsx)(e,{color:u.default.colors.WHITE}):null}else if(n||t||l){let e=n?P.default:b.default;F=(0,a.jsx)(e,{foreground:i({[ee.localMuteStrikethrough]:l&&!n})})}}else F=(0,a.jsx)(h.Tooltip,{text:$.default.Messages.MUTE,children:e=>{let{onClick:t,...n}=e;return(0,a.jsx)(h.Clickable,{...n,onClick:e=>{e.stopPropagation(),null==t||t(),D()},className:i(ee.interactive,ee.toggleMute),children:(0,a.jsx)(V.default,{})})}})}return _&&M.default.supports(Q.Features.VIDEO)||!S?_&&S&&I&&!Y&&(k=(0,a.jsx)(y.default,{foreground:ee.localMuteStrikethrough})):k=(0,a.jsx)(O.default,{}),A===J.ParticipantTypes.STREAM&&!v&&S&&(H=(0,a.jsx)(h.Tooltip,{text:$.default.Messages.OPTIONS,children:e=>{let{onClick:t,...n}=e;return(0,a.jsx)(h.Clickable,{...n,onClick:e=>{e.stopPropagation(),null==t||t(),j(e)},className:i(ee.status,ee.interactive),children:(0,a.jsx)(w.default,{})})}})),(0,a.jsxs)("div",{className:ee.overlayContainer,children:[(0,a.jsx)("div",{className:i(ee.overlayTop,{[ee.small]:g<195}),children:Y||T===X.VideoToggleState.AUTO_PROBING?m?(0,a.jsx)("div",{className:ee.status,children:(0,a.jsx)(y.default,{})}):(0,a.jsxs)("div",{className:i(ee.overlayTitle,ee.videoDisabledTitle),children:[(0,a.jsx)("div",{className:ee.status,children:(0,a.jsx)(y.default,{})}),(0,a.jsx)(h.Text,{variant:"text-sm/normal",className:ee.overlayTitleText,children:$.default.Messages.UNSTABLE_CONNECTION})]}):null}),(0,a.jsxs)("div",{className:i(ee.overlayBottom,{[ee.small]:g<195}),children:[W?(0,a.jsx)("div",{}):(0,a.jsxs)(h.Text,{className:i(ee.overlayTitle,{[ee.idle]:m}),color:"none",variant:"text-md/normal",children:[x?(0,a.jsx)("div",{className:ee.blocked,children:(0,a.jsx)(L.default,{className:ee.blockedIcon,color:u.default.unsafe_rawColors.RED_400.css})}):null,(0,a.jsx)(en,{participantType:A,platform:U,className:ee.titleIcon}),null!=E&&""!==E?(0,a.jsx)("span",{className:ee.overlayTitleText,children:E}):null]}),(0,a.jsxs)("div",{className:ee.statusContainer,children:[null!=k&&(0,a.jsx)("div",{className:ee.status,children:k}),null!=F&&(0,a.jsx)("div",{className:ee.status,children:F}),H]})]})]})});ea.displayName="CallTileOverlay";let el=j.VideoStreamFit;var es=et},876715:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("95410"),u=n("457112"),o=n("679243"),d=n("49111"),c=n("204050"),f=n("212029");let h="CameraPreviewPosition";function p(e){let{width:t,onContextMenuParticipant:n,height:s,channel:p,participants:m}=e,[E,C]=function(){let[e,t]=l.useState(()=>r.default.get(h,d.PictureInPicturePositions.BOTTOM_RIGHT));return[e,l.useCallback(e=>{r.default.set(h,e),t(e)},[])]}(),g=l.useRef(null),S=null==p.getGuildId()?70:50;return l.useLayoutEffect(()=>{var e;null===(e=g.current)||void 0===e||e.ensureIsInPosition()},[m.length]),(0,a.jsx)("div",{className:c.container,children:(0,a.jsx)(u.PictureInPictureWindow,{position:E,id:0,ref:g,onMove:(e,t)=>C(t),maxX:t,maxY:s,edgeOffsetTop:S,edgeOffsetBottom:70,edgeOffsetLeft:16,edgeOffsetRight:16,children:(0,a.jsx)("div",{className:c.tileContainer,children:m.map(e=>(0,a.jsx)(o.default,{participant:e,channel:p,onContextMenu:n,className:i(c.tile,f.elevationHigh),fit:o.CallTileFit.COVER,inCall:!0,inPopout:!1,width:160},e.id))})})})}},581389:function(e,t,n){"use strict";n.r(t),n.d(t,{handleToggleVideo:function(){return e_},GoLiveButton:function(){return eI},default:function(){return eN}}),n("222007");var a,l,s=n("37983"),i=n("884691"),r=n("414456"),u=n.n(r),o=n("627445"),d=n.n(o),c=n("907002"),f=n("446674"),h=n("77078"),p=n("629109"),m=n("987317"),E=n("990766"),C=n("901582"),g=n("244201"),S=n("191225"),_=n("372610"),I=n("812204"),T=n("685665"),v=n("713726"),x=n("705565"),N=n("754493"),A=n("234755"),M=n("858944"),R=n("191145"),j=n("598785"),L=n("266392"),O=n("458685"),y=n("338677"),P=n("76393"),b=n("261552"),D=n("374014"),U=n("479788"),w=n("375202"),F=n("16916"),k=n("534222"),V=n("147257"),B=n("109526"),H=n("550410"),G=n("124824"),W=n("213943"),Y=n("742683"),z=n("576242"),K=n("54727"),Z=n("785344"),X=n("954519"),J=n("719874"),q=n("116439"),Q=n("373469"),$=n("950104"),ee=n("42887"),et=n("568307"),en=n("18494"),ea=n("697218"),el=n("703370"),es=n("991170"),ei=n("999180"),er=n("830210"),eu=n("289180"),eo=n("244390"),ed=n("252234"),ec=n("696405"),ef=n("951691"),eh=n("19065"),ep=n("977347"),em=n("799808"),eE=n("727284"),eC=n("49111"),eg=n("99795"),eS=n("143561");function e_(e,t){if(ee.default.isVideoEnabled()===e)return;let n=()=>p.default.setVideoEnabled(e);e?(0,eE.default)(n,t):n()}function eI(e){let{channel:t,currentUser:n,exitFullScreen:a,canGoLive:l,hasPermission:r,disabled:u}=e,o=(0,g.useAppContext)(),d=(0,f.useStateFromStoresArray)([Q.default],()=>Q.default.getAllActiveStreams()),c=d.find(e=>e.ownerId===n.id),p=t.getGuildId(),m=i.useCallback(()=>{if(null==a||a(),!l)return(0,ep.default)();(0,em.default)(p,t.id,eC.AnalyticsPages.GUILD_CHANNEL)},[p,t.id,l,a]),C=(0,f.useStateFromStores)([et.default,el.default],()=>(0,w.default)(et.default,el.default)),S=(0,N.default)(),_=(0,x.default)()&&null!=C,I=()=>{_&&(null==c?(0,E.createBroadcastChannelOrStartStream)({channelId:t.id,pid:null==C?void 0:C.pid}):(0,v.startBroadcastForStream)((0,D.encodeStreamKey)(c),null==C?void 0:C.pid))},T=()=>{if(_){(0,M.openStartBroadcastConfirmModal)(I);return}if(l){m();return}(0,ep.default)()},A=()=>{if(S){(0,M.openStopBroadcastConfirmModal)(()=>(0,F.default)(c));return}(0,F.default)(c)},R=(e,t)=>{let{onClick:n,...a}=null!=e?e:{onClick:void 0},l=null!=c&&!S;return null!=c?(0,s.jsx)(X.default,{...a,centerButton:!0,className:eS.controlButton,onClick:A,isSelfStream:!0,onPopoutClick:l?n:null,popoutOpen:t,shouldShowTooltip:!t}):(0,s.jsx)(J.default,{...a,centerButton:!0,className:eS.controlButton,hasPermission:r,onClick:T,onPopoutClick:l?n:null,popoutOpen:t,shouldShowTooltip:!t,disabled:u})};return S?R():(0,s.jsx)(H.default,{children:(0,s.jsx)(h.Popout,{renderPopout:e=>{let{closePopout:a}=e;return(0,s.jsx)(G.default,{children:(0,s.jsx)(ef.default,{channel:t,currentUser:n,activeStreams:null!=c?[c]:[],handleGoLive:m,onClose:a,appContext:o})})},position:"top",align:"center",animation:h.Popout.Animation.FADE,children:(e,t)=>{let{...n}=e,{isShown:a}=t;return(0,s.jsx)("div",{children:R(n,a)})}})})}function eT(e){let{channel:t}=e,n=t.getGuildId(),a=(0,_.default)(n,t.id);return a?(0,s.jsx)("div",{className:eS.buttonContainer,children:(0,s.jsx)(ed.CenterControlTrayActivityButton,{channel:t})}):null}(l=a||(a={})).ACTIVITY="ACTIVITY",l.STREAM="STREAM",l.CALL="CALL",l.EVENT="EVENT",l.BROADCAST="BROADCAST";let ev=i.memo(function(e){let{connectedActivityApplicationId:t,currentUser:n,onDisconnectCall:a,channel:l}=e,r=(0,f.useStateFromStores)([R.default],()=>R.default.getSelectedParticipant(l.id)),{reducedMotion:u}=i.useContext(h.AccessibilityPreferencesContext),[o,d]=i.useState(!1),p=null==r?void 0:r.id,C=(0,f.useStateFromStores)([Q.default],()=>null!=p?Q.default.getActiveStreamForStreamKey(p):null,[p]),g=(null==r?void 0:r.type)===eg.ParticipantTypes.STREAM&&null!=C&&C.ownerId!==(null==n?void 0:n.id),S=(0,f.useStateFromStoresArray)([Q.default],()=>Q.default.getAllActiveStreamsForChannel(l.id).filter(e=>{let{ownerId:t}=e;return t!==(null==n?void 0:n.id)})),_=(0,k.useActiveEvent)(l.id),I=(0,N.useIsBroadcastingInChannel)(l.id),T=i.useCallback(()=>{if((null==r?void 0:r.type)===eg.ParticipantTypes.ACTIVITY&&r.id===t)return"ACTIVITY";if(g)return"STREAM";if(null!=_)return"EVENT";return"CALL"},[r,t,g,_]),[v,x]=i.useState(T()),M=(0,c.useSpring)({opacity:o?.2:1,transform:o&&!u.enabled?"scale(0.7)":"scale(1)",config:{mass:2,tension:o?600:1e3,friction:45,precision:.01,clamp:o},onRest:()=>{x(T()),d(!1)}});i.useEffect(()=>{let e=T();e!==v&&d(!0)},[v,T]);let j=i.useCallback(()=>{if(null!=C)(0,E.stopStream)((0,D.encodeStreamKey)(C));else for(let e of S)(0,E.stopStream)((0,D.encodeStreamKey)(e))},[S,C]),L=(e,t)=>{let i={centerButton:!0,className:eS.controlButton,popoutOpen:e};switch(v){case"ACTIVITY":if(null==r||null==n)return;return(0,s.jsx)(z.default,{...i,applicationId:r.id,color:"red",channelId:l.id,onPopoutClick:S.length>0?t:null});case"STREAM":return(0,s.jsx)(X.default,{...i,color:"red",onClick:j,onPopoutClick:S.length>1?t:null,isSelfStream:!1});case"CALL":return(0,s.jsx)(K.default,{...i,color:"red",onClick:()=>null==a?void 0:a(),onPopoutClick:S.length>0?t:null,channel:l});case"EVENT":return(0,s.jsx)(V.default,{channelId:l.id,onClick:()=>{m.default.disconnect(),null==a||a()}})}};return(0,s.jsx)(h.Popout,{renderPopout:e=>{let{closePopout:t}=e;return I?(0,s.jsx)(A.default,{onClose:t}):(0,s.jsx)(ef.default,{channel:l,currentUser:n,activeStreams:S,handleGoLive:eC.NOOP_NULL,hideSelfOptions:!0,onClose:t})},position:"top",align:"center",animation:h.Popout.Animation.FADE,children:(e,t)=>{let{onClick:n}=e,{isShown:a}=t;return(0,s.jsx)(c.animated.div,{style:M,children:L(a,n)})}})});function ex(e){let{channel:t,cameraUnavailable:n,hasCameraPermission:a,currentUser:l}=e,r=(0,g.useAppContext)(),{reachedLimit:o,limit:d}=(0,er.default)(t),c=i.useCallback(()=>{(0,eE.default)(()=>m.default.selectVoiceChannel(t.id,!0),r)},[t.id,r]),h=i.useCallback(()=>{m.default.selectVoiceChannel(t.id,!1)},[t.id]),p=i.useCallback(()=>{n?(0,eh.default)():c()},[n,c]),E=(0,f.useStateFromStores)([$.default],()=>{let e=$.default.getCall(t.id);return(null==e?void 0:e.ringing.includes(l.id))===!0});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.default,{enabled:!0,centerButton:!0,join:!0,color:"green",channelLimitReached:o,channelLimit:d,channel:t,cameraUnavailable:n,hasPermission:a,onCameraUnavailable:p,className:eS.controlButton,iconClassName:eS.joinIcon,onChange:c}),(0,s.jsx)(Y.default,{centerButton:!0,color:"green",channel:t,className:u(eS.controlButton,eS.lastButton),onClick:h}),E?(0,s.jsx)(W.default,{color:"red",channel:t,className:eS.controlButton}):null]})}var eN=function(e){let{channel:t,className:n,onDisconnectCall:a,exitFullScreen:l}=e,i=(0,f.useStateFromStores)([ea.default],()=>{let e=ea.default.getCurrentUser();return d(null!=e,"CenterControlTray: currentUser cannot be undefined"),e}),{cameraUnavailable:r,enabled:o}=(0,ei.default)(),c=(0,eu.default)(t),{suppress:p,selfMute:m,mute:E}=(0,eo.default)(t),{canGoLive:g}=(0,f.useStateFromStoresObject)([ee.default],()=>({canGoLive:(0,U.default)(ee.default)})),_=(0,b.default)(),v=(0,f.useStateFromStores)([P.default],()=>null!=P.default.getAwaitingRemoteSessionInfo()),x=null!=_,N=(0,f.useStateFromStores)([en.default],()=>{var e;return(null!==(e=null==_?void 0:_.channelId)&&void 0!==e?e:en.default.getVoiceChannelId())===t.id}),A=(0,j.default)(t,!0),M=(0,f.useStateFromStores)([S.default],()=>{let e=S.default.getSelfEmbeddedActivityForChannel(t.id);return null!=e?e.application_id:null}),{reachedLimit:R,limit:D}=(0,er.default)(t),{AnalyticsLocationProvider:w}=(0,T.default)(I.default.VOICE_CONTROL_TRAY);if(!N)return(0,s.jsx)(w,{children:(0,s.jsx)(ex,{channel:t,cameraUnavailable:r,hasCameraPermission:c,currentUser:i})});let F=es.default.can({permission:eC.Permissions.ADD_REACTIONS,user:i,context:t})&&!t.isPrivate()&&!A;return(0,s.jsx)(w,{children:(0,s.jsxs)(C.default,{section:eC.AnalyticsSections.VOICE_CONTROL_TRAY,children:[(0,s.jsx)("div",{className:eS.eventPromptsContainer,children:(0,s.jsx)(B.default,{channelId:t.id})}),(0,s.jsxs)("div",{className:u(eS.wrapper,n),children:[!x&&(0,s.jsx)(h.Popout,{renderPopout:e=>{let{closePopout:t}=e;return(0,s.jsx)(G.default,{children:(0,s.jsx)(O.default,{onClose:t})})},position:"top",align:"center",animation:h.Popout.Animation.FADE,children:(e,t)=>{let{onClick:n}=e,{isShown:a}=t;return(0,s.jsx)(q.default,{centerButton:!0,hasPermission:c,className:eS.controlButton,enabled:o,cameraUnavailable:r,onChange:e_,onCameraUnavailable:eh.default,channelLimitReached:R,channelLimit:D,popoutOpen:a,onPopoutClick:n})}}),!x&&(0,s.jsx)(eT,{channel:t}),!x&&(0,s.jsx)(eI,{channel:t,currentUser:i,exitFullScreen:l,canGoLive:g,hasPermission:c}),(0,s.jsx)(h.Popout,{renderPopout:e=>{let{closePopout:t}=e;return(0,s.jsx)(G.default,{children:(0,s.jsx)(L.default,{onClose:t,renderInputDevices:!0,renderOutputDevices:!0,renderInputModes:!0})})},align:"center",position:"top",animation:h.Popout.Animation.FADE,children:(e,t)=>{let{onClick:n}=e,{isShown:a}=t;return(0,s.jsx)(Z.default,{centerButton:!0,onPopoutClick:x?null:n,className:eS.controlButton,selfMute:m,serverMute:E,suppress:p,popoutOpen:a,awaitingRemote:v,onClick:()=>(0,y.default)(E,p)})}}),F&&!x?(0,s.jsx)("div",{className:eS.buttonContainer,children:(0,s.jsx)(ec.default,{channel:t})}):null,(0,s.jsx)(ev,{connectedActivityApplicationId:M,currentUser:i,channel:t,onDisconnectCall:a})]})]})})}},252234:function(e,t,n){"use strict";n.r(t),n.d(t,{CenterControlTrayActivityButton:function(){return L}}),n("424973");var a=n("37983"),l=n("884691"),s=n("446674"),i=n("151426"),r=n("77078"),u=n("997289"),o=n("244201"),d=n("886860"),c=n("614175"),f=n("903178"),h=n("296998"),p=n("926128"),m=n("191225"),E=n("426631"),C=n("380691"),g=n("943349"),S=n("702173"),_=n("801852"),I=n("10524"),T=n("478272"),v=n("685665"),x=n("509802"),N=n("788220"),A=n("863590"),M=n("49111"),R=n("994428"),j=n("143561");function L(e){let{channel:t}=e,{enableCenterControlTrayMiniShelf:n}=d.ActivitiesAutoSuggestExperiment.useExperiment({location:"7152d0_1"},{autoTrackExposure:!0}),L=(0,s.useStateFromStores)([m.default],()=>m.default.isLaunchingActivity()),O=(0,g.useEmbeddedActivityLaunchability)(t.id),y=(0,g.getEmbeddedActivityLaunchabilityLabel)(O),P=O!==g.EmbeddedActivityLaunchability.CAN_LAUNCH||L,{isHovered:b,setIsHovered:D,onMouseEnter:U,onMouseLeave:w}=(0,N.default)(200,300),F=(0,C.useShowActivityIndicator)(),{enabled:k}=c.ActivitiesGameNightExperiment.useExperiment({location:"7152d0_2"},{autoTrackExposure:!1}),V=F&&!k,B=(0,E.default)({channelId:t.id}),H=!P&&n,G=l.useCallback(e=>{"focus"!==e.type&&U()},[U]),W=(0,u.useAnalyticsContext)(),Y=(0,o.useAppContext)(),z=Y===M.AppContext.POPOUT,{analyticsLocations:K}=(0,v.default)(),Z=l.useCallback(()=>{(0,T.default)({channel:t,guildId:t.guild_id,locationObject:W.location,openInPopout:z,analyticsLocations:K})},[W.location,K,t,z]),X=[];n&&!P&&X.push(i.DismissibleContent.ACTIVITIES_MINI_SHELF_SPARKLES);let J=(0,S.default)(t.id);J&&!P&&X.push(i.DismissibleContent.ACTIVITY_GDM_ROCKET_SPARKLE);let q=(0,f.useIsWatchTogetherPromoEnabled)(),Q=(0,h.useIsWatchTogetherPromoWeek1SparklesEnabled)(),$=(0,p.useIsWatchTogetherPromoWeek2SparklesEnabled)();return q&&Q&&!P&&X.push(i.DismissibleContent.ACTIVITIES_WATCH_TOGETHER_APRIL_2023_WEEK_1_SPARKLES),q&&$&&!P&&X.push(i.DismissibleContent.ACTIVITIES_WATCH_TOGETHER_APRIL_2023_WEEK_2_SPARKLES),(0,a.jsx)(x.default,{contentTypes:X,children:e=>{let{visibleContent:n,markAsDismissed:l}=e;return(0,a.jsx)(r.Popout,{fixed:!0,shouldShow:b,animationPosition:"bottom",position:"bottom",align:"center",spacing:16,onRequestClose:()=>{D(!1)},renderPopout:e=>{let{closePopout:n,setPopoutRef:s}=e;return H?(0,a.jsx)(_.ActivitiesMiniShelf,{ref:s,channel:t,closePopout:n,onMouseEnter:U,onMouseLeave:w,isHovered:b,onClick:()=>l(R.ContentDismissActionType.UNKNOWN)}):(0,a.jsx)(a.Fragment,{})},children:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.default,{disabled:P,"aria-label":y,label:H?void 0:y,isActivityActive:B||b,className:j.controlButton,onClick:()=>{Z(),(n===i.DismissibleContent.ACTIVITIES_MINI_SHELF_SPARKLES||n===i.DismissibleContent.ACTIVITY_GDM_ROCKET_SPARKLE||n===i.DismissibleContent.ACTIVITIES_WATCH_TOGETHER_APRIL_2023_WEEK_1_SPARKLES||n===i.DismissibleContent.ACTIVITIES_WATCH_TOGETHER_APRIL_2023_WEEK_2_SPARKLES)&&l(R.ContentDismissActionType.UNKNOWN)},onMouseEnter:G,onMouseLeave:w}),V?(0,a.jsx)(I.FreeActivityIndicatorDot,{top:4,right:10,size:12,maskColor:I.MaskColor.BLACK}):null]})})}})}},696405:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("174727"),d=n("788220"),c=n("515496"),f=n("568088"),h=n("624567"),p=n("49111"),m=n("143561"),E=e=>{let{channel:t,className:n}=e,{isHovered:s,setIsHovered:E,onMouseEnter:C,onMouseLeave:g,cancelTimers:S}=(0,d.default)(200,300),[_,I]=l.useState(!1),T=(0,r.useStateFromStores)([f.default],()=>f.default.effectCooldownEndTime),v=l.useMemo(()=>null!=T?(T.getTime()-Date.now())/1e3:0,[T]),{seconds:x}=(0,o.default)(null!=T?T:new Date),N=x>0,A=l.useCallback(e=>{if("focus"!==e.type)!_&&!N&&C()},[_,N,C]),M=l.useCallback(()=>{!_&&g()},[g,_]),R=l.useCallback((e,t)=>{S(),I(!_),(!s||_)&&(null==t||t(e))},[S,_,s]),j=s||_;return(0,a.jsx)(u.Popout,{shouldShow:j,animationPosition:"bottom",position:"bottom",align:"center",spacing:16,onRequestClose:()=>{E(!1),I(!1)},renderPopout:e=>{let{closePopout:n}=e;return(0,a.jsx)(h.default,{isHovered:j,channel:t,closePopout:n,onMouseEnter:C,onMouseLeave:M,onFocus:()=>I(!0)})},children:e=>{let{onClick:t,onKeyDown:l}=e;return(0,a.jsx)(c.default,{isCenterButton:!0,totalCooldownSeconds:v,remainingCooldownSeconds:x,className:i(m.controlButton,n),onKeyDown:e=>{var t,n;return t=e,n=l,void(t.keyCode===p.KeyboardKeys.ENTER&&t.keyCode===p.KeyboardKeys.SPACE&&R(t,n))},onClick:e=>{R(e,t)},onMouseEnter:A,onMouseLeave:M,isActive:j})}})}},624567:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983"),l=n("884691"),s=n("124824"),i=n("257407"),r=e=>{let{isHovered:t,closePopout:n,onMouseEnter:r,onMouseLeave:u,onFocus:o,channel:d}=e;return l.useEffect(()=>{!t&&n()},[n,t]),(0,a.jsx)(s.default,{children:(0,a.jsx)("div",{onMouseEnter:r,onMouseLeave:u,children:(0,a.jsx)(i.default,{channel:d,closePopout:n,onFocus:o})})})}},103738:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("737960"),u=n("141681"),o=n("271938"),d=n("145131"),c=n("659500"),f=n("119106"),h=n("573540"),p=n("972155"),m=n("732961"),E=n("153984"),C=n("49111"),g=n("99795"),S=n("111647"),_=(0,r.default)(e=>{let{participants:t,filteredParticipants:n,selectedParticipant:s,participantsVersion:r,layout:_,onSelectParticipant:I,onContextMenuParticipant:T,onFullscreenParticipant:v,channel:x,hasConnectPermission:N,className:A,inCall:M,showParticipants:R=!0,paused:j=!1,width:L,height:O,idle:y,mode:P,popoutWindow:b,awaitingRemoteSessionInfo:D}=e;l.useEffect(()=>{c.ComponentDispatch.dispatch(C.ComponentActions.REMEASURE_TARGET)},[L,O]);let U=l.useMemo(()=>n.filter(e=>e.type!==g.ParticipantTypes.ACTIVITY||!e.participants.has(o.default.getId())),[n,r]);if((null==D?void 0:D.channelId)===x.id)return(0,a.jsx)(h.default,{height:O});if((null==x?void 0:x.isGuildVocal())&&!M)return(0,a.jsx)(f.default,{channel:x,participants:t,hasConnectPermission:N});if(P===C.ChannelModes.VOICE)return(0,a.jsx)(u.default,{guildId:x.guild_id,width:L,className:S.voiceCallWrapper,participants:t,onContextMenu:T});if(n=M?n:t,null==s)return 0===n.length?(0,a.jsx)(E.default,{className:i(S.videoGrid,S.hiddenParticipants),channelId:x.id,width:L}):(0,a.jsx)(d.default,{className:S.videoGridWrapper,justify:d.default.Justify.CENTER,align:d.default.Align.CENTER,children:(0,a.jsx)(p.default,{channel:x,className:S.videoGrid,participants:U,totalNumberOfParticipants:t.length,onClick:I,onDoubleClick:v,onContextMenu:T,paused:j,inCall:M})});return(0,a.jsx)(m.default,{onFullscreenParticipant:v,onContextMenuParticipant:T,onSelectParticipant:I,selectedParticipant:s,filteredParticipants:U,participants:t,popoutWindow:b,className:A,idle:y,height:O,width:L,layout:_,inCall:M,channel:x,showParticipants:R})})},842044:function(e,t,n){"use strict";n.r(t),n.d(t,{getPipParticipants:function(){return i}});var a=n("449008"),l=n("830251"),s=n("99795");function i(e,t,n){return null==t||t.type===s.ParticipantTypes.ACTIVITY?[]:[t.type===s.ParticipantTypes.STREAM?e.find(e=>e.type===s.ParticipantTypes.USER&&e.id===(null==t?void 0:t.user.id)&&e.id!==n&&(0,l.default)(e)):null,t.type===s.ParticipantTypes.USER?e.find(e=>e.type===s.ParticipantTypes.STREAM&&e.user.id===(null==t?void 0:t.user.id)&&null!=e.streamId):null,t.id!==n?e.find(e=>e.type===s.ParticipantTypes.USER&&e.id===n&&(0,l.default)(e)):null].filter(a.isNotNullish)}},119106:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983"),l=n("884691"),s=n("77078"),i=n("987317"),r=n("233322"),u=n("157186"),o=n("491519"),d=n("679243"),c=n("99795"),f=n("782340"),h=n("704414"),p=function(e){var t,n;let{participants:p,channel:m,hasConnectPermission:E}=e,C=p.filter(c.isUserParticipant),g=(0,u.useShowMemberVerificationGate)(m.guild_id),S=l.useCallback(()=>{g?(0,r.openMemberVerificationModal)(m.guild_id,()=>i.default.selectVoiceChannel(m.id)):i.default.selectVoiceChannel(m.id)},[m.id,m.guild_id,g]),_=4===C.length?2:3;return(0,a.jsxs)("div",{className:h.container,children:[(0,a.jsx)("div",{className:h.tiles,style:{maxWidth:168*_},children:C.slice(0,5).map(e=>(0,a.jsx)(d.default,{participant:e,channel:m,className:h.tile,paused:!0,inCall:!0,noVideoRender:!0,inPopout:!1,width:48},e.id))}),(0,a.jsx)(s.Heading,{className:h.channelName,variant:"heading-xxl/semibold",children:m.name}),(0,a.jsx)("div",{className:h.participantsRow,children:(0,a.jsx)(s.Text,{color:"header-secondary",variant:"text-sm/normal",children:(t=m,0===(n=C).length?f.default.Messages.CURRENTLY_IN_VOICE_EMPTY:1===n.length?f.default.Messages.CURRENTLY_IN_VOICE_1.format({a:(0,o.default)(t,n[0])}):2===n.length?f.default.Messages.CURRENTLY_IN_VOICE_2.format({a:(0,o.default)(t,n[0]),b:(0,o.default)(t,n[1])}):n.length>2?f.default.Messages.CURRENTLY_IN_VOICE_2_N.format({a:(0,o.default)(t,n[0]),b:(0,o.default)(t,n[1]),n:n.length-2}):void 0)})}),(0,a.jsx)(s.Button,{disabled:!E,className:h.joinButton,color:E?s.Button.Colors.GREEN:s.Button.Colors.PRIMARY,onClick:S,size:s.Button.Sizes.MEDIUM,children:E?f.default.Messages.JOIN_VOICE:f.default.Messages.CHANNEL_LOCKED_SHORT})]})}},573540:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("446674"),r=n("77078"),u=n("206230"),o=n("700507"),d=n("491605"),c=n("782340"),f=n("594180");function h(e){let{height:t}=e,l=(0,i.useStateFromStores)([u.default],()=>u.default.useReducedMotion);return(0,a.jsxs)("div",{className:f.root,children:[(0,a.jsx)(d.default,{importData:()=>n.el("210565").then(n.t.bind(n,"210565",19)).then(e=>{let{default:t}=e;return t}),shouldAnimate:!l,className:s(f.art,{[f.hidden]:t<=280})}),(0,a.jsx)(r.Heading,{className:f.header,variant:"heading-md/bold",children:c.default.Messages.PLAYSTATION_TRANSFERRING}),(0,a.jsx)(r.Text,{variant:"text-md/normal",color:"header-secondary",children:c.default.Messages.CONSOLE_TRANSFERRING_SUBTITLE.format({onCancel:o.disconnectRemote})})]})}},972155:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}}),n("424973");var a=n("37983"),l=n("884691"),s=n("759843"),i=n("446674"),r=n("151426"),u=n("244201"),o=n("191225"),d=n("860345"),c=n("117582"),f=n("943349"),h=n("428958"),p=n("191145"),m=n("393171"),E=n("242757"),C=n("305961"),g=n("957255"),S=n("466079"),_=n("444657"),I=n("679243"),T=n("832897"),v=n("308419"),x=n("49111"),N=n("740726");function A(e){let{participants:t,onClick:n,onDoubleClick:A,onContextMenu:M,channel:R,className:j,inCall:L,totalNumberOfParticipants:O,paused:y=!1}=e,P=(0,u.useAppContext)(),b=P===x.AppContext.POPOUT,D=(0,i.useStateFromStores)([C.default],()=>C.default.getGuild(R.guild_id),[R.guild_id]),{dismissedActivityEntryPointTileChannel:U}=(0,T.useChannelCallVideoGridStore)(),w=(0,i.useStateFromStores)([p.default],()=>p.default.getUserParticipantCount(R.id),[R]),F=l.useCallback(()=>{T.useChannelCallVideoGridStore.setState({dismissedActivityEntryPointTileChannel:R.id})},[R.id]);l.useEffect(()=>{null!=U&&R.id!==U&&T.useChannelCallVideoGridStore.setState({dismissedActivityEntryPointTileChannel:null})},[R.id,U]);let k=(0,i.useStateFromStores)([g.default],()=>R.isPrivate()||(0,E.canViewInviteModal)(g.default,D,R),[D,R]),V=(null==D?void 0:D.afkChannelId)===R.id,B=R.userLimit<=0||R.userLimit>1,{vcTileActivityExperimentType:H}=c.VcTileActivitiesEntryPointExperiment.useExperiment({location:"8711e9_1"},{autoTrackExposure:!1});R.isGuildVoice()&&c.VcTileActivitiesEntryPointExperiment.trackExposure({location:"8711e9_2"});let G=(0,i.useStateFromStores)([o.default],()=>o.default.getEmbeddedActivitiesForChannel(R.id).length<=0),W=(0,m.useIsDismissibleContentTypeDismissed)(r.DismissibleContent.VC_TILE_ACTIVITIES_ENTRY_POINT),Y=(0,f.useEmbeddedActivityLaunchability)(R.id),z=Y!==f.EmbeddedActivityLaunchability.CAN_LAUNCH,K=null!=U&&U===R.id,{enabled:Z}=d.PaxVcTileActivitiesExperiment.useExperiment({location:"8711e9_3"},{autoTrackExposure:!1}),X=t.map(e=>t=>(0,a.jsx)(I.default,{participant:e,channel:R,className:N.tile,paused:y,onClick:n,onDoubleClick:A,onContextMenu:M,inCall:L,width:t,inPopout:b},e.id));(0,h.default)({type:s.ImpressionTypes.VIEW,name:s.ImpressionNames.CHANNEL_CALL_VIDEO_GRID_VIEW,properties:{total_participants:O,can_invite:k,is_afk_channel:V,channel_user_limit:R.userLimit}},{trackOnInitialLoad:!0},[]),null!=D&&!V&&(Z?X.push(e=>(0,a.jsx)(_.ActivityEntryPointTile,{channel:R,guild:D,width:e,inPopout:b,handleClose:F,userParticipantCount:w})):(H!==c.VcTileActivityExperimentType.ONE_OR_TWO_USERS||2!==w)&&(H!==c.VcTileActivityExperimentType.ANY_NUMBER_OF_USERS||!(w>=2))||!G||z||W||K?B&&1===w&&k&&([c.VcTileActivityExperimentType.ONE_OR_TWO_USERS,c.VcTileActivityExperimentType.ANY_NUMBER_OF_USERS].includes(H)&&G&&!z?X.push(e=>(0,a.jsx)(_.ActivityEntryPointTile,{channel:R,guild:D,width:e,inPopout:b,handleClose:F,userParticipantCount:w})):X.push(e=>(0,a.jsx)(v.default,{width:e,channel:R,guild:D,inPopout:b}))):X.push(e=>(0,a.jsx)(_.ActivityEntryPointTile,{channel:R,guild:D,width:e,inPopout:b,handleClose:F,userParticipantCount:w})));let J=l.useCallback(e=>{var n,a;return null!==(a=null===(n=t[e])||void 0===n?void 0:n.id)&&void 0!==a?a:"empty-tile"},[t]);return(0,a.jsx)(S.default,{className:j,keyExtractor:J,paddingTop:64,paddingBottom:64,children:X})}},832897:function(e,t,n){"use strict";n.r(t),n.d(t,{useChannelCallVideoGridStore:function(){return l}});var a=n("308503");let l=(0,a.default)(()=>({dismissedActivityEntryPointTileChannel:null}))},308419:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("77078"),s=n("784981"),i=n("607391"),r=n("49111"),u=n("782340"),o=n("334626"),d=n("425643");function c(e){let{channel:t,guild:c,width:f,inPopout:h}=e;return(0,a.jsx)(s.default,{className:o.root,children:(0,a.jsx)(i.default,{artURL:d,size:(0,i.getSizeForWidth)(f),header:u.default.Messages.STREAM_SINGLE_PERSON_BODY,onCTAClick:()=>(0,l.openModalLazy)(async()=>{let{default:e}=await n.el("310688").then(n.bind(n,"310688"));return n=>(0,a.jsx)(e,{...n,guild:c,channel:t,source:r.InstantInviteSources.CHANNEL_CALL})},{contextKey:h?l.POPOUT_MODAL_CONTEXT:l.DEFAULT_MODAL_CONTEXT}),callToAction:u.default.Messages.INSTANT_INVITE})})}},732961:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("907002"),u=n("84339"),o=n("109489"),d=n("271938"),c=n("42887"),f=n("944832"),h=n("659500"),p=n("679243"),m=n("876715"),E=n("842044"),C=n("329515"),g=n("49111"),S=n("99795"),_=n("111647"),I=n("542377");let T=16/9,v=8+C.PARTICIPANTS_HEIGHT;function x(e){let t,{onSelectParticipant:n,onContextMenuParticipant:s,onFullscreenParticipant:x,participants:N,filteredParticipants:A,popoutWindow:M,inCall:R,channel:j,selectedParticipant:L,showParticipants:O=!0,className:y,paused:P,width:b,height:D,layout:U,idle:w}=e,F=null!=M,k=c.default.getVideoComponent(),V=d.default.getId(),[B,H]=l.useState(null),[G,W]=l.useState(!0),[Y,z]=l.useState(!1),K=L.type===S.ParticipantTypes.ACTIVITY,Z=!K&&null!=L.streamId,X=Z&&null!=B&&B.width>0&&B.height>0?B.width/B.height:T,J=D<=2*v+144,q=O&&!J,Q=(0,u.default)(q),$=0;(K||q)&&($+=72),K&&!q&&($+=48),q&&($+=.5*v+8);let ee=D-2*$,et=ee*X,en=Math.floor(Math.min(b,et)/X),ea=D>b/X+72+v+8,el=!q&&!K;t=el?40+Math.max(0,72-(D-en)/2):q?-16:-8,l.useEffect(()=>{let e=setTimeout(()=>{W(!1)},250);return()=>{clearTimeout(e)}},[]);let es=(0,r.useSpring)({value:q?1:0,delay:ea||!q?0:100,config:{...r.config.stiff,clamp:!0},onStart:()=>z(!0),onChange:()=>h.ComponentDispatch.dispatch(g.ComponentActions.REMEASURE_TARGET),onRest:()=>{z(!1),h.ComponentDispatch.dispatch(g.ComponentActions.REMEASURE_TARGET)}}),ei=(0,r.useSpring)({value:q?1:0,config:{...r.config.stiff,clamp:!0}}),er=(0,r.useSpring)({value:et,config:{...r.config.stiff,clamp:!0},immediate:Q===q&&ei.value.idle}),eu=(0,r.useSpring)({value:t,config:{...r.config.stiff,clamp:!0}}),eo=(0,r.useTransition)(L,{keys:e=>null==e?void 0:e.id,config:{...r.config.stiff,clamp:!0},initial:null,from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),ed=l.useCallback(e=>{H(e),W(!1)},[]),ec=q||P?[]:(0,E.getPipParticipants)(N,L,V),{visibleParticipants:ef,participantTileWidth:eh}=(0,C.useVisibleParticipants)(b,A);return(0,a.jsxs)("div",{className:i(I.root,_.flexCenter,y),children:[(0,a.jsxs)("div",{className:I.tileWrapper,style:{opacity:Z&&G?0:1},children:[(0,a.jsxs)(r.animated.div,{className:I.videoFrame,style:{top:ei.value.to(e=>-e*v/2)},children:[(0,a.jsx)(r.animated.div,{style:{width:er.value},className:I.videoWrapper,children:(0,a.jsx)(f.default,{className:_.videoSizer,aspectRatio:X,children:eo((e,t,l)=>{let{key:i}=l;return null!=t?(0,a.jsx)(r.animated.div,{className:_.videoWrapperAnimated,style:e,children:(0,a.jsx)(p.default,{focused:!0,noBorder:et>=b||ee>=D,channel:j,className:_.focusedVideo,videoComponent:k,paused:P,width:b,participant:t,onClick:n,onDoubleClick:x,onContextMenu:s,onVideoResize:ed,inCall:R,inPopout:F})},i):null})})}),J||U===g.ChannelLayouts.MINIMUM||U===g.ChannelLayouts.NORMAL?null:(0,a.jsx)(r.animated.div,{className:i(I.actionRow,{[I.idle]:w}),style:{bottom:eu.value},children:(0,a.jsx)(o.default,{channelId:j.id,isParticipantsOpen:O,isVertical:!0})})]}),(0,a.jsx)(r.animated.div,{className:I.participantsWrapperAnimated,style:{translateY:es.value.to(e=>e*v/2),opacity:es.value,visibility:es.value.to(e=>0===e?"hidden":"visible")},children:(0,a.jsx)(C.default,{channel:j,onClick:n,onContextMenu:s,onDoubleClick:x,participants:ef,participantTileWidth:eh,selectedParticipantId:L.id,inCall:R,paused:P||Y||!O,popoutWindow:M})})]}),ec.length>0?(0,a.jsx)(m.default,{onContextMenuParticipant:s,width:b,height:D,channel:j,participants:ec}):null]})}},329515:function(e,t,n){"use strict";n.r(t),n.d(t,{PARTICIPANTS_HEIGHT:function(){return f},useVisibleParticipants:function(){return m},default:function(){return E}}),n("222007"),n("424973");var a=n("37983"),l=n("884691"),s=n("917351"),i=n("246846"),r=n("271938"),u=n("449008"),o=n("679243"),d=n("99795"),c=n("987162");let f=112,h=16/9*f+8;function p(e){var t;let n=r.default.getId();return e.type===d.ParticipantTypes.USER&&e.user.id===n&&(null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)}function m(e,t){let[n,a]=l.useState(Date.now());l.useEffect(()=>{let e=setTimeout(()=>{a(Date.now())},1e4);return()=>{clearTimeout(e)}},[t]);let r=l.useRef({}),{visibleParticipants:o,participantTileWidth:c}=l.useMemo(()=>{let n=Date.now(),a=(0,s.sortBy)(t,e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();switch(e.type){case d.ParticipantTypes.ACTIVITY:return"\x00".concat(e.sortKey);case d.ParticipantTypes.HIDDEN_STREAM:case d.ParticipantTypes.STREAM:return"\x01".concat((0,i.default)(e.userNick,e.user));case d.ParticipantTypes.USER:var n;let a="\x05";return e.speaking?a="\x02":t-e.lastSpoke<1e4?a="\x03":(null===(n=e.voiceState)||void 0===n?void 0:n.selfVideo)&&(a="\x04"),"".concat(a).concat(function(e){let t=String(864e13).length;return String(864e13-e).padStart(t,"0")}(e.lastSpoke)).concat((0,i.default)(e.userNick,e.user))}})(e,n)),[l,o]=(0,s.partition)(a,d.isStreamParticipant),c=o.findIndex(p),f=null;-1!==c&&(f=o[c],o.splice(c,1));let m=null!=f?e-h-8:e,E=Math.max(0,Math.min(Math.floor((m-8)/132),12,t.length)),C=Math.min((m-8)/E-8,h),g=Math.max(0,E-l.length),S=l.slice(0,E),_=o.slice(0,g),I=Array(g);if(g>0){let e=[];for(let t of _){let n=r.current[t.id];null!=n&&n<g?I[n]=t:e.push(t)}for(let t=0;t<I.length;t++){if(null!=I[t])continue;let n=e.shift();if(null==n)break;I[t]=n}}let T=I.filter(u.isNotNullish),v=(0,s.keyBy)((0,s.range)(T.length),e=>T[e].id);r.current=v;let x=[...S,...T];return null!=f&&x.push(f),{visibleParticipants:x,participantTileWidth:C}},[e,t,n]);return{visibleParticipants:o,participantTileWidth:c}}function E(e){let{participants:t,participantTileWidth:n,selectedParticipantId:l,onDoubleClick:s,onContextMenu:i,onClick:r,channel:u,inCall:d,popoutWindow:f,paused:m=!1}=e,E=null!=f;return(0,a.jsx)("div",{className:c.root,children:t.map(e=>{if(null==e)return null;let t=p(e);return(0,a.jsx)("div",{className:c.tileSizer,style:t?{flexShrink:0}:void 0,children:(0,a.jsx)(o.default,{participant:e,selected:l===e.id,channel:u,className:c.tile,fit:o.CallTileFit.COVER,onClick:r,onDoubleClick:s,onContextMenu:i,width:t?h:n,inCall:d,paused:m,inPopout:E})},e.id)})})}},486030:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("627445"),r=n.n(i),u=n("446674"),o=n("77078"),d=n("398604"),c=n("331759"),f=n("305961"),h=n("957255"),p=n("49111"),m=n("782340"),E=n("134152");function C(e){var t,l;let{stream:i,applicationId:C,channel:g,exitFullScreen:S,appContext:_,analyticsLocation:I,className:T,...v}=e,x=null==g?void 0:g.getGuildId(),N=null==g?void 0:g.id,A=(0,u.useStateFromStores)([f.default],()=>null!=x?f.default.getGuild(x):null,[x]),M=(0,u.useStateFromStores)([d.default],()=>d.default.getActiveEventByChannel(N),[N]);if(t=A,l=g,!(null!=t&&null!=l&&h.default.can(p.Permissions.CREATE_INSTANT_INVITE,l)))return null;let R=m.default.Messages.INSTANT_INVITE;return null!=i?R=m.default.Messages.INVITE_STREAM_HEADER:null!=C&&(R=m.default.Messages.EMBEDDED_ACTIVITIES_INVITE_TO_ACTIVITY),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Button,{size:o.Button.Sizes.SMALL,color:E.buttonColor,onClick:()=>{r(null!=A,"guild cannot be null"),r(null!=g,"channel cannot be null"),!function(e){let{guild:t,channel:l,streamUserId:s,applicationId:i,appContext:r,exitFullScreen:u,analyticsLocation:d,guildScheduledEvent:c}=e;null==u||u(),(0,o.openModalLazy)(async()=>{let{default:e}=await n.el("310688").then(n.bind(n,"310688"));return n=>(0,a.jsx)(e,{...n,guild:t,channel:l,streamUserId:s,applicationId:i,analyticsLocation:d,source:l.isGuildStageVoice()?p.InstantInviteSources.STAGE_CHANNEL:p.InstantInviteSources.STREAM_INVITE,guildScheduledEvent:c})},{modalKey:"stream-invite-modal",contextKey:r===p.AppContext.POPOUT?o.POPOUT_MODAL_CONTEXT:o.DEFAULT_MODAL_CONTEXT})}({guild:A,channel:g,streamUserId:null==i?void 0:i.ownerId,applicationId:C,appContext:_,exitFullScreen:S,analyticsLocation:I,guildScheduledEvent:M})},className:s(T,E.textButton),...v,children:R}),(0,a.jsx)(c.default,{channel:g,stream:i,appContext:_,className:s(T,E.iconButton),exitFullScreen:S,analyticsLocation:I,guildScheduledEvent:M})]})}},153984:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("255397"),s=n("607391"),i=n("782340");let r=n("328989");function u(e){let{width:t,className:n,channelId:u,noArt:o=!1}=e;return(0,a.jsx)(s.default,{artURL:r,noArt:o,size:(0,s.getSizeForWidth)(t),className:n,callToAction:i.default.Messages.STREAM_SHOW_ALL_PARTICIPANTS,header:i.default.Messages.STREAM_PARTICIPANTS_HIDDEN.format(),onCTAClick:()=>l.default.toggleVoiceParticipantsHidden(u,!1)})}},810640:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("77078"),r=n("673527"),u=n("821391"),o=n("782340"),d=n("146789");function c(e){let{stream:t,isSmall:n,selected:l,isSelfStream:c}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{className:s(d.absoluteFill,d.streamPreviewOpacity),stream:t,noText:!0}),!l&&(0,a.jsxs)("div",{className:s(d.content,d.streamUnavailable,{[d.small]:n}),children:[(0,a.jsx)(i.Text,{className:d.streamUnavailableText,color:"always-white",variant:n?"text-sm/semibold":"text-md/semibold",children:c?o.default.Messages.CONSOLE_STREAMING:o.default.Messages.CONSOLE_STREAM_UNAVAILABLE}),(0,a.jsx)(i.TooltipContainer,{text:c?o.default.Messages.CONSOLE_STREAMING_TOOLTIP:o.default.Messages.CONSOLE_STREAM_UNAVAILABLE_TOOLTIP,className:d.darkCircle,children:(0,a.jsx)("div",{children:(0,a.jsx)(u.default,{className:d.stopStreamIcon,foreground:d.stopStreamForeground})})})]})]})}},729185:function(e,t,n){"use strict";n.r(t),n.d(t,{StreamTileIndicators:function(){return B},default:function(){return H}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("255397"),d=n("990766"),c=n("103723"),f=n("605250"),h=n("889014"),p=n("430951"),m=n("673527"),E=n("336804"),C=n("952221"),g=n("600123"),S=n("373469"),_=n("271938"),I=n("42203"),T=n("42887"),v=n("471671"),x=n("512264"),N=n("30672"),A=n("980423"),M=n("100844"),R=n("607391"),j=n("683245"),L=n("772442"),O=n("211019"),y=n("810640"),P=n("170643"),b=n("144565"),D=n("49111"),U=n("99795"),w=n("353927"),F=n("782340"),k=n("146789");let V=new f.default("StreamTile");function B(e){let{participant:t,selected:n,focused:l,idle:s,width:i}=e,u=(0,r.useStateFromStores)([S.default],()=>S.default.getActiveStreamForUser(t.user.id,t.stream.guildId)),o=(0,b.isVideoCompact)(i);return(0,a.jsxs)(a.Fragment,{children:[n?null:(0,a.jsx)(P.default,{participant:t}),l||null==u||u.state===D.ApplicationStreamStates.ENDED||u.state===D.ApplicationStreamStates.FAILED?null:(0,a.jsx)(E.default,{size:A.default.Sizes.SMALL,className:k.liveIndicator,participant:t,showQuality:!o&&!s,isUpsellEnabled:!1})]})}function H(e){let{participant:t,selected:n,onVideoResize:s,paused:f,fit:E,inPopout:A,width:P,focused:b}=e,B=T.default.getVideoComponent(),H=(0,r.useStateFromStores)([_.default],()=>_.default.getId()),G=(0,h.default)(),{stream:W,user:Y,streamId:z}=t,K=(0,r.useStateFromStores)([I.default],()=>I.default.getChannel(W.channelId)),Z=(0,r.useStateFromStores)([S.default],()=>S.default.getActiveStreamForUser(Y.id,W.guildId),[Y.id,W.guildId]),X=(0,r.useStateFromStores)([S.default],()=>S.default.getAllActiveStreams().length>0),J=(0,r.useStateFromStores)([v.default],()=>v.default.isFocused()),q=(null==Z?void 0:Z.ownerId)===H,Q=q&&!J&&!A,$=null!=Z?(0,p.default)(Z,Y,Y.id===H,Q):null,ee=P<195;if(l.useEffect(()=>{!X&&(null==K?void 0:K.isGuildStageVoice())&&!q&&((0,d.watchStream)(W),o.default.updateStageStreamSize(W.channelId,!1))},[]),l.useEffect(()=>{V.info("Stream Tile State - activeStream: ".concat(null!=Z," | selected: ").concat(n," | Video: ").concat(null!=B," | MediaEngine: ").concat(T.default.supports(w.Features.VIDEO)))},[B,Z,n]),G)return(0,a.jsx)(y.default,{stream:t.stream,isSmall:ee,selected:n,isSelfStream:Y.id===H});if((null==Z?void 0:Z.state)===D.ApplicationStreamStates.ENDED)return(0,a.jsx)(j.default,{selected:n,stream:Z,width:P});if((null==Z?void 0:Z.state)===D.ApplicationStreamStates.FAILED)return(0,a.jsx)(L.default,{selected:n,stream:Z,width:P});else if(t.type===U.ParticipantTypes.HIDDEN_STREAM)return(0,a.jsx)(O.default,{selected:n,participant:t,width:P});else if(null!=Z&&!n&&null!=B&&T.default.supports(w.Features.VIDEO))return(0,a.jsxs)(a.Fragment,{children:[null!=K?(0,a.jsx)(C.default,{focused:b,channelId:K.id,guildId:K.guild_id,streamerId:Y.id,hasScreenMessage:null!=$,stream:W}):null,(0,a.jsx)(x.default,{onResize:s,wrapperClassName:k.videoWrapper,className:k.content,streamId:z,videoComponent:B,fit:E,paused:f||Q,videoSpinnerContext:q?c.VideoSpinnerContext.SELF_STREAM:c.VideoSpinnerContext.REMOTE_STREAM,userId:Y.id},z),null!=$?(0,a.jsx)(g.default,{size:(0,R.getSizeForWidth)(P),...$}):null]});else return(0,a.jsxs)("div",{className:i(k.content,k.streamPreview,{[k.small]:ee}),children:[(0,a.jsx)(m.default,{noText:!0,className:i(k.absoluteFill,{[k.streamPreviewOpacity]:null==Z}),stream:t.stream}),n?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.CallTileCTA,{isSmall:ee,children:(0,a.jsx)(u.Text,{variant:ee?"text-sm/semibold":"text-md/semibold",color:"none",children:P<175?F.default.Messages.WATCH:F.default.Messages.WATCH_STREAM})}),X?(0,a.jsx)(M.CallTileCTA,{className:k.addCTA,tooltip:F.default.Messages.STREAM_WATCH_MULTIPLE_TOOLTIP,onClick:e=>{e.stopPropagation(),(0,d.watchStream)(W,{forceMultiple:!0})},isSmall:ee,children:(0,a.jsx)(N.default,{className:k.addStreamIcon})}):null]})]})}},170643:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("734488"),s=n("787912"),i=n("368694");function r(e){let{participant:t,className:n}=e,r=(0,l.default)(t),u=function(e){if(null==e)return null;let t=i.default.isDeveloper;return t?"".concat(e.message," (").concat(e.errorType,")"):e.message}(r);return null!=u?(0,a.jsx)(s.default,{className:n,errorMessage:u}):null}},715764:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("77078"),o=n("255397"),d=n("103723"),c=n("191145"),f=n("161306"),h=n("292687"),p=n("106435"),m=n("271938"),E=n("26989"),C=n("42887"),g=n("471671"),S=n("754775"),_=n("512264"),I=n("387111"),T=n("830251"),v=n("49111"),x=n("353927"),N=n("782340"),A=n("146789");let M=u.AvatarSizes.SIZE_80,R=u.AvatarSizes.SIZE_40;function j(e){let{participant:t,channel:n,inCall:s,width:u,paused:j,selected:L,fit:O,onVideoResize:y,blocked:P,noVideoRender:b=!1,pulseSpeakingIndicator:D=!1}=e,U=C.default.getVideoComponent(),w=(0,r.useStateFromStores)([m.default],()=>m.default.getId()),{user:F,streamId:k,speaking:V}=t,B=F.id===w,H=(0,T.default)(t),G=(0,r.useStateFromStores)([g.default],()=>g.default.isFocused()),W=(0,r.useStateFromStores)([h.default],()=>h.default.getWindowFocused(v.PopoutWindowKeys.CHANNEL_CALL_POPOUT)),Y=(0,r.useStateFromStores)([C.default],()=>null!=F.id&&C.default.isLocalVideoDisabled(F.id,(0,f.default)(t.type)),[F.id,t.type]),z=(0,r.useStateFromStores)([E.default],()=>E.default.isGuestOrLurker(n.guild_id,F.id)),K=I.default.getName(n.getGuildId(),n.id,F)+(z?" ".concat(N.default.Messages.GUEST_NAME_SUFFIX):""),Z=V&&(W||G),X=u<124?R:M,{avatarSrc:J,avatarDecorationSrc:q}=(0,p.default)({user:F,guildId:n.guild_id,size:X,animateOnHover:!Z}),Q=(0,r.useStateFromStores)([c.default],()=>c.default.getSelectedParticipant(n.id));return(l.useEffect(()=>{n.isGuildStageVoice()&&!H&&(null==Q?void 0:Q.id)===F.id&&o.default.selectParticipant(n.id,null)},[H]),s&&!Y&&!b&&H&&!L&&null!=U&&C.default.supports(x.Features.VIDEO))?(0,a.jsx)(_.default,{onResize:y,wrapperClassName:A.videoWrapper,className:A.content,mirror:B,streamId:k,videoComponent:U,fit:O,paused:j,videoSpinnerContext:F.id===w?d.VideoSpinnerContext.SELF_VIDEO:d.VideoSpinnerContext.REMOTE_VIDEO,userId:F.id},k):(0,a.jsx)("div",{className:i(A.content,{[A.blockedAvatar]:P}),children:(0,a.jsx)(S.default,{"aria-label":K,src:J,avatarDecoration:q,backgroundSrc:F.getAvatarURL(n.guild_id,80),size:X,pulseSpeakingIndicator:D,speaking:V,userId:F.id})})}},144565:function(e,t,n){"use strict";n.r(t),n.d(t,{isVideoCompact:function(){return a},isNamesCompact:function(){return l}});function a(e){return e<=220}function l(e){return e<=124}},85208:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("830251"),l=n("99795");function s(e,t){var n,s;let i=null,r=null,u=null,o=!1,d=!1;switch(e.type){case l.ParticipantTypes.ACTIVITY:break;case l.ParticipantTypes.USER:i=e.streamId,u=e.voiceState,o=e.speaking,d=e.ringing;break;case l.ParticipantTypes.STREAM:i=e.streamId,r=e.stream}return{streamId:i,stream:r,speaking:o,ringing:d,muted:null!==(n=null==u?void 0:u.isVoiceMuted())&&void 0!==n&&n,deafen:null!==(s=null==u?void 0:u.isVoiceDeafened())&&void 0!==s&&s,mirror:e.type===l.ParticipantTypes.USER&&e.user.id===t,hasVideo:(0,a.default)(e)}}},616718:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("446674"),l=n("582415"),s=n("824563"),i=n("387111"),r=n("782340");function u(e,t,n){let u=(0,a.useStateFromStores)([s.default],()=>null!=n?(0,l.getStreamerApplication)(n,s.default):null,[n]),o=i.default.getName(e.getGuildId(),e.id,t);return null==n?o:(null==u?void 0:u.name)!=null?r.default.Messages.GO_LIVE_USER_PLAYING.format({applicationName:null==u?void 0:u.name,username:o}):r.default.Messages.GO_LIVE_TILE_SCREEN.format({username:o})}},124824:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983"),l=n("884691"),s=n("550410");function i(e){let{children:t}=e,{preventIdle:n,allowIdle:i}=(0,s.usePreventIdle)("popup");return l.useEffect(()=>(n(),()=>i()),[i,n]),(0,a.jsx)(a.Fragment,{children:t})}},115531:function(e,t,n){"use strict";n.r(t),n.d(t,{TOAST_LINGER_MS:function(){return R},default:function(){return L}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n("907002"),o=n("446674"),d=n("77078"),c=n("913144"),f=n("255397"),h=n("819689"),p=n("390236"),m=n("95045"),E=n("574073"),C=n("24373"),g=n("41170"),S=n("377253"),_=n("27618"),I=n("93427"),T=n("315102"),v=n("449008"),x=n("439932"),N=n("49111"),A=n("719347"),M=n("858327");let R=1e4;function j(e){var t;let{message:n}=e,s=(0,o.useStateFromStores)([_.default],()=>_.default.isBlocked(n.author.id)),r=(0,E.useNullableMessageAuthor)(n),u=l.useContext(p.default),[c,S]=l.useState(!1),v=l.useCallback(e=>{"A"!==e.target.nodeName&&(f.default.updateChatOpen(n.channel_id,!0),h.default.jumpToMessage({channelId:n.channel_id,messageId:n.id,flash:!0}))},[n.channel_id,n.id]),x=null!=n.content&&""!==n.content?(0,m.default)(n,{isInteracting:c}).content:null,{contentPlaceholder:N,renderedContent:R,icon:j}=(0,I.renderSingleLineMessage)(n,x,s,M.messageContent,{iconClass:M.messageContentIcon,iconSize:A.SINGLE_LINE_MESSAGE_DEFAULT_ICON_SIZE}),L=(0,C.getMessageStickers)(n),O=L.length>0,y=O?L.map(e=>(0,a.jsx)(g.default,{className:M.sticker,size:128,sticker:e,isInteracting:c},e.id)):null;return(0,a.jsxs)(d.Clickable,{className:M.toast,onMouseEnter:()=>{S(!0)},onMouseLeave:()=>{S(!1)},onClick:v,children:[(0,a.jsxs)("div",{className:i(M.messageContentWrapper,{[M.mentioned]:n.mentioned}),children:[null!==(t=null!=R?R:y)&&void 0!==t?t:(0,a.jsx)("span",{children:N}),null!=y?null:j]}),(0,a.jsx)("img",{alt:"",src:(null==r?void 0:r.guildMemberAvatar)!=null&&null!=u?(0,T.getGuildMemberAvatarURLSimple)({guildId:u,userId:n.author.id,avatar:r.guildMemberAvatar}):n.author.getAvatarURL(u,32),className:M.avatar})]})}function L(e){let{channelId:t,className:n}=e,[s,d]=l.useState(!1),{toastsHidden:f,toastMessages:h}=function(e){var t;let{channelId:n,isFrozen:a,count:s,lingerMs:i}=e,[r,u]=l.useState([]),[d,f]=l.useState(!1),h=l.useRef(null),p=l.useRef(),m=l.useCallback(()=>{u([]),f(!0)},[]);l.useEffect(()=>{function e(e){let{channelId:t,message:a}=e;t===n&&a.type!==N.MessageTypes.STAGE_START&&a.type!==N.MessageTypes.STAGE_END&&a.type!==N.MessageTypes.STAGE_TOPIC&&a.type!==N.MessageTypes.STAGE_SPEAKER&&a.type!==N.MessageTypes.STAGE_RAISE_HAND&&(clearTimeout(p.current),p.current=setTimeout(m,i),u(e=>[...e,a.id]))}return c.default.subscribe("MESSAGE_CREATE",e),()=>{c.default.unsubscribe("MESSAGE_CREATE",e)}},[n,m,s,i]),l.useEffect(()=>()=>{clearTimeout(p.current)},[]),l.useEffect(()=>{r.length>3&&u(e=>{let t=e.length-3;return[...e.slice(t)]})},[r]),a&&null==h.current?h.current=r:!a&&null!=h.current&&(h.current=null);let E=null!==(t=h.current)&&void 0!==t?t:r,C=(0,o.useStateFromStoresArray)([S.default],()=>E.map(e=>S.default.getMessage(n,e)),[n,E]);return{toastsHidden:d,toastMessages:C.filter(v.isNotNullish)}}({channelId:t,isFrozen:s,count:3,lingerMs:R}),p=l.useRef({}),[m,E]=l.useState({}),C=l.useCallback((e,t)=>{null==t?delete p.current[e]:p.current[e]=t},[]);l.useLayoutEffect(()=>{let e={},t=0;for(let a of h){var n;let l=null!==(n=p.current[a.id])&&void 0!==n?n:0;e[a.id]=t,t+=l+8}!(0,r.isEqual)(e,m)&&E(e)},[h]);let g=h.map(e=>({message:e,height:p.current[e.id],y:m[e.id]})),_=(0,u.useTransition)(g,{keys:e=>e.message.id,from:()=>({opacity:0}),enter:e=>{let{y:t}=e;return{opacity:1,translateY:t}},update:e=>{let{y:t}=e;return{translateY:t}},leave:e=>{let{height:t,y:n}=e;return{opacity:0,translateY:f?n:-(null!=t?t:0)-8,pointerEvents:"none"}}});return(0,a.jsx)("div",{className:i(n,(0,x.getThemeClass)(N.ThemeTypes.DARK)),onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},children:_((e,t)=>(0,a.jsx)(u.animated.div,{ref:e=>C(t.message.id,null!=e?e.offsetHeight:null),className:M.toastWrapper,style:e,children:(0,a.jsx)(j,{message:t.message})}))})}},620592:function(e,t,n){"use strict";n.r(t),n.d(t,{DisableGradient:function(){return l},default:function(){return f}});var a,l,s=n("37983");n("884691");var i=n("414456"),r=n.n(i),u=n("145131"),o=n("600123"),d=n("434018");function c(e){let{disableGradients:t=!1,renderHeader:n,renderBottomLeft:a,renderBottomCenter:l,renderBottomRight:i,renderCenter:r}=e;return(0,s.jsxs)("div",{className:d.videoControls,children:[!(0===t||!0===t)&&(0,s.jsx)("div",{className:d.gradientTop}),!(1===t||!0===t)&&(0,s.jsx)("div",{className:d.gradientBottom}),(0,s.jsx)("div",{className:d.topControls,children:null==n?void 0:n()}),null==r?void 0:r(),(0,s.jsxs)("div",{className:d.bottomControls,children:[(0,s.jsx)(u.default,{grow:0,shrink:1,basis:"50%",align:u.default.Align.CENTER,children:null==a?void 0:a()}),(0,s.jsx)(u.default,{grow:1,justify:u.default.Justify.CENTER,align:u.default.Align.CENTER,children:null==l?void 0:l()}),(0,s.jsx)(u.default,{grow:0,shrink:1,justify:u.default.Justify.END,basis:"50%",align:u.default.Align.CENTER,children:null==i?void 0:i()})]})]})}function f(e){let{screenMessage:t,onDoubleClick:n,onActive:a,onForceIdle:l,idle:i,children:u,renderChatButton:f,renderChatToasts:h,renderVoiceChannelEffects:p,style:m,...E}=e;return(0,s.jsxs)("div",{className:r(d.root,{[d.idle]:i}),style:m,onMouseMove:a,onMouseDown:a,onMouseLeave:l,onDoubleClick:n,children:[u,null!=t?(0,s.jsx)(o.default,{size:"large",...t}):null,(0,s.jsx)(c,{...E}),null==f?void 0:f({className:d.chatButton,showingClassName:d.chatButtonShowing}),null==h?void 0:h(),null==p?void 0:p()]})}(a=l||(l={}))[a.TOP=0]="TOP",a[a.BOTTOM=1]="BOTTOM"},787912:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("77078"),r=n("423487"),u=n("550410"),o=n("764877");function d(e){let{errorMessage:t,className:n}=e;return(0,a.jsx)(i.TooltipContainer,{className:s(n,o.root),text:t,position:"bottom",color:i.TooltipColors.GREY,children:(0,a.jsx)(u.default,{children:(0,a.jsx)(r.default,{"aria-label":null!=t?t:"",className:o.warningIcon})})})}},863590:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("446674"),r=n("77078"),u=n("614175"),o=n("84460"),d=n("181114"),c=n("82636"),f=n("981913"),h=n("782340"),p=n("808554");function m(e){let t,{isActivityActive:n,...l}=e,{enabled:m}=u.ActivitiesGameNightExperiment.useExperiment({location:"9ab33d_1"},{autoTrackExposure:!1}),E=(0,i.useStateFromStores)([o.default],()=>o.default.getIsEnabled(),[]);return(E&&(t="yellow"),m)?(0,a.jsxs)(d.default,{disabled:l.disabled,onClick:l.onClick,onMouseEnter:l.onMouseEnter,onMouseLeave:l.onMouseLeave,look:r.Button.Looks.BLANK,size:r.Button.Sizes.XLARGE,className:s(p.gameNightButton,{[p.gameNightActivityIsActive]:n&&!l.disabled,[p.gameNightDeveloperActivityShelf]:E}),innerClassName:p.gameNightButtonInner,children:[(0,a.jsx)(c.default,{className:p.gameNightRocket}),h.default.Messages.EMBEDDED_ACTIVITIES_GAME_NIGHT]}):(0,a.jsx)(f.CenterControlButton,{isActive:n,color:t,iconComponent:c.default,...l})}},172131:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a,l,s=n("37983");n("884691");var i=n("414456"),r=n.n(i),u=n("256170"),o=n("981913"),d=n("698310");function c(e){let{direction:t,className:n,themeable:a,...l}=e;return(0,s.jsx)(o.default,{className:r(n,d.arrow,{[d.up]:0===t}),iconComponent:u.default,themeable:a,...l})}(a=l||(l={}))[a.UP=0]="UP",a[a.DOWN=1]="DOWN",c.Directions=l;var f=c},640553:function(e,t,n){"use strict";n.r(t),n.d(t,{ChatButton:function(){return T}}),n("222007"),n("424973");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n("446674"),o=n("255397"),d=n("191145"),c=n("660478"),f=n("18494"),h=n("191542"),p=n("378765"),m=n("115531"),E=n("585513"),C=n("981913"),g=n("49111"),S=n("782340");function _(e){let t=(0,u.useStateFromStores)([h.default],()=>!(0,r.isEmpty)(h.default.getTypingUsers(e)),[e]),n=(0,u.useStateFromStores)([f.default],()=>f.default.getVoiceChannelId()===e,[e]),{unreadCount:a,mentionCount:l}=(0,u.useStateFromStoresObject)([c.default],()=>({unreadCount:c.default.getUnreadCount(e),mentionCount:c.default.getMentionCount(e)}),[e]);return{unreadCount:a,mentionCount:l,voiceChannelIsSelected:n,isTyping:t}}function I(e){let{className:t,channelId:n}=e,{unreadCount:l,mentionCount:s,isTyping:i,voiceChannelIsSelected:r}=_(n);return(0,a.jsx)(E.default,{className:t,unreadCount:l,mentionCount:s,isTyping:i,canBadge:r})}function T(e){let t,{channelId:n,className:s,showingClassName:r,onClick:c,inPopout:f,showRequestToSpeakSidebar:h,toggleRequestToSpeakSidebar:E,...T}=e,{disabled:v}=T,x=l.useRef(null),N=(0,u.useStateFromStores)([d.default],()=>d.default.getChatOpen(n),[n]),{isShowing:A,unreadCount:M,mentionCount:R}=function(e){let{unreadCount:t,mentionCount:n,isTyping:a}=_(e),[s,i]=l.useState(!1);return l.useEffect(()=>{i(t>0);let e=setTimeout(()=>{i(!1)},m.TOAST_LINGER_MS);return()=>{clearTimeout(e),i(!1)}},[t]),{isShowing:s||n>0||a,unreadCount:t,mentionCount:n}}(n),j=l.useCallback(()=>{null==c||c(),!N&&h&&(null==E||E()),o.default.updateChatOpen(n,!N)},[n,N,c,h,E]),L=l.useCallback(e=>{let{className:t}=e;return(0,a.jsx)(I,{className:t,channelId:n})},[n]),O=l.useCallback(()=>{var e;null===(e=x.current)||void 0===e||e.focus()},[]);(0,p.useComponentAction)({event:g.ComponentActions.FOCUS_CHAT_BUTTON,handler:v?null:O});let[y,P]=l.useState(!1),b=l.useCallback(()=>{f&&P(!0)},[f]);(0,p.useComponentAction)({event:g.ComponentActions.SHOW_TEXT_IN_VOICE_POPOUT_COMING_SOON_TIP,handler:b}),l.useEffect(()=>{let e;return y&&(e=setTimeout(()=>{P(!1)},3e3)),()=>{clearTimeout(e)}},[y]),t=f&&v?S.default.Messages.TEXT_IN_VOICE_POPOUT_DISABLED:N?S.default.Messages.VIDEO_CALL_HIDE_CHAT:S.default.Messages.VIDEO_CALL_SHOW_CHAT;let D=[t];return R>0&&D.push(S.default.Messages.GUILD_SIDEBAR_CHANNEL_A11Y_LABEL_MENTIONS.format({mentionCount:R})),M>0&&D.push(S.default.Messages.GUILD_SIDEBAR_CHANNEL_A11Y_LABEL_UNREAD),(0,a.jsx)(C.default,{buttonRef:x,onClick:j,label:t,"aria-label":D.join(", "),iconComponent:L,tooltipPosition:"bottom",wrapperClassName:i(s,null!=r&&{[r]:A}),forceTooltipOpen:y,...T})}},996496:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("77078"),r=n("887326");function u(e){let{hasMentions:t,truncatedCount:n,className:l}=e;return(0,a.jsx)(i.Text,{className:s(r.unreadCount,l,{[r.mention]:t}),variant:"text-xs/normal",children:n})}},585513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("748820"),u=n("469563"),o=n("733154"),d=n("77078"),c=n("996496"),f=n("574586");function h(e){let{width:t=24,height:n=24,isBadged:s=!1,isTyping:i=!1}=e,[c]=l.useState(()=>(0,r.v4)()),f=(0,u.useRedesignIconContext)().enabled;return(0,a.jsxs)("svg",{width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("mask",{id:c,children:[(0,a.jsx)("rect",{fill:"white",width:"100%",height:"100%"}),i&&(0,a.jsx)("g",{fill:"black",transform:"translate(5.5, ".concat(f?10.5:8.5,") scale(").concat(11/24,")"),children:(0,a.jsx)(d.AnimatedDots,{dotRadius:3.5,spacing:3,fill:"black"})}),s&&(0,a.jsx)("circle",{cx:"20",cy:"19",r:"10",fill:"red"})]})}),f?(0,a.jsx)("g",{mask:"url(#".concat(c,")"),children:(0,a.jsx)(o.ChatIcon,{width:t,height:n,color:"currentColor"})}):(0,a.jsx)("path",{fill:"currentColor",d:"M4.79805 3C3.80445 3 2.99805 3.8055 2.99805 4.8V15.6C2.99805 16.5936 3.80445 17.4 4.79805 17.4H7.49805V21L11.098 17.4H19.198C20.1925 17.4 20.998 16.5936 20.998 15.6V4.8C20.998 3.8055 20.1925 3 19.198 3H4.79805Z",mask:"url(#".concat(c,")")})]})}function p(e){var t;let{className:n,unreadCount:l,mentionCount:s,isTyping:r,canBadge:u}=e,o=null!=s&&s>0,d=null!==(t=o?s:l)&&void 0!==t?t:0,p=u&&null!=l&&l>0;return(0,a.jsxs)("div",{className:i(f.chatIcon,n),children:[(0,a.jsx)(h,{isBadged:p,isTyping:r}),p&&(0,a.jsx)(c.default,{hasMentions:o,truncatedCount:d>99?"99+":d,className:f.badge})]})}},104815:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("433487"),s=n("981913"),i=n("782340");function r(e){let{...t}=e;return(0,a.jsx)(s.default,{label:i.default.Messages.MORE,iconComponent:l.default,tooltipPosition:"bottom",...t})}},213943:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("561288"),s=n("945330"),i=n("981913"),r=n("782340");function u(e){let{channel:t,...n}=e;return(0,a.jsx)(i.CenterControlButton,{...n,iconComponent:s.default,label:r.default.Messages.DISMISS,onClick:()=>l.default.stopRinging(t.id)})}},515496:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("907002"),s=n("46829"),i=n("981913"),r=n("782340"),u=n("614182");let o=(0,l.animated)(e=>{let{percentComplete:t}=e,n=20;return(0,a.jsx)("svg",{className:u.countdown,width:40,height:40,viewBox:"0 0 ".concat(40," ").concat(40),children:(0,a.jsx)("circle",{style:{strokeDashoffset:Math.round(100*t)},className:u.progress,cx:n,cy:n,r:n-6,fill:"none",stroke:"#4F545C",pathLength:"100"})})});function d(e){let{totalCooldownSeconds:t,remainingCooldownSeconds:n,onClick:d,onKeyDown:c,onMouseEnter:f,onMouseLeave:h,isActive:p=!1,isCenterButton:m=!1,...E}=e,C=n>0,g=(0,l.useSpring)({percentComplete:0!==n?(t-n)/t:0,config:{...l.config.molasses,duration:1e3}}),S=C?r.default.Messages.VOICE_CHANNEL_EFFECTS_COOLDOWN.format({seconds:n}):void 0,_=m?i.CenterControlButton:i.default;return(0,a.jsxs)("div",{className:u.container,children:[C?(0,a.jsx)(o,{percentComplete:g.percentComplete}):null,(0,a.jsx)(_,{...E,disabled:C,label:S,iconComponent:s.default,onClick:d,onKeyDown:c,onMouseEnter:f,onMouseLeave:h,isActive:p,grow:!1})]})}},925674:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("255397"),s=n("407691"),i=n("981913"),r=n("782340");function u(e){let{channelId:t,...n}=e;return(0,a.jsx)(i.default,{onClick:function(){l.default.selectParticipant(t,null)},label:r.default.Messages.VIDEO_CALL_RETURN_TO_GRID,iconComponent:s.default,tooltipPosition:"bottom",...n})}},331759:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983");n("884691");var l=n("627445"),s=n.n(l),i=n("446674"),r=n("77078"),u=n("244201"),o=n("305961"),d=n("957255"),c=n("76539"),f=n("924506"),h=n("981913"),p=n("49111"),m=n("782340");function E(e){var t,l;let{applicationId:E,stream:C,channel:g,exitFullScreen:S,appContext:_,analyticsLocation:I,guildScheduledEvent:T,...v}=e,x=(0,u.useAppContext)(),N=null==g?void 0:g.getGuildId(),A=(0,i.useStateFromStores)([o.default],()=>null!=N?o.default.getGuild(N):null,[N]);return(t=A,l=g,null!=t&&null!=l&&d.default.can(p.Permissions.CREATE_INSTANT_INVITE,l))?(0,a.jsx)(h.default,{onClick:()=>{s(null!=A,"guild cannot be null"),s(null!=g,"channel cannot be null"),!function(e){let{guild:t,channel:l,streamUserId:s,applicationId:i,appContext:u,exitFullScreen:o,analyticsLocation:d,guildScheduledEvent:c}=e;null==o||o(),(0,r.openModalLazy)(async()=>{let{default:e}=await n.el("310688").then(n.bind(n,"310688"));return n=>(0,a.jsx)(e,{...n,guild:t,channel:l,streamUserId:s,applicationId:i,analyticsLocation:d,source:l.isGuildStageVoice()?p.InstantInviteSources.STAGE_CHANNEL:p.InstantInviteSources.STREAM_INVITE,guildScheduledEvent:c})},{modalKey:"stream-invite-modal",contextKey:u===p.AppContext.POPOUT?r.POPOUT_MODAL_CONTEXT:r.DEFAULT_MODAL_CONTEXT})}({guild:A,channel:g,streamUserId:null==C?void 0:C.ownerId,applicationId:E,appContext:null!=_?_:x,exitFullScreen:S,analyticsLocation:I,guildScheduledEvent:T})},iconComponent:null!=E?f.default:c.default,label:null!=E?m.default.Messages.EMBEDDED_ACTIVITIES_INVITE_TO_ACTIVITY:m.default.Messages.ACTIVITY_INVITE_MODAL_INVITE,...v}):null}},742683:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("887657"),s=n("981913"),i=n("782340");function r(e){let{channel:t,centerButton:n=!1,...r}=e,u=n?s.CenterControlButton:s.default,o=t.isManaged()||!t.isPrivate(),d=o?i.default.Messages.CONNECT:i.default.Messages.JOIN_CALL;return(0,a.jsx)(u,{...r,iconComponent:l.default,label:d})}},785344:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var l=n("77078"),s=n("14124"),i=n("849467"),r=n("97347"),u=n("981913"),o=n("870320");function d(e){let{className:t}=e,n=(0,l.useRedesignIconContext)().enabled;return(0,a.jsx)(r.default,{foreground:n?void 0:o.slash,className:t})}function c(e){let{selfMute:t,serverMute:n,suppress:l,centerButton:r=!1,awaitingRemote:o,...c}=e,f=t||n||l,h=r?u.CenterControlButton:u.default,p=(0,s.default)(t,n,l,o),m=f?d:i.default;return(0,a.jsx)(h,{isActive:!f,iconComponent:m,label:p,...c})}},63260:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("77078"),r=n("155207"),u=n("981913"),o=n("782340"),d=n("443367");function c(e){let{className:t,count:n}=e;return(0,a.jsxs)("div",{className:s(d.root,d.comboIcon,t),children:[(0,a.jsx)(r.default,{className:d.icon}),(0,a.jsx)(i.Text,{color:"none",className:d.count,variant:"text-md/normal",children:n})]})}function f(e){let{count:t,...n}=e;return(0,a.jsx)(u.default,{label:o.default.Messages.CHANNEL_CALL_PARTICIPANTS,iconComponent:e=>{let{className:n}=e;return(0,a.jsx)(c,{className:n,count:t})},tooltipPosition:"bottom",...n})}},555038:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("519794"),s=n("393900"),i=n("981913"),r=n("782340");function u(e){let{popoutWindowAlwaysOnTop:t,onToggleStayOnTop:n,...u}=e,o=t?r.default.Messages.POPOUT_REMOVE_FROM_TOP:r.default.Messages.POPOUT_STAY_ON_TOP,d=t?s.default:l.default;return(0,a.jsx)(i.default,{onClick:()=>n(!t),label:o,iconComponent:d,...u})}},719874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("394832"),s=n("981913"),i=n("782340");function r(e){let{hasPermission:t,centerButton:n=!1,...r}=e,u=n?s.CenterControlButton:s.default,o=t?i.default.Messages.SHARE_YOUR_SCREEN:i.default.Messages.ACTIVITY_PANEL_GO_LIVE_TOOLTIP_NO_PERMISSION_IN_VOICE;return(0,a.jsx)(u,{label:o,disabled:!t,iconComponent:l.default,...r})}},422736:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var l=n("255397"),s=n("229997"),i=n("763984"),r=n("981913"),u=n("99795"),o=n("782340");function d(e){let{channelId:t,isHorizontal:n,...d}=e;return(0,a.jsx)(r.default,{onClick:function(){l.default.selectParticipant(t,u.ParticipantSelectionTypes.AUTO)},label:o.default.Messages.VIDEO_CALL_AUTO_SELECT,iconComponent:n?s.default:i.default,tooltipPosition:"bottom",...d})}},634472:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var l=n("414456"),s=n.n(l),i=n("446674"),r=n("629109"),u=n("42887"),o=n("316680"),d=n("829536"),c=n("773336"),f=n("550410"),h=n("397651"),p=i.default.connectStores([u.default],e=>{let{userId:t,context:n}=e;return{currentVolume:u.default.getLocalVolume(t,n),muted:u.default.isLocalMute(t,n)}})(function(e){let{className:t,iconClassName:n,sliderClassName:l,userId:i,currentVolume:u,muted:p,context:m,currentWindow:E=window}=e;return(0,a.jsx)(f.default,{children:(0,a.jsx)(o.default,{currentWindow:E,iconClassName:s(n,h.controlIcon),sliderClassName:l,className:t,value:(0,d.amplitudeToPerceptual)(u),muted:p,maxValue:c.isPlatformEmbedded?200:100,onValueChange:e=>{var t,n,a,l;return t=e,n=i,a=p,l=m,void(t>0&&a&&r.default.toggleLocalMute(n,l),r.default.setLocalVolume(n,(0,d.perceptualToAmplitude)(t),l))},onToggleMute:()=>{var e,t;return e=i,t=m,void r.default.toggleLocalMute(e,t)}})})})},560289:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("907002"),u=n("446674"),o=n("430568"),d=n("206230"),c=n("568088"),f=n("151435");let h=e=>"scale(".concat(1- -(e/120),") rotate(").concat(e,"deg)");function p(e){let{userId:t,voiceChannelEffect:n,onComplete:s}=e,{emoji:p,sentAt:m}=n,E=(0,u.useStateFromStores)([d.default],()=>d.default.useReducedMotion),[C,g]=l.useState(!0),S=!E,_=(0,r.useTransition)(C,{from:{rotate:-120},enter:{rotate:0},leave:{rotate:-120},config:r.config.default,immediate:E,onRest:(e,t)=>{let{phase:n}=t;"leave"===n&&s()}});return(l.useEffect(()=>{let e;return Date.now()-m>=2e3?(0,c.clearVoiceChannelEffectForUser)(t):e=setTimeout(()=>{g(!1),S&&(0,c.clearVoiceChannelEffectForUser)(t)},S?2e3:6e3),()=>{null!=e&&clearTimeout(e)}},[m,t,S]),S)?null:_((e,t)=>{var n;let{rotate:l}=e;return t&&(0,a.jsx)(r.animated.div,{className:f.voiceChannelEffectEmojiContainer,style:{transform:l.to(h)},children:(0,a.jsx)(o.default,{className:i(f.voiceChannelEffectEmoji),emojiId:p.id,emojiName:p.name,animated:null!==(n=p.animated)&&void 0!==n&&n})})})}},367489:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("446674"),u=n("819855"),o=n("77078"),d=n("731898"),c=n("841098"),f=n("206230"),h=n("62587"),p=n("181114"),m=n("628342"),E=n("277842"),C=n("833345");function g(e){let{checked:t,labelText:n,tooltipText:s,canToggle:g,iconAltText:S,onChange:_,tooltipColor:I,className:T,id:v="fancybutton-toggle",collapseWhenChecked:x=!0,onClick:N,disabled:A}=e,M=(0,r.useStateFromStores)([f.default],()=>f.default.useReducedMotion),[R,j]=l.useState(!1),L=(0,c.default)(),O=(0,u.isThemeDark)(L)||t?C:E,{width:y=0,ref:P}=(0,d.default)(),{width:b=0,ref:D}=(0,d.default)();return(0,a.jsxs)(o.TooltipContainer,{text:(0,a.jsx)(h.NitroTooltipLabel,{tooltipText:s}),position:"top",color:null!=I?I:A?o.Tooltip.Colors.BLACK:o.Tooltip.Colors.BRAND,"aria-label":s,tooltipClassName:m.tooltip,className:m.tooltipContainer,children:[(0,a.jsx)("input",{className:m.visuallyHidden,checked:t,onChange:function(){if(g){let e=!t;j(!0),null==_||_(e)}"function"==typeof N&&N()},id:v,type:"checkbox",disabled:A}),(0,a.jsxs)("label",{htmlFor:v,className:i(m.label,T,{[m.transition]:R,[m.labelChecked]:t,[m.labelUnchecked]:!t&&!g}),style:x?{width:t?y:y+b}:void 0,children:[t?(0,a.jsx)(p.Shine,{className:m.shine,shinePaused:M}):null,(0,a.jsx)("img",{ref:P,src:O,alt:S}),(0,a.jsx)("span",{ref:D,children:(0,a.jsx)(o.Text,{className:i(m.burstText,{[m.visuallyHidden]:t&&x,[m.burstTextChecked]:t}),variant:"text-sm/semibold",children:n})})]})]})}},738258:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983"),l=n("884691"),s=n("917351"),i=n("245749"),r=n.n(i),u=n("397485"),o=n("626334"),d=n("505989");let c=async e=>{var t;let{animationType:n,animationId:a,url:l,shouldResize:i}=e,r=null!==(t=u.AnimationTypeToAnimations[n])&&void 0!==t?t:u.AnimationTypeToAnimations[o.VoiceChannelEffectAnimationType.BASIC],d=null!=a&&a<r.length?r[a]:(0,s.sample)(r),c=JSON.parse(JSON.stringify(d));return c.assets[0].p=i?await (0,u.getResizedEmojiData)(l):l,c};function f(e){let{containerDimensions:t,effect:n,onComplete:s}=e,i=l.useRef(null);return l.useEffect(()=>{let e;return!async function(){if(null!=i.current){let t=await c(n);e=r.loadAnimation({container:i.current,renderer:"svg",loop:!1,autoplay:!0,animationData:t,rendererSettings:{preserveAspectRatio:"xMidYMax slice"}}),n.animationType===o.VoiceChannelEffectAnimationType.PREMIUM&&e.setSpeed(.8),e.addEventListener("complete",()=>null==s?void 0:s(n.id))}}(),()=>{null==e||e.destroy()}},[s,n]),(0,a.jsx)("div",{className:d.effect,style:{height:t.height,width:t.width},ref:i})}},260014:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n("748820"),o=n("446674"),d=n("913144"),c=n("430568"),f=n("206230"),h=n("962367");let p=[h.emoji1,h.emoji2,h.emoji3,h.emoji4],m=l.memo(function(e){var t;let{emoji:n,onAnimationEnd:s}=e,u=(0,r.sample)(p),o=l.useCallback(()=>{s(n.key)},[n.key,s]);return(0,a.jsx)("div",{className:i(h.emoji,u),onAnimationEnd:o,children:(0,a.jsx)(c.default,{emojiId:n.id,emojiName:n.name,animated:null!==(t=n.animated)&&void 0!==t&&t})})});function E(e){let{channelId:t}=e,n=(0,o.useStateFromStores)([f.default],()=>f.default.useReducedMotion),[s,i]=l.useState([]);l.useEffect(()=>{function e(e){let{channelId:a,emoji:l}=e;a===t&&!n&&null!=l&&i(e=>[...e,{key:(0,u.v4)(),...l}])}return d.default.subscribe("VOICE_CHANNEL_EFFECT_SEND",e),()=>{d.default.unsubscribe("VOICE_CHANNEL_EFFECT_SEND",e)}},[t,n]);let r=l.useCallback(e=>{i(t=>t.filter(t=>t.key!==e))},[]);return n?null:(0,a.jsx)("div",{className:h.container,"aria-hidden":!0,children:s.map(e=>(0,a.jsx)(m,{emoji:e,onAnimationEnd:r},e.key))})}},257407:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}}),n("222007");var a=n("37983"),l=n("884691"),s=n("917351"),i=n("446674"),r=n("151426"),u=n("77078"),o=n("913144"),d=n("79112"),c=n("206230"),f=n("716241"),h=n("509802"),p=n("788506"),m=n("867805"),E=n("252931"),C=n("5667"),g=n("697218"),S=n("402671"),_=n("449008"),I=n("719923"),T=n("229502"),v=n("82230"),x=n("568088"),N=n("397485"),A=n("463532"),M=n("718350"),R=n("258901"),j=n("626334"),L=n("49111"),O=n("99795"),y=n("958706"),P=n("646718"),b=n("397336"),D=n("782340"),U=n("308036");let w=y.EmojiIntention.CHAT,F={section:L.AnalyticsSections.VOICE_CHANNEL_EFFECTS_EMOJI_PICKER,openPopoutType:"voice_channel_effect_emoji_picker"},k=[m.default.getByName("thumbsup"),m.default.getByName("eyes"),m.default.getByName("laughing"),m.default.getByName("watermelon"),m.default.getByName("fork_and_knife"),m.default.getByName("yum")].filter(_.isNotNullish);function V(e){var t;let{channel:n,closePopout:m,onFocus:_}=e,y=(0,i.useStateFromStores)([c.default],()=>c.default.useReducedMotion),V=(0,i.useStateFromStores)([g.default],()=>g.default.getCurrentUser()),B=I.default.canUseFancyVoiceChannelReactions(V),H=(0,i.useStateFromStores)([v.default],()=>v.default.getState().animationType),{viewAndUseEnabled:G}=(0,E.useInventoryGuildPacksUserExperiment)({autoTrackExposure:!1}),W=l.useRef(!1),Y=(0,p.useFrequentlyUsedEmojis)(n.guild_id),z=(0,s.uniqBy)([...Y,...k],"name").filter(e=>!S.default.isEmojiFilteredOrLocked({emoji:e,channel:n,intention:w,canViewAndUsePackEmoji:G})).slice(0,O.EMOJI_PICKER_EMOJI_TO_SHOW_COUNT),K=null!==(t=x.default.recentlyUsedEmojis)&&void 0!==t?t:[],Z=K.filter(e=>!z.slice(0,O.EMOJI_PICKER_EMOJI_TO_SHOW_COUNT-1).some(t=>t.name===e.name));Z.length>0&&z.splice(z.length-1,1,Z[0]);let X=(0,N.sampleAnimationId)(H),J=e=>{o.default.dispatch({type:"VOICE_CHANNEL_EFFECT_RECENT_EMOJI",emoji:e}),(0,T.sendVoiceChannelEffect)({channel:n,emoji:e,location:T.VoiceChannelEffectSentLocation.EMOJI_PICKER,animationType:H,animationId:X,isPremium:B})},q=()=>{(0,M.openEffectsUpsellModal)({analytics:{type:P.PremiumUpsellTypes.EMOJI_PICKER_EMOJI_CLICKED,object:L.AnalyticsObjects.BUTTON_CTA,section:L.AnalyticsSections.VOICE_CHANNEL_EFFECTS_BAR}})},Q=e=>{W.current=e,e&&f.default.trackWithMetadata(L.AnalyticEvents.VOICE_CHANNEL_EFFECT_EMOJI_PICKER_EXPANDED,{channel_id:$,guild_id:ee})},{id:$,guild_id:ee}=n;l.useEffect(()=>{f.default.trackWithMetadata(L.AnalyticEvents.VOICE_CHANNEL_EFFECT_BAR_VIEWED,{channel_id:$,guild_id:ee})},[$,ee]);let et=y?[r.DismissibleContent.VOICE_CHANNEL_EFFECTS_REDUCED_MOTION_TOOLTIP]:[],en=H===j.VoiceChannelEffectAnimationType.PREMIUM;return(0,a.jsx)(h.default,{contentTypes:et,children:e=>{let{visibleContent:t,markAsDismissed:l}=e,s=y&&t===r.DismissibleContent.VOICE_CHANNEL_EFFECTS_REDUCED_MOTION_TOOLTIP;return(0,a.jsx)(u.Popout,{position:"left","aria-label":D.default.Messages.VOICE_CHANNEL_EFFECTS_MORE,shouldShow:s,renderPopout:()=>(0,a.jsx)("div",{onMouseEnter:_,children:(0,a.jsx)(C.default,{className:U.reducedMotionTooltip,header:D.default.Messages.VOICE_CHANNEL_EFFECTS_REDUCED_MOTION_TOOLTIP_TITLE,content:D.default.Messages.VOICE_CHANNEL_EFFECTS_REDUCED_MOTION_TOOLTIP_BODY,onClick:()=>{d.default.open(L.UserSettingsSections.ACCESSIBILITY,null,{scrollPosition:b.AccessibilityScrollPositions.REDUCED_MOTION}),m()},markAsDismissed:l,buttonCTA:D.default.Messages.VOICE_CHANNEL_EFFECTS_REDUCED_MOTION_TOOLTIP_CONFIRM,secondaryButtonCTA:D.default.Messages.VOICE_CHANNEL_EFFECTS_REDUCED_MOTION_TOOLTIP_CANCEL,caretPosition:C.CaretPosition.RIGHT_CENTER})}),children:()=>(0,a.jsx)(R.default,{title:D.default.Messages.VOICE_CHANNEL_EFFECTS_HOTBAR_TITLE,channel:n,closePopout:m,onSelectEmoji:J,onSelectDisabledEmoji:q,onFocus:_,onExpandedToggle:Q,analyticsOverride:F,emojiSearchProps:{accessory:(0,a.jsx)(A.default,{labelText:D.default.Messages.VOICE_CHANNEL_EFFECTS_TOGGLE,value:en,onChange:()=>{if(B)return f.default.trackWithMetadata(L.AnalyticEvents.VOICE_CHANNEL_EFFECT_FANCY_ANIMATION_TOGGLED,{channel_id:$,guild_id:ee,enabled:!en}),o.default.dispatch({type:"VOICE_CHANNEL_EFFECT_TOGGLE_ANIMATION_TYPE"})},onShowUpsell:()=>(0,M.openEffectsUpsellModal)({analytics:{type:W.current?P.PremiumUpsellTypes.VOICE_CHANNEL_EFFECTS_TOGGLE_CLICKED_EXPANDED:P.PremiumUpsellTypes.VOICE_CHANNEL_EFFECTS_TOGGLE_CLICKED,object:L.AnalyticsObjects.VOICE_CHANNEL_EFFECTS_TOGGLE,section:W.current?L.AnalyticsSections.VOICE_CHANNEL_EFFECTS_EMOJI_PICKER:L.AnalyticsSections.VOICE_CHANNEL_EFFECTS_BAR}})})},recentlyUsedEmojis:Z})})}})}},463532:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var l=n("446674"),s=n("697218"),i=n("719923"),r=n("367489"),u=n("782340");function o(e){let{value:t,labelText:n,onChange:o,onShowUpsell:d}=e,c=(0,l.useStateFromStores)([s.default],()=>s.default.getCurrentUser()),f=i.default.canUseFancyVoiceChannelReactions(c),h="";return h=f?t?u.default.Messages.VOICE_CHANNEL_EFFECTS_TOGGLE_TOOLTIP_ENABLED:u.default.Messages.VOICE_CHANNEL_EFFECTS_TOGGLE_TOOLTIP_DISABLED:u.default.Messages.VOICE_CHANNEL_EFFECTS_TOGGLE_UPSELL,(0,a.jsx)(r.default,{checked:t,onChange:o,labelText:n,tooltipText:h,iconAltText:u.default.Messages.VOICE_CHANNEL_EFFECTS_TOGGLE_TADA_ALT,canToggle:f,onClick:f?()=>{}:d})}},718350:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p},openEffectsUpsellModal:function(){return m}});var a=n("37983");n("884691");var l=n("77078"),s=n("349171"),i=n("626301"),r=n("789946"),u=n("58608"),o=n("599110"),d=n("49111"),c=n("782340"),f=n("331470"),h=n("534044");function p(e){let{onClose:t,analytics:n,...l}=e,p=c.default.Messages.VOICE_CHANNEL_EFFECTS_UPSELL_BODY_2.format({onPressMore:function(){(0,s.default)(),t(),o.default.track(d.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_section:d.AnalyticsSections.VOICE_CHANNEL_EFFECTS_UPSELL_MODAL,location_object:d.AnalyticsObjects.NAVIGATION_LINK}),(0,i.navigateToPremiumMarketingPage)()}});return(0,a.jsx)(r.default,{title:c.default.Messages.VOICE_CHANNEL_EFFECTS_UPSELL_HEADER_2,glowUp:p,body:p,artContainerClassName:f.artContainer,enableArtBoxShadow:!1,type:n.type,analyticsLocation:{section:d.AnalyticsSections.VOICE_CHANNEL_EFFECTS_UPSELL_MODAL,object:n.object},analyticsSource:{page:d.AnalyticsPages.CHANNEL_CALL,section:n.section},onClose:t,onSubscribeClick:s.default,artElement:(0,a.jsx)(u.default,{className:f.video,src:h,loop:!0,autoPlay:!0}),...l})}function m(e){let{analytics:t}=e;(0,l.openModalLazy)(async()=>{let{default:e}=await n.el("718350").then(n.bind(n,"718350"));return n=>(0,a.jsx)(e,{analytics:t,...n})})}},258901:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("917351"),u=n("907002"),o=n("77078"),d=n("430568"),c=n("252744"),f=n("788506"),h=n("86678"),p=n("867805"),m=n("986632"),E=n("252931"),C=n("882641"),g=n("476765"),S=n("837899"),_=n("402671"),I=n("449008"),T=n("99795"),v=n("958706"),x=n("894282"),N=n("321353");let A=v.EmojiIntention.CHAT,M=[p.default.getByName("thumbsup"),p.default.getByName("eyes"),p.default.getByName("laughing"),p.default.getByName("watermelon"),p.default.getByName("fork_and_knife"),p.default.getByName("yum")].filter(I.isNotNullish);function R(e){let{emoji:t,isDisabled:n=!1,onClick:s}=e,r=l.useRef(null),f=(0,c.default)(r);return(0,a.jsx)("span",{ref:r,children:(0,a.jsx)(o.Button,{onClick:s,look:o.Button.Looks.BLANK,size:o.Button.Sizes.NONE,children:(0,a.jsx)(u.Spring,{config:C.EMOJI_BUTTON_SPRING_CONFIG,from:{value:0},to:{value:f?1:0},children:e=>{let{value:l}=e;return(0,a.jsx)(u.animated.div,{style:{transform:l.to([0,1],[1,1.14]).to(e=>"scale(".concat(e,")"))},children:(0,a.jsx)(d.default,{className:i(N.emoji,{[N.emojiItemDisabled]:n}),emojiId:t.id,emojiName:null==t?void 0:t.surrogates,animated:t.animated})})}})})})}function j(e){let{otherAccessories:t,isEmojiPickerExpanded:n,onSetExpanded:l,onFocus:s}=e;return(0,a.jsxs)(a.Fragment,{children:[t,(0,a.jsx)(o.Clickable,{className:N.dropDownContainer,onClick:()=>{l(!n),s()},children:(0,a.jsx)(S.default,{className:i(N.dropDown,{[N.dropDownOpen]:n})})})]})}function L(e){let{channel:t,title:n,closePopout:s,onFocus:u,onSelectEmoji:d,onSelectDisabledEmoji:c,onExpandedToggle:p,emojiSearchProps:C,recentlyUsedEmojis:S,analyticsOverride:I}=e,L=(0,g.useUID)(),[O,y]=l.useState(!1),{viewAndUseEnabled:P}=(0,E.useInventoryGuildPacksUserExperiment)({autoTrackExposure:!1}),b=(0,f.useFrequentlyUsedEmojis)(t.guild_id),D=(0,r.uniqBy)([...b,...M],"name").filter(e=>!_.default.isEmojiFilteredOrLocked({emoji:e,channel:t,intention:A,canViewAndUsePackEmoji:P})).slice(0,T.EMOJI_PICKER_EMOJI_TO_SHOW_COUNT);null!=S&&S.length>0&&D.splice(D.length-1,1,S[0]);let U=e=>{y(e),null==p||p(e)},w=(e,t)=>{if(null==e&&t){s();return}null!=e&&d(e);U(!t),t&&m.EmojiPickerStore.setSearchPlaceholder(null)};return(0,a.jsxs)(o.Dialog,{"aria-labelledby":L,children:[(0,a.jsx)(o.HeadingLevel,{forceLevel:2,children:(0,a.jsx)(o.HiddenVisually,{children:(0,a.jsx)(o.H,{id:L,children:n})})}),(0,a.jsxs)("div",{className:N.container,children:[(0,a.jsx)(h.default,{analyticsOverride:I,channel:t,className:i(N.animatedPicker,{[N.animatedPickerTall]:O}),headerClassName:i(N.emojiPickerHeader,{[N.emojiPickerHeaderExpanded]:O}),closePopout:s,onSelectEmoji:O?w:()=>{},shouldHidePickerActions:!O,wrapper:"div",pickerIntention:A,searchProps:{...C,accessory:(0,a.jsx)(j,{otherAccessories:null==C?void 0:C.accessory,isEmojiPickerExpanded:O,onSetExpanded:U,onFocus:u}),onKeyDown:e=>{null!=e&&e.key!==x.KeyboardKeysUpdated.TAB&&(e.key!==x.KeyboardKeysUpdated.ENTER||e.shiftKey?U(!0):U(!O))}}}),(0,a.jsx)("div",{className:N.slotsContainer,children:(0,a.jsx)("div",{className:i(N.slots,N.slotsWide),children:D.map(e=>{let n=_.default.isEmojiDisabled({emoji:e,channel:t,intention:v.EmojiIntention.CHAT,canViewAndUsePackEmoji:P});return(0,a.jsx)("div",{className:N.slot,children:(0,a.jsx)(o.TooltipContainer,{text:e.name,position:"top","aria-label":e.name,tooltipClassName:N.tooltipContainer,color:o.Tooltip.Colors.BRAND,children:(0,a.jsx)(R,{emoji:e,isDisabled:n,onClick:()=>{n?null==c||c(e):w(e,!0)}})})},e.name)})})})]})]})}},824135:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("446674"),l=n("6263"),s=n("233069"),i=n("42203"),r=n("305961"),u=n("18494"),o=n("49111");function d(e,t){let n=(0,a.useStateFromStores)([r.default],()=>r.default.getGuild(t)),d=(0,a.useStateFromStores)([i.default],()=>i.default.getChannel(e)),c=(0,a.useStateFromStores)([u.default],()=>u.default.getChannelId(t)),{showOnboardingHome:f}=l.default.useExperiment({location:"52235f_1"},{autoTrackExposure:!1});return e===c&&null!=d&&null!=n&&d.getGuildId()===n.id&&(0,s.isGuildTextChannelType)(d.type)&&n.hasFeature(o.GuildFeatures.WELCOME_SCREEN_ENABLED)&&n.hasFeature(o.GuildFeatures.COMMUNITY)&&(!f||!n.hasFeature(o.GuildFeatures.GUILD_SERVER_GUIDE))}},410348:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}}),n("222007"),n("808653");var a=n("917351"),l=n.n(a),s=n("446674"),i=n("913144"),r=n("990766"),u=n("374014"),o=n("706530");let d={},c={},f=new Set;function h(){d={},c={}}class p extends s.default.Store{getPreviewURL(e,t,n){let a=(0,u.encodeStreamKey)({streamType:null!=e?o.StreamTypes.GUILD:o.StreamTypes.CALL,guildId:e,channelId:t,ownerId:n}),l=d[a];return null==l||Date.now()>l.expires?(!f.has(a)&&(f.add(a),Promise.resolve().then(()=>{(0,r.fetchStreamPreview)(e,t,n)})),null):l.url}getPreviewURLForStreamKey(e){let{guildId:t,channelId:n,ownerId:a}=(0,u.decodeStreamKey)(e);return this.getPreviewURL(t,n,a)}getIsPreviewLoading(e,t,n){let a=(0,u.encodeStreamKey)({streamType:null!=e?o.StreamTypes.GUILD:o.StreamTypes.CALL,guildId:e,channelId:t,ownerId:n});return f.has(a)}}p.displayName="ApplicationStreamPreviewStore";var m=new p(i.default,{CONNECTION_OPEN:h,LOGOUT:h,STREAM_PREVIEW_FETCH_START:function(e){var t;let{streamKey:n}=e;c[n]=(null!==(t=c[n])&&void 0!==t?t:0)+1,f.add(n)},STREAM_PREVIEW_FETCH_SUCCESS:function(e){let{streamKey:t,previewURL:n}=e;d[t]={url:n,expires:Date.now()+12e4},c[t]=0,f.delete(t)},STREAM_PREVIEW_FETCH_FAIL:function(e){let{streamKey:t,retryAfter:n}=e;d[t]={url:null,expires:Date.now()+(null!=n?n:1e4*c[t])},f.delete(t)},VOICE_STATE_UPDATES:function(e){let{voiceStates:t}=e;return!(l.isEmpty(d)&&l.isEmpty(c))&&t.reduce((e,t)=>{let{userId:n,guildId:a,channelId:l,selfStream:s}=t;if(s)return e;let i=(0,u.encodeStreamKey)({streamType:null!=a?o.StreamTypes.GUILD:o.StreamTypes.CALL,guildId:a,channelId:l,ownerId:n});return delete d[i],delete c[i],!0},!1)}})},712234:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("446674"),l=n("913144");let s={toastsEnabledForChannel:{}},i=s;class r extends a.default.PersistedStore{initialize(e){i=null!=e?e:s}getToastsEnabled(e){var t;return null===(t=i.toastsEnabledForChannel[e])||void 0===t||t}getState(){return i}}r.displayName="CallChatToastsStore",r.persistKey="CallChatToasts";var u=new r(l.default,{CALL_CHAT_TOASTS_SET_ENABLED:function(e){let{channelId:t,toastsEnabled:n}=e;i.toastsEnabledForChannel[t]=n},LOGOUT:function(){i.toastsEnabledForChannel={}}})},501090:function(e,t,n){"use strict";let a;n.r(t),n.d(t,{default:function(){return U}}),n("222007"),n("808653"),n("424973");var l=n("917351"),s=n.n(l),i=n("446674"),r=n("913144"),u=n("447909"),o=n("233069"),d=n("159885"),c=n("158998"),f=n("42203"),h=n("319781"),p=n("27618"),m=n("697218"),E=n("49111");let C=!1,g="",S=0,_=[],I=!1,T=new Set,v=null;function x(){g="",S=0,_=[],T=new Set,C=!1,v=null}function N(e){g=e,S=0,A()}function A(){if(!C)return!1;let e=f.default.getChannel(v);if(0===g.trim().length)return null!=a&&a.clearQuery(),_=function(e){let t=p.default.getFriendIDs();return(null==e?void 0:e.isPrivate())&&(t=t.filter(t=>!e.recipients.includes(t))),t.reduce((e,t)=>{let n=m.default.getUser(t);return null==n?e:(e.push({user:n}),e)},[]).sort(R)}(e),!0;let t=null!=e?e.recipients:[];return null!=a&&a.setQuery(g,{friends:!0},t,function(){let e=h.default.getFrequentlyWithoutFetchingLatest(),t=e.filter(e=>e instanceof o.PrivateChannelRecord&&e.isDM()),n=Math.max(...t.map(e=>{let{id:t}=e;return h.default.getScoreWithoutFetchingLatest(t)})),a={};return t.forEach(e=>{let t=h.default.getScoreWithoutFetchingLatest(e.id),l=e.getRecipientId(),s=p.default.isFriend(l)?.2:0,i=null!=f.default.getDMFromUserId(l)?.1:0;a[l]=1+t/n+s+i}),a}()),!1}function M(){if(!C)return!1;let e=I;return(I=s.some(p.default.getRelationships(),e=>e===E.RelationshipTypes.FRIEND))!==e}function R(e,t){return(0,d.stripDiacritics)(c.default.getName(e.user).toLocaleLowerCase()).localeCompare((0,d.stripDiacritics)(c.default.getName(t.user).toLocaleLowerCase()))}function j(e){let{results:t}=e;C&&""!==g&&(_=t.map(e=>{let{id:t}=e;return{user:m.default.getUser(t)}}).filter(e=>null!=e.user),D.emitChange())}function L(){return null!=a&&(a.destroy(),a=null),u.default.getSearchContext(j,1e3)}function O(e){if(e.key!==E.NEW_GROUP_DM_POPOUT_ID)return!1;C=!0,M(),a=L(),v=null,N("")}function y(e){if(e.key!==E.NEW_GROUP_DM_POPOUT_ID)return!1;P()}function P(){null!=a&&(a.destroy(),a=null),x()}class b extends i.default.Store{initialize(){this.waitFor(m.default,f.default,p.default),this.syncWith([m.default,f.default],A),this.syncWith([p.default],M)}getResults(){return _}hasFriends(){return I}getSelectedUsers(){return T}getQuery(){return g}getState(){return{query:g,selectedRow:S,selectedUsers:T,results:_,hasFriends:I}}}b.displayName="PrivateChannelRecipientsInviteStore";let D=new b(r.default,{CONNECTION_OPEN:function(){x()},CHANNEL_SELECT:function(e){let{guildId:t,channelId:n}=e;if(null!=t)return!1;let a=C;return x(),C=a,v=n,A()},MODAL_PUSH:O,SHOW_ACTION_SHEET:O,PRIVATE_CHANNEL_RECIPIENTS_INVITE_OPEN:function(e){C=!0,M(),a=L(),v=e.channelId,N("")},MODAL_POP:y,HIDE_ACTION_SHEET:y,PRIVATE_CHANNEL_RECIPIENTS_INVITE_CLOSE:P,PRIVATE_CHANNEL_RECIPIENTS_INVITE_QUERY:function(e){v=e.channelId,N(e.query)},PRIVATE_CHANNEL_RECIPIENTS_INVITE_SELECT:function(e){S=e.row},PRIVATE_CHANNEL_RECIPIENTS_ADD_USER:function(e){let{userId:t}=e;T.add(t),T=new Set(T)},PRIVATE_CHANNEL_RECIPIENTS_REMOVE_USER:function(e){let{userId:t}=e;T.delete(t),T=new Set(T)}});var U=D},402904:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("917351"),l=n.n(a),s=n("446674"),i=n("913144"),r=n("305961");let u=null,o={};class d extends s.default.Store{initialize(){this.waitFor(r.default)}getOptimalRegion(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.getRegions(t);return null!=n?null!==(e=n.find(e=>{let{optimal:t}=e;return t}))&&void 0!==e?e:l.sample(n):null}getOptimalRegionId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getOptimalRegion(e);return null!=t?t.id:null}getRandomRegion(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getRegions(e);return null!=t?l.sample(t):null}getRandomRegionId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getRandomRegion(e);return null!=t?t.id:null}getRegions(e){return null!=e?o[e]:u}}d.displayName="RegionStore";var c=new d(i.default,{LOAD_REGIONS:function(e){let t=l.sortBy(e.regions,e=>e.name);null!=e.guildId?o[e.guildId]=t:u=t},GUILD_DELETE:function(e){delete o[e.guild.id]}})},440351:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("77078"),u=n("145131"),o=n("296165"),d=n("926622");class c extends l.PureComponent{render(){let{title:e,description:t,agreement:n,disagreement:l,onAgree:s,onDisagree:c,imageClassName:f}=this.props;return(0,a.jsxs)(u.default,{className:o.gatedContent,justify:u.default.Justify.CENTER,align:u.default.Align.CENTER,direction:u.default.Direction.VERTICAL,children:[(0,a.jsx)("div",{className:i(o.image,f)}),(0,a.jsx)("div",{className:i(o.title,d.marginBottom8),children:e}),(0,a.jsx)("div",{className:i(o.description,d.marginBottom20),children:t}),(0,a.jsxs)(u.default,{justify:u.default.Justify.CENTER,align:u.default.Align.CENTER,grow:0,children:[null!=l?(0,a.jsx)(r.Button,{className:o.action,size:r.ButtonSizes.LARGE,color:r.ButtonColors.PRIMARY,onClick:c,children:l}):null,null!=n?(0,a.jsx)(r.Button,{className:o.action,color:r.Button.Colors.RED,size:r.ButtonSizes.LARGE,onClick:s,children:n}):null]})]})}}var f=c},646240:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("77078"),u=n("381546"),o=n("229915"),d=n("782340"),c=n("913893");class f extends l.Component{render(){let{autoFocus:e,label:t,placeholder:n,searchTerm:l,inputClassName:s,className:f,onChange:h,onFocus:p,onBlur:m,onKeyPress:E,autoComplete:C,forwardedRef:g,closeIconClassName:S,searchIconClassName:_,cta:I}=this.props,T=null!=l&&l.length>0,v=null!=g?g:this._textInputRef;return(0,a.jsx)(r.FocusRing,{focusTarget:v,ringTarget:this._containerRef,children:(0,a.jsxs)("div",{className:i(c.searchBox,f),ref:this._containerRef,children:[(0,a.jsx)(r.TextInput,{inputRef:v,focusProps:{enabled:!1},name:"search",maxLength:100,className:c.searchBoxInputWrapper,inputClassName:i(c.searchBoxInput,s),onChange:h,onFocus:p,onBlur:m,onKeyPress:E,value:T?l:"",placeholder:n,autoFocus:e,"aria-label":t,autoComplete:C?"on":"off"}),null!=I?(0,a.jsx)(r.Text,{color:"text-muted",variant:"text-xs/normal",className:c.cta,children:I}):null,T?(0,a.jsx)(r.Clickable,{onClick:this.handleClear,className:c.clear,"aria-label":d.default.Messages.SEARCH_CLEAR,children:(0,a.jsx)(u.default,{className:i(c.clearIcon,S)})}):(0,a.jsx)(o.default,{className:i(c.searchIcon,_),"aria-label":d.default.Messages.SEARCH})]})})}constructor(...e){super(...e),this._textInputRef=l.createRef(),this._containerRef=l.createRef(),this.handleClear=()=>{let{onClear:e,forwardedRef:t}=this.props,{current:n}=null!=t?t:this._textInputRef;null!=n&&n.focus(),null!=e&&e()}}}f.defaultProps={autoComplete:!1};var h=l.forwardRef((e,t)=>(0,a.jsx)(f,{forwardedRef:t,...e}))},466079:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}}),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("944832"),u=n("124299"),o=n("127868");let d=16/9;function c(e,t){return Math.floor((t-e)/(8+e))+1}function f(e,t,n){let a=t-e;for(;a>0;){let t=e,l=Math.floor(a/2);n(t+=l)?(e=t+1,a-=l+1):a=l}return e}function h(e){var t;let{className:n,children:s,keyExtractor:h,paddingTop:p=0,paddingBottom:m=0}=e,[E,C]=l.useState({width:0,height:0}),{width:g,height:S}=E,_=null!==(t=null==s?void 0:s.length)&&void 0!==t?t:0,I=g-16,T=S-(p+m),{tileStyle:v,tileWidth:x,rows:N,columns:A}=l.useMemo(()=>(function(e,t,n){let{rows:a,columns:l,tileWidth:s}=function(e,t,n){let a;let l=Math.floor(t/25);a=e>25?f(l,t,e=>{let a=c(e,t),l=function(e,t){let n=e/d;return Math.ceil((t-n)/(8+n))+1}(e,n);return a*l>25}):f(l,t,a=>{let l=c(a,t),s=function(e,t){let n=e/d;return Math.floor((t-n)/(8+n))+1}(a,n);return l*s>=e})-1;let s=c(a,t),i=Math.ceil(e/s);return{tileWidth:a,columns:Math.max(1,s),rows:i}}(e,t,n);return{tileStyle:{width:s},tileWidth:s,rows:a,columns:l}})(_,I,T),[_,I,T]),M=A+1,R=M*x+(M-1)*8,j=R<=g,L=Math.floor(x/d)+8,O=Math.max(0,T-L*N)/2;return(0,a.jsx)(u.default,{fade:!0,className:n,listPadding:[p+O,0,m+O-8,8],renderRow:function(e){var t;let n=e*A;return(0,a.jsx)("div",{className:o.row,children:null==s?void 0:null===(t=s.slice(n,n+A))||void 0===t?void 0:t.map((e,t)=>{var l;let s=n+t;return(0,a.jsx)("div",{style:v,className:i(o.tile,{[o.padColumn]:j,[o.noVerticalMargin]:s>=(N-1)*A,[o.noHorizontalMargin]:(s+1)%A==0||s===_-1}),children:(0,a.jsx)(r.default,{className:o.tileSizer,aspectRatio:d,children:e(x)})},null!==(l=null==h?void 0:h(s))&&void 0!==l?l:s)})},e)},rowCount:N,rowCountBySection:[N],rowHeight:L,onResize:C})}},512264:function(e,t,n){"use strict";n.r(t),n.d(t,{VideoStreamFit:function(){return a},default:function(){return m}}),n("222007");var a,l,s=n("37983"),i=n("884691"),r=n("414456"),u=n.n(r),o=n("77078"),d=n("103723"),c=n("474293"),f=n("944832"),h=n("391763");(l=a||(a={})).CONTAIN="contain",l.COVER="cover";let p=i.memo(function(e){let{streamId:t,onResize:n,wrapperClassName:a,videoComponent:l,className:r,fit:p="contain",mirror:m=!1,paused:E=!1,streamPreviewURL:C,videoSpinnerContext:g,userId:S}=e,[_,I]=i.useState(!0),[T]=i.useState(()=>new d.VideoSpinnerTimer("VideoStream"));i.useEffect(()=>{!E&&(_?T.onSpinnerStarted():null!=t&&T.trackSpinnerDuration(g,S,t))},[_,E,t,T,g,S]);let v=i.useCallback(()=>{I(!1)},[]);return(0,s.jsxs)("div",{className:u(h.wrapper,a),children:[null!=t&&(0,s.jsx)(l,{className:u(h.video,(0,c.getClass)(h,"video",p),{[h.mirror]:m},r),streamId:t,onResize:n,onReady:v,paused:E}),E?null:(0,s.jsx)("div",{className:u(h.previewWrapper,{[h.loading]:_}),children:_&&(0,s.jsxs)(i.Fragment,{children:[null!=C?(0,s.jsx)("img",{src:C,alt:"",className:h.previewImage}):(0,s.jsx)(f.default,{aspectRatio:16/9,className:h.emptyPreviewWrapper,children:(0,s.jsx)("div",{className:h.emptyPreview})}),(0,s.jsx)(o.Spinner,{className:h.spinner})]})})]})});var m=p},998650:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("47115"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,background:r,...u}=e;return(0,a.jsxs)("svg",{...(0,i.default)(u),width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{className:s,fill:l,d:"M21.178 1.70703L22.592 3.12103L4.12103 21.593L2.70703 20.178L21.178 1.70703Z"}),(0,a.jsx)("path",{className:r,fill:l,d:"M18 10.5283L10.5287 18H21V17C19.344 17 18 15.657 18 14V10.5283Z"}),(0,a.jsx)("path",{className:r,fill:l,d:"M8.957 19.5718L9.52877 19H15.4449C14.7519 20.19 13.4759 21 11.9999 21C10.7748 21 9.68752 20.442 8.957 19.5718Z"}),(0,a.jsx)("path",{className:r,fill:l,d:"M12 3C13.417 3 14.71 3.5 15.734 4.321L5.99805 14.058C5.99805 14.0479 5.99856 14.038 5.99907 14.0283C5.99956 14.0188 6.00005 14.0094 6.00005 14V9C6.00005 5.686 8.68605 3 12 3Z"})]})},s.BellSlashIcon,void 0,{size:24})},328275:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("833222"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=32,height:n=32,color:l="currentColor",...s}=e;return(0,a.jsxs)("svg",{...(0,i.default)(s),width:t,height:n,viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("clipPath",{children:(0,a.jsx)("path",{d:"m.000183 0h16v16h-16z"})}),(0,a.jsx)("g",{clipPath:"url(#a)",children:(0,a.jsx)("path",{d:"m7.90039 1c-3.9 0-6.999999 3.1-6.999999 7s3.099999 7 6.999999 7c3.90001 0 7.00001-3.1 7.00001-7s-3.2-7-7.00001-7zm0 2.3c.8 0 1.6.3 2.30001.7l-6.40001 6.4c-.3-.7-.6-1.5-.6-2.4 0-2.6 2.1-4.7 4.7-4.7zm0 9.4c-.9 0-1.7-.3-2.4-.7l6.40001-6.4c.4.7.7 1.5.7 2.4-.1 2.6-2.2 4.7-4.70001 4.7z",fill:l})})]})},s.DenyIcon,void 0,{size:32})},887657:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("202998"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsx)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{className:s,fill:l,fillRule:"evenodd",clipRule:"evenodd",d:"M11 5V3C16.515 3 21 7.486 21 13H19C19 8.589 15.411 5 11 5ZM17 13H15C15 10.795 13.206 9 11 9V7C14.309 7 17 9.691 17 13ZM11 11V13H13C13 11.896 12.105 11 11 11ZM14 16H18C18.553 16 19 16.447 19 17V21C19 21.553 18.553 22 18 22H13C6.925 22 2 17.075 2 11V6C2 5.447 2.448 5 3 5H7C7.553 5 8 5.447 8 6V10C8 10.553 7.553 11 7 11H6C6.063 14.938 9 18 13 18V17C13 16.447 13.447 16 14 16Z"})})},s.PhoneCallIcon,void 0,{size:24})},570443:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("918703"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsx)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{className:s,fill:l,fillRule:"evenodd",clipRule:"evenodd",d:"M20.998 0V3H23.998V5H20.998V8H18.998V5H15.998V3H18.998V0H20.998ZM2.99805 20V24L8.33205 20H14.998C16.102 20 16.998 19.103 16.998 18V9C16.998 7.896 16.102 7 14.998 7H1.99805C0.894047 7 -0.00195312 7.896 -0.00195312 9V18C-0.00195312 19.103 0.894047 20 1.99805 20H2.99805Z"})})},s.ChatPlusIcon,void 0,{size:24})},717018:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("594881"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=16,height:n=16,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 16 16",children:[(0,a.jsx)("path",{className:s,fill:l,d:"M6.78802 8.60547H2.54555C2.211 8.60547 1.93949 8.87699 1.93949 9.21154C1.93949 9.54608 2.211 9.8176 2.54555 9.8176H5.32498L1.511 13.6316C1.27433 13.8682 1.27433 14.2519 1.511 14.4886C1.62918 14.607 1.78433 14.6661 1.93949 14.6661C2.09464 14.6661 2.24979 14.607 2.36798 14.4886L6.18195 10.6746V13.454C6.18195 13.7886 6.45347 14.0601 6.78802 14.0601C7.12257 14.0601 7.39409 13.7886 7.39409 13.454V9.21154C7.39409 8.87699 7.12257 8.60547 6.78802 8.60547Z"}),(0,a.jsx)("path",{className:s,fill:l,d:"M14.4891 1.50953C14.2524 1.27286 13.8687 1.27286 13.6321 1.50953L9.81809 5.32351V2.54409C9.81809 2.20954 9.54657 1.93802 9.21202 1.93802C8.87748 1.93802 8.60596 2.20954 8.60596 2.54409V6.78655C8.60596 7.1211 8.87748 7.39262 9.21202 7.39262H13.4545C13.789 7.39262 14.0606 7.1211 14.0606 6.78655C14.0606 6.45201 13.789 6.18049 13.4545 6.18049H10.6751L14.4891 2.36651C14.7257 2.12984 14.7257 1.7462 14.4891 1.50953Z"})]})},s.MinimizeIcon,void 0,{size:16})},293499:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("26309"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=22,height:n=20,color:l="currentColor",...s}=e;return(0,a.jsxs)("svg",{...(0,i.default)(s),width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M15.9829 8.45685C16.4834 8.9082 17.0602 9.27649 17.6918 9.53992C17.1979 10.7194 16.1545 11.6141 14.8834 11.9017C14.8022 11.8683 14.7203 11.8358 14.6378 11.8041C15.3982 10.8785 15.8873 9.72192 15.9829 8.45685Z",fill:l}),(0,a.jsx)("path",{d:"M14 8C14 10.205 12.206 12 10 12C7.79501 12 6 10.205 6 8C6 5.79498 7.79401 4 10 4C12.206 4 14 5.79498 14 8Z",fill:l}),(0,a.jsx)("path",{d:"M2 19C2 15.467 5.29001 13 10 13C14.711 13 18 15.467 18 19V20H2V19Z",fill:l}),(0,a.jsx)("path",{d:"M22.0001 20H20.0001V19C20.0001 16.7999 19.0621 14.9067 17.5213 13.5292C20.2697 14.4355 22.0001 16.4374 22.0001 19V20Z",fill:l}),(0,a.jsx)("path",{d:"M-439.135 -677.865L-436.999 -675.729H-442V-674.271H-436.999L-439.135 -672.135L-438 -671L-434 -675L-438 -679L-439.135 -677.865Z",fill:l}),(0,a.jsx)("path",{d:"M-446 -677C-445.566 -677 -445.153 -676.908 -444.781 -676.743C-444.924 -676.186 -445 -675.602 -445 -675C-445 -673.096 -444.24 -671.37 -443.007 -670.108L-443.01 -668C-443.01 -666.34 -444.34 -665 -446 -665C-447.66 -665 -449 -666.34 -449 -668V-674C-449 -675.66 -447.66 -677 -446 -677Z",fill:l}),(0,a.jsx)("path",{d:"M-446 -662.9C-443.24 -662.9 -440.7 -665 -440.7 -668H-439C-439 -664.58 -441.72 -661.76 -445 -661.28V-657H-447V-661.28C-450.28 -661.77 -453 -664.59 -453 -668H-451.3C-451.3 -665 -448.76 -662.9 -446 -662.9Z",fill:l}),(0,a.jsx)("path",{d:"M22.8648 2.86484L20.7293 5.00126L20.7293 -1.42968e-07L19.2707 -2.06723e-07L19.2707 5.00126L17.1352 2.86484L16 4L20 8L24 4L22.8648 2.86484Z",fill:l})]})},s.GroupArrowDownIcon,void 0,{size:22})},407691:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("821355"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("rect",{className:s,x:"4",y:"4",width:"7",height:"7",rx:"1",fill:l}),(0,a.jsx)("rect",{className:s,x:"4",y:"13",width:"7",height:"7",rx:"1",fill:l}),(0,a.jsx)("rect",{className:s,x:"13",y:"4",width:"7",height:"7",rx:"1",fill:l}),(0,a.jsx)("rect",{className:s,x:"13",y:"13",width:"7",height:"7",rx:"1",fill:l})]})},s.GridSquareIcon,void 0,{size:24})},200639:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("838048"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M6.16204 15.0065C6.10859 15.0022 6.05455 15 6 15H4V12C4 7.588 7.589 4 12 4C13.4809 4 14.8691 4.40439 16.0599 5.10859L17.5102 3.65835C15.9292 2.61064 14.0346 2 12 2C6.486 2 2 6.485 2 12V19.1685L6.16204 15.0065Z",fill:l}),(0,a.jsx)("path",{d:"M19.725 9.91686C19.9043 10.5813 20 11.2796 20 12V15H18C16.896 15 16 15.896 16 17V20C16 21.104 16.896 22 18 22H20C21.105 22 22 21.104 22 20V12C22 10.7075 21.7536 9.47149 21.3053 8.33658L19.725 9.91686Z",fill:l}),(0,a.jsx)("path",{d:"M3.20101 23.6243L1.7868 22.2101L21.5858 2.41113L23 3.82535L3.20101 23.6243Z",className:s,fill:l})]})},s.HeadphonesSlashIcon,void 0,{size:24})},229997:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("831055"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("rect",{className:s,x:"3",y:"3",width:"18",height:"10",rx:"1",fill:l}),(0,a.jsx)("rect",{className:s,x:"3",y:"15",width:"8",height:"6",rx:"1",fill:l}),(0,a.jsx)("rect",{className:s,x:"13",y:"15",width:"8",height:"6",rx:"1",fill:l})]})},s.GridHorizontalIcon,void 0,{size:24})},472037:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("565422"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 20 16",children:[(0,a.jsx)("path",{d:"M15.428 8.127H4.368a.923.923 0 0 1-.921-.921c0-.576.533-.859 1.012-.931l8.656-1.754-.49-2.782L4.3 3.524C2.068 3.856.681 5.267.681 7.206a3.69 3.69 0 0 0 3.687 3.686h11.06a.922.922 0 0 1 0 1.843H2.063a.46.46 0 0 0-.461.461v1.843a.46.46 0 0 0 .46.461h13.364a3.686 3.686 0 1 0 0-7.373Z",fill:l,className:s}),(0,a.jsx)("path",{d:"M19.152 1.602a.46.46 0 0 0-.477-.38l-3.305.166-.089-.507a.46.46 0 0 0-.534-.374l-.907.16a.46.46 0 0 0-.374.534l.64 3.63a.46.46 0 0 0 .534.374l.908-.16a.46.46 0 0 0 .373-.534l-.09-.507 3.163-.974a.46.46 0 0 0 .318-.52l-.16-.908Z",fill:l,className:s})]})},s.PaintbrushThinIcon,void 0,{size:24})},97347:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("780624"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M6.7 11H5C5 12.19 5.34 13.3 5.9 14.28L7.13 13.05C6.86 12.43 6.7 11.74 6.7 11Z",fill:l}),(0,a.jsx)("path",{d:"M9.01 11.085C9.015 11.1125 9.02 11.14 9.02 11.17L15 5.18V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 11.03 9.005 11.0575 9.01 11.085Z",fill:l}),(0,a.jsx)("path",{d:"M11.7237 16.0927L10.9632 16.8531L10.2533 17.5688C10.4978 17.633 10.747 17.6839 11 17.72V22H13V17.72C16.28 17.23 19 14.41 19 11H17.3C17.3 14 14.76 16.1 12 16.1C11.9076 16.1 11.8155 16.0975 11.7237 16.0927Z",fill:l}),(0,a.jsx)("path",{d:"M21 4.27L19.73 3L3 19.73L4.27 21L8.46 16.82L9.69 15.58L11.35 13.92L14.99 10.28L21 4.27Z",className:s,fill:l})]})},s.MicrophoneSlashIcon,void 0,{size:24})},267675:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("265614"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsx)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{className:s,fill:l,fillRule:"evenodd",clipRule:"evenodd",d:"M4 2.5C2.897 2.5 2 3.397 2 4.5V15.5C2 16.604 2.897 17.5 4 17.5H11V19.5H7V21.5H17V19.5H13V17.5H20C21.103 17.5 22 16.604 22 15.5V4.5C22 3.397 21.103 2.5 20 2.5H4ZM20 4.5V13.5H4V4.5H20Z"})})},s.ScreenIcon,void 0,{size:24})},821391:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}}),n("222007");var a=n("37983"),l=n("884691"),s=n("748820"),i=n("469563"),r=n("496061"),u=n("75196"),o=(0,i.replaceIcon)(function(e){let{width:t=24,height:n=24,color:i="currentColor",foreground:r,...o}=e,[d]=l.useState(()=>(0,s.v4)());return(0,a.jsxs)("svg",{...(0,u.default)(o),width:t,height:n,viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsxs)("g",{clipPath:"url(".concat(d,")"),children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4.49956C2 3.39656 2.897 2.49956 4 2.49956H16.3994L2.3179 16.5811C2.11679 16.2692 2 15.8979 2 15.4996L2 4.49956ZM7.88469 19.4996H11L11 17.4996H9.88469L22 5.38426L22 15.4996C22 16.6036 21.103 17.4996 20 17.4996L13 17.4996L13 19.4996L17 19.4996L17 21.4996H7L7 20.3843L7.88469 19.4996Z",fill:i}),(0,a.jsx)("rect",{className:r,x:"1.53553",y:"20.1924",width:"28",height:"2",transform:"rotate(-45 1.53553 20.1924)",fill:"#ED4245"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:d,children:(0,a.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]})},r.ScreenSlashIcon,void 0,{size:24})},152224:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("559981"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsx)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{className:s,fill:l,fillRule:"evenodd",clipRule:"evenodd",d:"M20.2949 0.298996L21.7089 1.713L19.4169 4.006L21.7089 6.299L20.2949 7.713L18.0019 5.42L15.7099 7.713L14.2949 6.299L16.5879 4.006L14.2949 1.713L15.7099 0.298996L18.0019 2.592L20.2949 0.298996ZM8.00195 13.006C10.207 13.006 12.002 11.211 12.002 9.006C12.002 6.801 10.207 5.006 8.00195 5.006C5.79695 5.006 4.00195 6.801 4.00195 9.006C4.00195 11.211 5.79695 13.006 8.00195 13.006ZM8.00195 14.006C3.29095 14.006 0.00195312 16.473 0.00195312 20.006V21.006H16.002V20.006C16.002 16.473 12.713 14.006 8.00195 14.006Z"})})},s.UserMinusIcon,void 0,{size:24})},849483:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("392646"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsx)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsxs)("g",{fill:"none",className:s,children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C12.4883 22 12.9684 21.965 13.438 21.8974C12.5414 20.8489 12 19.4877 12 18C12 17.6593 12.0284 17.3252 12.083 17H6V16.0244C6 14.0732 10 13 12 13C12.6215 13 13.436 13.1036 14.2637 13.305C15.2888 12.4882 16.5874 12 18 12C19.4877 12 20.8489 12.5414 21.8974 13.438C21.965 12.9684 22 12.4883 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12 12C13.66 12 15 10.66 15 9C15 7.34 13.66 6 12 6C10.34 6 9 7.34 9 9C9 10.66 10.34 12 12 12Z",fill:l}),(0,a.jsx)("path",{d:"M18 22C20.2091 22 22 20.2091 22 18C22 15.7909 20.2091 14 18 14C15.7909 14 14 15.7909 14 18C14 20.2091 15.7909 22 18 22Z",fill:l})]})})},s.UserCircleStatusIcon,void 0,{size:24})},519794:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("543324"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=16,height:n=16,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsx)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("g",{fill:"none",fillRule:"evenodd",children:(0,a.jsx)("path",{className:s,fill:l,d:"M19 3H5V5H7V12H5V14H11V22H13V14H19V12H17V5H19V3Z"})})})},s.PinUprightIcon,void 0,{size:16})},924506:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("903834"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M5.66747 20.3625C4.60336 21.4277 4.25395 25.5781 4.25395 25.5781C4.25395 25.5781 8.40516 25.2302 9.47018 24.165C9.96634 23.6697 10.2203 23.0275 10.2539 22.3785L7.46675 22.3647L7.4522 19.5781C6.80337 19.6118 6.16363 19.8662 5.66747 20.3625Z",fill:l,className:s}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.18187 16.9929L12.8389 22.6489L14.253 21.2347L15.3137 25.8309L17.0815 24.0632V18.4063L20.6171 14.8707C22.0313 13.4566 24.8598 10.0617 23.4455 6.38545C19.7684 4.97117 16.3744 7.79971 14.9606 9.21422L7.18187 16.9929ZM18.3172 13.5111C19.4217 13.5111 20.3172 12.6156 20.3172 11.5111C20.3172 10.4065 19.4217 9.51106 18.3172 9.51106C17.2126 9.51106 16.3172 10.4065 16.3172 11.5111C16.3172 12.6156 17.2126 13.5111 18.3172 13.5111Z",fill:l,className:s}),(0,a.jsx)("path",{d:"M11.4246 12.7495H5.76775L4 14.5172L8.59617 15.5779L11.4246 12.7495Z",fill:l,className:s}),(0,a.jsx)("path",{d:"M25 18V21H28V23H25V26H23V23H20V21H23V18H25Z",fill:l,className:s})]})},s.ActivitiesPlusIcon,void 0,{size:24})},394640:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("283322"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",className:s,foreground:r,...u}=e;return(0,a.jsx)("svg",{...(0,i.default)(u),className:s,width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{className:r,fill:l,d:"M22 16.53C22 18.3282 20.2485 19.7837 18.089 19.7837C15.9285 19.7837 14.5396 18.3277 14.5396 16.53C14.5396 14.7319 15.9286 13.2746 18.089 13.2746C18.7169 13.2746 19.3089 13.4013 19.8353 13.6205V5.814L9.46075 7.32352V18.7449C9.46075 20.5424 7.70957 22 5.54941 22C3.38871 22 2 20.5443 2 18.7456C2 16.9481 3.3892 15.4898 5.54941 15.4898C6.17823 15.4898 6.76966 15.6162 7.29604 15.836C7.29604 11.3608 7.29604 8.5366 7.29604 4.1395L21.9996 2L22 16.53Z"})})},s.MusicIcon,void 0,{size:24})},343571:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("473109"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",slashColor:s,className:r,foreground:u,...o}=e;return(0,a.jsxs)("svg",{...(0,i.default)(o),className:r,width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{className:u,fill:l,fillRule:"evenodd",clipRule:"evenodd",d:"M5.25208 21.9906C5.34946 21.9968 5.44859 22 5.54939 22C7.70956 22 9.46073 20.5424 9.46073 18.7449V17.782L5.25208 21.9906ZM11.7699 6.98753L9.46073 7.32352V9.29667L7.29603 11.4614V4.13949L15.8647 2.89267L11.7699 6.98753ZM19.8353 7.4074V13.6205C19.3089 13.4013 18.7169 13.2746 18.089 13.2746C15.9286 13.2746 14.5395 14.7319 14.5395 16.53C14.5395 18.3277 15.9284 19.7837 18.089 19.7837C20.2485 19.7837 22 18.3282 22 16.53L21.9996 5.24304L19.8353 7.4074Z"}),(0,a.jsx)("rect",{fill:null!=s?s:l,x:"2.80762",y:"18.7783",width:"24",height:"2",transform:"rotate(-45 2.80762 18.7783)"})]})},s.MusicSlashIcon,void 0,{size:24})},625687:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("37983");n("884691");var l=n("75196");function s(e){let{width:t=32,height:n=32,color:s="currentColor",foreground:i,...r}=e;return(0,a.jsxs)("svg",{...(0,l.default)(r),width:t,height:n,viewBox:"0 0 32 32",children:[(0,a.jsx)("rect",{width:"32",height:"32",rx:"16",fill:s}),(0,a.jsx)("path",{d:"M23 9.99995C19.56 9.99995 16.826 6.43495 16.799 6.39795C16.421 5.89795 15.579 5.89795 15.201 6.39795C15.174 6.43495 12.44 9.99995 9 9.99995C8.447 9.99995 8 10.4479 8 10.9999V17.9999C8 21.8069 14.764 25.4779 15.534 25.8839C15.68 25.9609 15.84 25.9979 16 25.9979C16.16 25.9979 16.32 25.9599 16.466 25.8839C17.236 25.4779 24 21.8069 24 17.9999V10.9999C24 10.4479 23.553 9.99995 23 9.99995ZM19 19.9999L16 17.9999L13 19.9999L14 16.9999L12 14.9999H15L16 11.9999L17 14.9999H20L18 16.9999L19 19.9999Z",className:i})]})}},393900:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var l=n("669491"),s=n("469563"),i=n("382269"),r=n("75196"),u=(0,s.replaceIcon)(function(e){let{width:t=24,height:n=24,color:s="currentColor",foregroundColor:i=l.default.unsafe_rawColors.RED_400.css,foreground:u,background:o,...d}=e;return(0,a.jsxs)("svg",{...(0,r.default)(d),width:t,height:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("g",{fill:"none",fillRule:"evenodd",children:(0,a.jsx)("path",{className:u,fill:i,d:"M21.47,3.39,20.14,2.05,2.53,19.66,3.86,21l4.41-4.4,1.3-1.31,1.75-1.74,3.83-3.83Z"})}),(0,a.jsxs)("g",{fill:"none",children:[(0,a.jsx)("polygon",{points:"17 11.14 16.55 11.59 14.14 14 19 14 19 12 17 12 17 11.14",className:o,fill:s}),(0,a.jsx)("polygon",{points:"16.91 3 5 3 5 5 7 5 7 12 5 12 5 14 5.91 14 16.91 3",className:o,fill:s}),(0,a.jsx)("polygon",{points:"12.72 15.42 11 17.14 11 22 13 22 13 15.14 12.72 15.42",className:o,fill:s})]})]})},i.PinUprightSlashIcon,void 0,{size:24})},763984:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var l=n("469563"),s=n("392800"),i=n("75196"),r=(0,l.replaceIcon)(function(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:s,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("rect",{className:s,x:"1",y:"4",width:"13",height:"16",rx:"2",fill:l}),(0,a.jsx)("rect",{className:s,x:"16",y:"4",width:"7",height:"7",rx:"1",fill:l}),(0,a.jsx)("rect",{className:s,x:"16",y:"13",width:"7",height:"7",rx:"1",fill:l})]})},s.GridVerticalIcon,void 0,{size:24})},823050:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a,l,s=n("37983"),i=n("884691"),r=n("414456"),u=n.n(r),o=n("77078"),d=n("200639"),c=n("97347"),f=n("587974"),h=n("989769");(a=l||(l={}))[a.OUTGOING=0]="OUTGOING",a[a.INCOMING=1]="INCOMING";class p extends i.PureComponent{renderStatus(){let{muted:e,deafen:t}=this.props,n=t?d.default:c.default;return e||t?(0,s.jsx)(n,{className:h.status},"status"):null}renderBorder(){let{speaking:e}=this.props;return(0,s.jsx)("div",{className:u(h.border,{[h.speaking]:e})},"border")}renderMask(){let{muted:e,speaking:t,deafen:n}=this.props;return e&&t?(0,s.jsxs)(s.Fragment,{children:[this.renderBorder(),this.renderStatus()]}):e||n?(0,s.jsx)(s.Fragment,{children:this.renderStatus()}):(0,s.jsx)(s.Fragment,{children:this.renderBorder()})}renderVoiceCallAvatar(){let{src:e,disabled:t,ringing:n,ringingType:a,avatarClassName:l,muted:i,deafen:r,size:d,renderIcon:c}=this.props,p=(0,o.getAvatarSize)(d),m=(0,s.jsx)("img",{src:e,alt:" ",className:u(h.voiceAvatar,l,{[h.ringingOutgoing]:n&&0===a})});if(t)return m;let E=f.MaskIDs.AVATAR_DEFAULT;return null!=c?E=d===o.AvatarSizes.SIZE_32?f.MaskIDs.AVATAR_CALL_ICON_32:f.MaskIDs.AVATAR_CALL_ICON:(i||r)&&(E=f.MaskIDs.AVATAR_VOICE_CALL_80),(0,s.jsxs)("div",{className:h.callAvatarMaskContainer,children:[(0,s.jsxs)(f.default,{className:h.callAvatarMask,width:p,height:p,mask:E,children:[null==c?void 0:c(),m]}),this.renderMask()]})}render(){let{size:e,onClick:t,style:n,onContextMenu:a,className:l,ringingType:i,ringing:r}=this.props,d=u(h.wrapper,{[h.clickable]:null!=t,[h.ringingOutgoing]:r&&0===i,[h.ringingIncoming]:r&&1===i},l),c=(0,o.getAvatarSize)(e),f={height:c,width:c,...n};return(0,s.jsx)("div",{style:f,onContextMenu:a,className:d,children:this.renderVoiceCallAvatar()})}}p.defaultProps={size:o.AvatarSizes.SIZE_80,ringingType:0,speaking:!1,soundsharing:!1,ringing:!1,muted:!1,deafen:!1,hasVideo:!1,mirror:!1,disabled:!1,paused:!1},p.RingingType=l;var m=p},68148:function(e,t,n){"use strict";n.r(t),n.d(t,{VoiceUserList:function(){return L},default:function(){return P}}),n("424973"),n("222007");var a=n("37983"),l=n("884691"),s=n("414456"),i=n.n(s),r=n("966900"),u=n("838048"),o=n("359902"),d=n("780624"),c=n("77078"),f=n("204947"),h=n("925749"),p=n("342845"),m=n("437825"),E=n("142303"),C=n("462579"),g=n("200639"),S=n("97347"),_=n("998564"),I=n("420145"),T=n("82636"),v=n("980423"),x=n("158998"),N=n("49111"),A=n("99795"),M=n("171644"),R=n("782340"),j=n("593596");let L=e=>{let{children:t,collapsed:n=!1,className:l}=e;return(0,a.jsx)("div",{className:i(l,j.list,n?j.listCollapse:j.listDefault),role:"group",children:t})},O=e=>{let{hangStatusActivity:t,iconClassName:n}=e;return(0,a.jsx)(c.TooltipContainer,{className:j.iconSpacing,text:(0,h.getHangStatusText)(t),children:(0,a.jsx)(p.default,{hangStatusActivity:t,className:i(j.icon,n)})},"hang-status")};class y extends l.Component{renderPrioritySpeaker(){let{speaking:e,priority:t,collapsed:n,mute:l,serverMute:s}=this.props;return t&&!n?(0,a.jsx)(c.Tooltip,{text:R.default.Messages.PRIORITY_SPEAKER,children:t=>(0,a.jsx)("div",{className:i(j.iconPriortySpeaker,{[j.iconPriortySpeakerSpeaking]:!l&&!s&&e}),...t})}):null}renderAvatar(){let{speaking:e,user:t,size:n,avatarContainerClass:l,guildId:s}=this.props;return(0,a.jsx)("div",{className:i(l,j.avatar,{[j.avatarLarge]:n===N.OverlayAvatarSizes.LARGE,[j.avatarSmall]:n===N.OverlayAvatarSizes.SMALL,[j.avatarSpeaking]:e}),style:{backgroundImage:"url(".concat(t.getAvatarURL(s,n===N.OverlayAvatarSizes.LARGE?38:24),")")}})}renderName(){let{nick:e,user:t,collapsed:n,speaking:l,userNameClassName:s,mute:r,serverMute:u,isGuest:o}=this.props;return n?null:(0,a.jsxs)("div",{className:i(s,{[j.username]:!0,[j.usernameSpeaking]:!r&&!u&&l}),children:[null!=e?e:x.default.getName(t),o?(0,a.jsxs)("span",{className:j.guestSuffix,children:["\xa0",R.default.Messages.GUEST_NAME_SUFFIX]}):""]})}renderIcons(){let{mute:e,localMute:t,localVideoDisabled:n,serverMute:l,deaf:s,serverDeaf:r,collapsed:u,video:o,isStreaming:d,disabled:h,isWatching:p,iconClassName:g,embeddedApplication:S,otherClientSessionType:x,voicePlatform:L,hangStatusActivity:y}=this.props;if(u||h)return null;let P=[],D=(0,a.jsx)(b,{iconClassName:g,mute:e,localMute:t,serverMute:l,deaf:s,serverDeaf:r});o&&(n?P.push((0,a.jsx)(c.TooltipContainer,{className:j.iconSpacing,text:R.default.Messages.LOCAL_VIDEO_DISABLED,children:(0,a.jsx)(E.default,{className:i(j.icon,g),foreground:j.strikethrough})},"video")):P.push((0,a.jsx)(c.TooltipContainer,{className:j.iconSpacing,text:R.default.Messages.VIDEO,children:(0,a.jsx)(m.default,{className:i(j.icon,g)})},"video"))),null!=S&&P.push((0,a.jsx)(c.TooltipContainer,{text:(0,f.default)(S.name),className:j.iconSpacing,children:(0,a.jsx)(T.default,{className:i(j.icon,g)})},"activity")),x===M.GameConsoleTypes.XBOX||L===A.VoicePlatforms.XBOX?P.push((0,a.jsx)("div",{className:i(j.iconSpacing),children:(0,a.jsx)(I.default,{className:i(j.icon,g)})},"xbox")):(x===M.GameConsoleTypes.PLAYSTATION||L===A.VoicePlatforms.PLAYSTATION)&&P.push((0,a.jsx)("div",{className:i(j.iconSpacing),children:(0,a.jsx)(_.default,{className:i(j.icon,g)})},"playstation")),d?P.push((0,a.jsx)("div",{className:i(j.iconSpacing,j.liveIconSpacing),children:(0,a.jsx)(v.default,{size:v.default.Sizes.SMALL})},"stream")):p&&P.push((0,a.jsx)(c.TooltipContainer,{className:j.iconSpacing,text:R.default.Messages.WATCH_STREAM_WATCHING,children:(0,a.jsx)(C.default,{className:i(j.icon,g)})},"watch"));let U=null!=y&&((null==y?void 0:y.state)!==N.HangStatusTypes.CUSTOM||(null==y?void 0:y.emoji)!=null);return 0!==P.length||null!=D||U?(0,a.jsxs)("div",{className:j.icons,children:[D,P,U&&(0,a.jsx)(O,{hangStatusActivity:y,iconClassName:g})]}):null}render(){let{onClick:e,onKeyDown:t,flipped:n,size:l,className:s,selected:r,disabled:u,overlap:o,"aria-label":d,tabIndex:f}=this.props;return(0,a.jsx)(c.Clickable,{className:i(s,{[j.voiceUser]:!0,[j.overlap]:o,[j.selected]:r,[j.clickable]:null!=e,[j.userSmall]:l===N.OverlayAvatarSizes.SMALL,[j.userLarge]:l===N.OverlayAvatarSizes.LARGE,[j.disabled]:!r&&u}),onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onContextMenu:this.handleContextMenu,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onKeyDown:t,"aria-label":d,tabIndex:f,children:(0,a.jsxs)("div",{className:i(j.content,{[j.flipped]:n}),children:[this.renderPrioritySpeaker(),this.renderAvatar(),this.renderName(),this.renderIcons()]})})}constructor(...e){super(...e),this.handleClick=e=>{let{onClick:t,user:n}=this.props;null==t||t(e,n)},this.handleDoubleClick=e=>{let{onDoubleClick:t,user:n}=this.props;null==t||t(e,n)},this.handleContextMenu=e=>{let{onContextMenu:t,user:n}=this.props;null==t||t(e,n)},this.handleMouseLeave=e=>{let{onMouseLeave:t,user:n}=this.props;null==t||t(e,n)},this.handleMouseEnter=e=>{let{onMouseEnter:t,user:n}=this.props;null==t||t(e,n)},this.handleMouseDown=e=>{let{onMouseDown:t,user:n}=this.props;null==t||t(e,n)}}}y.defaultProps={avatarContainerClass:j.avatarContainer,userNameClassName:j.usernameFont,size:N.OverlayAvatarSizes.SMALL,selected:!1,disabled:!1};var P=y;function b(e){let{iconClassName:t,mute:n,localMute:l,serverMute:s,deaf:f,serverDeaf:h}=e,p=(0,c.useRedesignIconContext)().enabled,m=[];if(n){let e;if(p){let n;n=s?o.MicrophoneDenyIcon:l?o.MicrophoneDenyIcon:d.MicrophoneSlashIcon,e=(0,a.jsx)(n,{className:i(j.icon,t,{[j.iconServer]:s}),color:"currentColor"})}else e=(0,a.jsx)(S.default,{className:i(j.icon,t,{[j.iconServer]:s}),foreground:l?j.strikethrough:void 0});m.push((0,a.jsx)(c.TooltipContainer,{text:l?R.default.Messages.LOCAL_MUTED:s?R.default.Messages.SERVER_MUTED:R.default.Messages.VOICE_CHANNEL_MUTED,className:j.iconSpacing,children:e},"mute"))}if(h||f){let e;if(p){let n=h?r.HeadphonesDenyIcon:u.HeadphonesSlashIcon;e=(0,a.jsx)(n,{className:i(j.icon,t,{[j.iconServer]:h}),color:"currentColor"})}else e=(0,a.jsx)(g.default,{className:i(j.icon,t,{[j.iconServer]:h})});m.push((0,a.jsx)(c.TooltipContainer,{className:j.iconSpacing,text:h?R.default.Messages.SERVER_DEAFENED:R.default.Messages.VOICE_CHANNEL_DEAFENED,children:e},"deaf"))}return 0===m.length?null:(0,a.jsx)(a.Fragment,{children:m})}},519812:function(e,t,n){"use strict";n.r(t),n.d(t,{getRecipients:function(){return i}}),n("843762");var a=n("917351"),l=n.n(a),s=n("449008");function i(e,t){return l(e).map(t.getUser).unshift(t.getCurrentUser()).filter(s.isNotNullish).sortBy(e=>e.username.toLowerCase()).value()}}}]);
//# sourceMappingURL=123f1fc8169ad2378c62.js.map