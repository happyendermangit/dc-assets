(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["31617"],{496559:function(e,t,n){"use strict";e.exports="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='271' height='141'><g fill='#000000' fill-rule='evenodd'><rect width='130' height='20' rx='5'/><rect width='254' height='20' y='30' rx='5'/><rect width='190' height='20' y='60' rx='5'/><rect width='66' height='32' y='102' rx='3'/></g></svg>"},714266:function(e,t,n){"use strict";e.exports="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='271' height='165'><path fill='#000000' fill-rule='evenodd' d='M5 0h120c2.761424 0 5 2.23857625 5 5v10c0 2.7614237-2.238576 5-5 5H5c-2.76142375 0-5-2.2385763-5-5V5c0-2.76142375 2.23857625-5 5-5zm0 30h244c2.761424 0 5 2.2385763 5 5v10c0 2.7614237-2.238576 5-5 5H5c-2.76142375 0-5-2.2385763-5-5V35c0-2.7614237 2.23857625-5 5-5zm0 30h180c2.761424 0 5 2.2385763 5 5v10c0 2.7614237-2.238576 5-5 5H5c-2.76142375 0-5-2.2385763-5-5V65c0-2.7614237 2.23857625-5 5-5zm-2 60h60c1.6568542 0 3 1.343146 3 3v26c0 1.656854-1.3431458 3-3 3H3c-1.65685425 0-3-1.343146-3-3v-26c0-1.656854 1.34314575-3 3-3z'/></svg>"},349745:function(e,t,n){"use strict";e.exports=n.p+"a1d461025204711133ec.svg"},309541:function(e,t,n){"use strict";e.exports=n.p+"9f3b9c1b6e5f77294951.svg"},544484:function(e,t,n){"use strict";e.exports=n.p+"d0f62b40a7a6093fb535.svg"},127067:function(e,t,n){"use strict";e.exports=n.p+"7378a83d74ce97d83380.svg"},226315:function(e,t,n){"use strict";e.exports=n.p+"192510ade1abc3149b46.svg"},228165:function(e,t,n){"use strict";e.exports=n.p+"8f0034ae5b3cadea4c2b.svg"},768074:function(e,t,n){"use strict";e.exports=n.p+"b1ac808ae7520fa397f3.svg"},728963:function(e,t,n){"use strict";e.exports=n.p+"7ed159b6acb6da5d9593.svg"},872364:function(e,t,n){"use strict";e.exports=n.p+"5f8406ec0f5055bc7919.svg"},229372:function(e,t,n){"use strict";e.exports=n.p+"a7d6af4279f16c27ae9b.svg"},231050:function(e,t,n){"use strict";e.exports=n.p+"1681fafa511fd53e8bfd.svg"},190368:function(e,t,n){"use strict";e.exports=n.p+"cb94fb6f329e5e31cb5c.svg"},878005:function(e,t,n){"use strict";e.exports=n.p+"ddaba4373c0aabfff967.png"},755219:function(e,t,n){"use strict";e.exports=n.p+"cc5cf9eba79040757e67.svg"},811837:function(e,t,n){"use strict";e.exports=n.p+"1c580ea1dad55a12ecd2.svg"},32982:function(e,t,n){"use strict";e.exports=n.p+"24aa6dce5b2a77b7ca45.svg"},597226:function(e,t,n){"use strict";e.exports=n.p+"bed21bc77023cebd07a7.png"},761545:function(e,t,n){"use strict";e.exports=n.p+"d222b7a1291025c8552b.svg"},689888:function(e,t,n){"use strict";e.exports=n.p+"0e2fad70fad77816b728.svg"},819074:function(e,t,n){"use strict";e.exports=n.p+"a6ecd83d0dec80c3b73d.svg"},96154:function(e,t,n){"use strict";e.exports=n.p+"c6385e608fcdaec54ef4.svg"},976078:function(e,t,n){"use strict";e.exports=n.p+"b2bc10c8c9d44f0ff644.svg"},742203:function(e,t,n){"use strict";e.exports=n.p+"838d4bac7b80d28fd676.svg"},381e3:function(e,t,n){"use strict";e.exports=n.p+"8cd255a58ce1af51e9ef.svg"},637816:function(e,t,n){"use strict";e.exports=n.p+"a2c736476ce092c94a5b.svg"},637099:function(e,t,n){"use strict";e.exports=n.p+"55067ac9356cb0674ad3.svg"},389902:function(e,t,n){"use strict";e.exports=n.p+"dcb57f386a6bf90a27c9.svg"},321211:function(e,t,n){"use strict";e.exports=n.p+"bb0ba69615cae0dd25b7.svg"},786937:function(e,t,n){"use strict";e.exports=n.p+"ecc4859664616ed5ad9a.svg"},352320:function(e,t,n){"use strict";e.exports=n.p+"c3859ebb6176ea76913f.svg"},886531:function(e,t,n){"use strict";e.exports=n.p+"8ab3b66bdb2f6fc70ad6.svg"},760238:function(e,t,n){"use strict";e.exports=n.p+"635eaaafc2a09bc126b9.jpg"},728791:function(e,t,n){"use strict";e.exports=n.p+"271a2bcb5d7b4f98b5cb.svg"},315147:function(e,t,n){"use strict";e.exports=n.p+"3808a69f670fa9a67284.svg"},429224:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("872717"),s=n("913144"),l=n("49111"),i={createChannelFollower:(e,t)=>a.default.post({url:l.Endpoints.CHANNEL_FOLLOWERS(t),body:{webhook_channel_id:e},oldFormErrors:!0}),async fetchChannelFollowerStats(e){s.default.dispatch({type:"CHANNEL_FOLLOWER_STATS_FETCH_START"});try{let t=await a.default.get({url:l.Endpoints.CHANNEL_FOLLOWER_STATS(e),body:{channel_id:e},oldFormErrors:!0});s.default.dispatch({type:"CHANNEL_FOLLOWER_STATS_FETCH_SUCCESS",stats:t.body,channelId:e})}catch(t){s.default.dispatch({type:"CHANNEL_FOLLOWER_STATS_FETCH_FAILURE",channelId:e})}},dismissPublishBump(e){s.default.dispatch({type:"CHANNEL_FOLLOWING_PUBLISH_BUMP_DISMISSED",messageId:e})},permanentlyHidePublishBump(e){s.default.dispatch({type:"CHANNEL_FOLLOWING_PUBLISH_BUMP_HIDE_PERMANENTLY",channelId:e})}}},427495:function(e,t,n){"use strict";n.r(t),n.d(t,{openModal:function(){return i},closeModal:function(){return r}});var a=n("913144"),s=n("521012"),l=n("850068");async function i(e){return null==s.default.getPremiumSubscription()&&await l.fetchSubscriptions(),new Promise((t,n)=>{a.default.dispatch({type:"PREMIUM_REQUIRED_MODAL_OPEN",context:e,resolve:t,reject:n})})}function r(e){a.default.dispatch({type:"PREMIUM_REQUIRED_MODAL_CLOSE",shouldContinue:e})}},73961:function(e,t,n){"use strict";n.r(t),n.d(t,{openPurchaseConfirmationModal:function(){return l},closePurchaseConfirmationModal:function(){return i}});var a=n("913144"),s=n("49111");function l(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((i,r)=>{a.default.dispatch({type:"PURCHASE_CONFIRMATION_MODAL_OPEN",applicationId:e,skuId:t,entitlements:n,context:null!=l.context?l.context:s.AppContext.APP,analyticsSource:l.analyticsSource,resolve:i,reject:r})})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a.default.dispatch({type:"PURCHASE_CONFIRMATION_MODAL_CLOSE",error:e})}},803816:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}}),n("222007");var a=n("37983"),s=n("884691"),l=n("446674"),i=n("77078"),r=n("260365"),o=n("823411"),u=n("968194"),d=n("658457"),c=n("286509"),f=n("676223"),m=n("407908"),h=n("649486"),E=n("860285"),p=n("769791"),_=n("662285"),g=n("866253"),I=n("981601"),T=n("671071"),C=n("766274"),S=n("86878"),A=n("925758"),N=n("26989"),M=n("686470"),v=n("52028"),x=n("697218"),O=n("953998"),L=n("535974"),R=n("763237"),y=n("315102"),P=n("773336"),D=n("602043"),j=n("901582"),b=n("49111"),U=n("954016");let B={spotify:"Spotify"};class G extends s.PureComponent{getCoverImage(){let{activity:e,connectedApplication:t,application:n,isPreview:a,message:s}=this.props;if(null!=n&&(a||null!=s&&(0,f.default)(e,s,n.id))){let t=(0,c.default)(e,n.id);if(null!=t)return t}return null==n||n instanceof T.default?null:y.default.getApplicationIconURL({id:n.id,icon:null!=t?t.coverImage:n.coverImage,size:U.ACTIVITY_INVITE_COVER_IMAGE_SIZE})}handleOpenSpotifyTrack(e){(0,p.openTrack)(e)}handleOpenSpotifyArtist(e,t,n){(0,p.openArtist)(e,t,n)}handleOpenSpotifyAlbum(e,t){(0,p.openAlbum)(e,t)}shouldRenderCustomButton(){let{isLaunchable:e,application:t}=this.props;return null!=t&&null!=t.primarySkuId&&!e&&P.isPlatformEmbedded}render(){return(0,a.jsx)(j.default,{section:j.default.Sections.APPLICATION_EMBED,children:this.renderEmbed()})}constructor(...e){super(...e),this.state={sending:!1},this.handleJoin=()=>{let{activity:e,analyticsLocations:t,userId:n,message:a,channelId:s}=this.props;if(null!=e&&null!=n&&null!=a&&null!=e.session_id&&null!=e.application_id){var l;o.default.join({userId:n,sessionId:e.session_id,applicationId:e.application_id,channelId:s,messageId:a.id}),(0,m.default)({type:b.AnalyticsGameOpenTypes.JOIN,source:b.AnalyticsLocations.MESSAGE_EMBED,userId:n,applicationId:e.application_id,partyId:null===(l=e.party)||void 0===l?void 0:l.id,messageId:a.id,analyticsLocations:t})}},this.handleInvite=async()=>{let{activity:e,channelId:t}=this.props;if(null!=e&&null!=t)try{this.setState({sending:!0}),await r.default.sendActivityInvite({type:b.ActivityActionTypes.JOIN,channelId:t,activity:e,location:b.AnalyticsLocations.MESSAGE_EMBED})}finally{this.setState({sending:!1})}},this.handleSync=()=>{let{activity:e,userId:t}=this.props;null!=e&&null!=t&&u.sync(e,t)},this.handleDownloadApp=()=>{(0,i.openModal)(e=>(0,a.jsx)(h.default,{source:"Game Invite",...e}))},this.renderUserPopout=(e,t)=>{let{channelId:n,guildId:s}=this.props;return null==n?null:(0,a.jsx)(I.default,{...t,userId:e.id,guildId:null!=s?s:void 0,channelId:n})},this.renderSpotifyJoinButton=e=>{let{channelId:t,guildId:n}=this.props;return(0,a.jsx)(g.default,{guildId:null!=n?n:void 0,channelId:t,source:"Invite Embed",...e})},this.renderCustomButton=e=>{let{application:t}=this.props;return(0,a.jsx)(d.default,{...e,source:b.AnalyticsLocations.MESSAGE_EMBED,application:t})},this.renderEmbed=()=>{let e;let{activity:t,partyId:n,myPartyId:s,application:l,partyMembers:i,isPreview:r,isLaunching:o,isSender:u,activityActionType:d,className:c,channelId:f,message:m,hideParty:h,isSyncable:E,isLaunchable:p,guildId:_}=this.props;if(null!=l)e=l.name;else if(null!=n){let[t]=n.split(":");e=B[t]}return(0,a.jsx)(R.default,{activity:t,partyId:n,myPartyId:s,applicationId:null!=l?l.id:null,name:e,partyMembers:i,className:c,coverImage:this.getCoverImage(),isPreview:r,isGameLaunchable:p,isLoading:o||this.state.sending,activityActionType:d,isInBrowser:!P.isPlatformEmbedded,isSyncable:E,isSender:u,channelId:f,guildId:null!=_?_:void 0,message:m,hideParty:h,onJoin:this.handleJoin,onInvite:this.handleInvite,onSync:this.handleSync,onDownloadApp:this.handleDownloadApp,onOpenSpotifyTrack:this.handleOpenSpotifyTrack,onOpenSpotifyArtist:this.handleOpenSpotifyArtist,onOpenSpotifyAlbum:this.handleOpenSpotifyAlbum,renderUserPopout:this.renderUserPopout,renderSpotifyJoinButton:this.renderSpotifyJoinButton,renderCustomButton:this.shouldRenderCustomButton()?this.renderCustomButton:null})}}}G.defaultProps={isPreview:!1};var k=l.default.connectStores([_.default,A.default,v.default,M.default,E.default,L.default,S.default,O.default,x.default,N.default],e=>{let{activity:t,analyticsLocations:n,application:a,partyId:s,userId:l,guildId:i}=e,{id:r}=null!=a?a:{},o=null!=t&&null!=t.party&&t.party.id===s?A.default.getParty(t.party.id):null,u=null!=r?v.default.getApplicationActivity(r):v.default.findActivity(e=>e.type===b.ActivityTypes.LISTENING),d=!1;null!=r&&(d=O.default.getState(r,b.ActivityActionTypes.JOIN)===b.ActivityActionStates.LOADING);let c=Array.from(null!=o?o:[]).map(e=>{let t=null!=i?N.default.getMember(i,e):null,n=null!=t?t.nick:null,a=x.default.getUser(e),s=null==a;return null==a&&(a=new C.default({discriminator:"0005"})),{user:a,unknownUser:s,nick:n}}),f=null!=t&&_.default.canPlay(t),m=_.default.getSyncingWith(),h=null!=m&&null!=l&&m.userId===l;return{analyticsLocations:n,partyMembers:c,connectedApplication:null!=r?S.default.getApplication(r):null,myPartyId:null!=u&&null!=u.party?u.party.id:null,isLaunching:d,isSyncable:f&&!h,isLaunchable:null!=r&&(0,D.isLaunchable)({LibraryApplicationStore:M.default,LaunchableGameStore:E.default,DispatchApplicationStore:L.default,ConnectedAppsStore:S.default,applicationId:r})}})(G)},658457:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983");n("884691");var s=n("446674"),l=n("77078"),i=n("686470"),r=n("552712"),o=n("964889"),u=n("790219"),d=n("159467"),c=n("827825");function f(e){let{application:t,fullWidth:n=!1,size:f=l.Button.Sizes.LARGE,color:m,customDisabledColor:h,hideNotLaunchable:E,tooltipPosition:p,onClick:_,className:g,source:I,storeListingAnalyticsProperties:T,pauseAnimation:C,hover:S,innerClassName:A}=e,N={fullWidth:n,size:f,color:m,customDisabledColor:h,tooltipPosition:p,onClick:_,className:g,hover:S,innerClassName:A},M=(0,s.useStateFromStores)([i.default],()=>i.default.getActiveLibraryApplication(t.id)),v=null!=M?M.sku.id:null,x=null!=v?v:t.primarySkuId,O=(0,s.useStateFromStores)([r.default],()=>null!=x&&!r.default.didFetchingSkuFail(x));return null!=M&&(0,o.isUserEntitledToLibraryApplication)(M)?(0,a.jsx)(c.default,{...N,libraryApplication:M,source:I}):O?(0,a.jsx)(u.default,{...N,skuId:null!=M?M.sku.id:null,applicationId:t.id,pauseAnimation:C,storeListingAnalyticsProperties:T}):(0,a.jsx)(d.default,{...N,hideNotLaunchable:E,applicationId:t.id})}},790219:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}}),n("702976"),n("222007"),n("70102");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("730290"),o=n("446674"),u=n("77078"),d=n("404118"),c=n("73961"),f=n("465527"),m=n("55620"),h=n("79112"),E=n("308757"),p=n("997289"),_=n("84460"),g=n("299285"),I=n("661579"),T=n("393414"),C=n("915639"),S=n("697218"),A=n("437712"),N=n("622839"),M=n("552712"),v=n("167726"),x=n("471671"),O=n("181114"),L=n("216422"),R=n("599110"),y=n("568734"),P=n("719923"),D=n("882941"),j=n("49111"),b=n("782340"),U=n("576057");class B extends s.Component{get analyticsLocation(){let{storeListingAnalyticsProperties:e,asGift:t}=this.props,n=null!=e?e.promotionId:null;return{...this.props.analyticsContext.location,object:j.AnalyticsObjects.BUTTON_CTA,objectType:t?j.AnalyticsObjectTypes.GIFT:j.AnalyticsObjectTypes.BUY,promotionId:n}}get hover(){let{hover:e,color:t}=this.props;return null!=e?e:null!=t?u.Button.Hovers.GREEN:u.Button.Hovers.DEFAULT}componentDidMount(){let{sku:e,applicationId:t,targetSkuId:n}=this.props;null==e&&null!=n&&f.fetchSKU(t,n).catch(()=>{})}componentDidUpdate(e){this.props.locale!==e.locale&&null!=this.props.targetSkuId&&f.fetchSKU(this.props.applicationId,this.props.targetSkuId).catch(()=>{})}async purchaseOrGrantSKU(e){let{channelId:t,entitlementBranchId:n,analyticsContext:a}=this.props;if(null!=t&&null!=n){let n=await f.grantChannelBranchEntitlement(e.applicationId,t,e.id);return n}let s=await f.purchaseSKU(e.applicationId,e.id,{analyticsLoadId:a.loadId});return s.entitlements}wrapWithDisabledTooltip(e,t){let{className:n,tooltipPosition:s}=this.props;return(0,a.jsxs)("div",{className:i(U.disabledButtonWrapper,n),children:[e,(0,a.jsx)(u.Tooltip,{text:t,position:s,children:e=>(0,a.jsx)("div",{className:U.disabledButtonOverlay,...e})})]})}renderButton(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.freeze({}),{isPurchasing:s,wrapperClassName:l,className:r,fullWidth:o,size:d,isWindowFocused:c,color:f,customDisabledColor:m,pauseAnimation:h,isEntitled:E,asGift:p,sku:_,entitlementBranchId:g,isInTestMode:I,innerClassName:T}=this.props,C=!0===E&&(null==_||_.type!==j.SKUTypes.CONSUMABLE),S=!0===n.disabled||null!=_&&!_.available&&!(null!=g)&&!I||C&&!p,A=n.disabledTooltipText,N={wrapperClassName:l,className:r,fullWidth:o,size:d,color:S&&null!=m?m:null!=f?f:u.Button.Colors.GREEN,hover:this.hover,innerClassName:i(null!=T?T:null,U.applicationBuyButton),disabled:S,submitting:s||!0===n.submitting,onClick:null!=n.onClick?n.onClick:this.handleClick};return(t=!0===n.useShinyButton?(0,a.jsxs)(O.default,{...N,pauseAnimation:!c||h,children:[n.buttonIcon,e]}):(0,a.jsxs)(u.Button,{...N,children:[n.buttonIcon,e]}),null!=A)?this.wrapWithDisabledTooltip(t,A):t}renderFreeButton(e,t){let{isEntitled:n,isUserPremium:a,isInTestMode:s,forceDistribution:l,entitlementBranchId:i}=this.props;if(null!=i)return(0,D.canUserInstall)(e)&&!n?this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_INSTALL):this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_ADD_TO_LIBRARY);let r=e.getPrice();if(e.premium&&!l&&(a||s))return(0,D.canUserInstall)(e)&&!n?this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_INSTALL,t):this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_ADD_TO_LIBRARY,t);if(null!=r&&0===r.amount&&(!e.premium||(0,y.hasFlag)(e.flags,j.SKUFlags.PREMIUM_AND_DISTRIBUTION)))return(0,D.canUserInstall)(e)&&!n?this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_INSTALL):this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_ADD_TO_LIBRARY)}render(){let{isAuthenticated:e,sku:t,onStoreListing:n,shouldRenderPrice:s,forceDistribution:l,asGift:i,isInTestMode:r}=this.props,o={useShinyButton:!0,buttonIcon:(0,a.jsx)(L.default,{className:U.premiumIcon})};if(null==t)return this.renderButton(null,{submitting:!0});if(i)return t.isPreorder()?this.renderButton(b.default.Messages.APPLICATION_STORE_PREORDER_AS_GIFT):this.renderButton(b.default.Messages.APPLICATION_STORE_BUY_AS_GIFT);let u=this.renderFreeButton(t,o);if(null!=u)return u;if(!n)return this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_VIEW_IN_STORE,{onClick:this.handleViewInStore});let d=t.getPrice();return(t.available||r)&&(t.premium||null!=d)?t.restricted?this.renderButton(b.default.Messages.APPLICATION_STORE_BUY,{disabledTooltipText:b.default.Messages.GAME_ACTION_BUTTON_RESTRICTED_IN_REGION}):t.premium&&!l?this.renderButton(b.default.Messages.APPLICATION_STORE_GET_PREMIUM,o):e||null!=t.externalPurchaseUrl?t.isPreorder()?this.renderButton(s?b.default.Messages.APPLICATION_STORE_PREORDER_FOR_PRICE.format({price:(0,I.default)(t,!0,!0)}):b.default.Messages.APPLICATION_STORE_PREORDER):this.renderButton(s?b.default.Messages.APPLICATION_STORE_BUY_FOR_PRICE.format({price:(0,I.default)(t,!0,!0)}):b.default.Messages.APPLICATION_STORE_BUY):this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_LOGIN_TO_BUY):this.renderButton(b.default.Messages.GAME_ACTION_BUTTON_UNAVAILABLE,{disabled:!0})}constructor(...e){super(...e),this.handleViewInStore=e=>{let{sku:t,skuId:n,application:a,onClick:s}=this.props;if(null==t)throw Error("Unexpected missing sku");null!=s&&s(e),null!=n?(0,m.goToSKUStoreListing)(t.id,{analyticsSource:this.analyticsLocation,slug:t.slug}):null!=a&&(0,m.goToApplicationStoreListing)(a.id,{analyticsSource:this.analyticsLocation,slug:a.slug})},this.handleClick=async e=>{let{isAuthenticated:t,applicationId:n,sku:a,targetSkuId:s,entitlementBranchId:l,isUserPremium:i,onClick:o,isInTestMode:u,storeListingAnalyticsProperties:f,asGift:m,forceDistribution:p}=this.props;if(null==a)throw Error("should not be able to buy without sku");if(null!=o&&null!=e&&o(e),null!=a.externalPurchaseUrl){window.open(a.externalPurchaseUrl);return}if(!t){let e={redirect_to:j.Routes.APPLICATION_STORE_LISTING_SKU(a.id,a.slug)};(0,T.transitionTo)(j.Routes.LOGIN,{search:(0,r.stringify)(e)});return}let _=null!=l;if(!a.premium||p||i||u||_){if((a.requiresPayment||p)&&!_){if(null!=s)try{await (0,E.openSKUPaymentModal)(n,s,this.analyticsLocation,{promotionId:null!=f?f.promotionId:null,isGift:m})}catch(e){e===j.PaymentModalPriceChangedError&&d.default.show({title:b.default.Messages.PAYMENT_PRICE_CHANGE_TITLE,body:b.default.Messages.PAYMENT_PRICE_CHANGE_BODY,confirmText:b.default.Messages.OKAY})}}else try{let e=await this.purchaseOrGrantSKU(a);(0,c.openPurchaseConfirmationModal)(a.applicationId,a.id,e,{analyticsSource:this.analyticsLocation})}catch(e){}}else{var g;g=this.analyticsLocation,R.default.track(j.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location:g}),h.default.open(j.UserSettingsSections.PREMIUM)}}}}B.defaultProps={tooltipPosition:"top",onStoreListing:!1,shouldRenderPrice:!1,pauseAnimation:!1,asGift:!1,forceDistribution:!1};var G=s.forwardRef((e,t)=>{let{entitlementBranchId:n,applicationId:s,channelId:l,skuId:i,...r}=e,u=(0,o.useStateFromStores)([_.default,v.default],()=>v.default.inTestModeForApplication(s)||_.default.inDevModeForApplication(s),[s]),[d,c,f,m,h,E]=(0,o.useStateFromStoresArray)([g.default,S.default,M.default,A.default],()=>{let e=g.default.getApplication(s),t=S.default.getCurrentUser(),a=null==i&&null!=e?e.destinationSkuId:i,l=null!=a?M.default.get(a):null,r=null!=n?n:s,o=null!=a?A.default.isEntitledToSku(t,a,s,r):null,u=P.default.canInstallPremiumApplications(t);return[e,t,l,o,u,a]}),I=(0,o.useStateFromStores)([x.default],()=>x.default.isFocused()),T=(0,o.useStateFromStores)([N.default],()=>N.default.isPurchasingSKU),O=(0,o.useStateFromStores)([C.default],()=>C.default.locale),L=(0,p.useAnalyticsContext)();if(null!=n&&null==l)throw Error("Unexpected entitlementBranchId without a channelId");return(0,a.jsx)(B,{...r,applicationId:s,skuId:i,entitlementBranchId:n,channelId:l,application:d,sku:f,isAuthenticated:null!=c,isInTestMode:u,isEntitled:m,isUserPremium:h,isWindowFocused:I,isPurchasing:T,locale:O,analyticsContext:L,ref:t,targetSkuId:E})})},159467:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}}),n("222007"),n("70102");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("446674"),o=n("77078"),u=n("272030"),d=n("997289"),c=n("860285"),f=n("86878"),m=n("568307"),h=n("535974"),E=n("181114"),p=n("837899"),_=n("773336"),g=n("780009"),I=n("49111"),T=n("782340"),C=n("743317");class S extends s.PureComponent{get analyticsLocation(){return{...this.props.analyticsContext.location,object:I.AnalyticsObjects.BUTTON_CTA}}renderDropdown(){let{dispatchState:e}=this.props,t=null!=e&&null!=e.launchOptions&&Object.keys(e.launchOptions).length>1;return t?(0,a.jsxs)(o.Clickable,{"aria-label":T.default.Messages.APPLICATION_CONTEXT_MENU_LAUNCH_OPTIONS,className:C.dropdownArrowHitbox,onClick:this.handleDropdownClick,children:[(0,a.jsx)("div",{className:C.arrowSeparator}),(0,a.jsx)(p.default,{className:C.dropdownArrow})]}):null}renderDisabledButton(e,t){let{className:n,fullWidth:s,size:l,customDisabledColor:i,tooltipPosition:r}=this.props;return(0,a.jsxs)("div",{className:C.disabledButtonWrapper,children:[(0,a.jsx)(o.Button,{className:n,fullWidth:s,size:l,color:null!=i?i:C.disabledButtonColor,disabled:!0,children:e}),(0,a.jsx)(o.Tooltip,{text:t,position:r,children:e=>(0,a.jsx)("div",{className:C.disabledButtonOverlay,...e})})]})}render(){let{className:e,fullWidth:t,size:n,color:s,isLaunchable:l,isLaunching:r,isRunning:u,isShiny:d,hideNotLaunchable:c}=this.props;if(!l)return c?null:this.renderDisabledButton(T.default.Messages.GAME_ACTION_BUTTON_PLAY,_.isPlatformEmbedded?T.default.Messages.GAME_ACTION_BUTTON_GAME_NOT_DETECTED:T.default.Messages.GAME_ACTION_BUTTON_PLAY_DISABLED_DESKTOP_APP);if(u)return this.renderDisabledButton(T.default.Messages.GAME_ACTION_BUTTON_NOW_PLAYING);let f=d?E.default:o.Button;return(0,a.jsxs)(f,{className:i(C.playButton,e),innerClassName:C.playButtonContents,fullWidth:t,size:n,color:null!=s?s:o.Button.Colors.GREEN,hover:null!=s?o.Button.Hovers.GREEN:o.Button.Hovers.DEFAULT,submitting:r,onClick:this.handleClick,children:[(0,a.jsx)("div",{className:C.buttonText,children:T.default.Messages.GAME_ACTION_BUTTON_PLAY}),this.renderDropdown()]})}constructor(...e){super(...e),this.handleDropdownClick=e=>{e.stopPropagation();let{libraryApplication:t,onDropdownOpen:s,onDropdownClose:l}=this.props;if(null==s||s(e),null==t)throw Error("Unexpected missing libraryApplication");u.openContextMenuLazy(e,async()=>{let{default:e}=await n.el("220792").then(n.bind(n,"220792"));return n=>(0,a.jsx)(e,{...n,libraryApplication:t,onPlay:this.handleClick})},{onClose:l})},this.handleClick=()=>{let{applicationId:e,libraryApplication:t,analyticsListSort:n,analyticsListIndex:a}=this.props;g.playApplication(e,t,{analyticsParams:{location:this.analyticsLocation,list_sort:n,list_index:a}})}}}function A(e){let{applicationId:t,libraryApplication:n}=e,s=(0,d.useAnalyticsContext)(),[l,i]=(0,r.useStateFromStoresArray)([f.default,c.default,h.default],()=>[f.default.isConnected(t)||c.default.isLaunchable(t)||null!=n&&h.default.isLaunchable(n.id,n.branchId),c.default.launchingGames.has(t)],[t,n]),o=(0,r.useStateFromStores)([m.default],()=>new Set(m.default.getRunningVerifiedApplicationIds()).has(t),[t]),u=(0,r.useStateFromStores)([h.default],()=>null!=n?h.default.getState(n.id,n.branchId):null,[n]);return(0,a.jsx)(S,{...e,analyticsContext:s,isLaunchable:l,isLaunching:i,isRunning:o,dispatchState:u})}S.defaultProps={fullWidth:!1,size:o.Button.Sizes.LARGE,tooltipPosition:"top",isShiny:!1,hideNotLaunchable:!1}},827825:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}}),n("70102"),n("222007");var a,s,l=n("37983"),i=n("884691"),r=n("446674"),o=n("669491"),u=n("77078"),d=n("438931"),c=n("997289"),f=n("605250"),m=n("393414"),h=n("677225"),E=n("9377"),p=n("148813"),_=n("535974"),g=n("352326"),I=n("964889"),T=n("773336"),C=n("882941"),S=n("780009"),A=n("159467"),N=n("49111"),M=n("782340"),v=n("530570");(s=a||(a={})).PLAY="play",s.NOW_PLAYING="now_playing",s.INSTALL="install",s.UPDATE="update",s.PAUSED="paused",s.LOCATE="locate",s.UNINSTALLING="uninstalling",s.QUEUED="queued",s.DOWNLOADING="downloading",s.UNSUPPORTED_OS="unsupported_os",s.ADD_TO_LIBRARY="add_to_library",s.PREORDER_WAIT="preorder_wait";let x=Object.freeze({[N.LibraryApplicationActions.PLAY]:"play",[N.LibraryApplicationActions.INSTALL]:"install",[N.LibraryApplicationActions.UPDATE]:"update",[N.LibraryApplicationActions.PAUSE]:"downloading",[N.LibraryApplicationActions.MOVE_UP]:"queued",[N.LibraryApplicationActions.RESUME]:"paused"}),O=()=>[M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_1,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_2,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_3,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_4,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_5,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_6,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_7,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_8,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_9,M.default.Messages.GAME_ACTION_BUTTON_UNINSTALLING_10];class L extends i.Component{get analyticsLocation(){return{...this.props.analyticsContext.location,object:N.AnalyticsObjects.BUTTON_CTA}}getText(e){switch("uninstalling"!==e&&(this._uninstallStringIndex=null),e){case"install":case"unsupported_os":return M.default.Messages.GAME_ACTION_BUTTON_INSTALL;case"update":return M.default.Messages.GAME_ACTION_BUTTON_UPDATE;case"paused":return M.default.Messages.GAME_ACTION_BUTTON_PAUSED;case"locate":return M.default.Messages.GAME_ACTION_BUTTON_LOCATE;case"uninstalling":let t=O();return null==this._uninstallStringIndex&&(this._uninstallStringIndex=Math.floor(Math.random()*t.length)),t[this._uninstallStringIndex];case"queued":return M.default.Messages.GAME_ACTION_BUTTON_QUEUED;case"downloading":return M.default.Messages.GAME_ACTION_BUTTON_DOWNLOADING;case"preorder_wait":return M.default.Messages.GAME_ACTION_BUTTON_PREORDER_WAIT;case"add_to_library":return M.default.Messages.GAME_ACTION_BUTTON_ADD_TO_LIBRARY;default:throw Error("Unexpected button state")}}getButtonState(){let{libraryApplication:e,dispatchState:t,actionState:n}=this.props;if(e.isHidden())return"add_to_library";if(e.isPreorder())return"preorder_wait";let a=null!=n?x[n]:null;return null!=a?a:null!=t&&t.type===N.LocalDispatchApplicationStates.UNINSTALLING?"uninstalling":(0,T.isWeb)()?"play":"unsupported_os"}renderPlayButton(){let{libraryApplication:e,fullWidth:t,size:n,color:a,customDisabledColor:s,isPlayShiny:i,onDropdownOpen:r,onDropdownClose:o,analyticsListSort:u,analyticsListIndex:d}=this.props;return(0,l.jsx)(A.default,{applicationId:e.id,libraryApplication:e,fullWidth:t,size:n,color:a,customDisabledColor:s,isShiny:i,onDropdownOpen:r,onDropdownClose:o,analyticsListSort:u,analyticsListIndex:d})}renderDisabledButton(e,t){let{className:n,fullWidth:a,size:s,customDisabledColor:i,tooltipPosition:r}=this.props;return(0,l.jsxs)("div",{className:v.disabledButtonWrapper,children:[(0,l.jsxs)(u.Button,{className:n,fullWidth:a,size:s,color:null!=i?i:v.disabledButtonColor,disabled:!0,children:[this.getText(e),this.renderProgressBar()]}),(0,l.jsx)(u.Tooltip,{text:t,position:r,children:e=>(0,l.jsx)("div",{className:v.disabledButtonOverlay,...e})})]})}renderProgressBar(){let{hideProgress:e,dispatchState:t}=this.props;if(e)return null;let n=I.convertToTransitionState(t);if(null==n)return null;let a=n.type===N.LocalDispatchApplicationStates.UNINSTALLING?u.Progress.INDETERMINATE:I.calculateProgressPercentage(Number(n.progress),Number(n.total));return(0,l.jsx)(u.Progress,{percent:a,size:u.Progress.Sizes.XSMALL,foregroundColor:n.paused?o.default.unsafe_rawColors.PRIMARY_500.css:o.default.unsafe_rawColors.GREEN_360.css,backgroundColor:o.default.unsafe_rawColors.TRANSPARENT.css,className:v.progress})}renderActionButton(e,t){let{className:n,fullWidth:a,size:s,color:i,isCloudSyncing:r}=this.props;return(0,l.jsxs)(u.Button,{className:n,fullWidth:a,size:s,color:null!=i?i:u.Button.Colors.GREEN,hover:null!=i?u.Button.Hovers.GREEN:u.Button.Hovers.DEFAULT,submitting:"uninstalling"===e||r,onClick:e=>this.handleClick(e,t),children:[this.getText(e),this.renderProgressBar()]})}render(){let{hasNoBuild:e,libraryApplication:t}=this.props,n=this.getButtonState();if("play"===n)return this.renderPlayButton();if("preorder_wait"===n)return this.renderDisabledButton(n,function(e){let t=C.getReadablePreorderReleaseDate(e.sku);return null!=t?M.default.Messages.GAME_ACTION_BUTTON_PREORDER_WAIT_TOOLTIP.format({date:t}):null}(t));if("unsupported_os"===n)return this.renderDisabledButton(n,M.default.Messages.GAME_ACTION_BUTTON_UNAVAILABLE_TOOLTIP.format({operatingSystem:M.default.Messages.WINDOWS}));if("install"===n&&e)return this.renderDisabledButton(n,M.default.Messages.GAME_ACTION_BUTTON_CANNOT_INSTALL);let a=this.onClickHandlers[n];return null==a?this.renderDisabledButton(n):this.renderActionButton(n,a)}constructor(...e){super(...e),this._uninstallStringIndex=null,this.handleAddToLibrary=async()=>{try{let{libraryApplication:e}=this.props;await d.updateFlags(e.id,e.branchId,e.getFlags()&~N.LibraryApplicationFlags.HIDDEN),(0,m.transitionTo)(N.Routes.APPLICATION_LIBRARY)}catch(e){new(0,f.default)("LibraryApplicationButton").error(e)}},this.handleInstall=()=>{let{libraryApplication:e,source:t}=this.props;S.installApplication(e.id,e.branchId,t)},this.handleUpdate=()=>{let{libraryApplication:e}=this.props;S.updateApplication(e.id,e.branchId)},this.onClickHandlers={add_to_library:this.handleAddToLibrary,install:this.handleInstall,update:this.handleUpdate},this.handleClick=(e,t)=>{let{onClick:n}=this.props;null==n||n(e),t(e)}}}function R(e){let{libraryApplication:t}=e,n=(0,c.useAnalyticsContext)(),[a,s]=(0,r.useStateFromStoresArray)([_.default,g.default],()=>[(0,E.getDefaultLibraryApplicationAction)(t,_.default,g.default),_.default.getState(t.id,t.branchId)],[t]),i=(0,r.useStateFromStores)([p.default],()=>p.default.isSyncing(t.id,t.branchId),[t]),o=(0,r.useStateFromStores)([h.default],()=>h.default.hasNoBuild(t.id,t.branchId),[t]);return(0,l.jsx)(L,{...e,analyticsContext:n,actionState:a,dispatchState:s,isCloudSyncing:i,hasNoBuild:o})}L.defaultProps={fullWidth:!1,size:u.Button.Sizes.LARGE,hideProgress:!1,isPlayShiny:!1,tooltipPosition:"top"},L.ButtonStates=a},359606:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}}),n("70102");var a,s,l,i,r=n("37983"),o=n("884691"),u=n("414456"),d=n.n(u),c=n("661579"),f=n("880013"),m=n("216422"),h=n("782340"),E=n("130104");(l=a||(a={}))[l.DIRECTORY_HERO=1]="DIRECTORY_HERO",l[l.DIRECTORY_TILE=2]="DIRECTORY_TILE",l[l.DIRECTORY_SEARCH=3]="DIRECTORY_SEARCH",l[l.LISTING=4]="LISTING",l[l.EMBED=5]="EMBED",(i=s||(s={}))[i.IN_LIBRARY=1]="IN_LIBRARY",i[i.ON_SALE=2]="ON_SALE",i[i.PREMIUM=3]="PREMIUM",i[i.DEFAULT=4]="DEFAULT",i[i.ENTITLEMENT_BRANCH=5]="ENTITLEMENT_BRANCH";let p=e=>{let{className:t}=e;return(0,r.jsxs)("div",{className:d(E.row,t),children:[(0,r.jsx)(f.default,{className:E.icon}),h.default.Messages.APPLICATION_STORE_IN_LIBRARY]})},_=e=>{let{sku:t,className:n}=e;return(0,r.jsxs)("div",{className:d(E.row,n),children:[(0,r.jsx)(m.default,{className:E.icon}),(0,c.default)(t)]})},g=e=>{let{sku:t,className:n}=e;return(0,r.jsx)("div",{className:d(E.salePercentage,n),children:t.getDisplaySalePercentage()})},I=e=>{let{sku:t,className:n}=e;return(0,r.jsx)("div",{className:d(E.originalAmount,n),children:(0,c.default)(t,!1)})},T=e=>{let{sku:t,className:n}=e;return(0,r.jsx)("div",{className:n,children:(0,c.default)(t)})},C=e=>{let{sku:t,className:n}=e;return(0,r.jsxs)("div",{className:d(E.row,n),children:[(0,r.jsx)(g,{sku:t}),(0,r.jsx)(I,{sku:t}),(0,r.jsx)(T,{sku:t})]})},S=e=>{let{className:t}=e;return(0,r.jsx)("div",{className:t,children:h.default.Messages.APPLICATION_STORE_FREE})};class A extends o.PureComponent{getState(){let{inLibrary:e,sku:t,hasEntitlementBranch:n}=this.props;if(n)return 5;if(e)return 1;if(!t.available)return 4;else if(t.premium)return 3;else if(t.isOnSale)return 2;else if(null!=t.getPrice())return 4;return null}renderGeneric(e,t){let{className:n,sku:a}=this.props;switch(e){case 5:return(0,r.jsx)(S,{className:d(t,n)});case 1:return(0,r.jsx)(p,{className:d(t,n)});case 3:return(0,r.jsx)(_,{sku:a,className:d(t,n)});case 2:return(0,r.jsx)(C,{sku:a,className:d(t,n)});default:return(0,r.jsx)(T,{className:d(t,n),sku:a})}}renderDirectoryHero(e){let{className:t,sku:n}=this.props;switch(e){case 5:return(0,r.jsx)(S,{className:d(t)});case 3:return(0,r.jsx)(_,{sku:n,className:d(E.directoryHeroPricePremium,t)});case 2:return(0,r.jsx)(C,{sku:n,className:d(E.directoryHeroPrice,t)});default:return(0,r.jsx)(T,{className:d(E.directoryHeroPrice,t),sku:n})}}renderListing(e){let t;let{className:n,sku:a}=this.props;switch(e){case 5:t=(0,r.jsx)(S,{});break;case 2:t=(0,r.jsxs)(o.Fragment,{children:[(0,r.jsxs)("div",{className:E.row,children:[(0,r.jsx)(T,{sku:a}),(0,r.jsx)(g,{sku:a})]}),(0,r.jsx)(I,{sku:a})]});break;default:t=(0,r.jsx)(T,{sku:a})}return(0,r.jsx)("div",{className:d(E.listingPrice,n),children:t})}render(){let e=this.getState();if(null==e)return null;switch(this.props.type){case 1:return this.renderDirectoryHero(e);case 2:return this.renderGeneric(e,E.directoryTilePrice);case 3:return this.renderGeneric(e,E.directorySearchPrice);case 4:return this.renderListing(e);case 5:return this.renderGeneric(e,E.embedPrice);default:throw Error("Invalid Price Unit Type")}}}A.Types=a;var N=A},883610:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("77078"),o=n("790219"),u=n("359606"),d=n("206100"),c=n("85871"),f=n("231561"),m=n("347374"),h=n("271560"),E=n("4919"),p=n("458331"),_=n("49111"),g=n("384560");class I extends s.PureComponent{render(){let{sku:e,storeListing:t,isHorizontal:n,className:s,renderCustomTagline:l,renderCustomTitle:i,renderCustomMedia:r,isEmbed:o}=this.props,u=o?E.ResponsiveEmbedTile:p.default;return(0,a.jsx)(u,{className:s,renderMedia:null!=r?r:this.renderMedia,renderTitle:null!=i?i:()=>e.name,renderTagline:null!=l?l:()=>t.tagline,renderActions:this.renderActions,isHorizontal:n})}constructor(...e){super(...e),this.renderActions=()=>{let{inLibrary:e,sku:t,renderCustomActions:n,isMouseOver:s,showBuyInline:l}=this.props,i=(l||!t.requiresPayment)&&!e,c=i&&s;return null!=n?n():(0,a.jsxs)("div",{className:g.priceOs,children:[(0,a.jsx)(u.default,{type:u.default.Types.DIRECTORY_TILE,sku:t,inLibrary:e,className:c?g.tilePriceWithVisibleBuyButton:g.tilePrice}),(0,a.jsx)(d.OperatingSystemSection,{systems:[_.OperatingSystems.WINDOWS],className:g.platform}),i?(0,a.jsx)(o.default,{skuId:t.id,applicationId:t.applicationId,size:r.Button.Sizes.SMALL,shouldRenderPrice:!0,onStoreListing:!0,onClick:e=>e.preventDefault(),className:c?g.tileBuyButtonVisible:g.tileBuyButton}):null]})},this.renderMedia=()=>{let{playing:e,muted:t,showMediaPlaceholder:n,onToggleMute:l,sku:r,isHorizontal:o,storeListing:u}=this.props;return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(m.default,{className:i(g.splashContainer,{[g.splashContainerHorizontal]:o}),video:null!=u.previewVideo?(0,h.getAssetURL)(r.applicationId,u.previewVideo):void 0,image:null!=u.thumbnail?(0,h.getAssetURL)(r.applicationId,u.thumbnail,600):null,title:r.name,playing:e,muted:t,placeholder:n,onToggleMute:l,splashClassName:g.splashVideo,splashPlaceholderClassName:g.splashPlaceholder}),r.exclusive?(0,a.jsx)(c.default,{className:i(g.exclusiveRegular,{[g.exclusivePlaying]:e})}):r.isTheGameAwardsWinner?(0,a.jsx)(f.default,{className:i(g.exclusiveRegular,{[g.exclusivePlaying]:e})}):null]})}}}I.defaultProps={showMediaPlaceholder:!1,isMouseOver:!1,showBuyInline:!1,isHorizontal:!1,isEmbed:!1};var T=I},4919:function(e,t,n){"use strict";n.r(t),n.d(t,{HORIZONTAL_EMBED_BREAKPOINT:function(){return o},ResponsiveEmbedTile:function(){return u},ResponsiveLoadingEmbedTile:function(){return d}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("458331"),r=n("166008");let o=660,u=e=>(0,a.jsx)(i.default,{...e,className:l(e.className,{[r.embedVertical]:!e.isHorizontal,[r.embedHorizontal]:e.isHorizontal})}),d=e=>{let{isHorizontal:t}=e;return(0,a.jsx)(u,{...e,media:()=>(0,a.jsx)("div",{className:l(r.loadingDescription),children:(0,a.jsx)("div",{className:l(r.loadingBackgroundWrapper,{[r.loadingBackgroundWrapperHorizontal]:t}),children:(0,a.jsx)("div",{className:r.loadingBackground})})}),title:()=>(0,a.jsx)("div",{className:l(r.loadingImage,{[r.loadingImageHorizontal]:t})})})}},458331:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("77078"),r=n("278915"),o=e=>{let{renderTitle:t,renderTagline:n,renderActions:s,renderMedia:o,className:u,isHorizontal:d=!1}=e;return(0,a.jsxs)("div",{className:l(r.tile,{[r.tileHorizontal]:d},u),children:[(0,a.jsx)("div",{className:l(r.media,{[r.mediaHorizontal]:d}),children:null==o?void 0:o()}),(0,a.jsxs)("div",{className:r.description,children:[(0,a.jsx)(i.H,{className:r.title,children:null==t?void 0:t()}),(0,a.jsx)("div",{className:r.tagline,children:null==n?void 0:n()}),(0,a.jsx)("div",{className:r.actions,children:null==s?void 0:s()})]})]})}},710306:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("866227"),o=n.n(r),u=n("446674"),d=n("77078"),c=n("79112"),f=n("4919"),m=n("86621"),h=n("737960"),E=n("206230"),p=n("491232"),_=n("210721"),g=n("583711"),I=n("65324"),T=n("393414"),C=n("271938"),S=n("55411"),A=n("686470"),N=n("697218"),M=n("10514"),v=n("552712"),x=n("145131"),O=n("880013"),L=n("943519"),R=n("181108"),y=n("599110"),P=n("659632"),D=n("719923"),j=n("380186"),b=n("158998"),U=n("501076"),B=n("49111"),G=n("646718"),k=n("782340"),w=n("192800");function H(e){let{onClick:t,libraryApplication:n}=e;return(0,a.jsxs)(d.Clickable,{className:w.libraryLink,onClick:t,children:[(0,a.jsx)(O.default,{className:w.libraryIcon}),(0,a.jsx)("div",{children:n.isHidden()?k.default.Messages.APPLICATION_STORE_PURCHASE_IN_LIBRARY_HIDDEN:k.default.Messages.APPLICATION_STORE_PURCHASE_IN_LIBRARY})]})}class F extends s.PureComponent{get isHorizontal(){let{width:e}=this.props;return e>=f.HORIZONTAL_EMBED_BREAKPOINT}handleViewInventory(){c.default.open(B.UserSettingsSections.INVENTORY)}render(){return(0,a.jsx)(f.ResponsiveEmbedTile,{isHorizontal:this.isHorizontal,renderTitle:this.renderTitle,renderTagline:this.renderTagline,renderMedia:this.renderMedia,renderActions:this.renderActions})}constructor(...e){super(...e),this.renderMedia=()=>(0,a.jsx)("div",{className:i(w.invalidPoop,{[w.invalidPoopHorizontal]:this.isHorizontal})}),this.renderTitle=()=>this.props.isSelfGift?k.default.Messages.GIFT_EMBED_INVALID_TITLE_SELF:k.default.Messages.GIFT_EMBED_INVALID_TITLE_OTHER,this.renderActions=()=>this.props.isSelfGift?(0,a.jsx)(d.Button,{size:d.Button.Sizes.SMALL,onClick:this.handleViewInventory,children:k.default.Messages.GIFT_INVENTORY}):(0,a.jsx)(d.Button,{disabled:!0,size:d.Button.Sizes.SMALL,children:k.default.Messages.GIFT_EMBED_BUTTON_ACCEPT}),this.renderTagline=()=>this.props.isSelfGift?k.default.Messages.GIFT_EMBED_INVALID_TAGLINE_SELF:k.default.Messages.GIFT_EMBED_INVALID_TAGLINE_OTHER}}class V extends s.Component{get analyticsLocation(){let{analyticsContext:{location:e}}=this.props;return{...e,section:B.AnalyticsSections.GIFT_CODE_EMBED}}renderActions(e){let{libraryApplication:t}=this.props;return(0,a.jsxs)(x.default,{justify:x.default.Justify.BETWEEN,children:[(0,a.jsxs)(x.default,{children:[this.renderButton(e),null==t||e.isSubscription?null:(0,a.jsx)(H,{onClick:this.handleViewLibrary,libraryApplication:t})]}),(0,a.jsxs)(x.default,{align:x.default.Align.END,justify:x.default.Justify.END,className:w.metadata,direction:x.default.Direction.VERTICAL,children:[e.hasMultipleCopies?(0,a.jsx)("div",{children:this.renderGiftCodeCopiesLeft(e)}):null,e.redeemed||e.isClaimed||null!=t||null==e.expiresAt?null:(0,a.jsx)("div",{children:k.default.Messages.GIFT_EMBED_EXPIRATION.format({hours:e.expiresAt.diff(o(),"h")})})]})]})}renderGiftCodeCopiesLeft(e){let t=e.isSubscription?k.default.Messages.GIFT_EMBED_SUBSCRIPTIONS_LEFT:k.default.Messages.GIFT_EMBED_COPIES_LEFT;return t.format({remaining:e.remainingUses,total:e.maxUses})}renderButton(e){let{libraryApplication:t,currentUser:n,isSelfGift:s}=this.props,l={onClick:this.handleAccept,color:d.Button.Colors.BRAND},i=!e.isSubscription&&null!=t||!e.isSelfRedeemable&&s||e.isExistingPremiumSubscriptionDisallowed&&(0,D.isPremium)(n);return(e.redeemed||i||e.isClaimed||!n.verified)&&(l.color=d.Button.Colors.BRAND,l.disabled=!0),(0,a.jsx)(d.Button,{...l,className:(0,p.isCollectiblesGiftCode)(e)?w.collectiblesAcceptButton:null,size:d.Button.Sizes.SMALL,children:e.redeemed?k.default.Messages.GIFT_EMBED_BUTTON_CLAIMED:null!=e.giftStyle?k.default.Messages.SEASONAL_GIFTING_OPEN_GIFT:k.default.Messages.GIFT_EMBED_BUTTON_ACCEPT})}isCustomGiftMessage(){let{type:e}=this.props;return e===B.MessageTypes.CUSTOM_GIFT}renderTitle(e){let{currentUser:t,isSelfGift:n,sku:a}=this.props;return this.isCustomGiftMessage()&&!n?k.default.Messages.GIFT_RECIPIENT_NOTIFICATION.format({recipientDisplayName:b.default.getName(t)}):null==a?null:e.isSubscription?n?k.default.Messages.GIFT_EMBED_TITLE_SUBSCRIPTION_SELF:k.default.Messages.GIFT_EMBED_TITLE_SUBSCRIPTION:n?k.default.Messages.GIFT_EMBED_TITLE_SELF:k.default.Messages.GIFT_EMBED_TITLE}renderBody(e){let{libraryApplication:t,isSelfGift:n,sku:a,gifter:s,subscriptionPlan:l,currentUser:i}=this.props;if(null==a)return k.default.Messages.LOADING;if(!n&&this.isCustomGiftMessage()&&!e.redeemed)return;let r=a.isPreorder()?k.default.Messages.PREORDER_SKU_NAME.format({name:a.name}):a.name;if(e.redeemed)return e.isSubscription||(0,p.isCollectiblesGiftCode)(e)?k.default.Messages.GIFT_EMBED_BODY_CLAIMED_SELF_SUBSCRIPTION:k.default.Messages.GIFT_EMBED_BODY_CLAIMED_SELF.format({skuName:r,onViewInLibrary:this.handleViewLibrary});if(!e.isSubscription&&null!=t)return k.default.Messages.GIFT_EMBED_BODY_OWNED.format({skuName:r,onViewInLibrary:this.handleViewLibrary});if(e.isClaimed)return k.default.Messages.GIFT_EMBED_BODY_CLAIMED_OTHER;if(!i.verified)return k.default.Messages.GIFT_EMBED_BODY_REQUIRES_VERIFICATION.format({onClick:this.handleVerificationClick});if(n)return e.isSelfRedeemable?k.default.Messages.GIFT_EMBED_BODY_SELF:k.default.Messages.GIFT_EMBED_BODY_SELF_NOT_REDEEMABLE.format({skuName:r});if(e.isExistingPremiumSubscriptionDisallowed)return k.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_ALREADY_ACTIVE;if(e.hasMultipleCopies)return null!=s?e.isSubscription?k.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_GIVEAWAY.format({username:b.default.getUserTag(s),maxUses:e.maxUses,skuName:r}):k.default.Messages.GIFT_EMBED_BODY_GIVEAWAY.format({username:b.default.getUserTag(s),totalCopies:e.maxUses,skuName:r}):e.isSubscription?k.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_GIVEAWAY.format({maxUses:e.maxUses,skuName:r}):k.default.Messages.GIFT_EMBED_BODY_NO_USER_GIVEAWAY.format({totalCopies:e.maxUses,skuName:r});if(e.isSubscription){if(null==l)return k.default.Messages.LOADING;if(null!=s){let e=l.interval===G.SubscriptionIntervalTypes.MONTH?k.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_DEFAULT_MONTHS:k.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_DEFAULT_YEARS;return e.format({username:b.default.getUserTag(s),skuName:r,intervalCount:l.intervalCount})}let e=l.interval===G.SubscriptionIntervalTypes.MONTH?k.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_DEFAULT_MONTHS:k.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_DEFAULT_YEARS;return e.format({skuName:r,intervalCount:l.intervalCount})}return null!=s?k.default.Messages.GIFT_EMBED_BODY_DEFAULT.format({username:b.default.getUserTag(s)}):k.default.Messages.GIFT_EMBED_BODY_NO_USER_DEFAULT}renderPromotionActions(){return(0,a.jsx)(d.Button,{size:d.Button.Sizes.SMALL,onClick:this.handleClaimPromotion,children:k.default.Messages.GIFT_EMBED_BUTTON_CLAIM})}renderEmbed(){let{giftCode:e,width:t}=this.props;return null==e?null:(0,a.jsx)(U.StoreEmbedWithoutDimensions,{skuId:e.skuId,onEmbedClick:this.handleEmbedClick,analyticsSection:B.AnalyticsSections.GIFT_CODE_EMBED,renderCustomActions:()=>this.renderActions(e),renderCustomTitle:()=>this.renderTitle(e),renderCustomTagline:()=>this.renderBody(e),renderCustomMedia:null==e.giftStyle?void 0:()=>this.renderCustomGiftBox(e),width:t})}render(){let{giftCode:e,resolved:t,width:n,isSelfGift:s}=this.props;if(null!=e&&null!=e.promotion)return(0,a.jsx)(U.StoreEmbedWithoutDimensions,{skuId:e.skuId,onEmbedClick:this.handleClaimPromotion,analyticsSection:B.AnalyticsSections.GIFT_CODE_EMBED,renderCustomActions:()=>this.renderPromotionActions(),renderCustomTitle:()=>k.default.Messages.GIFT_EMBED_TITLE_PROMOTION,renderCustomTagline:()=>k.default.Messages.GIFT_EMBED_TAGLINE_PROMOTION,width:n});if(null==e||e.revoked)return t?(0,a.jsx)(F,{isSelfGift:s,width:n}):(0,a.jsx)(f.ResponsiveLoadingEmbedTile,{isHorizontal:n>=f.HORIZONTAL_EMBED_BREAKPOINT});return(0,p.isCollectiblesGiftCode)(e)?(0,a.jsx)("div",{className:w.collectiblesEmbedWrapper,children:this.renderEmbed()}):this.renderEmbed()}constructor(...e){super(...e),this.handleViewLibrary=e=>{let{libraryApplication:t}=this.props;e.preventDefault(),null!=t&&t.isHidden()?(0,T.transitionTo)(B.Routes.APPLICATION_LIBRARY_SETTINGS):(0,T.transitionTo)(B.Routes.APPLICATION_LIBRARY,{state:{applicationId:null!=t?t.id:null}})},this.handleVerificationClick=e=>{e.stopPropagation(),e.preventDefault(),c.default.open(B.UserSettingsSections.ACCOUNT)},this.handleAccept=e=>{let{channelId:t,code:n,content:a,type:s,giftInfo:l}=this.props;e.preventDefault(),e.stopPropagation(),y.default.track(B.AnalyticEvents.OPEN_MODAL,{type:"gift_accept",location:{...this.analyticsLocation,object:B.AnalyticsObjects.BUTTON_CTA}});let i=s!==B.MessageTypes.CUSTOM_GIFT?void 0:a;(0,g.openGiftCodeAcceptModal)({processedCode:n,channelContext:t,customGiftMessage:i,giftInfo:l})},this.handleEmbedClick=e=>{let{giftCode:t}=this.props;null!=t&&t.isSubscription&&(e.preventDefault(),c.default.open(B.UserSettingsSections.PREMIUM))},this.handleClaimPromotion=e=>{var t;e.stopPropagation(),e.preventDefault();let n=null===(t=this.props.giftCode)||void 0===t?void 0:t.code;null!=n&&window.open(B.Routes.BILLING_PROMOTION_REDEMPTION(n))},this.renderCustomGiftBox=e=>{let{useReducedMotion:t,width:n}=this.props;if(null==e||null==e.giftStyle)return null;let s=G.LegacySeasonalGiftStyles.includes(e.giftStyle),l=i(w.customGiftEmbedWrapper,{[w.legacySeasonalGiftEmbedWrapper]:s,[w.giftEmbedWrapperHorizontal]:n>=f.HORIZONTAL_EMBED_BREAKPOINT}),r=i({[w.legacySeasonalGiftEmbedBox]:s,[w.legacySeasonalGiftEmbedBoxHorizontal]:s&&n>=f.HORIZONTAL_EMBED_BREAKPOINT,[w.customGiftEmbedBox]:!s,[w.customGiftEmbedBoxHorizontal]:!s&&n>=f.HORIZONTAL_EMBED_BREAKPOINT});return(0,a.jsxs)("div",{className:l,children:[!t&&G.AllSeasonalGiftStyles.includes(e.giftStyle)&&(0,a.jsx)(R.default,{className:w.snow,wind:5}),s&&(0,a.jsx)(L.default,{className:w.headerIcon}),null!=e.giftStyle&&(0,a.jsx)(I.default,{defaultAnimationState:e.redeemed?_.AnimationState.LOOP:_.AnimationState.IDLE,giftStyle:e.giftStyle,className:r})]})}}}let Y=(0,h.default)((0,m.default)(V));var W=u.default.connectStores([S.default,v.default,N.default,A.default,M.default,C.default,E.default],e=>{let{code:t,author:n,currentUser:a}=e,s=S.default.get(t),l=null!=s?v.default.get(s.skuId):null,i=null!=s&&null!=s.userId?N.default.getUser(s.userId):null,r=E.default.useReducedMotion;return{sku:l,giftCode:s,gifter:i,currentUser:a,subscriptionPlan:null!=s&&null!=s.subscriptionPlanId?(0,j.getOrFetchSubscriptionPlan)(s.subscriptionPlanId):null,isSelfGift:null!=s?C.default.getId()===s.userId:C.default.getId()===n.id,resolved:S.default.getIsResolved(t),libraryApplication:null!=l&&(null==s?void 0:s.entitlementBranches)!=null?P.firstLibraryApplicationForGiftCode(s.entitlementBranches,l,A.default):null,useReducedMotion:r}})(Y)},206100:function(e,t,n){"use strict";n.r(t),n.d(t,{OperatingSystemSection:function(){return E}}),n("70102");var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("77078"),r=n("84084"),o=n("260162"),u=n("415844"),d=n("49111"),c=n("782340"),f=n("50536");let m={[d.OperatingSystems.WINDOWS]:{icon:u.default,getLabel:()=>c.default.Messages.WINDOWS},[d.OperatingSystems.MACOS]:{icon:o.default,getLabel:()=>c.default.Messages.MACOS},[d.OperatingSystems.LINUX]:{icon:r.default,getLabel:()=>c.default.Messages.LINUX}};function h(e){let{operatingSystem:t,className:n}=e,s=m[t];if(null==s)throw Error("Unexpected operating system: ".concat(t));let l=s.icon;return(0,a.jsx)(i.Tooltip,{text:s.getLabel(),children:e=>(0,a.jsx)(l,{...e,className:n})})}let E=e=>{let{systems:t,className:n,iconClassName:s}=e;return(0,a.jsx)("div",{className:l(f.OSSection,n),children:t.map(e=>(0,a.jsx)(h,{operatingSystem:e,className:l(f.purchaseUnitOperatingSystem,s)},e))})}},308757:function(e,t,n){"use strict";n.r(t),n.d(t,{openIAPPurchaseModal:function(){return R},openSKUPaymentModal:function(){return P}}),n("70102");var a=n("37983");n("884691");var s=n("627445"),l=n.n(s),i=n("77078"),r=n("913144"),o=n("850068"),u=n("427495"),d=n("73961"),c=n("465527"),f=n("55620"),m=n("775433"),h=n("524503"),E=n("333955"),p=n("308592"),_=n("846286"),g=n("314058"),I=n("509167"),T=n("292687"),C=n("929479"),S=n("697218"),A=n("357957"),N=n("521012"),M=n("552712"),v=n("719923"),x=n("49111");function O(e,t){let{applicationId:n,id:a}=e;return c.purchaseSKU(n,a).then(e=>{let{entitlements:s}=e;return(0,d.openPurchaseConfirmationModal)(n,a,s,{context:t})})}function L(){let e=T.default.getWindow(x.PopoutWindowKeys.CHANNEL_CALL_POPOUT),t=null!=e&&!e.closed;return t?i.POPOUT_MODAL_CONTEXT:i.DEFAULT_MODAL_CONTEXT}async function R(e){let{applicationId:t,skuId:n,initialPlanId:s,openPremiumPaymentModal:i,analyticsLocations:r,analyticsLocation:o,context:d}=e,c=M.default.get(n);if(null==c){let e=await (0,f.fetchAllStoreListingsForApplication)(t),a=e.find(e=>e.sku.id===n);l(null!=a,"Could not find store listing for sku"),a.sku.type===x.SKUTypes.SUBSCRIPTION_GROUP&&await (0,h.fetchAllSubscriptionListingsDataForApplication)(t,a.id)}(null==(c=null!=c?c:M.default.get(n))?void 0:c.type)===x.SKUTypes.SUBSCRIPTION&&!(0,p.getSubscriptionPlansLoaded)([c.id])&&await (0,m.fetchSubscriptionPlansForSKU)(c.id);let{enabled:T}=g.default.getCurrentConfig({location:"ccd2f5_1"},{autoTrackExposure:!0}),A=L(),R=S.default.getCurrentUser();if(null!=c&&c.premium){if(v.default.canInstallPremiumApplications(R))return O(c,d);await u.openModal(d),await function(e,t,n,a){let s=N.default.getPremiumSubscription(),l={id:e.id,applicationId:e.applicationId};if(null!=s){let e=v.default.getClosestUpgrade(s.planId);if(null==e)return Promise.reject(Error("Could not find premium upgrade."));let t={initialPlanId:e,followupSKUInfo:l,analyticsLocations:n};switch(a){case x.AppContext.APP:return C.default.openPremiumPaymentModalInApp(t);case x.AppContext.OVERLAY:return C.default.openPremiumPaymentModalInOverlay(t);default:throw Error("Unexpected app context: ".concat(a))}}return t()}(c,i,r,d),await O(c,d)}else if(null!=c&&c.type===x.SKUTypes.SUBSCRIPTION)await function(e,t,n,s,l){return(0,_.openActivityApplicationPaymentModal)({applicationId:e,skuId:t,initialPlanId:n,analyticsLocationObject:s,analyticsLocations:l,renderHeader:(e,t,n)=>(0,a.jsx)(E.PurchaseHeader,{step:n,onClose:()=>t(!1)})})}(t,n,s,o,r);else if(T)return new Promise(async(e,a)=>{await (0,I.default)({applicationId:t,skuId:n,analyticsLocations:r,contextKey:A,onComplete:t=>{var n;e(null!==(n=null==t?void 0:t.entitlements)&&void 0!==n?n:[])},onClose:e=>{!e&&a()}})});else return P(t,n,o,{isIAP:!0,context:d})}let y={isIAP:!1,context:x.AppContext.APP,promotionId:null,isGift:!1};function P(e,t,s){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=Promise.resolve();!A.default.hasFetchedPaymentSources&&(u=o.fetchPaymentSources());let{isIAP:d,context:c,promotionId:f,isGift:m}={...y,...l},h=L();return u.then(()=>new Promise((l,o)=>{r.default.dispatch({type:"SKU_PURCHASE_MODAL_OPEN",applicationId:e,skuId:t,isIAP:d,isGift:m,analyticsLocation:s,promotionId:f,context:c,resolve:l,reject:o}),(0,i.openModalLazy)(async()=>{let{default:s}=await n.el("787598").then(n.bind(n,"787598"));return n=>{let{onClose:l,...i}=n;return(0,a.jsx)(s,{...i,onClose:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.default.dispatch({type:"SKU_PURCHASE_MODAL_CLOSE",error:e}),l()},applicationId:e,skuId:t,appContext:c})}},{contextKey:h})}))}},501076:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L},StoreEmbedWithoutDimensions:function(){return R}}),n("222007"),n("70102");var a=n("37983"),s=n("884691"),l=n("90915"),i=n("446674"),r=n("77078"),o=n("55620"),u=n("901582"),d=n("658457"),c=n("359606"),f=n("883610"),m=n("4919"),h=n("86621"),E=n("737960"),p=n("299285"),_=n("686470"),g=n("290877"),I=n("552712"),T=n("698041"),C=n("271560"),S=n("49111"),A=n("782340"),N=n("640492");class M extends s.Component{get analyticsLocation(){let{analyticsContext:{location:e},analyticsSection:t}=this.props;return{...e,section:null!=t?t:S.AnalyticsSections.APPLICATION_EMBED,object:S.AnalyticsObjects.CARD}}componentDidMount(){let{sku:e,skuId:t,storeListing:n}=this.props;(null==e||null==n)&&(0,o.fetchStoreListingForSku)(t)}renderViewInStoreButton(){return(0,a.jsx)(r.Button.Link,{to:this.getStoreListingLocation(),className:N.actionButton,color:r.Button.Colors.GREEN,size:r.Button.Sizes.SMALL,children:A.default.Messages.GAME_ACTION_BUTTON_VIEW_IN_STORE})}render(){let{sku:e,storeListing:t,width:n,fetchFailed:s,renderFallback:i}=this.props,r=n>m.HORIZONTAL_EMBED_BREAKPOINT;if(null==e||null==t)return s?i():(0,a.jsx)(m.ResponsiveLoadingEmbedTile,{isHorizontal:r});return e.productLine===S.SKUProductLines.COLLECTIBLES?(0,a.jsx)(u.default,{section:S.AnalyticsSections.APPLICATION_EMBED,children:this.renderApplicationTile(e,t)}):(0,a.jsx)(u.default,{section:S.AnalyticsSections.APPLICATION_EMBED,children:(0,a.jsx)(l.Link,{onClick:this.handleLinkClick,to:this.getStoreListingLocation(),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:this.renderApplicationTile(e,t)})})}constructor(...e){super(...e),this.state={playing:!1,muted:!0},this.handleToggleMute=()=>{this.setState({muted:!this.state.muted})},this.handleMouseEnter=()=>{this.setState({playing:!0})},this.handleMouseLeave=()=>{this.setState({playing:!1})},this.getStoreListingLocation=()=>{let{sku:e}=this.props;if(null==e)throw Error("Should not be link to ApplicationStoreListing without SKU");return(0,C.getStoreListingLocation)(e.id,{slug:e.slug,analyticsSource:this.analyticsLocation})},this.handleActionButtonClick=e=>e.preventDefault(),this.handleBuyButtonClick=e=>e.preventDefault(),this.handleLinkClick=e=>{let{onEmbedClick:t}=this.props;null!=t&&t(e)},this.renderApplicationTile=(e,t)=>{let{inLibrary:n,width:s,renderCustomTitle:l,renderCustomTagline:i,renderCustomMedia:r}=this.props,{playing:o,muted:u}=this.state,d=s>m.HORIZONTAL_EMBED_BREAKPOINT;return(0,a.jsx)(f.default,{sku:e,storeListing:t,playing:o,muted:u,inLibrary:n,onToggleMute:this.handleToggleMute,renderCustomActions:()=>this.renderActions(e),renderCustomTitle:l,renderCustomTagline:i,renderCustomMedia:r,isHorizontal:d,isEmbed:!0})},this.renderActions=e=>{let{inLibrary:t,application:n,skuId:s,libraryApplication:l,renderCustomActions:i}=this.props;if(null!=i)return(0,a.jsx)("div",{className:N.tileActions,children:i()});if(null==n)return null;let o=null!=n&&n.primarySkuId===s,u=null!=l&&l.hasFlag(S.LibraryApplicationFlags.HIDDEN);return(0,a.jsxs)("div",{className:N.tileActions,children:[!o||u?this.renderViewInStoreButton():(0,a.jsx)(d.default,{application:n,customDisabledColor:r.Button.Colors.PRIMARY,size:r.Button.Sizes.SMALL,className:N.actionButton,source:S.AnalyticsLocations.MESSAGE_EMBED,onClick:this.handleActionButtonClick}),t&&!u||e.premium?null:(0,a.jsx)(c.default,{type:c.default.Types.EMBED,sku:e,inLibrary:!1})]})}}}M.defaultProps={renderFallback:S.NOOP};let v=[I.default,g.default,_.default,T.default];function x(e){let{skuId:t}=e,n=I.default.get(t),a=null!=n?p.default.getApplication(n.applicationId):null;return{sku:n,application:a,fetchFailed:I.default.didFetchingSkuFail(t),inLibrary:null!=n&&_.default.hasApplication(n.applicationId,n.applicationId,!0),storeListing:null!=n?T.default.getForSKU(n.id):null,libraryApplication:null!=n?_.default.getLibraryApplication(n.applicationId,n.applicationId,!0):null}}let O=(0,E.default)((0,h.default)(M));var L=i.default.connectStores(v,x)(O);let R=(0,h.default)(i.default.connectStores(v,x)(M))},550762:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("77078");function l(e,t){(0,s.openModalLazy)(async()=>{let{default:s}=await n.el("557981").then(n.bind(n,"557981"));return n=>(0,a.jsx)(s,{channelId:e,messageId:t,...n})})}},216199:function(e,t,n){"use strict";n.r(t),n.d(t,{HandRequestSpeakIcon:function(){return i}});var a=n("37983");n("884691");var s=n("669491"),l=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=s.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...o}=e;return(0,a.jsx)("svg",{...(0,l.default)(o),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M16.02 3.06a1.23 1.23 0 0 0-2.39-.6l-2.14 7.76-.61-.24.83-6.97a1.26 1.26 0 0 0-2.49-.34L8.13 9.65l-.47 2.86a.42.42 0 0 1-.8.1l-.66-1.47a3.92 3.92 0 0 0-1.85-1.9l-.32-.17a1.53 1.53 0 0 0-1.91.47.61.61 0 0 0-.05.65l1.33 2.5c.06.12.12.24.16.37l1.26 4.11a7.47 7.47 0 0 0 14.28.03l.95-3.05 1.85-4.36a1.19 1.19 0 0 0-2.17-.96l-1.8 3.87-.56-.22 2.4-7.64a1.17 1.17 0 0 0-2.21-.75l-2.78 7.4-.67-.26 1.9-8.17Z",className:r})})}},249736:function(e,t,n){"use strict";n.r(t),n.d(t,{ImageSparkleIcon:function(){return i}});var a=n("37983");n("884691");var s=n("669491"),l=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=s.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...o}=e;return(0,a.jsxs)("svg",{...(0,l.default)(o),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M20.14.8a1.21 1.21 0 0 0-2.28 0l-.5 1.37a2 2 0 0 1-1.19 1.18l-1.38.51a1.21 1.21 0 0 0 0 2.28l1.38.5a2 2 0 0 1 1.18 1.19l.51 1.38a1.21 1.21 0 0 0 2.28 0l.5-1.38a2 2 0 0 1 1.19-1.18l1.38-.51a1.21 1.21 0 0 0 0-2.28l-1.38-.5a2 2 0 0 1-1.18-1.19L20.14.79Z",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,fillRule:"evenodd",d:"M13.25 2c.17 0 .23.28.1.38A3.22 3.22 0 0 0 14.1 8l1.38.51.5 1.38a3.22 3.22 0 0 0 5.64.76c.1-.14.38-.08.38.09V19a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3h8.25Zm2.1 11.13 3.5 4.67c.37.5.02 1.2-.6 1.2H5.81a.75.75 0 0 1-.59-1.22l1.86-2.32a1.5 1.5 0 0 1 2.34 0l.5.64 2.23-2.97a2 2 0 0 1 3.2 0ZM10.2 5.98c.23-.91-.88-1.55-1.55-.9a.93.93 0 0 1-1.3 0c-.67-.65-1.78-.01-1.55.9a.93.93 0 0 1-.65 1.12c-.9.26-.9 1.54 0 1.8.48.14.77.63.65 1.12-.23.91.88 1.55 1.55.9a.93.93 0 0 1 1.3 0c.67.65 1.78.01 1.55-.9a.93.93 0 0 1 .65-1.12c.9-.26.9-1.54 0-1.8a.93.93 0 0 1-.65-1.12Z",clipRule:"evenodd",className:r})]})}},858994:function(e,t,n){"use strict";n.r(t),n.d(t,{InventoryIcon:function(){return i}});var a=n("37983");n("884691");var s=n("669491"),l=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=s.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...o}=e;return(0,a.jsxs)("svg",{...(0,l.default)(o),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,d:"M6.69 2A3 3 0 0 0 3.7 4.67l-.33 3A3 3 0 0 0 6.35 11H7V9a1 1 0 1 1 2 0v2h6V9a1 1 0 1 1 2 0v2h.65a3.05 3.05 0 0 0 .9-.14 3 3 0 0 0 2.08-3.2l-.33-3A3 3 0 0 0 17.32 2H6.69Z",className:r}),(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,fillRule:"evenodd",d:"M15 13v1a1 1 0 1 0 2 0v-1h.65c1.44 0 2.72-.6 3.62-1.56l.04.22.68 5.88A4 4 0 0 1 18 22H6A4 4 0 0 1 2 17.54l.68-5.88.04-.22c.9.96 2.19 1.56 3.62 1.56H7v1a1 1 0 1 0 2 0v-1h6Zm-6 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm7 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd",className:r})]})}},729:function(e,t,n){"use strict";n.r(t),n.d(t,{MicrophoneArrowRightIcon:function(){return i}});var a=n("37983");n("884691");var s=n("669491"),l=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=s.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...o}=e;return(0,a.jsxs)("svg",{...(0,l.default)(o),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"m19.7.3 4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.4-1.4L20.58 6H15a1 1 0 1 1 0-2h5.59l-2.3-2.3A1 1 0 0 1 19.71.3Z",fill:"string"==typeof i?i:i.css,className:r}),(0,a.jsx)("path",{d:"M12.62 2.05c.41.06.46.61.17.92A3 3 0 0 0 15 8h.51c.28 0 .5.22.5.5V10a4 4 0 1 1-8 0V6a4 4 0 0 1 4.62-3.95Z",fill:"string"==typeof i?i:i.css,className:r}),(0,a.jsx)("path",{d:"M17.56 12.27a.63.63 0 0 1 .73-.35c.21.05.43.08.65.08.38 0 .72.35.6.7A8 8 0 0 1 13 17.94V20h2a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h2v-2.06A8 8 0 0 1 4 10a1 1 0 0 1 2 0 6 6 0 0 0 11.56 2.27Z",fill:"string"==typeof i?i:i.css,className:r})]})}},779807:function(e,t,n){"use strict";n.r(t),n.d(t,{WarningIcon:function(){return i}});var a=n("37983");n("884691");var s=n("669491"),l=n("75196");let i=e=>{let{width:t=24,height:n=24,color:i=s.default.colors.INTERACTIVE_NORMAL,colorClass:r="",...o}=e;return(0,a.jsx)("svg",{...(0,l.default)(o),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"string"==typeof i?i:i.css,fillRule:"evenodd",d:"M10 3.1a2.37 2.37 0 0 1 4 0l8.71 14.75c.84 1.41-.26 3.15-2 3.15H3.29c-1.74 0-2.84-1.74-2-3.15L9.99 3.1Zm3.25 14.65a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM13.06 14l.37-5.94a1 1 0 0 0-1-1.06h-.87a1 1 0 0 0-1 1.06l.38 5.94a1.06 1.06 0 0 0 2.12 0Z",clipRule:"evenodd",className:r})})}},876927:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}}),n("222007");var a=n("884691"),s=n("731898");function l(){let{ref:e,width:t}=(0,s.default)(),[n,l]=a.useState();return a.useEffect(()=>{null==n&&null!=t&&l(t)},[n,t]),[e,n]}},722525:function(e,t,n){"use strict";n.r(t),n.d(t,{transitionToChannel:function(){return o},transitionToPage:function(){return u}});var a=n("77078"),s=n("255397"),l=n("406189"),i=n("393027"),r=n("49111");function o(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!(0,a.hasAnyModalOpen)()&&(n&&l.default.channelListScrollTo(e,t),o&&null!=t&&s.default.updateChatOpen(t,!0),i.default.getState().updatePath(r.Routes.CHANNEL(e,t)))}function u(e){!(0,a.hasAnyModalOpen)()&&i.default.getState().updatePath(e)}},286509:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("550368"),s=n("954016");function l(e,t){return null==e||null==e.assets||null==e.assets.large_image?null:(0,a.getAssetImage)(t,e.assets.large_image,[s.ACTIVITY_INVITE_COVER_IMAGE_SIZE,s.ACTIVITY_INVITE_COVER_IMAGE_SIZE])}},549548:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("782340");function s(e){return e>0?a.default.Messages.EMBEDDED_ACTIVITIES_MAX_PARTICIPANTS.format({count:e}):a.default.Messages.EMBEDDED_ACTIVITIES_UNLIMITED_PARTICIPANTS}},676223:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("299039");function s(e,t,n){if(null==e)return!1;let s=null!=t.activity?t.activity.party_id:null,l=null!=s&&(null==e.party||e.party.id!==s),i=a.default.extractTimestamp(t.id)+72e5<Date.now(),r=null!=e.application_id&&e.application_id!==n;return!l&&!i&&!r}},969380:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}}),n("222007");var a=n("884691"),s=n("550368");let l=["embedded_cover","embedded_background"];function i(e){let{applicationId:t,size:n,names:i=l}=e,[r,o]=a.useState(null),[u,d]=a.useState(!0),c=(0,s.getAssetImage)(t,r,n);return a.useEffect(()=>{(0,s.fetchAssetIds)(t,i).then(e=>{for(let t of(d(!1),e))if(null!=t&&""!==t){o(t);return}})},[t]),{url:c,state:u?"loading":null!=c?"fetched":"not-found"}}},817039:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n("222007");var a=n("37983"),s=n("884691"),l=n("988150"),i=n("661379");function r(e){let{imageBackground:t,applicationName:n,imageClassName:r,imageNotFoundClassName:o}=e,[u,d]=s.useState(!1);return"not-found"===t.state||u?(0,a.jsx)("div",{className:o,children:(0,a.jsx)(l.default,{className:i.brokenImageIcon})}):"loading"===t.state?null:(0,a.jsx)("img",{alt:n,className:r,src:t.url,onError:()=>d(!0)})}},627697:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}}),n("222007"),n("702976");var a=n("37983");n("884691");var s=n("90915"),l=n("446674"),i=n("769846"),r=n("77078"),o=n("404118"),u=n("997289"),d=n("812204"),c=n("685665"),f=n("442939"),m=n("870346"),h=n("950104"),E=n("42203"),p=n("697218"),_=n("155207"),g=n("811305"),I=n("568734"),T=n("449008"),C=n("159885"),S=n("550766"),A=n("191225"),N=n("602718"),M=n("706508"),v=n("986214"),x=n("549548"),O=n("969380"),L=n("141962"),R=n("478272"),y=n("954016"),P=n("49111"),D=n("782340"),j=n("586449");let b=(0,C.cssValueToNumber)(i.default.ACTIVITY_BOOKMARK_EMBED_IMAGE_WIDTH);function U(e){var t,n,i,C;let{applicationId:U,message:B}=e,{analyticsLocations:G,AnalyticsLocationProvider:k}=(0,c.default)(d.default.ACTIVITY_BOOKMARK),w=(0,u.useAnalyticsContext)(),H=B.channel_id,F=(0,l.useStateFromStores)([E.default],()=>E.default.getChannel(H),[H]),V=null==F?void 0:F.guild_id,Y=null!=F&&(F.isGuildVoice()||F.isPrivate()),W=(0,l.useStateFromStores)([A.default],()=>A.default.getSelfEmbeddedActivityForChannel(H)),K=(null==W?void 0:W.application_id)===U,[z,Z]=(0,f.default)([U,null!==(n=null==W?void 0:W.application_id)&&void 0!==n?n:""]),J=(0,x.default)(null!==(i=null==z?void 0:z.maxParticipants)&&void 0!==i?i:0),[X]=(0,l.useStateFromStoresArray)([A.default],()=>Y?A.default.getEmbeddedActivitiesForChannel(H).filter(e=>e.application_id===U):[],[U,H,Y]),q=Array.from(null!==(C=null==X?void 0:X.connections.keys())&&void 0!==C?C:[]),Q=(0,l.useStateFromStoresArray)([p.default],()=>q.map(e=>p.default.getUser(e)).filter(T.isNotNullish),[q]),$=(0,O.default)({applicationId:U,size:b}),ee=m.default.getWindowOpen(P.PopoutWindowKeys.CHANNEL_CALL_POPOUT),et=Q.length>0?D.default.Messages.JOIN:D.default.Messages.START,en=async()=>{if(Y){let{activityConfigs:e,applications:t}=await (0,S.fetchShelf)({guildId:V}),n=(0,N.default)({applicationId:U,activityConfigs:e,applications:t});if(null!=X&&Q.length>0)await (0,M.default)({activity:X,currentEmbeddedApplication:Z,activityChannelId:H,embeddedActivitiesManager:L.default,locationObject:w.location,analyticsLocations:G});else{let e=F.isPrivate()&&!h.default.isCallActive(H),t=()=>(0,v.default)({activityItem:n,currentActivity:Z,channelId:H,guildId:V,embeddedActivitiesManager:L.default,analyticsLocations:G});e?o.default.show({title:D.default.Messages.DEFAULT_CONFIRMATION_MODAL_HEADER,cancelText:D.default.Messages.CANCEL,confirmText:D.default.Messages.CONFIRM,onConfirm:()=>t(),body:D.default.Messages.EMBEDDED_ACTIVITIES_DM_START_CONFIRMATION_TEXT}):t()}}else(0,R.default)({guildId:V,locationObject:w.location,openInPopout:ee,initialSelectedApplicationId:U,initialSlide:y.ActivityShelfSlides.SELECT_CHANNEL,analyticsLocations:G})};return null!=z&&(0,I.hasFlag)(z.flags,P.ApplicationFlags.EMBEDDED)?(0,a.jsx)(k,{children:(0,a.jsxs)("div",{className:j.container,children:[(0,a.jsx)("div",{className:j.imgContainer,children:(0,a.jsx)("img",{className:j.img,alt:z.name,src:$.url})}),(0,a.jsxs)("div",{className:j.content,children:[(0,a.jsx)(r.Heading,{className:j.heading,variant:"heading-xl/semibold",children:z.name}),(0,a.jsx)(r.Heading,{className:j.description,variant:"heading-sm/medium",children:null===(t=z.description)||void 0===t?void 0:t.trim()}),(0,a.jsx)(r.Heading,{className:j.learnMore,variant:"heading-sm/medium",children:(0,a.jsx)(s.Link,{to:P.Routes.ACTIVITY_DETAILS(U),children:D.default.Messages.LEARN_MORE})}),(0,a.jsxs)("div",{className:j.cta,children:[Q.length>0?(0,a.jsx)("div",{className:j.avatars,children:(0,a.jsx)(g.default,{guildId:V,users:Q,max:4})}):(0,a.jsxs)("div",{className:j.maxParticipants,children:[(0,a.jsx)(_.default,{className:j.peopleIcon}),(0,a.jsx)(r.Text,{variant:"text-xs/semibold",children:J})]}),(0,a.jsx)("div",{className:j.buttonWrapper,children:(0,a.jsx)(r.Button,{onClick:en,className:j.button,color:r.ButtonColors.GREEN,disabled:K,children:et})})]})]})]})}):null}},527088:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}}),n("222007");var a=n("37983"),s=n("884691"),l=n("394846"),i=n("65597"),r=n("77078"),o=n("811425"),u=n("915639"),d=n("653047"),c=n("162771"),f=n("697218"),m=n("174622"),h=n("627490"),E=n("599110"),p=n("613676"),_=n("721698"),g=n("349503"),I=n("412707"),T=n("646186"),C=n("49111"),S=n("782340"),A=n("759374");function N(e){var t,n;let{code:N,message:M}=e,[v,x,O]=(0,i.useStateFromStoresArray)([g.default],()=>[g.default.getApplication(N),g.default.isInvalidApplication(N),g.default.getApplicationFetchState(N)],[N]),L=(0,i.default)([u.default],()=>u.default.locale),R=(0,i.default)([c.default],()=>{var e;return null!==(e=c.default.getGuildId())&&void 0!==e?e:void 0}),y=(0,i.default)([f.default],()=>f.default.getCurrentUser()),[P,D]=s.useState(!1),j=s.useCallback(e=>{e&&D(!0)},[]),b=(0,o.useIsVisible)(j);s.useEffect(()=>{(0,_.getEmbedApplication)(N)},[N]),s.useEffect(()=>{P&&O===g.FetchState.FETCHED&&E.default.track(C.AnalyticEvents.APP_DIRECTORY_PROFILE_EMBED_VIEWED,{application_id:N,device_platform:l.isMobile?"mobile_web":"desktop_web",sender_user_id:M.author.id,guild_id:R,channel_id:M.channel_id})},[P,N,null==y?void 0:y.id,M.channel_id,R,M.author.id,O]),s.useEffect(()=>{P&&x&&E.default.track(C.AnalyticEvents.APP_DIRECTORY_PROFILE_INVALID_EMBED_VIEWED,{device_platform:l.isMobile?"mobile_web":"desktop_web",sender_user_id:M.author.id,guild_id:R,channel_id:M.channel_id})},[P,R,x,M.author.id,M.channel_id]);let U=e=>{E.default.track(C.AnalyticEvents.APP_DIRECTORY_PROFILE_EMBED_APP_INFO_CLICKED,{application_id:N,device_platform:l.isMobile?"mobile_web":"desktop_web",clicked_section:e,guild_id:R,channel_id:M.channel_id}),(0,T.goToAppDirectory)({view:I.ApplicationDirectoryViews.APPLICATION,guildId:R,applicationId:N,entrypoint:{name:I.ApplicationDirectoryEntrypointNames.APPLICATION_DIRECTORY_PROFILE_EMBED}})};if(x)return(0,a.jsxs)(m.default,{containerRef:b,children:[(0,a.jsx)(m.default.Header,{text:S.default.Messages.APP_DIRECTORY_PROFILE_EMBED_INVALID_HEADER}),(0,a.jsx)(m.default.Body,{children:(0,a.jsxs)("div",{className:A.invalidBody,children:[(0,a.jsx)(m.default.Icon,{expired:!0}),(0,a.jsx)(m.default.Info,{expired:!0,title:S.default.Messages.APP_DIRECTORY_PROFILE_EMBED_INVALID_INFO_TITLE,children:S.default.Messages.APP_DIRECTORY_PROFILE_EMBED_INVALID_INFO_BODY})]})})]});if(null==v||O===g.FetchState.FETCHING)return(0,a.jsxs)(m.default,{containerRef:b,children:[(0,a.jsx)(m.default.Header,{text:S.default.Messages.APP_DIRECTORY_PROFILE_EMBED_RESOLVING_HEADER}),(0,a.jsx)(m.default.Body,{resolving:!0})]});let B=new Intl.NumberFormat(L,{notation:"compact",compactDisplay:"short"}),G=B.format(null!==(n=null===(t=v.directory_entry)||void 0===t?void 0:t.guild_count)&&void 0!==n?n:0);return(0,a.jsxs)(m.default,{containerRef:b,children:[(0,a.jsx)(m.default.Header,{text:S.default.Messages.APP_DIRECTORY_PROFILE_EMBED_HEADER}),(0,a.jsxs)(m.default.Body,{children:[(0,a.jsxs)("div",{className:A.applicationInfoContainer,children:[(0,a.jsx)(m.default.Icon,{application:d.default.createFromServer(v),className:A.applicationIcon,onClick:()=>U("application_icon")}),(0,a.jsx)(m.default.Info,{title:(0,a.jsx)(r.Clickable,{onClick:()=>U("application_name"),children:v.name}),children:(0,a.jsxs)(r.Clickable,{className:A.guildCountContainer,onClick:()=>U("application_guild_count"),children:[(0,a.jsx)(h.default,{width:16,height:16,className:A.guildCountIcon}),S.default.Messages.APP_DIRECTORY_PROFILE_EMBED_GUILD_COUNT.format({guildCount:G})]})})]}),(0,a.jsx)(m.default.Button,{onClick:()=>{null!=v&&(0,p.installApplication)({applicationId:N,customInstallUrl:v.custom_install_url,installParams:v.install_params,guildId:R,source:"app_directory_profile_embed"})},color:m.default.Button.Colors.GREEN,children:S.default.Messages.APP_DIRECTORY_PROFILE_EMBED_BUTTON})]})]})}},409129:function(e,t,n){"use strict";n.r(t),n.d(t,{getApplicationSubscriptionSystemMessageASTContent:function(){return s}});var a=n("782340");function s(e){let{application:t,username:n,usernameOnClick:s,medium:l}=e;return null!=t?a.default.Messages.SYSTEM_MESSAGE_APPLICATION_SUBSCRIPTION_PURCHASE_MOBILE.astFormat({username:n,applicationName:t.name,usernameOnClick:s,medium:l}):a.default.Messages.SYSTEM_MESSAGE_APPLICATION_SUBSCRIPTION_PURCHASE_FROM_DELETED_APPLICATION_MOBILE.astFormat({username:n,usernameOnClick:s,medium:l})}},63522:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var s=n("574073"),l=n("232259"),i=n("8161"),r=n("304198"),o=n("509425"),u=n("121135");function d(e){let{message:t,channel:n,compact:d}=e,c=(0,s.default)(t),f=t.application,m=(0,l.useUsernameHook)(t.author,n.id,n.guild_id);return(0,a.jsx)(r.default,{iconNode:(0,a.jsx)(i.default,{className:u.ticketIcon}),timestamp:t.timestamp,compact:d,children:(0,o.getApplicationSubscriptionSystemMessageContent)({application:f,username:c.nick,usernameHook:m(c)})})}},509425:function(e,t,n){"use strict";n.r(t),n.d(t,{getApplicationSubscriptionSystemMessageContent:function(){return l}});var a=n("49111"),s=n("782340");function l(e){let{application:t,username:n,usernameHook:l=a.NOOP}=e;return null!=t?s.default.Messages.SYSTEM_MESSAGE_APPLICATION_SUBSCRIPTION_PURCHASE.format({username:n,applicationName:t.name,usernameHook:l}):s.default.Messages.SYSTEM_MESSAGE_APPLICATION_SUBSCRIPTION_PURCHASE_FROM_DELETED_APPLICATION.format({username:n,usernameHook:l})}},850642:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}}),n("222007"),n("702976");var a=n("446674"),s=n("95410"),l=n("913144"),i=n("271938"),r=n("42203"),o=n("957255"),u=n("697218"),d=n("568734"),c=n("49111");let f="ChannelFollowingBumpChannels",m=new Set,h=new Set;class E extends a.default.Store{initialize(){this.waitFor(i.default),m=new Set(s.default.get(f))}shouldShowBump(e){return h.has(e)}}E.displayName="ChannelFollowingPublishBumpStore";var p=new E(l.default,{MESSAGE_CREATE:function(e){var t;let{channelId:n,message:a,optimistic:s}=e;if(s||m.has(n))return!1;let l=r.default.getChannel(n),i=u.default.getCurrentUser(),f=null!=l&&l.type===c.ChannelTypes.GUILD_ANNOUNCEMENT&&a.type===c.MessageTypes.DEFAULT&&(null!=i&&(null===(t=a.author)||void 0===t?void 0:t.id)===i.id?o.default.can(c.Permissions.SEND_MESSAGES,l):o.default.can(c.Permissions.MANAGE_MESSAGES,l))&&!d.hasFlag(Number(a.flags),c.MessageFlags.CROSSPOSTED);if(!f)return!1;h.add(a.id)},MESSAGE_UPDATE:function(e){let{message:t}=e,n=h.has(t.id);n&&d.hasFlag(Number(t.flags),c.MessageFlags.CROSSPOSTED)&&h.delete(t.id)},CHANNEL_SELECT:function(e){h.clear()},CHANNEL_FOLLOWING_PUBLISH_BUMP_DISMISSED:function(e){let{messageId:t}=e;h.delete(t)},CHANNEL_FOLLOWING_PUBLISH_BUMP_HIDE_PERMANENTLY:function(e){let{channelId:t}=e;m.add(t),s.default.set(f,m),h.clear()}})},222650:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983"),s=n("884691"),l=n("446674"),i=n("77078"),r=n("429224"),o=n("550762"),u=n("381546"),d=n("733160"),c=n("713573"),f=n("850642"),m=n("782340"),h=n("35847"),E=e=>{let{channelId:t,messageId:n}=e,E=(0,l.useStateFromStores)([f.default],()=>f.default.shouldShowBump(n),[n]),p=s.useCallback(()=>{r.default.dismissPublishBump(n),(0,o.default)(t,n)},[t,n]),_=s.useCallback(()=>{r.default.dismissPublishBump(n)},[n]),g=s.useCallback(()=>{r.default.permanentlyHidePublishBump(t)},[t]);return E?(0,a.jsxs)("div",{className:h.container,children:[(0,a.jsxs)("div",{className:h.bumpBox,children:[(0,a.jsx)(d.default,{className:h.icon}),(0,a.jsx)(c.default,{className:h.tagline,size:c.default.Sizes.SIZE_14,children:m.default.Messages.NEWS_CHANNEL_PUBLISH_BUMP}),(0,a.jsx)(i.Button,{color:i.Button.Colors.LINK,look:i.Button.Looks.LINK,size:i.Button.Sizes.MIN,className:h.publish,onClick:p,children:m.default.Messages.NEWS_CHANNEL_PUBLISH}),(0,a.jsx)(i.Clickable,{onClick:_,children:(0,a.jsx)(u.default,{className:h.closeIcon,width:16,height:16})})]}),(0,a.jsx)(i.Text,{color:"text-muted",className:h.hidePermanently,variant:"text-sm/normal",children:(0,a.jsx)(i.Clickable,{onClick:g,children:m.default.Messages.NEWS_CHANNEL_PUBLISH_BUMP_HIDE_PERMANENTLY})})]}):null}},315176:function(e,t,n){"use strict";n.r(t),n.d(t,{sendRandomStickerOrEmoji:function(){return g}}),n("834022");var a=n("249654"),s=n("819689"),l=n("385976"),i=n("252931"),r=n("884351"),o=n("866353"),u=n("467094"),d=n("364685"),c=n("161585"),f=n("305961"),m=n("697218"),h=n("402671"),E=n("49111"),p=n("958706");function _(e){let t=f.default.getGuild(e);return null!=t&&(t.nsfwLevel===E.GuildNSFWContentLevel.DEFAULT||t.nsfwLevel===E.GuildNSFWContentLevel.SAFE)}async function g(e,t){var n,E,g;let I=t.getGuildId();if(null==I)return;let T=f.default.getGuild(I);if(null==T)return;let C=m.default.getCurrentUser();if(null==C)return;await (0,u.fetchStickerPacks)();let S=Array.from(d.default.getAllStickersIterator()),A=S.filter(e=>e.type===c.MetaStickerType.GUILD),N=A.filter(e=>_(e.guild_id)&&(0,o.isSendableSticker)(e,C,t)).sort((e,t)=>-a.default.compare(e.id,t.id));if(N.length>5){let a=[N[Math.floor(Math.pow(Math.random(),2)*N.length)].id];s.default.sendStickers(t.id,a,"",{messageReference:{guild_id:null!==(n=t.getGuildId())&&void 0!==n?n:void 0,channel_id:t.id,message_id:e}});return}let M=(0,i.getInventoryGuildPacksUserExperimentConfig)({user:C,autoTrackExposure:!1}).viewAndUseEnabled,v=f.default.getGuilds(),x=Object.keys(v).filter(_).map(e=>l.default.getUsableGuildEmoji(e)).flat().filter(e=>null==h.default.getEmojiUnavailableReason({emoji:e,channel:t,guildId:I,intention:p.EmojiIntention.CHAT,canViewAndUsePackEmoji:M})).sort((e,t)=>-a.default.compare(e.id,t.id));if(x.length>10){let n=x[Math.floor(Math.pow(Math.random(),2)*x.length)];s.default.sendMessage(t.id,r.default.parse(t,n.allNamesString),!1,{messageReference:{guild_id:null!==(E=t.getGuildId())&&void 0!==E?E:void 0,channel_id:t.id,message_id:e}});return}let O=S.filter(e=>e.type===c.MetaStickerType.STANDARD),L=[O[Math.floor(Math.random()*O.length)].id];s.default.sendStickers(t.id,L,"",{messageReference:{guild_id:null!==(g=t.getGuildId())&&void 0!==g?g:void 0,channel_id:t.id,message_id:e}})}},881536:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}}),n("222007");var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("77078"),r=n("367376"),o=n("560176"),u=n("304198"),d=n("388142"),c=n("49111"),f=n("782340"),m=n("19676");function h(e){let{message:t,channel:s,compact:r}=e,o=null!=t.embeds&&t.embeds.length>0;return(0,a.jsxs)("div",{children:[(0,a.jsx)(u.default,{className:l(m.mainContainer,{[m.compact]:r}),icon:n("127067"),compact:r,children:(0,a.jsx)("div",{className:l(m.content,{[m.compact]:r}),children:(0,a.jsx)("div",{className:l(m.messageContent,{[m.compact]:r}),children:t.content})})}),(0,a.jsx)("div",{className:l(m.embedContent,{[m.compact]:r}),children:(0,a.jsx)(E,{message:t})}),(0,a.jsx)("div",{className:m.actions,children:(0,a.jsx)(i.Button,{color:i.Button.Colors.PRIMARY,onClick:()=>{o?(0,d.updateGamingStats)(t):(0,d.sendGamingStatsMessage)(s.guild_id,s.id,t.id)},children:f.default.Messages.SYSTEM_MESSAGE_GET_GAMING_STATS})})]})}function E(e){var t;let{message:n}=e,[s]=null!==(t=n.embeds)&&void 0!==t?t:[];return null==s?null:(0,a.jsx)(o.default,{className:m.embed,embed:s,renderTitle:(e,t)=>r.default.parseEmbedTitle(t,!0,{channelId:n.channel_id}),renderDescription:(e,t,a)=>r.default.parse(t,!0,{channelId:n.channel_id}),autoPlayGif:!1,renderImageComponent:e=>(0,c.NOOP_NULL)(),renderVideoComponent:e=>(0,c.NOOP_NULL)(),renderLinkComponent:e=>(0,c.NOOP_NULL)()})}},441979:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}}),n("222007"),n("834022");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("446674"),o=n("77078"),u=n("529805"),d=n("364685"),c=n("41170"),f=n("46829"),m=n("840817"),h=n("304198"),E=n("599110"),p=n("659500"),_=n("315176"),g=n("49111"),I=n("782340"),T=n("779194");function C(e){let{message:t,channel:l,compact:C}=e,S=(0,r.useStateFromStoresArray)([d.default],()=>{let e=d.default.getAllGuildStickers();return Array.from(e.values()).flat()}),A=S.slice(0,20),[N,M]=s.useState(null);return(s.useEffect(()=>{let e=setInterval(()=>{A.length>0&&M(A[Math.floor(Math.random()*A.length)])},500);return()=>clearInterval(e)},[A]),null==l.guild_id)?null:(0,a.jsxs)("div",{children:[(0,a.jsx)(h.default,{className:i(T.mainContainer,{[T.compact]:C}),icon:n("127067"),compact:C,children:(0,a.jsx)("div",{className:i(T.content,{[T.compact]:C}),children:(0,a.jsx)("div",{className:i(T.messageContent,{[T.compact]:C}),children:""!==t.content?t.content:I.default.Messages.DEADCHAT_PROMPT_1})})}),(0,a.jsxs)("div",{className:T.actions,children:[(0,a.jsx)(o.TooltipContainer,{text:I.default.Messages.CHANNEL_PROMPT_UPLOAD_IMAGE_CTA,children:(0,a.jsx)(o.Button,{color:o.Button.Colors.PRIMARY,onClick:()=>{E.default.track(g.AnalyticEvents.CHANNEL_PROMPT_ACTION_CLICKED,{message_id:t.id,channel_id:l.id,guild_id:l.guild_id,action_type:"upload_file"}),p.ComponentDispatch.dispatch(g.ComponentActions.UPLOAD_FILE),(0,u.createPendingReply)({message:t,channel:l,shouldMention:!0})},children:(0,a.jsx)(m.default,{})})}),(0,a.jsx)(o.TooltipContainer,{text:I.default.Messages.CHANNEL_PROMPT_RANDOM_STICKER_CTA,children:(0,a.jsx)(o.Button,{color:o.Button.Colors.PRIMARY,onClick:()=>{E.default.track(g.AnalyticEvents.CHANNEL_PROMPT_ACTION_CLICKED,{message_id:t.id,channel_id:l.id,guild_id:l.guild_id,action_type:"sticker"}),(0,_.sendRandomStickerOrEmoji)(t.id,l)},children:null!=N?(0,a.jsx)(c.default,{size:32,sticker:N}):(0,a.jsx)(f.default,{})})})]})]})}},175528:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("884691"),s=n("240249");function l(e,t){let n=a.useRef(null),l=a.useCallback((e,t)=>{var a,s,l;e.preventDefault(),e.clipboardData.setData("application/x-discord-interaction-data",JSON.stringify(t)),e.clipboardData.setData("text/plain",null!==(l=null===(s=n.current)||void 0===s?void 0:null===(a=s.textContent)||void 0===a?void 0:a.trim())&&void 0!==l?l:"")},[]);return s.useCommand(e,t),{onCopy:l,copyRef:n}}},411723:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983");n("884691");var s=n("866227"),l=n.n(s),i=n("446674"),r=n("77078"),o=n("442939"),u=n("730859"),d=n("697218"),c=n("953109"),f=n("449008"),m=n("782340"),h=n("127789"),E=function(e){let{attachment:t,guildId:n}=e,{application:s,clip_participants:E,title:p}=t,_=(0,o.useGetOrFetchApplication)(null==s?void 0:s.id),g=(0,i.useStateFromStoresArray)([d.default],()=>{var e;return null!==(e=null==E?void 0:E.map(e=>{let{id:t}=e;return d.default.getUser(t)}).filter(f.isNotNullish))&&void 0!==e?e:[]}),I=null==_?void 0:_.name,T=l(t.clip_created_at).fromNow();return null==t.clip_created_at?null:(0,a.jsxs)("div",{className:h.container,children:[(0,a.jsx)(c.default,{game:_}),(0,a.jsxs)("div",{className:h.textSection,children:[null!=p&&""!==p?(0,a.jsx)(r.Text,{variant:"text-md/semibold",color:"interactive-active",children:p}):(0,a.jsx)(r.Text,{variant:"text-md/semibold",color:"text-muted",children:m.default.Messages.CLIPS_UNTITLED}),(0,a.jsxs)(r.Text,{variant:"text-xs/medium",color:"text-muted",className:h.subtitle,children:[null!=I?"".concat(I,"  "):null,T]}),(0,a.jsx)(r.Text,{variant:"text-xs/medium",color:"text-muted",className:h.subtitle})]}),null!=E&&E.length>0&&(0,a.jsx)(u.default,{maxUsers:4,users:g,className:h.facePile,guildId:n})]})}},371348:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("522632"),s=n("407063"),l=n("315102"),i=n("49111");function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.AVATAR_SIZE,o=n&&(0,l.isAnimatedIconHash)(e.avatar_hash)?"gif":"jpg",u=e.clyde_profile_id;if(null==e.avatar_hash)return null;let{CDN_HOST:d}=window.GLOBAL_ENV;return null!=d?("jpg"===o&&(o=l.SUPPORTS_WEBP?"webp":"png"),t="".concat(location.protocol,"//").concat(d).concat(i.Endpoints.CLYDE_PROFILES_AVATAR(u,e.avatar_hash,o))):t=location.protocol+window.GLOBAL_ENV.API_ENDPOINT+i.Endpoints.CLYDE_PROFILES_AVATAR(u,e.avatar_hash,o),t+"?".concat(a.stringify({size:(0,s.getBestMediaProxySize)(r*(0,s.getDevicePixelRatio)())}))}},576060:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var a=n("37983"),s=n("884691"),l=n("759843"),i=n("65597"),r=n("77078"),o=n("428958"),u=n("18494"),d=n("79798"),c=n("174622"),f=n("335189"),m=n("473591"),h=n("371348"),E=n("857697"),p=n("988268"),_=n("782340"),g=n("786860");function I(e){let{code:t}=e,{clydeProfile:n,isFetching:I}=(0,i.useStateFromStoresObject)([m.default],()=>({clydeProfile:m.default.getProfile(t),isFetching:m.default.isFetchingProfile(t)})),T=(0,i.default)([u.default],u.default.getCurrentlySelectedChannelId);if(s.useEffect(()=>{(0,f.fetchClydeProfile)(t)},[t]),(0,o.default)({type:l.ImpressionTypes.VIEW,name:l.ImpressionNames.CLYDE_AI_PROFILE_EMBED_VIEWED,properties:{clyde_profile_id:null==n?void 0:n.clyde_profile_id,channel_id:T}},{disableTrack:null==n||null==T}),I)return(0,a.jsxs)(c.default,{children:[(0,a.jsx)(c.default.Header,{text:_.default.Messages.CLYDE_PROFILE_EMBED_RESOLVING_HEADER}),(0,a.jsx)(c.default.Body,{resolving:!0})]});if(null==n)return(0,a.jsxs)(c.default,{children:[(0,a.jsx)(c.default.Header,{text:_.default.Messages.CLYDE_PROFILE_EMBED_INVALID_HEADER}),(0,a.jsx)(c.default.Body,{children:(0,a.jsxs)("div",{className:g.invalidBody,children:[(0,a.jsx)(c.default.Icon,{expired:!0}),(0,a.jsx)(c.default.Info,{expired:!0,title:_.default.Messages.CLYDE_PROFILE_EMBED_INVALID_INFO_TITLE,children:_.default.Messages.CLYDE_PROFILE_EMBED_INVALID_INFO_BODY})]})})]});let C=(0,h.default)(n,!1,56);return(0,a.jsxs)(c.default,{children:[(0,a.jsx)(c.default.Header,{text:_.default.Messages.CLYDE_PROFILE_EMBED_HEADER}),(0,a.jsxs)(c.default.Body,{children:[(0,a.jsxs)(r.Clickable,{className:g.profileInfoContainer,onClick:()=>(0,E.default)(n),children:[(0,a.jsx)(r.Avatar,{src:C,size:r.AvatarSizes.SIZE_56,"aria-hidden":!0}),(0,a.jsxs)("div",{className:g.profileNameContainer,children:[(0,a.jsx)(c.default.Info,{title:n.name}),(0,a.jsx)(d.default,{type:p.BotTagTypes.AI})]})]}),(0,a.jsx)(c.default.Button,{className:g.applyButton,onClick:()=>{(0,E.default)(n)},color:c.default.Button.Colors.BRAND,children:_.default.Messages.CLYDE_PROFILE_APPLY})]})]})}},857697:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("77078"),l=n("162771"),i=n("599110"),r=n("49111");function o(e){let t=l.default.getGuildId();i.default.track(r.AnalyticEvents.OPEN_MODAL,{type:"Clyde Profile Apply",location_page:"Embed Apply",clyde_profile_id:e.clyde_profile_id,guild_id:t}),(0,s.openModalLazy)(async()=>{let{default:t}=await n.el("882317").then(n.bind(n,"882317"));return n=>(0,a.jsx)(t,{...n,clydeProfile:e})})}},634388:function(e,t,n){"use strict";n.r(t),n.d(t,{useGuildShopDisplayContext:function(){return N},default:function(){return M}}),n("424973"),n("222007");var a=n("37983"),s=n("884691"),l=n("627445"),i=n.n(l),r=n("65597"),o=n("151426"),u=n("716241"),d=n("10641"),c=n("837008"),f=n("903724"),m=n("393414"),h=n("923959"),E=n("305961"),p=n("599110"),_=n("551254"),g=n("991148"),I=n("893399"),T=n("874146"),C=n("500307"),S=n("49111");let A=s.createContext(void 0);function N(){let e=s.useContext(A);return i(null!=e,"must use useGuildShopDisplayContext within a GuildShopDisplayContextProvider"),e}function M(e){var t;let{children:n,initialTab:l,guildId:i}=e,N=(0,r.default)([E.default],()=>E.default.getGuild(i)),M=(0,g.useGuildShopPreviewVisible)(N,"guild_shop_page"),v=(0,_.useIsEligibleForSubscriptionsInGuildShop)(i,"guild_shop_page"),x=(null==N?void 0:N.hasFeature(S.GuildFeatures.PRODUCTS_AVAILABLE_FOR_PURCHASE))===!0,O=(0,f.useRoleSubscriptionsVisibleInGuild)(null==N?void 0:N.id),L=null===(t=(0,c.useSubscriptionsSettings)(i))||void 0===t?void 0:t.server_shop_tab_order,R=[],y=I.GuildShopTab.GUILD_SHOP_FULL_PREVIEW;x&&O?(R.push(L===T.ServerShopTabOrder.PRODUCTS_FIRST?I.GuildShopTab.GUILD_PRODUCTS:I.GuildShopTab.GUILD_ROLE_SUBSCRIPTIONS),R.push(L===T.ServerShopTabOrder.PRODUCTS_FIRST?I.GuildShopTab.GUILD_ROLE_SUBSCRIPTIONS:I.GuildShopTab.GUILD_PRODUCTS),y=R[0]):x&&!O?(R.push(I.GuildShopTab.GUILD_PRODUCTS),y=I.GuildShopTab.GUILD_PRODUCTS):!x&&O&&(R.push(I.GuildShopTab.GUILD_ROLE_SUBSCRIPTIONS),y=I.GuildShopTab.GUILD_ROLE_SUBSCRIPTIONS,M&&R.push(I.GuildShopTab.GUILD_PRODUCTS_PREVIEW)),l=null!=l?l:y;let[P,D]=s.useState(l),j=M&&!(O&&v)||P===I.GuildShopTab.GUILD_PRODUCTS_PREVIEW;return s.useEffect(()=>{D(l)},[l]),(0,a.jsx)(A.Provider,{value:{selectedTab:P,setSelectedTab:D,categoryTabs:R,isPhantomPreview:j,handlePreviewDismiss:e=>{(0,d.markDismissibleContentAsDismissed)(o.DismissibleContent.SERVER_SHOP_PHANTOM_PREVIEW);let t={...(0,u.collectGuildAnalyticsMetadata)(i)};if(P===I.GuildShopTab.GUILD_PRODUCTS_PREVIEW)e.stopPropagation(),D(I.GuildShopTab.GUILD_ROLE_SUBSCRIPTIONS),t.action_taken=C.GuildShopPreviewClickActions.DISMISS_TAB_PREVIEW;else{var n;(0,m.replaceWith)(S.Routes.CHANNEL(i,null===(n=h.default.getDefaultChannel(i))||void 0===n?void 0:n.id)),t.action_taken=C.GuildShopPreviewClickActions.DISMISS_FULL_PREVIEW}p.default.track(S.AnalyticEvents.GUILD_SHOP_PREVIEW_CLICK,t)}},children:n})}},810044:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("759843"),o=n("171210"),u=n("446674"),d=n("77078"),c=n("716241"),f=n("428958"),m=n("442379"),h=n("537325"),E=n("305961"),p=n("476263"),_=n("191814"),g=n("898260"),I=n("599110"),T=n("741515"),C=n("3081"),S=n("907038"),A=n("49111"),N=n("782340"),M=n("431607");function v(e){var t;let{guildId:n}=e,l=(0,u.useStateFromStores)([E.default],()=>E.default.getGuild(n)),{loading:v,subscriptionsSettings:x}=(0,T.useMonetizationSettings)(n),{listingsLoaded:O}=(0,m.useFetchGuildProductListingsForGuild)(n),L=(0,m.useGuildProductsForGuild)(n,{publishedOnly:!0}),R=s.useCallback(async()=>{I.default.track(A.AnalyticEvents.GUILD_SHOP_EMBED_CLICKED,{...(0,c.collectGuildAnalyticsMetadata)(n)}),await (0,h.default)(A.Routes.SERVER_SHOP(n))},[n]);(0,f.default)({type:r.ImpressionTypes.VIEW,name:r.ImpressionNames.GUILD_SHOP_EMBED},{disableTrack:null==l});let y=L.length>0?new Date(Math.min(...L.map(e=>Date.parse(e.published_at)))):void 0;return v||!O?(0,a.jsx)("div",{className:i(M.guildShopEmbed,M.spinnerContainer),children:(0,a.jsx)(d.Spinner,{})}):null==l||null==x?null:(0,a.jsxs)("div",{className:M.guildShopEmbed,children:[(0,a.jsx)(C.HeroImage,{coverImageAsset:null!==(t=x.cover_image_asset)&&void 0!==t?t:null}),(0,a.jsx)(_.default,{size:16}),(0,a.jsxs)("div",{className:M.serverShopLabel,children:[(0,a.jsx)(S.default,{height:"16px",width:"16px",color:o.default.INTERACTIVE_NORMAL}),(0,a.jsx)(d.Heading,{variant:"heading-sm/semibold",color:"interactive-normal",className:M.serverShopLabelText,children:N.default.Messages.GUILD_SHOP_CHANNEL_LABEL})]}),(0,a.jsx)(_.default,{size:16}),(0,a.jsx)(d.Heading,{variant:"heading-md/semibold",color:"text-normal",children:N.default.Messages.GUILD_STORE_HERO_TITLE.format({guildName:l.name})}),(0,a.jsx)(_.default,{size:4}),(0,a.jsx)(d.Text,{variant:"text-sm/normal",color:"text-muted",lineClamp:2,children:x.description}),(0,a.jsx)(_.default,{size:16}),(0,a.jsx)(g.default,{}),(0,a.jsx)(_.default,{size:16}),(0,a.jsxs)("div",{className:M.guildShopEmbedFooter,children:[(0,a.jsx)(p.default,{guild:l}),(0,a.jsxs)("ul",{className:M.guildShopSummary,children:[(0,a.jsx)("li",{children:(0,a.jsx)(d.Text,{variant:"text-sm/normal",color:"text-muted",children:N.default.Messages.GUILD_SHOP_EMBED_LISTINGS_AVAILABLE.format({listingCount:L.length})})}),null!=y&&(0,a.jsx)("li",{children:(0,a.jsx)(d.Text,{variant:"text-sm/normal",color:"text-muted",children:N.default.Messages.GUILD_SHOP_EMBED_SHOP_AGE.format({createdYear:y.getFullYear()})})})]}),(0,a.jsx)(d.Button,{className:M.guildShopEmbedCta,onClick:R,children:(0,a.jsxs)("div",{className:M.guildShopEmbedCtaContent,children:[(0,a.jsx)(S.default,{height:"18px",width:"18px"}),(0,a.jsx)(d.Text,{variant:"text-sm/medium",color:"always-white",children:N.default.Messages.GUILD_SHOP_EMBED_CTA})]})})]})]})}},893399:function(e,t,n){"use strict";var a,s;n.r(t),n.d(t,{GuildShopTab:function(){return a}}),(s=a||(a={})).GUILD_PRODUCTS="guild_products",s.GUILD_ROLE_SUBSCRIPTIONS="guild_role_subscriptions",s.GUILD_PRODUCTS_PREVIEW="guild_products_preview",s.GUILD_SHOP_FULL_PREVIEW="guild_shop_full_preview"},3081:function(e,t,n){"use strict";n.r(t),n.d(t,{HeroImage:function(){return O},default:function(){return L}}),n("222007");var a=n("37983"),s=n("884691"),l=n("627445"),i=n.n(l),r=n("446674"),o=n("77078"),u=n("834897"),d=n("183137"),c=n("132349"),f=n("845579"),m=n("26989"),h=n("697218"),E=n("476263"),p=n("191814"),_=n("246053"),g=n("58608"),I=n("158998"),T=n("866190"),C=n("662960"),S=n("634388"),A=n("893399"),N=n("744917"),M=n("782340"),v=n("347152");function x(e){let{onClick:t}=e;return(0,a.jsxs)(o.Clickable,{onClick:t,className:v.showMoreButton,children:[(0,a.jsx)(o.Text,{variant:"text-sm/medium",color:"header-primary",children:M.default.Messages.GUILD_STORE_HERO_SHOW_MORE_DESCRIPTION_LABEL}),(0,a.jsx)(p.default,{size:4,horizontal:!0}),(0,a.jsx)(_.default,{direction:_.default.Directions.RIGHT,className:v.showMoreArrow})]})}function O(e){let{coverImageAsset:t,isPreview:n=!1}=e,s=f.GifAutoPlay.useSetting(),l=(0,T.useIsWindowFocused)(),i=l&&s,[r,o]=(0,c.default)(t,i),u=i?(0,a.jsx)(g.default,{autoPlay:!0,loop:!0,className:v.coverImage,width:655,poster:(0,d.getAssetCDNUrl)("server_products/storefront/default-header.png"),src:(0,d.getAssetCDNUrl)("server_products/storefront/default-header.mov")}):(0,a.jsx)("img",{src:(0,d.getAssetCDNUrl)("server_products/storefront/default-header.png"),alt:"",className:v.coverImage});return(0,a.jsx)("div",{ref:r,className:v.coverImageContainer,children:null==o||n?u:(0,a.jsx)("img",{src:o,alt:"",className:v.coverImage})})}function L(e){var t,n,l;let{guild:c,subscriptionsSettings:f}=e,_=c.id;let{nickname:g,nickcolor:T}=(l=_,(0,r.useStateFromStoresObject)([m.default,h.default],()=>{var e,t;let n=h.default.getCurrentUser();i(null!=n,"user cannot be null");let a=m.default.getMember(l,n.id);return{nickname:null!==(e=null==a?void 0:a.nick)&&void 0!==e?e:I.default.getName(n),nickcolor:null!==(t=null==a?void 0:a.colorString)&&void 0!==t?t:void 0}},[l])),{isTruncated:L,ExpandableTextContainer:R}=(0,C.useExpandableTextContainer)(),y=(null!==(n=null==f?void 0:null===(t=f.description)||void 0===t?void 0:t.trim().length)&&void 0!==n?n:0)>0,[P,D]=s.useState(1),j=(0,u.default)("(max-width: ".concat(v.twoColumnWidth,")")),{selectedTab:b,isPhantomPreview:U}=(0,S.useGuildShopDisplayContext)(),B=b===A.GuildShopTab.GUILD_PRODUCTS_PREVIEW?M.default.Messages.GUILD_STORE_HERO_PREVIEW_TAB_DESCRIPTION:M.default.Messages.GUILD_STORE_HERO_PREVIEW_PAGE_DESCRIPTION,G=y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R,{lineClamp:j||2===P?2:3,children:(0,a.jsx)(o.Text,{variant:"text-sm/normal",color:"text-normal",children:null==f?void 0:f.description})}),L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.default,{size:4}),(0,a.jsx)(x,{onClick:()=>(0,N.default)({guildId:_})})]})]}):(0,a.jsx)(o.Text,{variant:"text-sm/normal",color:"text-normal",children:U?B:M.default.Messages.GUILD_STORE_HERO_DEFAULT_DESCRIPTION});return(0,a.jsxs)("div",{className:v.container,children:[(0,a.jsxs)("div",{className:v.infoContainer,children:[(0,a.jsx)("div",{children:(0,a.jsx)(E.default,{guild:c,size:E.default.Sizes.LARGER,iconSrc:null==c.icon||U?(0,d.getAssetCDNUrl)("server_products/storefront/default-guild-icon.jpg"):void 0})}),(0,a.jsx)(p.default,{size:16,horizontal:!0}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{ref:e=>{null!=e&&e.clientHeight>30&&D(2)},children:(0,a.jsx)(o.Heading,{variant:"heading-xl/semibold",color:"header-primary",lineClamp:2,children:U?M.default.Messages.GUILD_STORE_HERO_PREVIEW_TITLE:M.default.Messages.GUILD_STORE_HERO_TITLE.format({guildName:c.name})})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.default,{size:8}),(0,a.jsx)(o.Text,{variant:"text-md/normal",color:"text-normal",children:M.default.Messages.GUILD_STORE_HERO_DESCRIPTION_GREETING.format({username:g,usernameHook:function(e,t){return(0,a.jsx)("span",{style:{color:T},children:e},t)}})}),(0,a.jsx)(p.default,{size:9}),G]})]})]}),(0,a.jsx)(O,{coverImageAsset:null==f?void 0:f.cover_image_asset,isPreview:U})]})}},744917:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("551042");function l(e){(0,s.openModalLazy)(async()=>{let{default:t}=await n.el("783165").then(n.bind(n,"783165"));return n=>(0,a.jsx)(t,{...e,...n})})}},907038:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=24,height:n=24,color:l="currentColor",...i}=e;return(0,a.jsxs)("svg",{...(0,s.default)(i),xmlns:"http://www.w3.org/2000/svg",width:t,height:n,viewBox:"0 0 20 20",fill:"none",children:[(0,a.jsxs)("g",{"clip-path":"url(#clip0_2645_182555)",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.6698 8.91016C14.5646 10.1567 16.3407 10.3342 17.4866 9.44283C17.4957 9.46624 17.5008 9.49191 17.5008 9.51916V15.8337C17.5008 17.2144 16.3815 18.3337 15.0008 18.3337H12.7092C12.5941 18.3337 12.5008 18.2404 12.5008 18.1253V13.3337C12.5008 12.4132 11.7547 11.667 10.8342 11.667H9.16748C8.24699 11.667 7.5008 12.4132 7.5008 13.3337V18.1253C7.5008 18.2404 7.40753 18.3337 7.29247 18.3337H5.0008C3.62009 18.3337 2.5008 17.2144 2.5008 15.8337V9.51916C2.5008 9.36341 2.66628 9.26158 2.81091 9.31949C3.23542 9.48933 3.70172 9.58366 4.19593 9.58366C5.27336 9.58366 6.24385 9.12583 6.92345 8.39408C7.0135 8.29708 7.17004 8.29679 7.26039 8.39349C7.94479 9.12583 8.91932 9.58366 10.0008 9.58366C11.0823 9.58366 12.0568 9.12583 12.7412 8.39349C12.8316 8.29679 12.9882 8.29708 13.0782 8.39408C13.2565 8.58599 13.4548 8.75916 13.6698 8.91016ZM11.7497 6.67891C9.42957 5.8204 9.4179 2.5511 11.7147 1.6683C11.699 1.66743 11.6833 1.66699 11.6675 1.66699H8.33415C7.87391 1.66699 7.50082 2.04009 7.50082 2.50033V5.83366C7.50082 5.87681 7.50191 5.9197 7.50407 5.96231C7.52181 6.31232 7.61153 6.64333 7.75873 6.94085C7.77282 6.96931 7.78743 6.99747 7.80255 7.02531C8.2259 7.80462 9.05157 8.33366 10.0008 8.33366C10.984 8.33366 11.8346 7.76614 12.2429 6.94084L12.2543 6.91751C12.2613 6.90286 12.2682 6.88812 12.2751 6.87331L11.7497 6.67891ZM15.8231 8.3336C15.4338 8.32949 15.0467 8.10931 14.8853 7.67305L14.4606 6.52524C14.2917 6.06904 13.9321 5.70936 13.4759 5.54055L13.3342 5.4881V2.84588L13.4759 2.79343C13.9321 2.62463 14.2917 2.26494 14.4606 1.80874L14.5131 1.66699H15.2462C16.3397 1.66699 17.3062 2.37762 17.6324 3.42131L18.1647 5.12491C18.2057 5.25598 18.2352 5.38724 18.254 5.51775L18.1924 5.54055C17.7361 5.70936 17.3765 6.06904 17.2077 6.52524L16.783 7.67305C16.627 8.09458 16.2603 8.31438 15.8847 8.33245C15.8642 8.33308 15.8437 8.33346 15.8231 8.3336ZM12.5008 3.15424V5.17974L12.3281 5.11583C11.4472 4.78989 11.4472 3.54409 12.3281 3.21816L12.5008 3.15424ZM4.75546 1.66699C3.662 1.66699 2.69541 2.37762 2.36926 3.4213L1.83688 5.12491C1.52876 6.11092 1.8679 7.1068 2.56708 7.72187C2.99643 8.09957 3.56156 8.33366 4.19593 8.33366C5.13437 8.33366 5.95065 7.81064 6.36917 7.04019C6.38619 7.00888 6.40255 6.97714 6.41823 6.94502C6.57788 6.618 6.66748 6.25052 6.66748 5.86211V2.50033C6.66748 2.04009 6.29438 1.66699 5.83415 1.66699H4.75546Z",fill:l}),(0,a.jsx)("path",{d:"M14.8838 0.660607C15.2097 -0.220202 16.4556 -0.220202 16.7815 0.660607L17.2062 1.80842C17.375 2.26462 17.7347 2.6243 18.1909 2.79311L19.3387 3.21783C20.2195 3.54377 20.2195 4.78957 19.3387 5.1155L18.1909 5.54023C17.7347 5.70903 17.375 6.06872 17.2062 6.52492L16.7815 7.67272C16.4556 8.5535 15.2097 8.5535 14.8838 7.67272L14.4591 6.52492C14.2903 6.06872 13.9306 5.70903 13.4744 5.54023L12.3266 5.1155C11.4458 4.78957 11.4458 3.54377 12.3266 3.21783L13.4744 2.79311C13.9306 2.6243 14.2903 2.26462 14.4591 1.80842L14.8838 0.660607Z",fill:l})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_2645_182555",children:(0,a.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}},931164:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("917351"),s=n.n(a),l=n("270926"),i=n("888198"),r=n("367376");let o=s.omit(i.default.RULES,["codeBlock","heading"]),u={...l.default,parse:function(e,t,n){var a;let s=l.default.parse(e,t,n),i=null!==(a=n.initialHeaderLevel)&&void 0!==a?a:3,r=Math.min(6,i+s.level);return{...s,level:r}}},d=r.default.combineAndInjectMentionRule(o,[r.default.createReactRules(r.default.defaultReactRuleOptions),{header:u}]),c=r.default.reactParserFor(d);var f=c},228035:function(e,t,n){"use strict";n.r(t),n.d(t,{openGuildShopReportModal:function(){return l}});var a=n("37983");n("884691");var s=n("77078");function l(e){let{listing:t}=e;(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("754559").then(n.bind(n,"754559"));return n=>(0,a.jsx)(e,{listing:t,...n})})}},662960:function(e,t,n){"use strict";n.r(t),n.d(t,{useExpandableTextContainer:function(){return o}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("284427");function o(){let[e,t]=s.useState(!1);return{isTruncated:e,ExpandableTextContainer:s.memo(function(e){let{showAll:n=!1,className:s,children:l,lineClamp:o=2}=e;return(0,a.jsx)("div",{ref:e=>{if(null!=e){let n=e.scrollHeight-e.clientHeight>1;t(n)}},className:i(r.lineClamp,s),style:n?void 0:{lineClamp:o,WebkitLineClamp:o},children:l})})}}},17692:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("77078"),o=n("931164"),u=n("289162"),d=n("632215");function c(e){let{color:t,className:n,variant:l,text:c,lineClamp:f}=e,m=(0,r.usePrivateHeadingLevel)(),h=s.useMemo(()=>null==c?null:(0,o.default)(c,!0,{allowHeading:null==f,allowList:null==f,initialHeaderLevel:m}),[c,f,m]);return(0,a.jsx)(r.Text,{className:i(n,{[d.markup]:null==f,[u.lineClamp2Plus]:null!=f&&f>1,[u.lineClamp1]:1===f}),color:t,variant:l,lineClamp:f,children:h})}},649486:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}}),n("222007");var a,s,l=n("37983"),i=n("884691"),r=n("414456"),o=n.n(r),u=n("597755"),d=n.n(u),c=n("394846"),f=n("171718"),m=n("446674"),h=n("77078"),E=n("774146"),p=n("161778"),_=n("271938"),g=n("697218"),I=n("476765"),T=n("599110"),C=n("98013"),S=n("49111"),A=n("782340"),N=n("777016");(s=a||(a={}))[s.OSX=0]="OSX",s[s.WINDOWS=1]="WINDOWS",s[s.LINUX=2]="LINUX",s[s.IOS=3]="IOS",s[s.ANDROID=4]="ANDROID";let M=[{getOs:()=>A.default.Messages.PLATFORM_MACOS,icon:N.apple,url:()=>(0,C.makeDesktopDownloadURL)("osx",!1),platformKey:0},{getOs:()=>A.default.Messages.PLATFORM_WINDOWS,icon:N.windows,url:()=>(0,C.makeDesktopDownloadURL)("win",!1),platformKey:1},{getOs:()=>A.default.Messages.PLATFORM_LINUX,icon:N.linux,url:[{url:()=>(0,C.makeDesktopDownloadURL)("linux",!1,"deb"),getText:()=>A.default.Messages.DEB},{url:()=>(0,C.makeDesktopDownloadURL)("linux",!1,"tar.gz"),getText:()=>A.default.Messages.TAR_GZ}],platformKey:2}],v=[{getOs:()=>A.default.Messages.PLATFORM_IOS,icon:N.ios,url:()=>S.DownloadLinks.IOS,platformKey:3},{getOs:()=>A.default.Messages.PLATFORM_ANDROID,icon:N.android,url:()=>S.DownloadLinks.ANDROID,platformKey:4}],x=e=>{let{url:t,text:n,onClick:a}=e;return(0,l.jsx)(h.Anchor,{useDefaultUnderlineStyles:!1,href:t,className:N.downloadButton,onClick:a,children:n})},O=e=>{let t,{platform:n,onClick:a,onMouseEnter:s,isActive:i,claimed:r,theme:u}=e,{getOs:d,icon:c,url:f,platformKey:m}=n,E=d(),p=o(N.icon,c,u);if(Array.isArray(f))t=f.map((e,t)=>{let n=r?e.url():"";return(0,l.jsx)(x,{url:n,onClick:()=>a(E),text:e.getText()},"".concat(n,"-").concat(t))});else{let e=r?f():void 0;t=(0,l.jsx)(x,{url:e,onClick:()=>a(E),text:A.default.Messages.DOWNLOAD})}return(0,l.jsx)("li",{className:o(N.platform,{[N.active]:i}),onMouseEnter:()=>s(m),children:(0,l.jsxs)("div",{className:N.contentWrapper,children:[(0,l.jsxs)("div",{className:N.iconWrap,children:[(0,l.jsx)("div",{className:p}),(0,l.jsx)("div",{className:o(N.active,p)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Heading,{className:N.platformName,variant:"heading-lg/semibold",children:E}),(0,l.jsx)("div",{className:o(N.downloadButtons,{[N.list]:Array.isArray(t)}),children:t})]})]})})};function L(e){let{source:t,onClose:n,transitionState:a}=e,s=(0,m.useStateFromStores)([g.default],()=>g.default.getCurrentUser()),r=(0,m.useStateFromStores)([p.default],()=>p.default.theme),o=(0,m.useStateFromStores)([_.default],()=>_.default.getFingerprint()),u=null==s||s.isClaimed(),[C,x]=i.useState(function(){var e;switch(null===(e=d.os)||void 0===e?void 0:e.family){case"OS X":return 0;case"Windows":return 1;case"Ubuntu":case"Debian":case"Fedora":case"Red Hat":case"SuSE":case"Linux":return 2;case"iOS":return 3;case"Android":return 4;default:return}}());function L(e){(null!=f.default.getToken()||null!=o)&&T.default.track(S.AnalyticEvents.DOWNLOAD_APP,{platform:e,ptb:!1,released:!0,has_e_mail:u,referring_location:t,qr_code:!1}),!u&&(n(),E.openClaimAccountModal())}function R(e){x(e)}i.useEffect(()=>{T.default.track(S.AnalyticEvents.OPEN_MODAL,{type:"Download App",source:{location:t}})},[t]);let y=(0,I.useUID)();return(0,l.jsx)(h.ModalRoot,{className:N.downloadApps,transitionState:a,"aria-labelledby":y,children:(0,l.jsx)("div",{className:N.inner,children:(0,l.jsxs)(h.HeadingLevel,{component:(0,l.jsx)(h.HiddenVisually,{children:(0,l.jsx)(h.H,{id:y,children:A.default.Messages.DOWNLOAD_APP})}),children:[(0,l.jsx)(h.ModalCloseButton,{onClick:n,className:N.modalCloseButton}),!c.isMobile&&(0,l.jsx)("div",{className:N.platformsWrap,children:(0,l.jsx)(h.HeadingLevel,{component:(0,l.jsx)(h.Heading,{variant:"heading-lg/semibold",className:N.header,children:A.default.Messages.DOWNLOAD_DESKTOP_TITLE}),children:(0,l.jsx)("ul",{className:N.platforms,children:M.map(e=>(0,l.jsx)(O,{theme:r,isActive:C===e.platformKey,platform:e,onClick:L,onMouseEnter:R,claimed:u},e.platformKey))})})}),(0,l.jsx)("div",{className:N.platformsWrap,children:(0,l.jsxs)(h.HeadingLevel,{component:(0,l.jsx)(l.Fragment,{children:!c.isMobile&&(0,l.jsx)(h.Heading,{variant:"heading-lg/semibold",className:N.header,children:A.default.Messages.DOWNLOAD_MOBILE_TITLE})}),children:[(0,l.jsx)("ul",{className:N.platforms,children:v.map(e=>(0,l.jsx)(O,{theme:r,isActive:C===e.platformKey,platform:e,onClick:L,onMouseEnter:R,claimed:u},e.platformKey))}),(0,l.jsx)(h.Text,{className:N.footer,variant:"text-sm/normal",children:A.default.Messages.DOWNLOAD_DESKTOP_FOOTER.format()})]})})]})})})}},730859:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("917351"),o=n.n(r),u=n("77078"),d=n("272030"),c=n("427302"),f=n("158998"),m=n("393724");function h(e){let{className:t,maxUsers:l,users:r,guildId:h}=e,[E,p]=s.useState(!1);function _(){return(0,a.jsx)(u.Dialog,{className:m.popoutWrapper,children:(0,a.jsx)(u.Scroller,{className:m.scroller,children:r.map(e=>(0,a.jsx)(c.default,{guildId:h,user:e,nick:f.default.getName(e),onContextMenu:t=>(0,d.openContextMenuLazy)(t,async()=>{let{default:t}=await n.el("406784").then(n.bind(n,"406784"));return n=>(0,a.jsx)(t,{...n,user:e})},{onClose:()=>p(!1)})},e.id))})})}return r.length<=0?null:(0,a.jsx)("div",{className:i(t,m.avatars),children:function(){let e=o(r).take(l).map(e=>{let t=f.default.getName(e);return(0,a.jsx)(u.TooltipContainer,{text:t,className:m.avatar,children:(0,a.jsx)(u.Avatar,{src:e.getAvatarURL(h,24),"aria-label":t,size:u.AvatarSizes.SIZE_24})},e.id)}).value(),t=r.length-l;return t>0&&(e[e.length-1]=(0,a.jsx)(u.Popout,{renderPopout:_,shouldShow:E,position:"bottom",onRequestClose:()=>p(!1),children:()=>(0,a.jsxs)(u.Button,{className:i(m.avatar,m.overflow),onClick:()=>p(!0),look:u.Button.Looks.BLANK,size:u.Button.Sizes.NONE,children:["+",t+1]})},"overflow")),e}()})}},925685:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("77078"),l=n("266926"),i=n("782340"),r=n("616915");function o(e){let{message:t}=e;return(0,a.jsxs)(s.Clickable,{onClick:()=>{(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("335678").then(n.bind(n,"335678"));return n=>(0,a.jsx)(e,{channelId:t.channel_id,messageId:t.id,...n})})},className:r.accessory,children:[(0,a.jsx)(l.default,{width:16,height:16}),(0,a.jsx)(s.Text,{variant:"text-xs/normal",className:r.accessoryText,children:i.default.Messages.OBSCURED_CONTENT_LEARN_MORE_MESSAGE_LABEL})]})}},661579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("153160"),s=n("782340");function l(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.available)return s.default.Messages.GAME_ACTION_BUTTON_UNAVAILABLE;if(e.premium&&!n)return s.default.Messages.APPLICATION_STORE_FREE_WITH_PREMIUM;let l=e.getPrice(null,t);if(null!=l)return l.amount>0?(0,a.formatPrice)(l.amount,l.currency):s.default.Messages.APPLICATION_STORE_FREE;return s.default.Messages.GAME_ACTION_BUTTON_UNAVAILABLE}},277683:function(e,t,n){"use strict";n.r(t),n.d(t,{getGuildProductPurchaseSystemMessageContentMobile:function(){return s}});var a=n("782340");function s(e){let{username:t,usernameOnClickHandler:n,productName:s}=e;return a.default.Messages.SYSTEM_MESSAGE_GUILD_PRODUCT_PURCHASE_MOBILE.astFormat({username:t,usernameHook:n,productName:s})}},153587:function(e,t,n){"use strict";n.r(t),n.d(t,{download:function(){return s}});var a=n("545158");function s(e){return(0,a.default)(e)}},158195:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}}),n("222007");var a=n("884691"),s=n("404118"),l=n("448993"),i=n("242278"),r=n("153587"),o=n("782340");function u(e,t){let[n,u]=a.useState(!1),d=a.useCallback(async n=>{if(null!=e&&null!=t){u(!0);try{let{url:a}=await i.requestDownloadUrl({guildId:e,productId:t,attachmentId:n});await r.download(a)}catch(t){let e=t instanceof l.APIError?t.getAnyErrorMessage():void 0;s.default.show({title:o.default.Messages.ERROR_GENERIC_TITLE,body:null!=e?e:o.default.Messages.GENERIC_ERROR_BODY})}finally{u(!1)}}},[e,t]);return{isLoading:n,downloadAttachment:d}}},492724:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("77078"),r=n("17692"),o=n("191814"),u=n("476765"),d=n("538137"),c=n("600785"),f=n("246421"),m=n("782340"),h=n("767165");function E(e){let{hidePurchaseToUnlockBadge:t,className:n,children:s}=e;return(0,a.jsxs)("div",{className:l(h.productThumbnailContainer,n),children:[s,!t&&(0,a.jsxs)("div",{className:h.purchaseToUnlockBadge,children:[(0,a.jsx)(c.default,{className:h.lockIcon,width:16,height:16,color:"currentColor","aria-hidden":!0}),(0,a.jsx)(i.Text,{variant:"text-sm/normal",color:"always-white",className:h.unlockText,children:m.default.Messages.GUILD_PRODUCT_CARD_PURCHASE_TO_UNLOCK})]})]})}function p(e){let{onShowFullDescription:t,variant:n}=e,s=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Text,{variant:n,color:null!=t?"text-link":"interactive-hover",children:m.default.Messages.GUILD_PRODUCT_CARD_SEE_FULL_DESCRIPTION}),(0,a.jsx)(d.default,{className:h.arrowIcon,backgroundColor:"currentColor",width:16,height:16})]});return null==t?(0,a.jsx)("div",{className:h.showMoreButton,children:s}):(0,a.jsx)(i.Clickable,{className:l(h.showMoreButton,h.hasAction),onClick:e=>{e.stopPropagation(),null!=t&&t()},children:s})}function _(e){let{imageUrl:t,name:n,description:s,formattedPrice:d,role:c,ctaComponent:_,shouldShowFullDescriptionButton:g=!0,onShowFullDescription:I,productType:T,onTapCard:C,actionMenu:S,showOpaqueBackground:A=!1,hideRoleTag:N=!1,lineClamp:M=1,cardWidth:v=332,cardHeight:x,thumbnailHeight:O=187,descriptionTextVariant:L="text-sm/normal"}=e,R=(0,u.uid)(),y=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E,{hidePurchaseToUnlockBadge:!0,children:(0,a.jsx)("img",{alt:"",src:t,className:h.productThumbnail,style:{height:O}})}),(0,a.jsxs)("div",{className:h.productDetails,children:[(0,a.jsxs)("div",{className:h.productDetailContent,children:[(0,a.jsx)(i.Heading,{variant:"text-md/medium",color:"header-primary",className:h.productName,id:R,children:n}),(0,a.jsx)(i.FocusBlock,{children:(0,a.jsx)(r.default,{variant:L,color:"text-muted",lineClamp:M,text:s})}),g&&(0,a.jsx)(p,{onShowFullDescription:I,variant:L}),N||null==c||""===c.name?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.default,{size:16}),(0,a.jsx)(f.default,{role:c})]})]}),S]}),(0,a.jsxs)("div",{className:h.purchaseDetails,children:[(0,a.jsx)(i.Text,{variant:"text-md/medium",color:"interactive-active",className:h.productPrice,children:null!=d?d:m.default.Messages.GUILD_PRODUCT_CARD_EMPTY_PRICE}),(0,a.jsx)(i.Text,{variant:"text-xxs/normal",color:"text-normal",className:h.productType,children:T}),(0,a.jsx)("div",{className:h.productActionButton,onClick:e=>{e.stopPropagation()},children:_})]})]});return null==C?(0,a.jsx)("article",{className:l(h.productCard,A?h.opaqueBackground:h.solidBackground),"aria-labelledby":R,children:y}):(0,a.jsx)("div",{style:{width:v,height:x},children:(0,a.jsx)(i.ClickableContainer,{tag:"article","aria-label":m.default.Messages.GUILD_SHOP_LISTING_CARD_A11Y_LABEL.format({productName:n}),className:l(h.productCard,A?h.opaqueBackground:h.solidBackground,h.cardClickableContainer),onClick:C,children:y})})}},294519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}}),n("222007");var a=n("37983");n("884691");var s=n("759843"),l=n("65597"),i=n("812204"),r=n("428958"),o=n("162771"),u=n("442379"),d=n("858291"),c=n("660516");function f(e){let{code:t}=e,[n,f]=t.split("-"),m=(0,u.useFetchGuildProductListing)(n,f),h=(0,l.default)([o.default],()=>o.default.getGuildId());return((0,r.default)({type:c.ImpressionTypes.VIEW,name:s.ImpressionNames.GUILD_PRODUCT_LISTING_EMBED,properties:{guild_product_listing_id:f,has_entitlement:(null==m?void 0:m.has_entitlement)===!0}},{disableTrack:null==m}),null==m||h!==n)?null:(0,a.jsx)(d.GuildProductListingPublicCard,{guildProductListing:m,guildId:n,location:i.default.GUILD_PRODUCT_EMBED_CARD,cardWidth:390,thumbnailHeight:219})}},898998:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var s=n("77078"),l=n("158195");function i(e){let{guildId:t,productId:n,attachmentId:i,...r}=e,{isLoading:o,downloadAttachment:u}=(0,l.default)(t,n);return(0,a.jsx)(s.Button,{...r,submitting:o,onClick:function(){u(i)}})}},407417:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var s=n("627445"),l=n.n(s),i=n("65597"),r=n("77078"),o=n("191814"),u=n("246053"),d=n("195812"),c=n("565559"),f=n("35018"),m=n("898998"),h=n("782340"),E=n("418530");function p(e){var t,n,s,p;let{guildId:_,productId:g}=e,I=(0,i.default)([c.default],()=>c.default.getGuildProduct(g)),T=(null!==(p=null==I?void 0:null===(t=I.attachments)||void 0===t?void 0:t.length)&&void 0!==p?p:0)>1,C=null==I?void 0:null===(s=I.attachments)||void 0===s?void 0:null===(n=s[0])||void 0===n?void 0:n.id;return T?(0,a.jsxs)(r.Button,{onClick:function(){f.default.open({guildId:_,productId:g})},innerClassName:E.textWithIcon,children:[(0,a.jsx)("div",{children:h.default.Messages.GUILD_PRODUCT_DOWNLOAD_BUTTON_MULTIPLE_FILES}),(0,a.jsx)(o.default,{size:8,horizontal:!0}),(0,a.jsx)(u.default,{width:16,height:16,direction:u.default.Directions.RIGHT})]}):(l(null!=C,"No attachment"),(0,a.jsxs)(m.default,{guildId:_,productId:g,attachmentId:C,innerClassName:E.textWithIcon,children:[(0,a.jsx)("div",{children:h.default.Messages.GUILD_PRODUCT_DOWNLOAD_BUTTON_SINGLE_FILE}),(0,a.jsx)(o.default,{size:8,horizontal:!0}),(0,a.jsx)(d.default,{width:16,height:16})]}))}},858291:function(e,t,n){"use strict";n.r(t),n.d(t,{GuildProductListingPublicCard:function(){return g}});var a=n("37983");n("884691");var s=n("65597"),l=n("801765"),i=n("228035"),r=n("465869"),o=n("305961"),u=n("306160"),d=n("442379"),c=n("757515"),f=n("727411"),m=n("492724"),h=n("928576"),E=n("739726"),p=n("358404"),_=n("875746");function g(e){var t;let{guildProductListing:n,guildId:g,location:I,shouldShowFullDescriptionButton:T=!0,hideRoleTag:C=!1,lineClamp:S=1,cardWidth:A,cardHeight:N,thumbnailHeight:M,descriptionTextVariant:v="text-sm/normal",showOpaqueBackground:x=!1}=e,O=(0,s.default)([o.default],()=>o.default.getGuild(g),[g]),L=null==O?void 0:O.roles[null!==(t=null==n?void 0:n.role_id)&&void 0!==t?t:""],R=(0,l.useListingThumbnailUrl)(n,600),y=(0,h.useProductType)(n),P=(0,d.useCanManageGuildProduct)(O),{shouldHideGuildPurchaseEntryPoints:D}=(0,r.useShouldHideGuildPurchaseEntryPoints)(g),j=(0,h.usePrice)(n);if(null==O||D)return null;let b=()=>(0,p.openGuildProductInfoModal)({guildId:g,guildProductListingId:n.id,analyticsLocation:I}),U=(0,a.jsx)(E.GuildProductListingPopout,{product:n,guildId:g,showEditProduct:P,showUnpublishProduct:!1,showCopyLink:!0,showTestDownload:!1,showDeleteProduct:!1,showReportProduct:!0,onEditProduct:P?()=>{f.openModal(O.id,n.id)}:()=>{},onUnpublishProduct:()=>{},onDeleteProduct:()=>{},onReportProduct:()=>{(0,i.openGuildShopReportModal)({listing:n})},onCopyProductLink:()=>{(0,u.copy)((0,c.getGuildProductListingUrl)(g,n.id))},onTestDownload:()=>{}});return(0,a.jsx)(m.default,{imageUrl:R,name:n.name,description:n.description,formattedPrice:j,role:L,ctaComponent:(0,a.jsx)(_.default,{guildId:g,guildProductListingId:n.id,sourceAnalyticsLocations:I}),productType:y,shouldShowFullDescriptionButton:T,onShowFullDescription:b,onTapCard:b,actionMenu:U,showOpaqueBackground:x,hideRoleTag:C,lineClamp:S,cardWidth:A,cardHeight:N,thumbnailHeight:M,descriptionTextVariant:v},n.id)}},875746:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n("37983");n("884691");var s=n("627445"),l=n.n(s),i=n("65597"),r=n("77078"),o=n("206230"),u=n("305961"),d=n("181114"),c=n("866190"),f=n("442379"),m=n("565559"),h=n("777133"),E=n("407417"),p=n("782340");function _(e){let{guildId:t,guildProductListingId:n,sourceAnalyticsLocations:s}=e,_=(0,i.default)([m.default],()=>m.default.getGuildProduct(n)),g=(0,i.default)([u.default],()=>u.default.getGuild(t),[t]),I=(0,i.default)([o.default],()=>o.default.useReducedMotion),T=(0,c.useIsWindowFocused)();l(null!=g,"guild cannot be null"),l(null!=_,"guildProductListing cannot be null");let C=(0,f.useCanManageGuildProduct)(g);if(C)return(0,a.jsx)(r.Tooltip,{text:p.default.Messages.GUILD_PRODUCT_PURCHASE_DISABLED_TOOLTIP,children:e=>(0,a.jsx)(r.Button,{...e,color:r.Button.Colors.BRAND,disabled:!0,children:p.default.Messages.GUILD_PRODUCT_CARD_PURCHASE_BUTTON})});if(!_.has_entitlement)return(0,a.jsx)(d.default,{shineSize:d.default.ShineSizes.SMALL,pauseAnimation:I||!T,onClick:()=>(0,h.openGuildProductPurchaseModal)({guildProductListing:_,guildId:g.id,sourceAnalyticsLocations:s}),children:p.default.Messages.GUILD_PRODUCT_CARD_PURCHASE_BUTTON});{let e=null!=_.attachments;return e?(0,a.jsx)(E.default,{guildId:g.id,productId:_.id}):(0,a.jsx)(r.Button,{color:r.Button.Colors.PRIMARY,disabled:!0,children:p.default.Messages.GUILD_PRODUCT_CARD_PURCHASED})}}},246421:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var s=n("509043"),l=n("77078"),i=n("191814"),r=n("45029"),o=n("782340"),u=n("411531");function d(e){let{locked:t,role:n,textVariant:d="text-xs/medium"}=e,c=(0,l.useToken)(l.tokens.colors.INTERACTIVE_NORMAL).hex();return(0,a.jsx)("div",{className:u.roleTagContainer,children:(0,a.jsxs)("div",{className:u.roleTag,children:[(0,a.jsx)("div",{className:u.roleColor,style:{backgroundColor:(0,s.int2hex)(n.color)}}),(0,a.jsx)(i.default,{size:8,horizontal:!0}),(0,a.jsxs)(l.Text,{variant:d,color:"text-normal",children:[(0,a.jsx)(l.HiddenVisually,{children:o.default.Messages.GUILD_PRODUCT_CARD_HIDDEN_ROLE_SCREEN_READER}),n.name]}),!0===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{size:8,horizontal:!0}),(0,a.jsx)(r.default,{color:c})]})]})})}},358404:function(e,t,n){"use strict";n.r(t),n.d(t,{openGuildProductInfoModal:function(){return l}});var a=n("37983");n("884691");var s=n("77078");function l(e){(0,s.openModalLazy)(async()=>{let{default:t}=await n.el("962276").then(n.bind(n,"962276"));return n=>(0,a.jsx)(t,{...e,...n})})}},777133:function(e,t,n){"use strict";n.r(t),n.d(t,{openGuildProductPurchaseModal:function(){return d}});var a=n("37983");n("884691");var s=n("748820"),l=n("77078"),i=n("112679"),r=n("55689"),o=n("599110"),u=n("49111");function d(e){let{guildProductListing:t,guildId:d,sourceAnalyticsLocations:c}=e,f=!1,m=(0,s.v4)(),h=()=>{f=!0};(0,l.openModalLazy)(async()=>{let{default:e}=await n.el("191131").then(n.bind(n,"191131"));return n=>(0,a.jsx)(e,{...n,applicationId:t.application_id,skuId:t.id,sourceAnalyticsLocations:c,guildProductContext:{guildProductListingId:t.id,guildId:d},loadId:m,onComplete:h})},{onCloseCallback:()=>{!f&&o.default.track(u.AnalyticEvents.PAYMENT_FLOW_CANCELED,{load_id:m,payment_type:u.PurchaseTypeToAnalyticsPaymentType[u.PurchaseTypes.ONE_TIME],is_gift:!1,location_stack:Array.isArray(c)?c:[c]}),(0,i.clearError)(),(0,r.clearPurchaseTokenAuthState)()},onCloseRequest:u.NOOP})}},790369:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=440,height:n=200,avatar:l,...i}=e;return(0,a.jsxs)("svg",{...(0,s.default)(i),width:t,height:n,viewBox:"0 0 ".concat(t," ").concat(n),fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:[(0,a.jsx)("rect",{y:"12",width:"440",height:"176",rx:"4",fill:"url(#paint0_linear_0_1)"}),(0,a.jsx)("path",{d:"M4 12C1.79086 12 0 13.7909 0 16V87.7111C0 89.0292 0.644578 90.2711 1.75757 90.9773C19.6029 102.3 40.6908 102.01 54.593 95.3775C74.7698 85.8079 78.9758 61.6391 58.8478 45.7384C50.2069 38.7483 44.7223 29.0027 45.9176 20.7172C46.434 17.1376 44.0823 12 40.4657 12H4Z",fill:"#3442D9"}),(0,a.jsx)("path",{d:"M440 44.2244C440 42.4907 438.885 40.9507 437.228 40.4399C387.67 25.1621 330.882 28.8097 301.274 66.4895C271.113 104.874 240.425 106.271 206.014 93.988C172.008 81.8488 55.3406 98.3422 74.0098 184.887C74.3973 186.683 76.0228 188 77.8605 188H436C438.209 188 440 186.209 440 184V44.2244Z",fill:"#3442D9"}),(0,a.jsx)("path",{d:"M397.403 63.2537C395.463 62.0597 394.269 60.2687 393.97 58.0299L393.373 54.2985C393.373 54.1493 393.224 54 392.925 54C392.776 54 392.627 54.1493 392.627 54.2985L392.03 58.0299C391.731 60.2687 390.537 62.0597 388.597 63.2537L388.149 63.5522C388 63.7015 388 63.8507 388 64C388 64.1493 388 64.1493 388.149 64.2985L388.597 64.597C390.537 65.791 391.731 67.5821 392.03 69.8209L392.627 73.5522C392.627 73.8507 392.776 74 392.925 74C393.224 74 393.373 73.8507 393.373 73.5522L393.97 69.8209C394.269 67.5821 395.463 65.791 397.403 64.597L397.851 64.2985C398 64.1493 398 64.1493 398 64C398 63.8507 398 63.7015 397.851 63.5522L397.403 63.2537Z",fill:"#57F287"}),(0,a.jsx)("path",{d:"M300.628 164.106C299.09 163.2 298.013 161.691 297.705 159.879L297.244 156.86C297.244 156.71 297.09 156.559 296.936 156.559C296.782 156.559 296.628 156.71 296.628 156.86L296.167 159.879C296.013 161.691 294.936 163.2 293.398 164.106L292.936 164.408C292.782 164.559 292.782 164.559 292.782 164.71V165.011H293.244C294.782 165.917 295.859 167.577 296.013 169.389L296.475 172.408C296.475 172.559 296.628 172.559 296.782 172.559C296.936 172.559 297.09 172.559 297.09 172.408L297.551 169.389C297.859 167.577 298.936 166.068 300.475 165.011H300.782V164.71C300.782 164.559 300.782 164.408 300.628 164.408V164.106Z",fill:"#808AFF"}),(0,a.jsx)("path",{d:"M232.642 35.4003C231.478 34.6839 230.761 33.5197 230.582 32.1765L230.224 30.0272C230.224 29.8481 230.134 29.7585 229.955 29.7585C229.866 29.7585 229.776 29.8481 229.776 30.0272L229.418 32.1765C229.239 33.5197 228.522 34.6839 227.358 35.4003L227.09 35.5794C227 35.669 227 35.669 227 35.7585C227 35.8481 227 35.9376 227.09 35.9376L227.358 36.2063C228.522 36.9227 229.239 37.9974 229.418 39.3406L229.776 41.5794C229.776 41.669 229.866 41.7585 229.955 41.7585C230.134 41.7585 230.224 41.669 230.224 41.5794L230.582 39.3406C230.761 37.9974 231.478 36.9227 232.642 36.2063L232.91 35.9376C233 35.8481 233 35.8481 233 35.7585C233 35.669 232.91 35.669 232.91 35.5794L232.642 35.4003Z",fill:"#FFE75C"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_0_1",x1:"220",y1:"12",x2:"220",y2:"188",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{"stop-color":"#686bff"}),(0,a.jsx)("stop",{offset:"1","stop-color":"#c356fd"})]})}),(0,a.jsx)("svg",{width:100,height:100,viewBox:"-2 -15 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsxs)("g",{"clip-path":"url(#clip0_2645_182555)",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.6698 8.91016C14.5646 10.1567 16.3407 10.3342 17.4866 9.44283C17.4957 9.46624 17.5008 9.49191 17.5008 9.51916V15.8337C17.5008 17.2144 16.3815 18.3337 15.0008 18.3337H12.7092C12.5941 18.3337 12.5008 18.2404 12.5008 18.1253V13.3337C12.5008 12.4132 11.7547 11.667 10.8342 11.667H9.16748C8.24699 11.667 7.5008 12.4132 7.5008 13.3337V18.1253C7.5008 18.2404 7.40753 18.3337 7.29247 18.3337H5.0008C3.62009 18.3337 2.5008 17.2144 2.5008 15.8337V9.51916C2.5008 9.36341 2.66628 9.26158 2.81091 9.31949C3.23542 9.48933 3.70172 9.58366 4.19593 9.58366C5.27336 9.58366 6.24385 9.12583 6.92345 8.39408C7.0135 8.29708 7.17004 8.29679 7.26039 8.39349C7.94479 9.12583 8.91932 9.58366 10.0008 9.58366C11.0823 9.58366 12.0568 9.12583 12.7412 8.39349C12.8316 8.29679 12.9882 8.29708 13.0782 8.39408C13.2565 8.58599 13.4548 8.75916 13.6698 8.91016ZM11.7497 6.67891C9.42957 5.8204 9.4179 2.5511 11.7147 1.6683C11.699 1.66743 11.6833 1.66699 11.6675 1.66699H8.33415C7.87391 1.66699 7.50082 2.04009 7.50082 2.50033V5.83366C7.50082 5.87681 7.50191 5.9197 7.50407 5.96231C7.52181 6.31232 7.61153 6.64333 7.75873 6.94085C7.77282 6.96931 7.78743 6.99747 7.80255 7.02531C8.2259 7.80462 9.05157 8.33366 10.0008 8.33366C10.984 8.33366 11.8346 7.76614 12.2429 6.94084L12.2543 6.91751C12.2613 6.90286 12.2682 6.88812 12.2751 6.87331L11.7497 6.67891ZM15.8231 8.3336C15.4338 8.32949 15.0467 8.10931 14.8853 7.67305L14.4606 6.52524C14.2917 6.06904 13.9321 5.70936 13.4759 5.54055L13.3342 5.4881V2.84588L13.4759 2.79343C13.9321 2.62463 14.2917 2.26494 14.4606 1.80874L14.5131 1.66699H15.2462C16.3397 1.66699 17.3062 2.37762 17.6324 3.42131L18.1647 5.12491C18.2057 5.25598 18.2352 5.38724 18.254 5.51775L18.1924 5.54055C17.7361 5.70936 17.3765 6.06904 17.2077 6.52524L16.783 7.67305C16.627 8.09458 16.2603 8.31438 15.8847 8.33245C15.8642 8.33308 15.8437 8.33346 15.8231 8.3336ZM12.5008 3.15424V5.17974L12.3281 5.11583C11.4472 4.78989 11.4472 3.54409 12.3281 3.21816L12.5008 3.15424ZM4.75546 1.66699C3.662 1.66699 2.69541 2.37762 2.36926 3.4213L1.83688 5.12491C1.52876 6.11092 1.8679 7.1068 2.56708 7.72187C2.99643 8.09957 3.56156 8.33366 4.19593 8.33366C5.13437 8.33366 5.95065 7.81064 6.36917 7.04019C6.38619 7.00888 6.40255 6.97714 6.41823 6.94502C6.57788 6.618 6.66748 6.25052 6.66748 5.86211V2.50033C6.66748 2.04009 6.29438 1.66699 5.83415 1.66699H4.75546Z",fill:"white"}),(0,a.jsx)("path",{d:"M14.8838 0.660607C15.2097 -0.220202 16.4556 -0.220202 16.7815 0.660607L17.2062 1.80842C17.375 2.26462 17.7347 2.6243 18.1909 2.79311L19.3387 3.21783C20.2195 3.54377 20.2195 4.78957 19.3387 5.1155L18.1909 5.54023C17.7347 5.70903 17.375 6.06872 17.2062 6.52492L16.7815 7.67272C16.4556 8.5535 15.2097 8.5535 14.8838 7.67272L14.4591 6.52492C14.2903 6.06872 13.9306 5.70903 13.4744 5.54023L12.3266 5.1155C11.4458 4.78957 11.4458 3.54377 12.3266 3.21783L13.4744 2.79311C13.9306 2.6243 14.2903 2.26462 14.4591 1.80842L14.8838 0.660607Z",fill:"white"})]})}),(0,a.jsx)("foreignObject",{x:"30",y:"100",width:"56",height:"56",children:l})]})}},289967:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var s=n("65597"),l=n("77078"),i=n("206230"),r=n("574073"),o=n("232259"),u=n("393414"),d=n("304198"),c=n("790369"),f=n("49111"),m=n("782340"),h=n("910444");function E(e){let{guildId:t,user:n,username:r}=e,o=(0,s.default)([i.default],()=>!i.default.useReducedMotion),u=n.getAvatarURL(t,56,o),d=(0,a.jsx)("img",{src:u,className:h.userAvatar,alt:""});return(0,a.jsxs)("div",{className:h.thankYouCard,role:"img","aria-label":m.default.Messages.ROLE_SUBSCRIPTION_WELCOME_CARD_ARIA_LABEL.format({username:r}),children:[(0,a.jsx)(c.default,{avatar:d}),(0,a.jsx)(l.Text,{className:h.thankYouText,tag:"p",color:"status-positive-text",variant:"heading-xl/medium",children:m.default.Messages.GUILD_PRODUCT_PURCHASE_THANK_YOU_CARD_TEXT.format({username:r,usernameHook:(e,t)=>(0,a.jsx)(l.Text,{tag:"span",color:"status-positive-text",variant:"heading-xxl/extrabold",lineClamp:3,children:e},t)})})]})}function p(e){var t,s,l;let{channel:i,message:c,compact:h}=e,p=(0,r.default)(c),_=(0,o.useUsernameHook)(c.author,i.id,i.guild_id)(p),g=m.default.Messages.SYSTEM_MESSAGE_GUILD_PRODUCT_PURCHASE.format({username:p.nick,usernameHook:_,productName:null!==(l=null===(s=c.purchaseNotification)||void 0===s?void 0:null===(t=s.guild_product_purchase)||void 0===t?void 0:t.product_name)&&void 0!==l?l:"",handleProductListingClick:()=>{var e,t,n;(0,u.transitionTo)(f.Routes.GUILD_PRODUCT(i.guild_id,null!==(n=null===(t=c.purchaseNotification)||void 0===t?void 0:null===(e=t.guild_product_purchase)||void 0===e?void 0:e.listing_id)&&void 0!==n?n:""))}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default,{icon:n("127067"),timestamp:c.timestamp,compact:h,children:g}),(0,a.jsx)(E,{username:p.nick,guildId:i.guild_id,user:c.author})]})}},132349:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}}),n("222007");var a=n("876927"),s=n("271560");function l(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[n,l]=(0,a.default)(),i=(null==e?void 0:e.application_id)!=null&&null!=l?(0,s.getAssetURL)(e.application_id,e,l,t?void 0:"webp"):void 0;return[n,i]}},721629:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983"),s=n("884691"),l=n("446674"),i=n("305961"),r=n("105017"),o=n("568734"),u=n("843257"),d=n("531034"),c=n("49111");function f(e){var t,n;let{channel:f,message:m}=e,h=null!==(n=null===(t=m.roleSubscriptionData)||void 0===t?void 0:t.is_renewal)&&void 0!==n&&n,E=h?(0,d.getRenewButtonLabels)():(0,d.getJoinButtonLabels)(),p=f.guild_id,_=(0,l.useStateFromStores)([i.default],()=>{var e;return null===(e=i.default.getGuild(p))||void 0===e?void 0:e.systemChannelFlags},[p]),g=null!=_&&(0,o.hasFlag)(_,c.SystemChannelFlags.SUPPRESS_ROLE_SUBSCRIPTION_PURCHASE_NOTIFICATION_REPLIES),I=s.useMemo(()=>(0,u.getRoleSubscriptionPurchaseSystemMessageEventProperties)(f,m),[f,m]);return g?null:(0,a.jsx)(r.default,{channel:f,message:m,buttonLabels:E,stickers:d.STICKERS,event:c.AnalyticEvents.ROLE_SUBSCRIPTION_PURCHASE_SYSTEM_MESSAGE_CTA_CLICKED,eventProperties:I})}},866027:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var a=n("37983"),s=n("884691"),l=n("77078"),i=n("812204"),r=n("685665"),o=n("574073"),u=n("232259"),d=n("393414"),c=n("304198"),f=n("843257"),m=n("721629"),h=n("988521"),E=n("49111"),p=n("724210"),_=n("782340"),g=n("158404");function I(e){let{username:t}=e;return(0,a.jsx)("div",{className:g.welcomeCardText,children:(0,a.jsx)(l.Text,{tag:"p",className:g.welcomeCardText,color:"status-positive-text",variant:"heading-xl/medium",children:_.default.Messages.ROLE_SUBSCRIPTION_WELCOME_CARD_TEXT.format({username:t,usernameHook:(e,t)=>(0,a.jsx)(l.Text,{tag:"span",color:"status-positive-text",variant:"heading-xxl/extrabold",lineClamp:3,children:e},t)})})})}function T(e){let{guildId:t,user:n,username:s}=e;return(0,a.jsxs)("div",{className:g.welcomeCard,role:"img","aria-label":_.default.Messages.ROLE_SUBSCRIPTION_WELCOME_CARD_ARIA_LABEL.format({username:s}),children:[(0,a.jsx)(h.default,{guildId:t,user:n,className:g.welcomeCardBadge}),(0,a.jsx)(I,{username:s})]})}function C(e){var t,l;let{channel:h,message:_,compact:g}=e,I=(0,o.default)(_),C=function(e){let{author:t,channel:n,message:a}=e,l=n.guild_id,o=(0,u.useUsernameHook)(a.author,n.id,l)(t),{analyticsLocations:c}=(0,r.default)(i.default.GUILD_ROLE_SUBSCRIPTION_PURCHASE_SYSTEM_MESSAGE),m=a.roleSubscriptionData,h=s.useCallback(()=>{(0,d.transitionTo)(E.Routes.CHANNEL(l,p.StaticChannelRoute.ROLE_SUBSCRIPTIONS),null,null,c),(null==m?void 0:m.role_subscription_listing_id)!=null&&(0,f.trackRoleSubscriptionPurchaseMessageTierClick)(l,n.id,a.id,m.role_subscription_listing_id)},[l,n,a,m,c]);return null==m?null:(0,f.getRoleSubscriptionPurchaseSystemMessageFormattedContent)({username:t.nick,usernameOnClickHandler:o,roleSubscriptionOnClickHandler:h,guildId:l,roleSubscriptionData:a.roleSubscriptionData})}({channel:h,message:_,author:I}),S=(null===(t=_.roleSubscriptionData)||void 0===t?void 0:t.total_months_subscribed)!=null&&(null===(l=_.roleSubscriptionData)||void 0===l?void 0:l.total_months_subscribed)<=1;return null==C?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.default,{icon:n("127067"),timestamp:_.timestamp,compact:g,children:C}),S&&(0,a.jsx)(T,{guildId:h.guild_id,user:_.author,username:I.nick}),(0,a.jsx)(m.default,{channel:h,message:_})]})}},988521:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("446674"),l=n("206230"),i=n("967799");function r(e){let{guildId:t,user:n,className:r}=e,o=(0,s.useStateFromStores)([l.default],()=>!l.default.useReducedMotion),u=n.getAvatarURL(t,56,o),d=(0,a.jsx)("foreignObject",{x:"30",y:"68",width:"56",height:"56",transform:"skewX(12)",children:(0,a.jsx)("img",{src:u,className:i.userAvatar,alt:""})});return(0,a.jsx)("div",{className:r,children:(0,a.jsxs)("svg",{width:"128",height:"200",viewBox:"0 0 128 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i.svg,children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M41.6475 3.07525C42.2166 3.01705 42.7941 2.98723 43.3787 2.98723H44.0149C51.1639 2.98723 57.3812 8.03091 58.5312 14.9582L58.5326 14.9664L71.1297 85.803L74.1529 85.2934L61.5601 14.4815C61.5597 14.4786 61.5592 14.4758 61.5587 14.4729C60.1604 6.07701 52.6392 0 44.0149 0H42.997C42.4189 0 41.8467 0.037182 41.283 0.10879C31.6239 1.11743 24.0326 9.0199 24.0326 18.799C24.0326 21.3525 24.5847 23.8942 25.5481 26.1672L25.5512 26.1745L25.5543 26.1817C30.6753 37.9136 33.7197 47.8651 33.2106 58.7186C32.7013 69.5731 28.6272 81.5075 19.156 97.1507C9.58001 112.967 1.96875 129.323 0.328288 144.93C-1.32267 160.636 3.084 175.549 17.4069 188.258C44.018 211.936 78.8775 196.708 84.4502 170.024C87.2081 156.818 84.3006 145.78 79.001 135.687C75.0979 128.255 69.8387 121.246 64.61 114.277C62.8057 111.873 61.0052 109.473 59.2652 107.063C52.5319 97.7348 49.6357 89.4917 48.5724 81.9158C47.538 74.5461 48.2262 67.7588 48.9086 61.0273C48.9314 60.803 48.9541 60.5787 48.9768 60.3545C50.4158 46.1192 45.9689 34.8772 40.4143 27.5533L40.4092 27.5466L34.5424 19.988L34.533 19.9764C30.8561 15.4298 31.6398 8.83644 36.3021 5.27079C37.8665 4.11054 39.7105 3.32756 41.6475 3.07525ZM29.4797 10.5429C27.9714 12.9383 27.1008 15.7614 27.1008 18.799C27.1008 20.9399 27.5653 23.0928 28.3813 25.0206C33.564 36.8951 36.8159 47.3374 36.2756 58.8549C35.7352 70.3737 31.4122 82.7904 21.7991 98.6677C12.2907 114.372 4.95262 130.278 3.38056 145.234C1.81906 160.089 5.93633 174.039 19.4752 186.051L19.4768 186.053C44.2662 208.11 76.329 193.919 81.4435 169.429C84.0293 157.047 81.3387 146.702 76.2691 137.047C72.4865 129.844 67.4387 123.116 62.2536 116.205C60.4212 113.762 58.5717 111.297 56.7549 108.78C49.7474 99.0725 46.6638 90.3811 45.5325 82.3203C44.4482 74.5953 45.1687 67.4973 45.8457 60.8276C45.8717 60.5718 45.8976 60.3165 45.9233 60.0619C47.2829 46.613 43.0814 36.1022 37.951 29.3343L32.1127 21.8124C29.4463 18.5078 28.6103 14.3561 29.4797 10.5429Z",fill:"#57F287"}),(0,a.jsx)("path",{d:"M59.282 31.4071C56.8646 29.0585 57.1191 27.3279 58.0097 24.7321C58.1369 24.2377 58.6458 23.9905 59.1548 23.9905H62.9716V31.4071H59.282Z",fill:"#57F287"}),(0,a.jsx)("path",{d:"M125.569 155.388L122.388 158.601C120.734 160.332 118.317 161.321 115.899 161.321H101.268V135.486H125.569L127.859 147.971C128.368 150.69 127.477 153.41 125.569 155.388Z",fill:"#8CD9FF"}),(0,a.jsx)("path",{d:"M29.2561 45.6221L25.8209 49.0832C23.9125 51.0609 23.0219 53.9039 23.5308 56.6233L26.7115 74.6704H45.4142V45.6221H29.2561Z",fill:"#8CD9FF"}),(0,a.jsx)("path",{d:"M124.551 151.061C125.568 155.635 122.515 160.208 117.68 161.197C117.044 161.321 116.281 161.445 115.645 161.321H52.7936C46.6867 161.074 41.4703 156.871 40.198 151.061L23.531 56.7471C22.5132 52.1735 25.5667 47.6 30.4014 46.6111C31.0375 46.4875 31.8009 46.3639 32.437 46.4875H95.288C101.395 46.7347 106.611 50.9374 107.884 56.7471L124.551 151.061Z",fill:"#8CD9FF"}),(0,a.jsx)("path",{d:"M127.732 147.724C128.749 152.297 125.823 156.747 121.243 157.736C120.479 157.86 119.716 157.984 118.826 157.984H55.9745C49.8676 157.86 44.6512 153.534 43.3789 147.724L26.7119 53.5333C25.6941 48.9598 28.7476 44.3862 33.5823 43.3973C34.2184 43.2737 34.9818 43.1501 35.6179 43.2737H98.5962C104.703 43.3973 109.92 47.7237 111.065 53.5333L127.732 147.724Z",fill:"white"}),(0,a.jsx)("path",{d:"M78.7482 52.1736C79.2571 54.893 77.4759 57.6124 74.6769 58.1068C74.2952 58.2304 73.7863 58.2304 73.4046 58.2304H66.0253C62.4629 58.1068 59.4094 55.6346 58.6461 52.1736L55.3381 33.7557C54.8292 31.0363 56.6104 28.3169 59.4094 27.8225C59.7911 27.6989 60.3 27.6989 60.6817 27.6989H68.061C71.6234 27.8225 74.6769 30.2947 75.4402 33.7557L78.7482 52.1736Z",fill:"black"}),(0,a.jsx)("path",{d:"M115.39 139.071C115.899 142.285 113.736 145.375 110.428 145.87C109.919 145.993 109.537 145.993 109.028 145.993H62.7172C58.5186 145.87 54.829 143.027 53.9384 139.071C53.3022 135.857 55.4651 132.767 58.7731 132.149C59.282 132.025 59.7909 132.025 60.2998 132.025H106.611C110.81 132.149 114.499 134.992 115.39 139.071Z",fill:"#FFC619"}),(0,a.jsx)("path",{d:"M71.4152 52.8176C72.7444 51.4082 72.394 48.9945 70.6325 47.4264C68.8711 45.8582 66.3656 45.7295 65.0364 47.1389C63.7072 48.5482 64.0576 50.9619 65.819 52.5301C67.5805 54.0982 70.086 54.2269 71.4152 52.8176Z",fill:"#5865F2"}),(0,a.jsx)("path",{d:"M68.5697 30.9126C68.4425 31.1598 68.188 31.4071 67.9336 31.4071H60.8088C60.4271 31.4071 60.2998 31.1598 60.2998 31.0362C60.2998 30.9126 60.2998 30.9126 60.1726 30.9126V30.6654C60.1726 30.5418 60.1726 30.2946 60.2998 30.171C61.5721 27.0807 60.6815 25.5974 59.1548 24.4849V23.9905H64.3712C64.7529 23.9905 65.1345 23.9905 65.389 24.2377C67.9336 25.5974 70.0965 26.7099 68.5697 30.9126Z",fill:"#57F287"}),(0,a.jsx)("path",{d:"M63.4808 19.4171H59.155C58.7734 19.4171 58.5189 19.788 58.6461 20.0352L59.2823 23.9907H64.2442L63.4808 19.4171Z",fill:"black"}),(0,a.jsx)("path",{d:"M61.1485 21.3944C62.4818 21.3286 63.5224 20.5015 63.4728 19.547C63.4231 18.5925 62.302 17.872 60.9686 17.9378C59.6353 18.0035 58.5947 18.8306 58.6444 19.7851C58.694 20.7396 59.8152 21.4601 61.1485 21.3944Z",fill:"black"}),d]})})}},477558:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}}),n("222007");var a=n("37983"),s=n("884691"),l=n("446674"),i=n("233322"),r=n("157186"),o=n("716214"),u=n("42203"),d=n("26989"),c=n("305961"),f=n("697218"),m=n("933326"),h=n("398604"),E=n("322224"),p=n("914169"),_=n("843455");function g(e){let{code:t}=e,[n,g,I]=t.split("-"),{guildScheduledEvent:T,guild:C,channel:S,isMember:A}=(0,l.useStateFromStoresObject)([h.default,c.default,u.default,d.default,f.default],()=>{var e,t;let a=null!==(t=h.default.getGuildScheduledEvent(g))&&void 0!==t?t:void 0,s=c.default.getGuild(n),l=u.default.getChannel(null==a?void 0:a.channel_id),i=d.default.isMember(n,null===(e=f.default.getCurrentUser())||void 0===e?void 0:e.id);return{guildScheduledEvent:a,guild:s,channel:l,isMember:i}},[n,g]);return s.useEffect(()=>{(null==T?void 0:T.id)==null&&E.default.fetchGuildEvent(n,g),m.default.getGuildEventUserCounts(n,g,null!=I?[I]:[]),m.default.getGuildEventsForCurrentUser(n)},[g,n,null==T?void 0:T.id,I]),(0,a.jsx)(p.default,{guild:C,channel:S,guildScheduledEvent:T,isMember:A,onAcceptInstantInvite:_.NOOP,onTransitionToInviteChannel:function(){if((0,r.shouldShowMembershipVerificationGate)(n)){(0,i.openMemberVerificationModal)(n);return}(null==S?void 0:S.isGuildStageVoice())?(0,o.connectAndOpen)(S):(null==S?void 0:S.isGuildVoice())&&E.default.joinVoiceEvent(S.guild_id,S.id)},recurrenceId:I})}},812224:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var s=n("446674"),l=n("77078"),i=n("174622"),r=n("478895"),o=n("569808"),u=n("579033"),d=n("782340"),c=n("349934"),f=n("18978");function m(e){var t;let{code:m}=e,h=(0,s.useStateFromStores)([o.default],()=>o.default.getGuildTemplate(m));if(null==h||h.state===u.GuildTemplateStates.RESOLVING)return(0,a.jsxs)(i.default,{children:[(0,a.jsx)(i.default.Header,{text:d.default.Messages.GUILD_TEMPLATE_RESOLVING_TITLE}),(0,a.jsx)(i.default.Body,{resolving:!0})]});if(h.state===u.GuildTemplateStates.EXPIRED)return(0,a.jsxs)(i.default,{children:[(0,a.jsx)(i.default.Header,{text:d.default.Messages.GUILD_TEMPLATE_INVALID_TITLE}),(0,a.jsxs)(i.default.Body,{children:[(0,a.jsx)(i.default.Icon,{expired:!0}),(0,a.jsx)(i.default.Info,{expired:!0,title:d.default.Messages.GUILD_TEMPLATE_INVALID_SUBTITLE})]})]});let E=__OVERLAY__?(0,a.jsx)(i.default.Button,{isDisabled:!0,color:i.default.Button.Colors.PRIMARY,children:d.default.Messages.GUILD_TEMPLATE_EMBED_VIEW_IN_APP}):(0,a.jsx)(i.default.Button,{onClick:()=>{(0,l.openModalLazy)(async()=>{let{default:e}=await n.el("843456").then(n.bind(n,"843456"));return t=>(0,a.jsx)(e,{...t,guildTemplate:h})})},submitting:h.state===u.GuildTemplateStates.ACCEPTING,color:i.default.Button.Colors.GREEN,children:d.default.Messages.GUILD_TEMPLATE_OPEN});return(0,a.jsxs)(i.default,{children:[(0,a.jsx)(i.default.Header,{text:d.default.Messages.GUILD_TEMPLATE_RESOLVED_EMBED_TITLE}),(0,a.jsxs)(i.default.Body,{children:[(0,a.jsxs)("div",{className:f.headerLine,children:[(0,a.jsx)(r.default,{className:c.icon}),(0,a.jsx)(i.default.Info,{title:h.name,children:d.default.Messages.GUILD_TEMPLATE_USAGES.format({usageCount:String(null!==(t=h.usageCount)&&void 0!==t?t:0)})})]}),E]})]})}},639440:function(e,t,n){"use strict";n.r(t),n.d(t,{dismissMediaPostSharePrompt:function(){return r},fetchMediaPostEmbed:function(){return o},unfurlEmbedUrl:function(){return u}});var a=n("872717"),s=n("913144"),l=n("448993"),i=n("49111");function r(e){s.default.dispatch({type:"DISMISS_MEDIA_POST_SHARE_PROMPT",threadId:e})}async function o(e){s.default.dispatch({type:"MEDIA_POST_EMBED_FETCH",threadId:e});try{let t=await a.default.get({url:i.Endpoints.MEDIA_POST_RESHARE_GET_PREVIEW(e)}),n=t.body;s.default.dispatch({type:"MEDIA_POST_EMBED_FETCH_SUCCESS",threadId:e,mediaPostEmbed:n})}catch(t){s.default.dispatch({type:"MEDIA_POST_EMBED_FETCH_FAILURE",threadId:e})}}async function u(e){try{let t=await a.default.post({url:i.Endpoints.UNFURL_EMBED_URLS,body:{urls:e}});return t.body}catch(e){throw new l.APIError(e)}}},690563:function(e,t,n){"use strict";n.r(t),n.d(t,{useGuildEligibleForMediaChannels:function(){return l},useEligibleForGuildMediaChannelPostPreviewEmbed:function(){return r}});var a=n("862205");let s=(0,a.createExperiment)({kind:"guild",id:"2023-03_guild_media_channel",label:"Media Channel",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enables guild to create a media channel",config:{enabled:!0}}]});function l(e){var t;let{enabled:n}=s.useExperiment({guildId:null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"",location:"96e84c_1"},{autoTrackExposure:!0});return(null==e?void 0:e.id)!=null&&n}let i=(0,a.createExperiment)({kind:"user",id:"2023-04_guild_media_channel_post_preview_embed_users",label:"Guild Role Subscription Users",defaultConfig:{enabledForUser:!1},treatments:[{id:1,label:"Enables for users Guild Media Post Preview Embeds",config:{enabledForUser:!0}}]});function r(){let{enabledForUser:e}=i.useExperiment({location:"96e84c_2"},{autoTrackExposure:!0});return e}},921387:function(e,t,n){"use strict";n.r(t),n.d(t,{FetchState:function(){return s},default:function(){return d}});var a,s,l=n("35092"),i=n("913144");(a=s||(s={}))[a.NOT_FETCHED=0]="NOT_FETCHED",a[a.FETCHING=1]="FETCHING",a[a.FETCHED=2]="FETCHED",a[a.FAILED=3]="FAILED";let r={},o={};class u extends l.default.Store{getMediaPostEmbed(e){if(null!=e)return r[e]}getEmbedFetchState(e){var t;return null!==(t=o[e])&&void 0!==t?t:0}getMediaPostEmbeds(){return r}}u.displayName="MediaPostEmbedStore";var d=new u(i.default,{CONNECTION_OPEN:function(){r={},o={}},MEDIA_POST_EMBED_FETCH:function(e){let{threadId:t}=e;o[t]=1},MEDIA_POST_EMBED_FETCH_SUCCESS:function(e){let{threadId:t,mediaPostEmbed:n}=e;r={...r,[t]:n},o[t]=2},MEDIA_POST_EMBED_FETCH_FAILURE:function(e){let{threadId:t}=e;o[t]=3},LOGOUT:function(e){!e.isSwitchingAccount&&(r={},o={})}})},467475:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("65597"),s=n("42203"),l=n("724210");function i(e){let t=(0,a.default)([s.default],()=>{let t=s.default.getChannel(e);return(null==t?void 0:t.parent_id)!=null&&t.isForumPost()?s.default.getChannel(null==t?void 0:t.parent_id):null});return(null==t?void 0:t.hasFlag(l.ChannelFlags.HIDE_MEDIA_DOWNLOAD_OPTIONS))===!0}},781083:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=14,height:n=18,color:l="currentColor",...i}=e;return(0,a.jsx)("svg",{...(0,s.default)(i),width:t,height:n,viewBox:"0 0 10 14",fill:"none",children:(0,a.jsx)("path",{d:"M8.33325 6.33301V3.66634C8.33325 1.82834 6.83725 0.333008 4.99992 0.333008C3.16125 0.333008 1.66659 1.82834 1.66659 3.66634V6.33301C0.931252 6.33301 0.333252 6.93034 0.333252 7.66634V12.333C0.333252 13.0683 0.931252 13.6663 1.66659 13.6663H8.33325C9.06859 13.6663 9.66659 13.0683 9.66659 12.333V7.66634C9.66659 6.93034 9.06859 6.33301 8.33325 6.33301ZM4.99992 10.9997C4.44792 10.9997 3.99992 10.5517 3.99992 9.99967C3.99992 9.44767 4.44792 8.99967 4.99992 8.99967C5.55192 8.99967 5.99992 9.44767 5.99992 9.99967C5.99992 10.5517 5.55192 10.9997 4.99992 10.9997ZM6.99992 6.33301H2.99992V3.66634C2.99992 2.56367 3.89725 1.66634 4.99992 1.66634C6.10259 1.66634 6.99992 2.56367 6.99992 3.66634V6.33301Z",fill:l})})}},801177:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("627445"),o=n.n(r),u=n("748820"),d=n("171210"),c=n("65597"),f=n("77078"),m=n("206230"),h=n("716241"),E=n("606292"),p=n("955735"),_=n("537325"),g=n("651693"),I=n("380986"),T=n("969706"),C=n("506885"),S=n("981601"),A=n("845579"),N=n("26989"),M=n("697218"),v=n("181114"),x=n("752531"),O=n("315102"),L=n("794818"),R=n("866190"),y=n("781083"),P=n("159938"),D=n("49111"),j=n("894488"),b=n("782340"),U=n("177785"),B=n("760238");function G(e){var t,n,l;let{embedUrl:r,message:G,channel:k}=e,w=(0,P.useMediaPostEmbedData)(r,G),{setPopout:H}=(0,T.default)(G.id,j.DEFAULT_POPOUTS),F=(0,I.useContextMenuMessage)(G,k,H,!0),V=A.GifAutoPlay.useSetting(),Y=(0,R.useIsWindowFocused)(),[W,K]=s.useState(!1),[z,Z]=s.useState((null==w?void 0:w.coverImage)==null),J=(0,c.default)([m.default],()=>m.default.useReducedMotion),X=(0,c.default)([N.default,M.default],()=>{var e;return N.default.isMember(null==w?void 0:w.guildId,null===(e=M.default.getCurrentUser())||void 0===e?void 0:e.id)},[w]),q=(0,c.default)([N.default],()=>{var e,t;return(null==w?void 0:w.authorId)==null?"inherit":null!==(t=null===(e=N.default.getMember(w.guildId,w.authorId))||void 0===e?void 0:e.colorString)&&void 0!==t?t:"inherit"}),{reducedMotion:Q}=s.useContext(f.AccessibilityPreferencesContext),[$,ee]=s.useState(!1),et=s.useCallback(()=>{K(!0)},[K]),en=s.useCallback(()=>{K(!1)},[K]),ea=s.useCallback(async()=>{null!=w&&((0,h.trackWithMetadata)(D.AnalyticEvents.MEDIA_POST_PREVIEW_EMBED_CLICKED,{media_post_id:w.threadId,channel_id:k.id,can_access:w.canAccess,is_member:X}),w.canAccess?(0,_.default)(D.Routes.CHANNEL(w.guildId,w.threadId,w.messageId)):X?(0,_.default)(D.Routes.CHANNEL(w.guildId,w.parentChannelId)):await L.startLurking(w.guildId,{},{channelId:w.parentChannelId}))},[w,k,X]),es=s.useCallback(()=>(o((null==w?void 0:w.authorId)!=null,"Author Id cannot be null when loading user profile"),(0,C.default)(w.authorId,w.avatarUrl,{guildId:w.guildId,channelId:k.id})),[w,k]);if(null==w)return null;let el=e=>(o(null!=w.authorId,"Author Id cannot be null when rendering user popout"),(0,a.jsx)(S.default,{...e,userId:w.authorId,guildId:w.guildId,channelId:k.id})),ei=(0,O.getAvatarDecorationURL)({avatarDecoration:null===(t=w.user)||void 0===t?void 0:t.avatarDecoration,size:(0,E.getDecorationSizeForAvatarSize)(f.AvatarSizes.SIZE_40),canAnimate:$}),er=null===(n=w.user)||void 0===n?void 0:n.getAvatarURL(w.guildId,40,$),eo=()=>{!Q.enabled&&ee(e=>!e)},eu=w.coverImage,ed=null!=eu&&(0,g.isAnimatedImageUrl)(eu);return(0,a.jsxs)("div",{className:U.postPreviewContainer,children:[(0,a.jsxs)("div",{className:U.thumbnailContainer,onMouseEnter:et,onMouseLeave:en,children:[!z&&(!0===w.shouldShowBlurredThumbnailImage?(0,a.jsx)("img",{src:B,alt:b.default.Messages.MEDIA_POST_EMBED_THUMBNAIL_ALT,className:i(U.thumbnail,{[U.spoiler]:w.shouldSpoiler}),onContextMenu:F,onError:()=>Z(!0)}):(0,a.jsx)(p.default,{src:!(Y&&(V||W))&&ed?"".concat(eu,"?format=png"):eu,backgroundSrc:"".concat(eu,"?format=png"),alt:b.default.Messages.MEDIA_POST_EMBED_THUMBNAIL_ALT,aspectRatio:16/9,className:i(U.thumbnail,{[U.spoiler]:w.shouldSpoiler}),imageChildClassName:U.thumbnailImage,onContextMenu:F,onError:()=>Z(!0)})),null!=w.coverImageOverlayText&&(0,a.jsx)(f.Clickable,{onClick:ea,children:(0,a.jsx)("div",{className:U.thumbnailOverlay,children:(0,a.jsxs)("div",{className:U.thumbnailOverlayCta,children:[(0,a.jsx)(y.default,{color:d.default.WHITE}),(0,a.jsx)(f.Text,{variant:"text-sm/semibold",color:"always-white",children:w.coverImageOverlayText})]})})})]}),(0,a.jsxs)("div",{className:U.descriptionContainer,children:[(0,a.jsxs)("div",{className:U.descriptionHeader,children:[(0,a.jsx)(f.Text,{variant:"text-md/semibold",color:"text-normal",className:U.descriptionHeaderText,children:w.title}),(0,a.jsx)(f.Text,{variant:"text-sm/normal",color:"text-muted",className:i(U.descriptionHeaderText,U.descriptionSubtitle),children:w.subtitle})]}),(0,a.jsxs)("div",{className:U.descriptionFooter,children:[null!=er&&(0,a.jsx)(f.Popout,{renderPopout:el,position:"right",spacing:12,preload:null==w.authorId?void 0:es,children:e=>(0,a.jsx)("div",{onMouseEnter:eo,onMouseLeave:eo,children:(0,a.jsx)(f.Avatar,{...e,size:f.AvatarSizes.SIZE_40,src:er,"aria-label":b.default.Messages.MEDIA_POST_EMBED_AUTHOR_AVATAR_ALT,avatarDecoration:ei})})}),(0,a.jsxs)("div",{className:U.descriptionFooterContainer,children:[(0,a.jsxs)("div",{className:U.descriptionFooterChannelName,children:[null!=w.channelName&&(0,a.jsx)(x.default,{className:U.mediaChannelIcon}),(0,a.jsx)(f.Clickable,{onClick:ea,className:U.channelName,children:(0,a.jsx)(f.Heading,{variant:"heading-md/semibold",color:"header-primary",children:null!==(l=w.channelName)&&void 0!==l?l:w.guildName})})]}),null!=w.authorName&&(0,a.jsx)(f.Text,{variant:"text-sm/medium",color:"text-muted",className:U.descriptionFooterAuthorContainer,children:b.default.Messages.MEDIA_POST_EMBED_FOOTER_WEB.format({authorName:w.authorName,authorNameHook:()=>(0,a.jsx)(f.Popout,{renderPopout:el,position:"right",preload:null==w.authorId?void 0:es,children:e=>(0,a.jsx)(f.NameWithRoleAnchor,{...e,name:w.authorName,color:q,className:U.authorName})},(0,u.v4)())})})]}),w.canAccess?(0,a.jsx)(f.Button,{color:f.ButtonColors.BRAND,onClick:ea,children:(0,a.jsx)(f.Text,{variant:"text-sm/medium",color:"always-white",children:w.ctaText})}):(0,a.jsx)(v.default,{pauseAnimation:J,onClick:ea,className:i(U.ctaButtonContent,U.subscribeButton),color:f.Button.Colors.CUSTOM,children:(0,a.jsx)(f.Text,{variant:"text-sm/medium",color:"always-white",children:w.ctaText})})]})]})]})}},159938:function(e,t,n){"use strict";n.r(t),n.d(t,{useMediaPostEmbedData:function(){return g}});var a=n("884691"),s=n("65597"),l=n("203288"),i=n("361572"),r=n("271938"),o=n("42203"),u=n("26989"),d=n("305961"),c=n("162771"),f=n("697218"),m=n("639440"),h=n("690563"),E=n("921387"),p=n("711326"),_=n("49111");function g(e,t){let n=(0,h.useEligibleForGuildMediaChannelPostPreviewEmbed)(),g=(0,p.getMediaPostEmbedChannelPath)(e),I=(0,s.default)([u.default,r.default],()=>{let e=r.default.getId();return u.default.isMember(null==g?void 0:g.guildId,e)},[g]),T=(0,s.default)([l.default],()=>null!=g&&(null==g?void 0:g.channelId)!=null&&l.default.isChannelGated(g.guildId,g.channelId),[g]),C=t.hasFlag(_.MessageFlags.IS_CROSSPOST),{rawMediaPostEmbedData:S,guild:A,parentChannel:N,user:M,selectedGuildId:v,canAccess:x}=(0,s.useStateFromStoresObject)([E.default,d.default,o.default,f.default,c.default],()=>{var e;let t=null===(e=E.default.getMediaPostEmbed(null==g?void 0:g.threadId))||void 0===e?void 0:e.media,n=d.default.getGuild(null==g?void 0:g.guildId),a=o.default.getChannel(null==g?void 0:g.channelId),s=f.default.getUser(null==t?void 0:t.author_id),l=c.default.getGuildId(),r=null!=a&&(0,i.canViewChannel)(a);return{rawMediaPostEmbedData:t,guild:n,parentChannel:a,user:s,selectedGuildId:l,canAccess:r}},[g]),O=a.useMemo(()=>{let e=(0,p.getMediaPostEmbedCommonData)({mediaPostEmbedData:S,guild:A,parentChannel:N,user:M,selectedGuildId:v,canAccess:x});return null==e?null:{...e,user:M}},[S,A,N,M,v,x]);return a.useEffect(()=>{if((null==g?void 0:g.threadId)!=null){let e=E.default.getEmbedFetchState(g.threadId);!0===n&&e===E.FetchState.NOT_FETCHED&&(!I||!1!==T)&&(I||!C)&&(0,m.fetchMediaPostEmbed)(null==g?void 0:g.threadId)}},[g,n,I,T,C]),O}},333363:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("862205");let s=(0,a.createExperiment)({kind:"user",id:"2023-07_announcement_views",label:"Announcement Views",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var l=s},865446:function(e,t,n){"use strict";n.r(t),n.d(t,{shouldShowNitroUpsell:function(){return l}});var a=n("862205");let s=(0,a.createExperiment)({kind:"user",id:"2023-10_social_proofing_file_size",label:"Social Proofing File Size",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Should show nitro upsell for large files",config:{enabled:!0}}]});function l(e){let t=s.getCurrentConfig({location:e});return t.enabled}},605953:function(e,t,n){"use strict";n.r(t),n.d(t,{getHeaderTextForInvite:function(){return s}});var a=n("782340");function s(e){let{isVoiceChannel:t,isHubGuild:n,isOwnInvite:s,isGuest:l,isStage:i,isStream:r}=e;if(t){if(s){if(r)return a.default.Messages.INVITE_BUTTON_TITLE_INVITER_STREAM;if(i)return a.default.Messages.INVITE_BUTTON_TITLE_INVITER_STAGE_CHANNEL;else if(l)return a.default.Messages.GUEST_INVITE_EMBED_TITLE_SENDER;else return a.default.Messages.INVITE_BUTTON_TITLE_INVITER_VOICE_CHANNEL}if(r)return a.default.Messages.INVITE_BUTTON_TITLE_INVITED_STREAM;if(i)return a.default.Messages.INVITE_BUTTON_TITLE_INVITED_STAGE_CHANNEL;else if(l)return a.default.Messages.GUEST_INVITE_EMBED_TITLE_RECEIVER;else return a.default.Messages.INVITE_BUTTON_TITLE_INVITED_VOICE_CHANNEL}return n?s?a.default.Messages.INVITE_BUTTON_TITLE_INVITER_HUB:a.default.Messages.INVITE_BUTTON_TITLE_INVITED_HUB:s?a.default.Messages.INVITE_BUTTON_TITLE_INVITER:a.default.Messages.INVITE_BUTTON_TITLE_INVITED}},243375:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("872717"),s=n("794818"),l=n("49111"),i=e=>a.default.get({url:l.Endpoints.STICKER_GUILD_DATA(e),oldFormErrors:!0}).then(e=>(null==e?void 0:e.body)!=null?(0,s.makeDiscoverableGuild)(e.body):null).catch(()=>null)},383667:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n("49111");function s(e,t){return e.type===a.MessageTypes.GUILD_INVITE_REMINDER&&!t}},456936:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("872717"),s=n("755624"),l=n("263024"),i=n("42203"),r=n("377253"),o=n("660478"),u=n("697218"),d=n("299039"),c=n("49111");async function f(e,t){let n=u.default.getCurrentUser();if(null==n)return;let f=r.default.getMessages(e),m=f.toArray().filter(e=>0>d.default.compare(e.id,t)).sort((e,t)=>d.default.compare(e.id,t.id)).reverse()[0],h=null==m?d.default.atPreviousMillisecond(t):m.id,E=0;f.forAll(e=>{d.default.compare(e.id,h)>0&&(0,o.shouldBadgeMessage)(e,n)&&E++});let p=i.default.getChannel(e);null!=p&&p.isThread()&&(p.isArchivedThread()&&await l.default.unarchiveThread(p,!1),!s.default.hasJoined(e)&&await l.default.joinThread(p,"Mark Unread")),a.default.post({url:c.Endpoints.MESSAGE_ACK(e,h),body:{manual:!0,mention_count:E},oldFormErrors:!0})}},836943:function(e,t,n){"use strict";n.r(t),n.d(t,{ButtonAddReaction:function(){return y}}),n("702976"),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("483366"),o=n.n(r),u=n("130969"),d=n("77078"),c=n("913144"),f=n("62587"),m=n("85589"),h=n("166257"),E=n("432173"),p=n("219013"),_=n("697218"),g=n("79945"),I=n("790950"),T=n("568734"),C=n("719923"),S=n("590527"),A=n("875978"),N=n("255135"),M=n("49111"),v=n("958706"),x=n("646718"),O=n("782340"),L=n("550244"),R=n("314934");class y extends s.Component{render(){let{type:e,message:t,className:n,children:s,useChatFontScaling:l}=this.props,{isReactionPickerActive:r}=this.state,o=t.state===M.MessageStates.SENDING,u=e===A.ReactionTypes.BURST;if(o||(0,T.hasFlag)(t.flags,M.MessageFlags.EPHEMERAL))return null;let m=_.default.getCurrentUser(),h=(0,C.isPremium)(m),E=u?O.default.Messages.ADD_BURST_REACTION:O.default.Messages.ADD_REACTION;!h&&u&&(E=(0,a.jsx)(f.NitroTooltipLabel,{tooltipText:O.default.Messages.ADD_BURST_REACTION}));let p=l?R:L;return(0,a.jsx)(d.Popout,{shouldShow:r,onRequestClose:this.handleReactionPickerToggle,renderPopout:this.renderReactionPopout,position:"right",children:(e,t)=>{let{isShown:l}=t;return(0,a.jsx)(d.TooltipContainer,{text:E,color:d.TooltipColors.PRIMARY,"aria-label":u?O.default.Messages.ADD_BURST_REACTION:O.default.Messages.ADD_REACTION,tooltipClassName:p.addReactionTooltip,children:(0,a.jsxs)(d.Clickable,{...e,onClick:e=>{(0,S.toggleBurstReactionPicker)(u),this.handleAddReactionClick(e)},onMouseEnter:()=>{c.default.dispatch({type:"EMOJI_INTERACTION_INITIATED",interaction:v.EmojiInteractionPoint.AddReactionPopoutMouseEntered})},onFocus:()=>{c.default.dispatch({type:"EMOJI_INTERACTION_INITIATED",interaction:v.EmojiInteractionPoint.AddReactionPopoutFocused})},className:i(p.reactionBtn,{[p.active]:l},n),children:[u?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(I.default,{className:p.icon})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(g.default,{className:p.icon})}),s]})})}})}constructor(...e){super(...e),this.state={isReactionPickerActive:!1},this.onAddReaction=(e,t)=>{if(null==e)return;let{channel:n,message:a,isForumToolbar:s}=this.props;(0,h.addReaction)(n.id,a.id,(0,E.toReactionEmoji)(e),s?h.ReactionLocations.FORUM_TOOLBAR:h.ReactionLocations.MESSAGE,{burst:t})},this.handleReactionPickerToggle=()=>{this.setState(e=>({isReactionPickerActive:!e.isReactionPickerActive}))},this.handleAddReactionClick=e=>{let{type:t,channel:n,remainingBurstCurrency:a}=this.props;if(e.stopPropagation(),t===A.ReactionTypes.BURST&&null!=a&&a<1){let e=_.default.getCurrentUser();if((0,C.isPremium)(e)){(0,N.openOutOfBurstsModal)();return}(0,m.openBurstReactionsUpsellModal)({analytics:{type:x.PremiumUpsellTypes.BURST_REACTION_UPSELL,page:null!=n.getGuildId()?M.AnalyticsPages.GUILD_CHANNEL:M.AnalyticsPages.DM_CHANNEL,section:(0,E.getBurstAnalyticsSection)(n),object:M.AnalyticsObjects.INLINE_REACTION_PICKER_UPSELL}});return}this.handleReactionPickerToggle()},this.renderReactionPopout=e=>{let{closePopout:t}=e,{type:n,channel:s,message:l}=this.props,i=n===A.ReactionTypes.BURST,r={openPopoutType:"message_reaction_emoji_picker",...i&&{openPopoutType:"message_super_reaction_emoji_picker",page:null!=s.getGuildId()?M.AnalyticsPages.GUILD_CHANNEL:M.AnalyticsPages.DM_CHANNEL,section:(0,E.getBurstAnalyticsSection)(s),object:M.AnalyticsObjects.REACTION_RAIL}},c=(0,a.jsx)(p.ReactionPicker,{closePopout:t,channel:s,onSelectEmoji:(e,n,a)=>{this.onAddReaction(e,a),n&&(a?o(t,150)():t())},analyticsOverride:r,messageId:l.id});return(0,a.jsx)(u.DialogContext.Consumer,{children:e=>e?(0,a.jsx)(d.Dialog,{"aria-label":O.default.Messages.REACTION_PICKER,children:c}):c})}}}},125247:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}}),n("222007");var a=n("37983");n("884691");var s=n("42203"),l=n("305961"),i=n("957255"),r=n("67541"),o=n("49111");function u(e){let{code:t,messageData:n}=e,[u,d]=t.split("/"),c=s.default.getChannel(d),f=l.default.getGuild(u);return null!=c&&c.isGuildVocal()&&null!=f&&i.default.can(o.Permissions.VIEW_CHANNEL,c)&&i.default.can(o.Permissions.CONNECT,c)?(0,a.jsx)(r.default,{guild:f,channel:c,messageData:n}):null}},699473:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}}),n("702976");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("974667"),o=n("446674"),u=n("193865"),d=n("405645"),c=n("256572"),f=n("42203"),m=n("957255"),h=n("780571"),E=n("568734"),p=n("383667"),_=n("574073"),g=n("865343"),I=n("39331"),T=n("68480"),C=n("115859"),S=n("596368"),A=n("227439"),N=n("862451"),M=n("611792"),v=n("554372"),x=n("49111"),O=n("877671"),L=s.memo(function(e){var t,n;let{message:s,compact:l=!1,className:L,onContextMenu:R,onClick:y,disableInteraction:P=!1,hideSimpleEmbedContent:D=!0,channel:j,isGroupStart:b,animateAvatar:U,subscribeToComponentDispatch:B,renderThreadAccessory:G,trackAnnouncementViews:k=!1,asPartialPreview:w=!0,...H}=e,F=s.isFirstMessageInForumPost(j),V=(0,u.useShowImprovedMarkdownUserExperimentConfig)((null!==(t=s.editedTimestamp)&&void 0!==t?t:s.timestamp).valueOf()),Y=(0,u.useShowImprovedMarkdownGuildExperimentConfig)(j.guild_id,(null!==(n=s.editedTimestamp)&&void 0!==n?n:s.timestamp).valueOf()),{content:W,hasSpoilerEmbeds:K}=(0,I.default)(s,{hideSimpleEmbedContent:D,allowList:F||V.showListsAndHeaders||Y.showListsAndHeaders,allowHeading:F||V.showListsAndHeaders||Y.showListsAndHeaders,allowLinks:V.showMaskedLinks||Y.showMaskedLinks,previewLinkTarget:V.showMaskedLinks||Y.showMaskedLinks}),z=s.type===x.MessageTypes.REPLY?s.messageReference:void 0,Z=(0,o.useStateFromStores)([c.default],()=>c.default.getMessageByReference(z)),J=(0,r.useListItem)(s.id),X=(0,_.default)(s),q=(0,o.useStateFromStores)([f.default],()=>s.hasFlag(x.MessageFlags.HAS_THREAD)&&f.default.getChannel(s.id)),Q=(0,d.useRoleIcon)({guildId:j.guild_id,roleId:X.iconRoleId}),$=(0,o.useStateFromStores)([m.default],()=>m.default.can(x.Permissions.CREATE_INSTANT_INVITE,j)),ee=(0,T.default)({message:s,channel:j,enabled:k});if((0,p.default)(s,$))return null;let et=(0,g.getMessageAriaLabelledBy)(s),en=(0,g.getMessageAriaDescribedBy)(s);return(0,a.jsx)(h.default,{compact:l,className:i(L,{[O.ephemeral]:(0,E.hasFlag)(s.flags,x.MessageFlags.EPHEMERAL),[O.disableInteraction]:P}),disableInteraction:P,childrenRepliedMessage:(0,v.default)(s,j,z,Z,l),childrenExecutedCommand:(0,M.default)(s,j,l),childrenHeader:(0,A.default)({...e,guildId:j.guild_id,author:X,roleIcon:Q}),childrenAccessories:(0,C.renderSimpleAccessories)(e,K),childrenMessageContent:(0,S.default)({...e,asPartialPreview:w},W),childrenSystemMessage:(0,N.default)(e),onContextMenu:R,onClick:y,hasThread:G&&null!=q&&s.hasFlag(x.MessageFlags.HAS_THREAD),hasReply:s.type===x.MessageTypes.REPLY,"aria-labelledby":et,"aria-describedby":en,messageRef:ee,...J,...H})})},808440:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n("37983"),s=n("884691"),l=n("446674"),i=n("970728"),r=n("901582"),o=n("685665"),u=n("398604"),d=n("914169"),c=n("42793"),f=n("141254"),m=n("116616"),h=n("271938"),E=n("305961"),p=n("337543"),_=n("430625"),g=n("740589"),I=n("472315"),T=n("783940"),C=n("530078"),S=n("649112"),A=n("793079"),N=n("135666"),M=n("158783"),v=n("49111");function x(e){let{code:t,author:n,getAcceptInviteContext:x}=e,{invite:O,inviteError:L}=(0,l.useStateFromStoresObject)([p.default],()=>({invite:p.default.getInvite(t),inviteError:p.default.getInviteError(t)}),[t]);s.useEffect(()=>{null==O&&i.default.resolveInvite(t)},[t]);let R=null!=O?O:{state:v.InviteStates.RESOLVING,code:""},{analyticsLocations:y}=(0,o.default)(),P=(0,l.useStateFromStores)([E.default],()=>(null==O?void 0:O.guild)!=null?E.default.getGuild(O.guild.id):null,[O]),D=(0,l.useStateFromStores)([h.default],()=>h.default.getId()),j=(0,l.useStateFromStores)([u.default],()=>{var e;return u.default.getGuildScheduledEvent(null===(e=R.guild_scheduled_event)||void 0===e?void 0:e.id)},[R]),b=()=>{null!=R.channel&&i.default.transitionToInviteSync(R)},U=()=>{(0,f.isAtGuildCapAndNonPremium)()?(0,m.default)({analyticsSource:{page:v.AnalyticsPages.INVITE_EMBED},analyticsLocation:{page:v.AnalyticsPages.INVITE_EMBED,section:v.AnalyticsSections.GUILD_CAP_UPSELL_MODAL},analyticsLocations:y}):i.default.acceptInviteAndTransitionToInviteChannel({inviteKey:t,context:x("Invite Button Embed")})},B=(0,a.jsx)(C.default,{onTransitionToInviteChannel:b,onAcceptInstantInvite:U,currentUserId:D,guild:P,invite:R,author:n});switch(R.state){case v.InviteStates.RESOLVING:B=(0,a.jsx)(A.default,{});break;case v.InviteStates.EXPIRED:case v.InviteStates.BANNED:B=(0,a.jsx)(S.default,{banned:R.state===v.InviteStates.BANNED,author:n});break;case v.InviteStates.ERROR:B=(0,a.jsx)(g.default,{author:n,inviteError:L});break;default:switch((0,c.getInviteType)(R)){case c.InviteTypes.GROUP_DM:B=(0,a.jsx)(T.default,{onTransitionToInviteChannel:b,onAcceptInstantInvite:U,currentUserId:D,invite:R,author:n});break;case c.InviteTypes.FRIEND:B=(0,a.jsx)(I.default,{invite:R,author:n,getAcceptInviteContext:x});break;default:if((0,c.isStreamInvite)(R)){B=(0,a.jsx)(M.default,{onTransitionToInviteChannel:b,onAcceptInstantInvite:U,currentUserId:D,guild:P,invite:R});break}if((0,c.isGuildScheduledEventInviteEmbed)(R)){B=(0,a.jsx)(d.default,{guildScheduledEvent:j,guild:R.guild,channel:R.channel,isMember:null!=P,onAcceptInstantInvite:U,onTransitionToInviteChannel:b});break}if((0,c.isStageInviteEmbed)(R)){B=(0,a.jsx)(N.default,{stageInstance:R.stage_instance,guild:R.guild,isMember:null!=P,onTransitionToInviteChannel:b,onAcceptInstantInvite:U});break}(0,c.isEmbeddedApplicationInvite)(R)&&(B=(0,a.jsx)(_.default,{invite:R,getAcceptInviteContext:x}))}}return(0,a.jsx)(r.default,{section:v.AnalyticsSections.INVITE_LINK,children:B})}},723931:function(e,t,n){"use strict";n.r(t),n.d(t,{MessageAccessories:function(){return eR},default:function(){return ey},SimpleMessageAccessories:function(){return eP}}),n("222007"),n("702976"),n("70102"),n("881410");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("637612"),o=n("446674"),u=n("713349"),d=n("233736"),c=n("77078"),f=n("819689"),m=n("710306"),h=n("501076"),E=n("627697"),p=n("527088"),_=n("193865"),g=n("222650"),I=n("576060"),T=n("139514"),C=n("810044"),S=n("447435"),A=n("963119"),N=n("925685"),M=n("406043"),v=n("294519"),x=n("477558"),O=n("812224"),L=n("383247"),R=n("267567"),y=n("367376"),P=n("467475"),D=n("801177"),j=n("985883"),b=n("311830"),U=n("626301"),B=n("428786"),G=n("705423"),k=n("24373"),w=n("943508"),H=n("300322"),F=n("415829"),V=n("845579"),Y=n("271938"),W=n("26989"),K=n("88093"),z=n("957255"),Z=n("697218"),J=n("560176"),X=n("952368"),q=n("328620"),Q=n("688622"),$=n("124297"),ee=n("377502"),et=n("323273"),en=n("599110"),ea=n("240873"),es=n("568734"),el=n("449008"),ei=n("299039"),er=n("253981"),eo=n("605160"),eu=n("865446"),ed=n("913491"),ec=n("583022"),ef=n("125247"),em=n("476714"),eh=n("808440"),eE=n("865343"),ep=n("5982"),e_=n("933629"),eg=n("600536"),eI=n("592707"),eT=n("49111"),eC=n("646718"),eS=n("782340"),eA=n("30554"),eN=n("872364");function eM(){return(0,a.jsxs)("div",{className:eA.nitroFileSizeUpsell,children:[(0,a.jsx)("img",{src:eN,className:eA.nitroBadgeSvg,alt:""}),(0,a.jsx)(c.Text,{variant:"text-xs/normal",color:"text-muted",className:eA.nitroFileSizeUpsellText,children:eS.default.Messages.LARGE_FILE_UPLOAD_POWERED_BY_NITRO.format({onClick:()=>(0,U.navigateToPremiumMarketingPage)()})})]})}let ev=new Set([eT.MessageEmbedTypes.AUTO_MODERATION_MESSAGE,eT.MessageEmbedTypes.AUTO_MODERATION_NOTIFICATION,eT.MessageEmbedTypes.APPLICATION_NEWS,eT.MessageEmbedTypes.POST_PREVIEW,eT.MessageEmbedTypes.SAFETY_POLICY_NOTICE]),ex=new Set(["discord-developers","discord-testers","discord-townhall","discordgameslab"]),eO=(e,t,n)=>()=>{let s=null!=t?t:n;if(null==s)return null;let{url:l,proxyURL:i,width:r,height:o}=s;return(0,a.jsx)(em.default,{width:r,height:o,src:null!=i&&""!==i?i:l,url:null!=e&&""!==e?e:null!=i&&""!==i?i:l,format:null!=n?u.GIFType.VIDEO:u.GIFType.IMAGE,className:eA.gifFavoriteButton})},eL=e=>()=>{let{proxy_url:t,width:n,height:s}=e;return X.IMAGE_GIF_RE.test(e.filename)&&null!=n&&null!=s?(0,a.jsx)(em.default,{width:n,height:s,src:t,url:t,format:u.GIFType.IMAGE,className:eA.gifFavoriteButton}):null};class eR extends s.Component{shouldRenderInvite(e){let{channel:t}=this.props;return!(t.isDM()&&!t.isSystemDM()&&!t.isGroupDM()&&ex.has(e))}shouldComponentUpdate(e,t){var n,a;let{channel:s,message:l,poll:i}=this.props,{channel:r,message:o,poll:u}=e;return!(0,d.default)(this.state,t)||!(0,d.default)(this.props,e,["message","channel"])||s.type!==r.type||u!==i||o.codedLinks!==l.codedLinks||o.flags!==l.flags||o.giftCodes!==l.giftCodes||o.attachments!==l.attachments||o.embeds!==l.embeds||o.components!==l.components||o.activity!==l.activity||(n=o.reactions,n!==(a=l.reactions)&&(n.length!==a.length||!!n.some((e,t)=>{let{emoji:n,count:s,burst_count:l}=e,{emoji:i,count:r,burst_count:o}=a[t];return l!==o||s!==r||n.id!==i.id||n.name!==i.name})))}renderSocialProofingFileSizeNitroUpsell(e){let t=e.attachments.some(e=>e.size>eC.MAX_PREMIUM_TIER_0_ATTACHMENT_SIZE);return(0,eu.shouldShowNitroUpsell)("attachment")&&t?(0,a.jsx)(eM,{}):null}renderCodedLinks(e){return 0===e.codedLinks.length?null:e.codedLinks.map(t=>{let{type:n,code:s}=t;if(n===T.CodedLinkType.INVITE)return this.shouldRenderInvite(s)?(0,a.jsx)(eh.default,{code:s,author:e.author,getAcceptInviteContext:this.getAcceptInviteContext},s):null;if(n===T.CodedLinkType.TEMPLATE)return(0,a.jsx)(O.default,{code:s},s);if(n===T.CodedLinkType.EVENT)return(0,a.jsx)(x.default,{code:s},s);else if(n===T.CodedLinkType.CHANNEL_LINK)return(0,a.jsx)(ef.default,{code:s,messageData:e},s);else if(n===T.CodedLinkType.APP_DIRECTORY_PROFILE)return(0,a.jsx)(p.default,{code:s,message:e},s);else if(n===T.CodedLinkType.CLYDE_PROFILE)return(0,a.jsx)(I.default,{code:s},s);else if(n===T.CodedLinkType.ACTIVITY_BOOKMARK)return(0,a.jsx)(E.default,{applicationId:s,message:e},s);else if(n===T.CodedLinkType.GUILD_PRODUCT)return(0,a.jsx)(v.default,{code:s},s);else if(n===T.CodedLinkType.SERVER_SHOP)return(0,a.jsx)(C.default,{guildId:s},s);else throw Error("Unknown coded link type: ".concat(n))})}renderGiftCodes(e){let{giftCodes:t,author:n,channel_id:s,type:l,content:i,giftInfo:r}=e,o=Z.default.getCurrentUser();return null!=o&&t.length>0?t.map(e=>(0,a.jsx)("div",{className:eA.giftCodeContainer,children:(0,a.jsx)(m.default,{code:e,author:n,channelId:s,currentUser:o,type:l,content:i,giftInfo:r})},e)):null}renderReferralTrial(e){let{referralTrialOfferId:t,type:n}=e,{canRenderReferralEmbed:s}=this.props;return n!==r.MessageTypes.PREMIUM_REFERRAL||null==t?null:(0,a.jsx)("div",{className:eA.referralContainer,children:(0,a.jsx)(B.default,{userTrialOfferId:t,canRenderReferralEmbed:null!=s&&s})},t)}renderReactions(e){let{disableReactionCreates:t,disableReactionReads:n,disableReactionUpdates:s,isLurking:l,isGuest:i,isPendingMember:r,channel:o,forceAddReactions:u}=this.props;return n?null:(0,a.jsx)(eI.default,{message:e,channel:o,disableReactionCreates:t,disableReactionUpdates:s,isLurking:l,isGuest:i,isPendingMember:r,forceAddReactions:u,useChatFontScaling:!0})}renderAttachments(e){let{attachments:t,flags:n}=e,{channel:s,shouldRedactExplicitContent:l}=this.props;if(0===t.length||e.isPoll())return null;let i=t.filter(e=>null==e.flags||!(0,es.hasFlag)(e.flags,eT.MessageAttachmentFlags.IS_THUMBNAIL));if(0===i.length)return null;let{gifAutoPlay:r,canDeleteAttachments:o,inlineAttachmentMedia:u,onAttachmentContextMenu:d,shouldHideMediaOptions:c}=this.props,f=i.map(e=>(0,et.carouselAssetFromAttachment)(e,c,l)).filter(el.isNotNullish),m={source:"Media Mosaic",guild_id:s.guild_id,channel_id:s.id,channel_type:s.type},h=f.length>1?(0,et.createMediaOnClickOverrides)(f,m):{},E=(0,es.hasFlag)(n,eT.MessageFlags.IS_VOICE_MESSAGE),p=i.map(t=>{let n={message:e,attachment:t,autoPlayGif:r,canRemoveAttachment:o&&(i.length>1||""!==e.content),className:eA.embedWrapper,inlineMedia:u,onContextMenu:null!=d?e=>{e.stopPropagation(),e.preventDefault(),d(e,t)}:void 0,onRemoveAttachment:this.handleRemoveAttachment,renderAudioComponent:E?e_.renderVoiceMessageAudioComponent:e_.renderAudioComponent,renderImageComponent:e_.renderImageComponent,renderPlaintextFilePreview:e_.renderPlaintextFilePreview,renderVideoComponent:e_.renderVideoComponent,onPlay:(e,n,a)=>{en.default.track(eT.AnalyticEvents.MEDIA_ATTACHMENT_PLAYBACK_STARTED,{guild_id:s.guild_id,channel_id:s.id,channel_type:s.type,type:t.content_type,flags:t.flags,size:t.size,duration:a})},gifFavoriteButton:eL(t)},a=(0,Q.getBestEffortSrcUrl)({proxyURL:t.proxy_url,url:t.url});return a in h&&(n.onClick=h[a]),n});return(0,a.jsx)(ee.default,{attachments:p})}renderEmbeds(e){let{renderEmbeds:t,showClydeAiEmbeds:n}=this.props;return 0!==e.embeds.length&&t?e.embeds.map(t=>{if(ev.has(t.type)||!n&&(0,ea.isClydeAiThoughtsEmbed)(t)||(0,ea.isServerShopArticleEmbed)(t))return null;let s={renderImageComponent:e_.renderImageComponent,renderVideoComponent:e_.renderVideoComponent,renderLinkComponent:e_.renderMaskedLinkComponent};if(t.type===eT.MessageEmbedTypes.ARTICLE&&null!=t.url&&/^https?:\/\/(?:canary|ptb|www)?\.discord(?:app)?\.com\/store\/skus\/(?:[0-9]+)/.test(t.url)&&null!=t.provider&&"Discord"===t.provider.name){let n=er.default.safeParseWithQuery(t.url);if(null!=n&&null!=n.pathname){let l=n.pathname.split("/")[3];if(null!=l)return(0,a.jsx)(h.default,{skuId:l,renderFallback:()=>this.renderEmbed(t,s,e.id,e.channel_id)},t.id)}}return this.renderEmbed(t,s,e.id,e.channel_id)}):null}renderComponentAccessories(e){return null==e.components||0===e.components.length||!1===this.props.renderComponentAccessory?null:(0,a.jsx)(L.default,{message:e})}renderActivityInvite(e){if(null==e.activity)return null;let{channel:t}=this.props;return(0,a.jsx)(ep.default,{channel:t,message:e,hideParty:!1})}renderPublishBump(e){let{channel:t}=this.props;return t.type!==eT.ChannelTypes.GUILD_ANNOUNCEMENT||(0,es.hasFlag)(e.flags,eT.MessageFlags.EPHEMERAL)?null:(0,a.jsx)(g.default,{channelId:e.channel_id,messageId:e.id})}renderEphemeralAccessories(e){return(0,es.hasFlag)(e.flags,eT.MessageFlags.EPHEMERAL)?(0,a.jsx)($.default,{message:e,onDeleteMessage:()=>{f.default.dismissAutomatedMessage(e)}}):null}renderStickersAccessories(e){let t=(0,k.getMessageStickers)(e),{channel:n,isInteracting:s}=this.props;return 0===t.length?null:t.map(e=>(0,a.jsx)(w.default,{channel:n,isInteracting:s,renderableSticker:e},e.id))}renderThreadAccessories(e){if(e.hasFlag(eT.MessageFlags.HAS_THREAD)&&!1!==this.props.renderThreadAccessory)return(0,a.jsx)(F.default,{message:e,compact:this.props.compact})}renderThreadRoleMentionWarning(e){if(!e.hasFlag(eT.MessageFlags.FAILED_TO_MENTION_SOME_ROLES_IN_THREAD)||!this.props.isCurrentUser)return;let t=Date.now()-ei.default.extractTimestamp(e.id);if(!(t>=9e5))return(0,a.jsx)("div",{className:eA.threadRoleMentionFailure,children:eS.default.Messages.THREAD_ROLE_MENTION_FAILURE})}renderSuppressConfirmModal(){let{channel:e,message:t}=this.props;return(0,a.jsxs)(c.DeclarativeConfirmModal,{dismissable:!0,header:eS.default.Messages.SUPPRESS_EMBED_TITLE,confirmText:eS.default.Messages.SUPPRESS_EMBED_CONFIRM,cancelText:eS.default.Messages.CANCEL,onCancel:()=>this.setState({showSuppressModal:!1}),onConfirm:()=>{f.default.suppressEmbeds(e.id,t.id),this.setState({showSuppressModal:!1})},children:[(0,a.jsx)(c.Text,{variant:"text-md/normal",color:"text-normal",className:eA.confirmText,children:eS.default.Messages.SUPPRESS_EMBED_BODY}),(0,a.jsx)(c.Text,{variant:"text-md/normal",color:"text-muted",children:eS.default.Messages.SUPPRESS_EMBED_TIP})]})}renderRemoveAttachmentConfirmModal(){let{channel:e,message:t}=this.props,{attachmentToDelete:n}=this.state;if(null==n){this.setState({showRemoveAttachmentModal:!1});return}return(0,a.jsx)(c.DeclarativeConfirmModal,{dismissable:!0,header:eS.default.Messages.REMOVE_ATTACHMENT_TITLE,confirmText:eS.default.Messages.REMOVE_ATTACHMENT_CONFIRM,cancelText:eS.default.Messages.CANCEL,onCancel:()=>this.setState({showRemoveAttachmentModal:!1,attachmentToDelete:null}),onConfirm:()=>{let a=t.attachments.filter(e=>e.id!==n.id);f.default.patchMessageAttachments(e.id,t.id,a),this.setState({showRemoveAttachmentModal:!1,attachmentToDelete:null})},children:(0,a.jsx)(c.Text,{variant:"text-md/normal",color:"text-normal",className:eA.confirmText,children:eS.default.Messages.REMOVE_ATTACHMENT_BODY})})}renderInteractionPremiumUpsell(e){let t=e.applicationId;return e.type!==r.MessageTypes.INTERACTION_PREMIUM_UPSELL||null==t?null:(0,a.jsx)(eg.default,{applicationId:t,guildId:this.props.channel.guild_id})}renderMediaPostEmbeds(e){return e.embeds.flatMap(t=>t.type!==eT.MessageEmbedTypes.POST_PREVIEW||null==t.url?[]:(0,a.jsx)(D.default,{embedUrl:t.url,message:e,channel:this.props.channel},t.id))}renderSafetyPolicyNotice(e){return 1===e.embeds.length&&e.embeds[0].type===eT.MessageEmbedTypes.SAFETY_POLICY_NOTICE?(0,a.jsx)(G.SafetyPolicyNotice,{message:e}):null}renderMediaObscureNotice(e){if(0===e.attachments.length&&0===e.embeds.length)return null;let{obscuredAttachments:t,obscuredEmbeds:n}=(0,S.getObscuredMediaForMessage)(e);return 0===t.length&&0===n.length?null:(0,a.jsx)(N.default,{message:e})}renderPoll(e,t){if(null!=t)return(0,a.jsx)(b.default,{message:e,poll:t,className:eA.pollContainer})}render(){let{className:e,message:t,poll:n}=this.props,{showSuppressModal:s,showRemoveAttachmentModal:l}=this.state,r=this.renderCodedLinks(t),o=this.renderGiftCodes(t),u=this.renderReferralTrial(t),d=this.renderAttachments(t),c=this.renderSocialProofingFileSizeNitroUpsell(t),f=this.renderEmbeds(t),m=this.renderActivityInvite(t),h=this.renderReactions(t),E=this.renderPublishBump(t),p=this.renderEphemeralAccessories(t),_=this.renderStickersAccessories(t),g=this.renderThreadAccessories(t),I=this.renderComponentAccessories(t),T=this.renderThreadRoleMentionWarning(t),C=this.renderInteractionPremiumUpsell(t),S=this.renderMediaPostEmbeds(t),A=this.renderSafetyPolicyNotice(t),N=this.renderMediaObscureNotice(t),M=this.renderPoll(t,n);return null==r&&null==d&&null==f&&null==m&&null==h&&null==o&&null==u&&null==E&&null==p&&null==_&&null==g&&null==I&&null==T&&null==S&&null==A&&null!=C&&null==M?null:(0,a.jsxs)("div",{id:(0,eE.getMessageAccessoriesId)(t),className:i(e,eA.container),children:[T,M,r,o,u,S,d,f,N,m,_,I,C,c,h,E,p,s&&this.renderSuppressConfirmModal(),l&&this.renderRemoveAttachmentConfirmModal(),g,A]})}constructor(...e){super(...e),this.state={showSuppressModal:!1,showRemoveAttachmentModal:!1,attachmentToDelete:null},this.getAcceptInviteContext=e=>{let{channel:t,message:n}=this.props;return{location:e,location_guild_id:t.getGuildId(),location_channel_id:t.id,location_channel_type:t.type,location_message_id:n.id}},this.renderEmbed=(e,t,n,s)=>{let{gifAutoPlay:l,inlineEmbedMedia:i,canSuppressEmbeds:r,hasSpoilerEmbeds:o,shouldRedactExplicitContent:u}=this.props,d=(0,eo.getObscureReasonForEmbed)(e,s,n,o,u);return e.type===eT.MessageEmbedTypes.GIFT?null:(0,a.jsx)(q.GIFAccessoryContext.Provider,{value:eO(e.url,e.image,e.video),children:(0,a.jsx)(J.default,{className:eA.embedWrapper,embed:e,obscureReason:null!=d?d:void 0,autoPlayGif:l,hideMedia:!i,onSuppressEmbed:r?this.handleEmbedSuppressed:void 0,renderTitle:this.renderEmbedTitle,renderDescription:this.renderEmbedDescription,messageId:n,channelId:s,...t})},e.id)},this.renderEmbedTitle=(e,t)=>e.type===eT.MessageEmbedTypes.RICH?y.default.parseEmbedTitle(t,!0,{channelId:this.props.channel.id}):t,this.renderEmbedDescription=(e,t,n)=>e.type===eT.MessageEmbedTypes.RICH?y.default.parse(t,!0,{channelId:this.props.channel.id,allowLinks:!0,allowEmojiLinks:!0,allowList:this.props.showListsAndHeaders,allowHeading:!n&&this.props.showListsAndHeaders,previewLinkTarget:this.props.showMaskedLinks}):t,this.handleEmbedSuppressed=e=>{let{channel:t,message:n}=this.props;e.shiftKey?f.default.suppressEmbeds(t.id,n.id):this.setState({showSuppressModal:!0})},this.handleRemoveAttachment=e=>{this.setState({showRemoveAttachmentModal:!0,attachmentToDelete:e})}}}function ey(e){var t,n,s;let{channel:l,message:i,renderSuppressEmbeds:r}=e,u=(0,o.useStateFromStores)([Y.default],()=>Y.default.getId()),d=V.InlineAttachmentMedia.useSetting(),c=V.InlineEmbedMedia.useSetting(),f=V.RenderEmbeds.useSetting(),m=f&&!(0,ed.default)(e.message),h=V.RenderReactions.useSetting(),E=V.GifAutoPlay.useSetting(),p=(0,o.useStateFromStores)([K.default],()=>null==l.guild_id||K.default.canChatInGuild(l.guild_id),[l]),g=(0,o.useStateFromStores)([R.default],()=>null!=l.guild_id&&R.default.isLurking(l.guild_id),[l]),I=(0,o.useStateFromStores)([W.default],()=>W.default.isCurrentUserGuest(l.guild_id),[l]),T=(0,o.useStateFromStores)([W.default,Z.default],()=>{var e,t;let n=Z.default.getCurrentUser();return null!==(t=null!=l.guild_id&&null!=n?null===(e=W.default.getMember(l.guild_id,n.id))||void 0===e?void 0:e.isPending:null)&&void 0!==t&&t}),{canAddNewReactions:C,canManageMessages:S}=(0,o.useStateFromStoresObject)([z.default],()=>({canAddNewReactions:p&&z.default.can(eT.Permissions.ADD_REACTIONS,l),canManageMessages:z.default.can(eT.Permissions.MANAGE_MESSAGES,l)}),[p,l]),[,N]=(0,M.useCurrentUserCommunicationDisabled)(l.guild_id),v=(0,H.useIsActiveChannelOrUnarchivableThread)(l),x=(u===i.author.id||S)&&i.author.id!==eT.LOCAL_BOT_ID&&!i.author.isClyde()&&!1!==r&&!(0,es.hasFlag)(i.flags,eT.MessageFlags.EPHEMERAL)&&v,O=u===i.author.id&&v,L=i.author.id===u,y=i.isFirstMessageInForumPost(l),D=(0,ec.default)({channel:l,canChat:p,renderReactions:h,canAddNewReactions:C,isLurking:g,isGuest:I,communicationDisabled:N,isActiveChannelOrUnarchivableThread:v}),b=(0,_.useShowImprovedMarkdownUserExperimentConfig)((null!==(t=i.editedTimestamp)&&void 0!==t?t:i.timestamp).valueOf()),U=(0,_.useShowImprovedMarkdownGuildExperimentConfig)(null!==(n=l.guild_id)&&void 0!==n?n:"",(null!==(s=i.editedTimestamp)&&void 0!==s?s:i.timestamp).valueOf()),B=(0,P.default)(null==l?void 0:l.id),G=(0,j.default)(i),k=(0,A.useShouldRedactExplicitContent)(l.id,i.author.id);return(0,a.jsx)(eR,{canSuppressEmbeds:x,canDeleteAttachments:O,...D,disableReactionReads:!!y||D.disableReactionReads,...e,isLurking:g&&p,isGuest:I&&p,isPendingMember:T&&p,isCurrentUser:L,inlineAttachmentMedia:d,inlineEmbedMedia:c,renderEmbeds:m,gifAutoPlay:E,canRenderReferralEmbed:l.isDM(),poll:G,showListsAndHeaders:b.showListsAndHeaders||U.showListsAndHeaders,showMaskedLinks:b.showMaskedLinks||U.showMaskedLinks,shouldHideMediaOptions:B,showClydeAiEmbeds:!!(0,el.isNotNullish)(e.showClydeAiEmbeds)&&e.showClydeAiEmbeds,shouldRedactExplicitContent:k})}eR.defaultProps={renderEmbeds:!0,compact:!1};let eP=e=>{var t,n,s;let{message:l,channel:i,disableReactionReads:r=!1,renderComponentAccessory:o=!1,renderThreadAccessory:u=!1,disableReactionCreates:d=!0,disableReactionUpdates:c=!0,...f}=e,m=V.InlineAttachmentMedia.useSetting(),h=V.InlineEmbedMedia.useSetting(),E=V.RenderEmbeds.useSetting()&&!l.author.isClyde(),p=V.GifAutoPlay.useSetting(),g=(0,_.useShowImprovedMarkdownUserExperimentConfig)((null!==(t=l.editedTimestamp)&&void 0!==t?t:l.timestamp).valueOf()),I=(0,_.useShowImprovedMarkdownGuildExperimentConfig)(null!==(n=i.guild_id)&&void 0!==n?n:"",(null!==(s=l.editedTimestamp)&&void 0!==s?s:l.timestamp).valueOf()),T=(0,P.default)(null==i?void 0:i.id),C=(0,A.useShouldRedactExplicitContent)(i.id,l.author.id);return(0,a.jsx)(eR,{...f,message:l,channel:i,disableReactionReads:r,disableReactionCreates:d,disableReactionUpdates:c,canSuppressEmbeds:!1,canDeleteAttachments:!1,renderComponentAccessory:o,renderThreadAccessory:u,inlineAttachmentMedia:m,inlineEmbedMedia:h,renderEmbeds:E,gifAutoPlay:p,showListsAndHeaders:g.showListsAndHeaders||I.showListsAndHeaders,showMaskedLinks:g.showMaskedLinks||I.showMaskedLinks,shouldHideMediaOptions:T,showClydeAiEmbeds:!1,shouldRedactExplicitContent:C})}},5982:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("37983");n("884691");var s=n("446674"),l=n("803816"),i=n("685665"),r=n("653047"),o=n("671071"),u=n("271938"),d=n("824563"),c=n("49111"),f=n("450484"),m=n("738766"),h=e=>{var t;let{channel:n,message:h,hideParty:E}=e,{analyticsLocations:p}=(0,i.default)(),_=(0,s.useStateFromStores)([u.default],()=>u.default.getId()),g=(0,s.useStateFromStores)([d.default],()=>{if(null==h.application)return d.default.findActivity(h.author.id,e=>e.type===c.ActivityTypes.LISTENING);{var e;let t=h.author.id;return(null===(e=h.activity)||void 0===e?void 0:e.type)===c.ActivityActionTypes.JOIN_REQUEST&&(t=t===_&&n.isPrivate()?n.getRecipientId():_),d.default.getApplicationActivity(t,h.application.id)}},[h,n,_]);return(0,a.jsx)(l.default,{className:m.container,activity:g,activityActionType:null!=h.activity?h.activity.type:null,partyId:null!=h.activity?h.activity.party_id:null,userId:h.author.id,application:null!=(t=h).application?r.default.createFromServer(t.application):null!=t.activity&&null!=t.activity.party_id&&(0,f.isSpotifyParty)(t.activity.party_id)?o.SpotifyApplication:void 0,message:h,channelId:n.id,guildId:n.getGuildId(),hideParty:E,isSender:h.author.id===_,analyticsLocations:p})}},600536:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var s=n("446674"),l=n("77078"),i=n("650509"),r=n("186211"),o=n("90592"),u=n("910861"),d=n("153335"),c=n("49111"),f=n("782340");function m(e){let{applicationId:t,guildId:n}=e,m=(0,i.useApplication)(t),{listingsLoaded:h}=(0,i.useFetchListingsForApplication)(t,null==m?void 0:m.primarySkuId),E=(0,s.useStateFromStores)([r.default],()=>r.default.getSubscriptionGroupListingForApplication(t),[t]),p=null!=E?(0,o.getPayableSubscriptionListing)(E):null,{openModal:_,canOpenModal:g}=(0,d.default)({listing:p,guildId:n,groupListingId:null==E?void 0:E.id,showBenefitsFirst:!0,analyticsLocation:c.AnalyticsLocations.INTERACTION_RESPONSE});return(0,a.jsx)(u.default,{size:l.Button.Sizes.MEDIUM,onClick:()=>_(),disabled:!g||!h,children:f.default.Messages.INTERACTION_PREMIUM_UPSELL_CTA})}},592707:function(e,t,n){"use strict";n.r(t),n.d(t,{findReactionIndex:function(){return g},default:function(){return C}}),n("222007"),n("424973");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("266491"),o=n("77078"),u=n("875978"),d=n("836943"),c=n("865343"),f=n("621698"),m=n("350134"),h=n("782340"),E=n("550244"),p=n("314934");let _=(e,t)=>null==e&&null==t||e===t,g=(e,t)=>e.findIndex(e=>_(e.emoji.id,null==t?void 0:t.id)&&_(e.emoji.name,null==t?void 0:t.name)),I=(e,t)=>{if(null==t)return e;let n=g(e,t);return n<0?e:[e[n],...e.slice(0,n),...e.slice(n+1)]};class T extends s.PureComponent{static getDerivedStateFromProps(e,t){let n=e.message.reactions.length;return 0===t.reactionsCount&&n>0?{disableTransitionAppear:!1,reactionsCount:n}:t.reactionsCount!==n?{reactionsCount:n}:null}render(){let{message:e,disableReactionCreates:t,disableReactionUpdates:n,isLurking:s,isGuest:l,isPendingMember:_,isForumToolbar:g,channel:I,className:T,forceAddReactions:C,reactionClassName:S,useChatFontScaling:A,forceHideReactionCreates:N,remainingReactions:M,combinedReactions:v,visibleReactionsCount:x}=this.props,{disableTransitionAppear:O}=this.state,L=A?p:E,R=x>0;return R||C?(0,a.jsxs)(r.default,{component:"div",className:i(L.reactions,T),transitionAppear:!O,role:"group",transitionLeave:!1,id:(0,c.getMessageReactionsId)(e),onMouseEnter:()=>this.setState({isHovered:!0}),onMouseLeave:()=>this.setState({isHovered:!1}),children:[(0,a.jsx)(f.MessageReactionsGroupWrapper,{reactions:v,message:e,readOnly:n,isLurking:s,isGuest:l,isPendingMember:_,isForumToolbar:g,useChatFontScaling:A,className:S}),M>0&&(0,a.jsx)(o.Clickable,{onClick:t=>{t.stopPropagation(),(0,m.showReactionsModal)(I,e)},className:i(L.reaction,S,L.remainingReactions),"aria-label":h.default.Messages.ADD_REACTION,children:(0,a.jsxs)(o.Text,{className:L.reactionInner,variant:"text-sm/normal",children:["+",M]})}),!t&&!N&&(0,a.jsx)(d.ButtonAddReaction,{type:u.ReactionTypes.NORMAL,message:e,channel:I,useChatFontScaling:A,isHovered:this.state.isHovered,className:i({[L.forceShow]:C&&!R,[L.forceShowLook]:C})})]}):null}constructor(...e){super(...e),this.state={disableTransitionAppear:!0,reactionsCount:this.props.message.reactions.length,isHovered:!1}}}var C=e=>{let{message:t,maxReactions:n,hoistReaction:l}=e,{combinedReactions:i,remainingReactions:r,visibleReactionsCount:o}=s.useMemo(()=>{let e=[],a=I(t.reactions,l),s=null!=n&&n<a.length,i=s?a.slice(0,n):a,r=a.length-i.length,o=a.length;return i.forEach(t=>{t.burst_count>0&&e.push({...t,type:u.ReactionTypes.BURST}),t.count>0&&e.push({...t,type:u.ReactionTypes.NORMAL}),null!=t.me_vote&&--o}),{combinedReactions:e,visibleReactionsCount:o,remainingReactions:r}},[l,n,t.reactions]);return(0,a.jsx)(T,{...e,visibleReactionsCount:o,combinedReactions:i,remainingReactions:r})}},621698:function(e,t,n){"use strict";n.r(t),n.d(t,{MessageReactionsGroupWrapper:function(){return _}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("509043"),o=n("430568"),u=n("811425"),d=n("102873"),c=n("738107"),f=n("875978"),m=n("350134"),h=n("550244"),E=n("314934");let p=s.memo(function(e){let t,n,{useChatFontScaling:s,hideEmoji:l,emoji:u,className:p,count:_,me:g,me_burst:I,burst_count:T,burst_colors:C,readOnly:S,isLurking:A,isGuest:N,isPendingMember:M,type:v}=e,x=v===f.ReactionTypes.BURST,O=(0,m.isMeReaction)(g,I,v),L=(0,d.useEmojiColorPalette)(x&&null!=C?C:[]),R=s?E:h,y=x?T:_,P=(0,c.getMinCounterWidth)(y,m.REACTION_MIN_WIDTH_DIGITS),D={};if(x&&null!=L){var j;let{accentColor:e,backgroundColor:a,opacity:s}=L,l=null!==(j=(0,r.hex2rgb)(null!=a?a:"",s))&&void 0!==j?j:"";O&&(D.borderColor=a),D.background=l,t=e,n=e}let b={minWidth:P,color:t,borderColor:n};return(0,a.jsxs)("div",{className:i(R.reaction,R.reactionInner,p,{[R.reactionMe]:O,[R.reactionReadOnly]:S&&!A&&!M&&!N}),style:D,children:[(0,a.jsx)(o.default,{className:i({[R.hideEmoji]:l}),emojiId:u.id,emojiName:u.name,size:"reaction",animated:x&&u.animated}),(0,a.jsx)("div",{className:R.reactionCount,style:b,children:y})]})}),_=s.memo(function(e){let{showImmediate:t,reactions:n,...l}=e,[i,r]=s.useState(!1),[o,d]=s.useTransition(),c=s.useCallback(e=>{e&&!i&&!o&&d(()=>{r(!0)})},[i,o]),h=(0,u.useIsVisible)(c),E=(!i||o)&&!t,_=E?p:m.Reaction;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:h}),n.map(e=>{var t,n;return(0,a.jsx)(_,{...l,...e},(t=e,"".concat(t.type===f.ReactionTypes.BURST?"burst:":"").concat(null!==(n=t.emoji.id)&&void 0!==n?n:0,":").concat(t.emoji.name)))})]})})},844061:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ev}}),n("70102");var a=n("37983"),s=n("884691"),l=n("446674"),i=n("77078"),r=n("272030"),o=n("819689"),u=n("987317"),d=n("990766"),c=n("798609"),f=n("63522"),m=n("881536"),h=n("441979"),E=n("605250"),p=n("201131"),_=n("95039"),g=n("289967"),I=n("866027"),T=n("398604"),C=n("477558"),S=n("592407"),A=n("86456"),N=n("393414"),M=n("244480"),v=n("488464"),x=n("808422"),O=n("120252"),L=n("967241"),R=n("936436"),y=n("271938"),P=n("950104"),D=n("42203"),j=n("305961"),b=n("957255"),U=n("824563"),B=n("18494"),G=n("697218"),k=n("800762"),w=n("277174"),H=n("497880"),F=n("944662"),V=n("748880"),Y=n("888393"),W=n("548703"),K=n("859316"),z=n("427655"),Z=n("161225"),J=n("41163"),X=n("830220"),q=n("924399"),Q=n("954060"),$=n("178889"),ee=n("52538"),et=n("879033"),en=n("523257"),ea=n("14733"),es=n("513448"),el=n("606099"),ei=n("151218"),er=n("423509"),eo=n("80301"),eu=n("210977"),ed=n("512622"),ec=n("874612"),ef=n("703712"),em=n("659500"),eh=n("387111"),eE=n("286235"),ep=n("299039"),e_=n("95045"),eg=n("232259"),eI=n("49111"),eT=n("706530"),eC=n("782340"),eS=n("896393");function eA(e){let{message:t,channel:n,compact:i}=e,{author:r}=t,{guild_id:o}=n,u=t.getChannelId(),d=(0,l.useStateFromStores)([j.default],()=>j.default.getGuild(o),[o]),c=s.useCallback(()=>{null!=d&&(0,_.openGuildBoostingMarketingModal)({guildId:d.id,location:{section:eI.AnalyticsSections.CHANNEL_TEXT_AREA,object:eI.AnalyticsObjects.BOOST_ANNOUNCEMENT_UPSELL}})},[d]),f=(0,eg.useUsernameHook)(r,u,n.guild_id,!0);return(0,a.jsx)(ef.default,{message:t,compact:i,guild:d,usernameHook:f,onClickMessage:c})}function eN(e){let{message:t,compact:n,channel:s}=e,l=(0,eg.useUsernameHook)(t.author,s.id,s.guild_id);return(0,a.jsx)(Z.default,{message:t,compact:n,usernameHook:l})}let eM=Object.freeze({[eI.MessageTypes.DEFAULT]:void 0,[eI.MessageTypes.REPLY]:void 0,[eI.MessageTypes.CHAT_INPUT_COMMAND]:void 0,[eI.MessageTypes.CONTEXT_MENU_COMMAND]:void 0,[eI.MessageTypes.RECIPIENT_ADD]:function(e){let{message:t,channel:n,compact:s}=e,{author:i}=t,r=t.getChannelId(),o=(0,l.useStateFromStores)([G.default],()=>G.default.getUser(t.mentions[0]),[t]),u=eh.default.getName(null,r,o),d=(0,eg.useUsernameHook)(i,r,n.guild_id),c=(0,eg.useUsernameHook)(o,r,n.guild_id);return n.isThread()?(0,a.jsx)(eo.default,{message:t,channel:n,compact:s,targetUser:o,actorUsernameHook:d,targetUsernameHook:c}):(0,a.jsx)(ee.default,{message:t,compact:s,otherUsername:u,usernameHook:d,otherUsernameHook:c})},[eI.MessageTypes.RECIPIENT_REMOVE]:function(e){let{message:t,channel:n,compact:s}=e,{author:i}=t,r=t.getChannelId(),o=(0,l.useStateFromStores)([G.default],()=>G.default.getUser(t.mentions[0]),[t]),u=(0,eg.useUsernameHook)(i,r,n.guild_id),d=(0,eg.useUsernameHook)(o,r,n.guild_id);return n.isThread()?(0,a.jsx)(eu.default,{message:t,channel:n,compact:s,targetUser:o,actorUsernameHook:u,targetUsernameHook:d}):null!=o&&o.id!==i.id?(0,a.jsx)(et.default,{message:t,channel:n,compact:s,usernameHook:u,otherUser:o,otherUsernameHook:d}):(0,a.jsx)(et.default,{message:t,channel:n,usernameHook:u})},[eI.MessageTypes.CALL]:function(e){let{message:t,compact:n,channel:i}=e,{id:r,author:o}=t,d=y.default.getId(),c=t.getChannelId(),f=(0,l.useStateFromStores)([P.default],()=>P.default.isCallActive(c,r),[c,r]),m=(0,l.useStateFromStores)([k.default],()=>k.default.getVoiceState(eI.ME,d)),h=!f&&null!=t.call&&!t.call.participants.includes(d),E=f&&(null==m||m.channelId!==c),p=s.useCallback(()=>u.default.selectVoiceChannel(c),[c]),_=(0,eg.useUsernameHook)(o,c,i.guild_id);return(0,a.jsx)(V.default,{compact:n,message:t,missed:h,joinable:E,usernameHook:_,onClickJoinCall:p})},[eI.MessageTypes.CHANNEL_NAME_CHANGE]:function(e){let{message:t,compact:n,channel:s}=e,{author:l}=t,i=t.getChannelId(),r=(0,eg.useUsernameHook)(l,i,s.guild_id);return(0,a.jsx)(K.default,{compact:n,message:t,usernameHook:r,isForumPost:s.isForumPost()})},[eI.MessageTypes.CHANNEL_ICON_CHANGE]:function(e){let{message:t,compact:n,channel:s}=e,{author:l}=t,i=t.getChannelId(),r=(0,eg.useUsernameHook)(l,i,s.guild_id);return(0,a.jsx)(W.default,{compact:n,message:t,usernameHook:r})},[eI.MessageTypes.CHANNEL_PINNED_MESSAGE]:function(e){let{message:t,compact:n,channel:l}=e,{author:i}=t,r=t.getChannelId(),o=s.useCallback(()=>{if(B.default.getChannelId()!==r){let e=D.default.getChannel(r);null!=e&&(0,N.transitionToGuild)(e.guild_id,e.id)}setTimeout(()=>em.ComponentDispatch.dispatch(eI.ComponentActions.TOGGLE_CHANNEL_PINS),0)},[r]),u=(0,eg.useUsernameHook)(i,r,l.guild_id);return(0,a.jsx)(z.default,{message:t,compact:n,usernameHook:u,onClickPins:__OVERLAY__?null:o})},[eI.MessageTypes.USER_JOIN]:function(e){let{message:t,compact:n,channel:s}=e,{author:l}=t,i=t.getChannelId(),r=(0,eg.useUsernameHook)(l,i,s.guild_id);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.default,{message:t,compact:n,usernameHook:r}),(0,a.jsx)(R.WelcomeCTAContainer,{channel:s,message:t})]})},[eI.MessageTypes.GUILD_BOOST]:eA,[eI.MessageTypes.GUILD_BOOST_TIER_1]:eA,[eI.MessageTypes.GUILD_BOOST_TIER_2]:eA,[eI.MessageTypes.GUILD_BOOST_TIER_3]:eA,[eI.MessageTypes.CHANNEL_FOLLOW_ADD]:function(e){let{message:t,compact:n,channel:s}=e,{author:l}=t,i=t.getChannelId(),r=(0,eg.useUsernameHook)(l,i,s.guild_id);return(0,a.jsx)(Y.default,{message:t,compact:n,usernameHook:r})},[eI.MessageTypes.GUILD_STREAM]:function(e){let{message:t,compact:n,channel:i}=e,{author:r,author:{id:o},messageReference:u}=t,c=t.getChannelId(),f=(0,l.useStateFromStores)([U.default],()=>U.default.findActivity(o,e=>e.type===eI.ActivityTypes.PLAYING),[o]),m=(0,l.useStateFromStores)([D.default],()=>null!=u?D.default.getChannel(u.channel_id):null,[u]),h=null==u?void 0:u.guild_id,E=(0,eg.useUsernameHook)(r,c,i.guild_id),p=s.useCallback(()=>{null!=m&&null!=h&&(0,d.watchStreamAndTransitionToStream)({streamType:eT.StreamTypes.GUILD,ownerId:o,channelId:m.id,guildId:h})},[o,m,h]);return null!=u&&null!=m&&null!=u.guild_id?(0,a.jsx)(Q.default,{message:t,compact:n,channel:m,playingActivity:f,onJoinStream:p,usernameHook:E}):null},[eI.MessageTypes.GUILD_DISCOVERY_DISQUALIFIED]:function(e){let{message:t,compact:n}=e,s=t.getChannelId(),i=(0,l.useStateFromStores)([D.default],()=>D.default.getChannel(s),[s]),r=null!=i?i.getGuildId():null;return(0,a.jsx)(J.UIKitGuildDiscoveryDisqualified,{message:t,compact:n,onClick:()=>{null!=r&&S.default.open(r,eI.GuildSettingsSections.DISCOVERY)}})},[eI.MessageTypes.GUILD_DISCOVERY_REQUALIFIED]:J.UIKitGuildDiscoveryRequalified,[eI.MessageTypes.GUILD_DISCOVERY_GRACE_PERIOD_INITIAL_WARNING]:J.UIKitGuildDiscoveryGracePeriodInitialWarning,[eI.MessageTypes.GUILD_DISCOVERY_GRACE_PERIOD_FINAL_WARNING]:J.UIKitGuildDiscoveryGracePeriodFinalWarning,[eI.MessageTypes.THREAD_CREATED]:function(e){let{message:t,channel:l,compact:o}=e,u=(0,eg.useUsernameHook)(t.author,t.channel_id,l.guild_id),d=s.useCallback(async e=>{var n;let a=null===(n=t.messageReference)||void 0===n?void 0:n.channel_id;if(null!=a){await O.default.loadThread(a);let t=D.default.getChannel(a);null!=t&&(0,L.openThreadSidebarForViewing)(t,e.shiftKey)}},[t]),c=s.useCallback(()=>{(0,i.openModalLazy)(async()=>{let{default:e}=await n.el("33250").then(n.bind(n,"33250"));return t=>(0,a.jsx)(e,{channel:l,...t})})},[l]),f=s.useCallback(e=>{var s;let l=D.default.getChannel(null===(s=t.messageReference)||void 0===s?void 0:s.channel_id);null!=l&&(0,r.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("994827").then(n.bind(n,"994827"));return t=>(0,a.jsx)(e,{...t,channel:l})})},[t]);return(0,a.jsx)(er.default,{message:t,compact:o,usernameHook:u,onClickThread:d,onClickViewThreads:c,onContextMenuThread:f})},[eI.MessageTypes.THREAD_STARTER_MESSAGE]:ed.default,[eI.MessageTypes.GUILD_INVITE_REMINDER]:function(e){let{message:t,channel:n,compact:s}=e,i=(0,l.useStateFromStores)([G.default],()=>G.default.getCurrentUser()),r=(0,l.useStateFromStores)([j.default],()=>{var e,t;return null!==(t=null===(e=j.default.getGuild(n.getGuildId()))||void 0===e?void 0:e.isOwner(i))&&void 0!==t&&t});return(0,a.jsx)($.default,{message:t,compact:s,isOwner:r,channel:n})},[eI.MessageTypes.AUTO_MODERATION_ACTION]:function(e){let{message:t,compact:n,channel:s}=e;return(0,p.isAutomodMessageRecord)(t)?(0,a.jsx)(F.default,{message:t,compact:n,channel:s}):null},[eI.MessageTypes.GUILD_INCIDENT_ALERT_MODE_ENABLED]:eN,[eI.MessageTypes.GUILD_INCIDENT_ALERT_MODE_DISABLED]:eN,[eI.MessageTypes.GUILD_INCIDENT_REPORT_RAID]:function(e){let{message:t,compact:n,channel:s}=e,l=(0,eg.useUsernameHook)(t.author,s.id,s.guild_id);return(0,a.jsx)(q.default,{message:t,compact:n,channel:s,usernameHook:l})},[eI.MessageTypes.GUILD_INCIDENT_REPORT_FALSE_ALARM]:function(e){let{message:t,compact:n,channel:s}=e,l=(0,eg.useUsernameHook)(t.author,s.id,s.guild_id);return(0,a.jsx)(X.default,{message:t,compact:n,channel:s,usernameHook:l})},[eI.MessageTypes.ROLE_SUBSCRIPTION_PURCHASE]:I.default,[eI.MessageTypes.PURCHASE_NOTIFICATION]:function(e){var t;let{message:n,channel:s,compact:l}=e;return(null===(t=n.purchaseNotification)||void 0===t?void 0:t.type)===c.PurchaseNotificationType.GUILD_PRODUCT?(0,a.jsx)(g.default,{message:n,channel:s,compact:l}):null},[eI.MessageTypes.INTERACTION_PREMIUM_UPSELL]:void 0,[eI.MessageTypes.STAGE_START]:function(e){let{message:t,channel:n,compact:s}=e,i=(0,eg.useUsernameHook)(t.author,n.id,n.guild_id),r=(0,l.useStateFromStores)([T.default],()=>T.default.getActiveEventByChannel(n.id),[n.id]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el.default,{message:t,compact:s,usernameHook:i}),null!=r&&r.name===t.content?(0,a.jsx)(C.default,{code:"".concat(n.guild_id,"-").concat(r.id)}):null]})},[eI.MessageTypes.STAGE_END]:function(e){let{message:t,channel:n,compact:s}=e,l=(0,eg.useUsernameHook)(t.author,n.id,n.guild_id);return(0,a.jsx)(en.default,{message:t,compact:s,usernameHook:l})},[eI.MessageTypes.STAGE_SPEAKER]:function(e){let{message:t,channel:n,compact:s}=e,l=(0,eg.useUsernameHook)(t.author,n.id,n.guild_id);return(0,a.jsx)(es.default,{message:t,compact:s,usernameHook:l})},[eI.MessageTypes.STAGE_RAISE_HAND]:function(e){var t,n;let{message:s,channel:r,compact:u}=e,d=(0,eg.useUsernameHook)(s.author,r.id,r.guild_id),c=(0,l.useStateFromStores)([b.default],()=>b.default.can(eI.Permissions.MUTE_MEMBERS,r)),f=(0,l.useStateFromStores)([v.default],()=>v.default.getParticipant(r.id,s.author.id)),m=new Date(ep.default.extractTimestamp(s.id)).toISOString()===new Date(null!==(n=null==f?void 0:null===(t=f.voiceState)||void 0===t?void 0:t.requestToSpeakTimestamp)&&void 0!==n?n:0).toISOString(),h=c&&(null==f?void 0:f.rtsState)===x.RequestToSpeakStates.REQUESTED_TO_SPEAK&&m;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea.default,{message:s,compact:u,usernameHook:d}),h?(0,a.jsxs)(i.Button,{wrapperClassName:eS.inviteToSpeakButtonWrapper,innerClassName:eS.inviteToSpeakButtonInner,look:i.Button.Looks.FILLED,color:i.Button.Colors.PRIMARY,onClick:()=>{(0,M.setUserSuppress)(r,s.author.id,!1),o.default.deleteMessage(r.id,s.id,!0)},children:[(0,a.jsx)(w.default,{height:20,width:20}),eC.default.Messages.REQUEST_TO_SPEAK_ACCEPT]}):null]})},[eI.MessageTypes.STAGE_TOPIC]:function(e){let{message:t,channel:n,compact:s}=e,l=(0,eg.useUsernameHook)(t.author,n.id,n.guild_id);return(0,a.jsx)(ei.default,{message:t,compact:s,usernameHook:l})},[eI.MessageTypes.GUILD_APPLICATION_PREMIUM_SUBSCRIPTION]:f.default,[eI.MessageTypes.PRIVATE_CHANNEL_INTEGRATION_ADDED]:A.PrivateChannelIntegrationAddedSystemMessage,[eI.MessageTypes.PRIVATE_CHANNEL_INTEGRATION_REMOVED]:A.PrivateChannelIntegrationRemovedSystemMessage,[eI.MessageTypes.PREMIUM_REFERRAL]:void 0,[eI.MessageTypes.GUILD_DEADCHAT_REVIVE_PROMPT]:function(e){let{message:t,channel:n,compact:s}=e;return(0,a.jsx)(h.default,{message:t,channel:n,compact:s})},[eI.MessageTypes.CUSTOM_GIFT]:void 0,[eI.MessageTypes.GUILD_GAMING_STATS_PROMPT]:function(e){let{message:t,channel:n,compact:s}=e;return(0,a.jsx)(m.default,{message:t,channel:n,compact:s})}});var ev=s.memo(function(e){let{message:t,channel:n,compact:s}=e,{type:l}=t,i=eM[l];if(null==i){var r;return r=Error("unknown message type ".concat(t.type)),eE.default.captureException(r),new(0,E.default)("SystemMessage").error("",r),null}return(0,a.jsx)(H.default,{message:t,content:(0,e_.default)(t).content,children:(0,a.jsx)(i,{message:t,channel:n,compact:s})})})},909917:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n("37983");n("884691");var s=n("627445"),l=n.n(s),i=n("246060"),r=n("730541"),o=n("407972"),u=n("981601"),d=n("42203"),c=n("25116");function f(e,t){if((0,r.isPublicSystemMessage)(t))return(0,a.jsx)(o.default,{});if((0,c.default)(t)){let{guild_id:e,channel_id:n,message_id:s}=t.messageReference;if(null!=e)return(0,a.jsx)(i.default,{guildId:e,channelId:n,messageId:s})}if(null!=t.interaction&&"SENDING"===t.state)return(0,a.jsx)(a.Fragment,{});let n=d.default.getChannel(t.channel_id);return l(null!=n,"renderUserGuildPopout: channel should never be null"),(0,a.jsx)(u.default,{...e,channelId:t.channel_id,guildId:n.guild_id,userId:t.author.id,user:null!=t.webhookId?t.author:void 0})}},380986:function(e,t,n){"use strict";n.r(t),n.d(t,{useClickMessageAuthorUsername:function(){return v},useClickReferencedMessageAuthorUsername:function(){return x},useClickInteractionUserUsername:function(){return O},useClickMessageAuthorAvatar:function(){return R},useClickReferencedMessageAuthorAvatar:function(){return y},useClickInteractionUserAvatar:function(){return P},useContextMenuMessage:function(){return D},useContextMenuUser:function(){return j},useContextMenuModerateUser:function(){return b},useContextMenuRaidAlert:function(){return U},useClickMessage:function(){return B},useHoveredMessage:function(){return G},useFocusInside:function(){return k},useClickReply:function(){return w},useClickInteractionCommandName:function(){return H}}),n("702976"),n("222007");var a=n("37983"),s=n("884691"),l=n("404118"),i=n("272030"),r=n("819689"),o=n("352674"),u=n("244201"),d=n("42203"),c=n("836417"),f=n("377253"),m=n("697218"),h=n("659500"),E=n("791776"),p=n("568734"),_=n("773336"),g=n("158998"),I=n("441823"),T=n("913491"),C=n("456936"),S=n("49111"),A=n("782340");function N(e,t,n){return s.useCallback(()=>{n({[e]:!t})},[e,n,t])}function M(e,t,n){return s.useCallback(a=>{let s=m.default.getUser(e);if(null==s)return;if(a.preventDefault(),a.stopPropagation(),!a.shiftKey){n();return}let l="@".concat(g.default.getUserTag(s,{decoration:"never"})),i="<@".concat(e,">");h.ComponentDispatch.dispatchToLastSubscribed(S.ComponentActions.INSERT_TEXT,{plainText:l,rawText:i}),o.default.startTyping(t)},[e,t,n])}function v(e,t,n,a){let s=N("usernameProfile",n,a);return M(e.author.id,t.id,s)}function x(e,t,n,a){let s=N("referencedUsernameProfile",n,a);return M(null==e?void 0:e.author.id,t.id,s)}function O(e,t,n,a){let s=N("interactionUsernameProfile",n,a);return M(null==e?void 0:e.user.id,t.id,s)}function L(e){return s.useCallback(t=>{t.preventDefault(),t.stopPropagation(),e()},[e])}function R(e,t){let n=N("avatarProfile",e,t);return L(n)}function y(e,t){let n=N("referencedAvatarProfile",e,t);return L(n)}function P(e,t){let n=N("interactionAvatarProfile",e,t);return L(n)}function D(e,t,l,r){let{id:o}=t,{id:m,flags:h}=e,E=(0,p.hasFlag)(h,S.MessageFlags.EPHEMERAL),g=(0,T.default)(e),I=(0,u.useAppContext)();return s.useCallback((e,t)=>{if(E)return;if(!_.isPlatformEmbedded){let t=e.target;if("A"===t.tagName&&""!==t.textContent||null==window.getSelection)return;let n=window.getSelection();if(null!=n&&!n.isCollapsed&&(n.focusNode===e.target||t.contains(n.focusNode)))return}let s=d.default.getChannel(o),u=f.default.getMessage(o,m),h=c.default.isEditing(o,m);null!=s&&null!=u&&!h&&(l({contextMenu:!0}),(0,i.openContextMenuLazy)(e,async()=>{if(g){let{default:e}=await n.el("385065").then(n.bind(n,"385065"));return n=>(0,a.jsx)(e,{...n,message:u,channel:s,attachment:t})}{let{default:e}=await n.el("261649").then(n.bind(n,"261649"));return n=>(0,a.jsx)(e,{...n,message:u,channel:s,attachment:t,shouldHideMediaOptions:r})}},{onClose:()=>l({contextMenu:!1}),context:I}))},[E,o,m,l,I,g,r])}function j(e,t){return s.useCallback(n=>{let a=m.default.getUser(e),s=d.default.getChannel(t);null!=a&&null!=s&&(n.stopPropagation(),(0,I.openUserContextMenu)(n,a,s))},[e,t])}function b(e,t,n){return s.useCallback(a=>{let s=m.default.getUser(e),l=d.default.getChannel(t);null!=s&&null!=l&&(a.stopPropagation(),(0,I.openModerateUserContextMenu)(a,{user:s,channel:l,moderationAlertId:n}))},[e,t,n])}function U(e,t){return s.useCallback(n=>{let a=m.default.getUser(e),s=d.default.getChannel(t);null!=a&&null!=s&&(n.stopPropagation(),(0,I.openModerationRaidContextMenu)(n,a,s.guild_id))},[e,t])}function B(e,t){let{id:n}=e,{id:a}=t;return s.useCallback(e=>{e.altKey&&(e.preventDefault(),(0,C.default)(a,n))},[a,n])}function G(e,t,n){let a="".concat(e,":").concat(t),l=s.useRef(n),[i,r]=s.useState(n);l.current=i||l.current;let o=s.useCallback(()=>{!i&&(h.ComponentDispatch.dispatchKeyed(S.ComponentActionsKeyed.ANIMATE_CHAT_AVATAR,a,!0),r(!0))},[i,a]),u=s.useCallback(()=>{h.ComponentDispatch.dispatchKeyed(S.ComponentActionsKeyed.ANIMATE_CHAT_AVATAR,a,!1),r(!1)},[a]);return{hasHovered:l.current,isHovered:i,handleMouseEnter:o,handleMouseLeave:u}}function k(e,t){let[n,a]=s.useState(!1),[l,i]=s.useState(!1),r=s.useCallback(t=>{var n,s;let l=null!==(s=null===(n=(0,E.eventOwnerDocument)(t))||void 0===n?void 0:n.activeElement)&&void 0!==s?s:null;(t.target===t.currentTarget||t.currentTarget.contains(l))&&(i(!0),a(!0)),null!=e&&e(t)},[e]),o=s.useCallback(e=>{var n,s;let l=null!==(s=null===(n=(0,E.eventOwnerDocument)(e))||void 0===n?void 0:n.activeElement)&&void 0!==s?s:null;(e.target===e.currentTarget||!e.currentTarget.contains(l))&&a(!1),null!=t&&t(e)},[t]);return{handleFocus:r,handleBlur:o,isFocused:n,hasFocused:l}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s.useCallback(()=>{null!=t&&(n?l.default.show({title:A.default.Messages.UNBLOCK_TO_JUMP_TITLE,body:A.default.Messages.UNBLOCK_TO_JUMP_BODY.format({name:t.author.username}),confirmText:A.default.Messages.OKAY}):r.default.jumpToMessage({channelId:t.channel_id,messageId:t.id,flash:!0,returnMessageId:e.id}))},[n,e.id,t])}function H(e,t){let n=N("interactionData",e,t);return s.useCallback(e=>{e.preventDefault(),e.stopPropagation(),n()},[n])}},969706:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n("222007");var a=n("884691"),s=n("659500"),l=n("49111");function i(e){return Object.keys(e).some(t=>e[t])}function r(e,t){let[n,r]=a.useState(t),[o,u]=a.useState(i(n)),d=a.useRef(o),c=a.useRef(null),f=a.useCallback(e=>{r(t=>{let n={...t,...e},a=i(n);return a!==d.current&&(d.current=a,null!=c.current&&(cancelAnimationFrame(c.current),c.current=null),a?u(!0):c.current=requestAnimationFrame(()=>u(!1))),n})},[]);return a.useEffect(()=>{let t=e=>{let{emojiPicker:t,emojiBurstPicker:n}=e;return f({emojiPicker:t,emojiBurstPicker:n})};return s.ComponentDispatch.subscribeKeyed(l.ComponentActionsKeyed.TOGGLE_REACTION_POPOUT,e,t),()=>void s.ComponentDispatch.unsubscribeKeyed(l.ComponentActionsKeyed.TOGGLE_REACTION_POPOUT,e,t)},[e,f]),{popouts:n,setPopout:f,selected:o}}},68480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("884691"),s=n("298386"),l=n("446674"),i=n("811425"),r=n("305961"),o=n("333363"),u=n("596512"),d=n("49111");function c(e){var t,n;let{message:c,channel:f,enabled:m=!0}=e,h=(0,l.useStateFromStores)([r.default],()=>{var e;let t=r.default.getGuild(f.guild_id);return null!==(e=null==t?void 0:t.hasFeature(d.GuildFeatures.COMMUNITY))&&void 0!==e&&e},[f.guild_id]),E=(null===(t=c.messageReference)||void 0===t?void 0:t.guild_id)!=null&&null!=c.webhookId&&c.hasFlag(d.MessageFlags.IS_CROSSPOST)&&null!=f.guild_id,p=f.type===s.ChannelTypes.GUILD_ANNOUNCEMENT&&h,_=!c.hasFlag(d.MessageFlags.EPHEMERAL)&&(E||p),g=E&&null!=c.messageReference?c.messageReference.message_id:c.id,I=E&&null!=c.messageReference?c.messageReference.channel_id:f.id,T=E&&(null===(n=c.messageReference)||void 0===n?void 0:n.guild_id)!=null?c.messageReference.guild_id:f.guild_id,C=a.useCallback(e=>{e?u.default.handleMessageBecameVisible({messageId:g,channelId:f.id,guildId:f.guild_id,sourceChannelId:I,sourceGuildId:T}):u.default.handleMessageLostVisibility(g)},[g,f.id,f.guild_id,I,T]),S=o.default.useExperiment({location:"836a4b_1"},{disable:!_||!m,autoTrackExposure:!0}).enabled,A=(0,i.useIsVisible)(C,0,S);return a.useEffect(()=>()=>{u.default.handleMessageLostVisibility(g)},[g]),A}},430625:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}}),n("424973"),n("222007"),n("881410");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("627445"),o=n.n(r),u=n("446674"),d=n("769846"),c=n("77078"),f=n("970728"),m=n("191225"),h=n("969380"),E=n("817039"),p=n("812204"),_=n("685665"),g=n("442939"),I=n("419830"),T=n("813006"),C=n("42203"),S=n("305961"),A=n("957255"),N=n("697218"),M=n("174622"),v=n("98292"),x=n("811305"),O=n("159885"),L=n("793079"),R=n("49111"),y=n("91366"),P=n("782340"),D=n("420515");let j=(0,O.cssValueToNumber)(d.default.EMBEDDED_APPLICATION_INVITE_IMAGE_WIDTH_LARGE),b=(0,O.cssValueToNumber)(d.default.EMBEDDED_APPLICATION_INVITE_IMAGE_WIDTH_SMALL),U=(0,O.cssValueToNumber)(d.default.EMBEDDED_APPLICATION_INVITE_CONTENT_WIDTH);function B(e){let{members:t,membersOnline:n,isLarge:s,isStacked:l}=e,r=[];return null!=n&&n>0&&r.push((0,a.jsxs)("div",{className:D.statusWrapper,children:[(0,a.jsx)("i",{className:D.statusOnline}),(0,a.jsx)(c.Text,{variant:"text-xs/normal",className:D.count,children:P.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_ONLINE.format({membersOnline:n})})]},"onlineCount")),null!=t&&r.push((0,a.jsxs)("div",{className:D.statusWrapper,children:[(0,a.jsx)("i",{className:D.statusOffline}),(0,a.jsx)(c.Text,{variant:"text-xs/normal",className:D.count,children:P.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_TOTAL.format({count:t})})]},"memberCount")),(0,a.jsx)("div",{className:i(D.statusCounts,{[D.large]:s,[D.stacked]:l}),children:r})}function G(e){let{channel:t,guild:n,isStacked:s,hasEnded:l}=e;if(null!=t&&null!=n){let e=(0,I.getChannelIconComponent)(t,n);return(0,a.jsxs)("div",{className:i(D.channel,{[D.stacked]:s,[D.ended]:l}),children:[null!=e?(0,a.jsx)(e,{className:D.channelIcon,width:16,height:16}):null,(0,a.jsx)(v.default,{children:(0,a.jsx)(c.Text,{variant:"text-xs/normal",children:P.default.Messages.EMBEDDED_ACTIVITIES_INVITE_CHANNEL_IN_SERVER.format({channelName:t.name,serverName:n.name})})})]})}return null!=n?(0,a.jsx)("div",{className:i(D.channel,{[D.stacked]:s,[D.ended]:l}),children:(0,a.jsx)(v.default,{children:(0,a.jsx)(c.Text,{variant:"text-xs/normal",children:P.default.Messages.INVITE_BUTTON_STREAMING_SUBTEXT.format({guildName:n.name})})})}):null}function k(e){var t,n;let l,r,{invite:d,getAcceptInviteContext:I}=e,{approximate_member_count:v,approximate_presence_count:O,target_type:k,target_application:w}=d;o(k===y.InviteTargetTypes.EMBEDDED_APPLICATION&&null!=w,"invalid application invite");let H=s.useRef(null),[F,V]=s.useState(!1),[Y,W]=s.useState(!1);s.useEffect(()=>{let e=new ResizeObserver(()=>(function(){var e;let t=null===(e=H.current)||void 0===e?void 0:e.offsetWidth;null!=t&&(V(t<U+b),W(t<=2*j))})()),t=H.current;return null!=t&&e.observe(t),()=>{e.disconnect()}},[H,V,W]);let K=(0,u.useStateFromStores)([S.default],()=>null!=d.guild?S.default.getGuild(d.guild.id):null,[d]),z=(0,g.default)([w.id])[0],Z=(0,u.useStateFromStores)([m.default],()=>{var e;return(null==d?void 0:d.channel)!=null&&(null===(e=m.default.getSelfEmbeddedActivityForChannel(d.channel.id))||void 0===e?void 0:e.application_id)===w.id}),J=(0,u.useStateFromStores)([m.default],()=>{var e;let t=(null===(e=d.channel)||void 0===e?void 0:e.id)!=null?m.default.getEmbeddedActivitiesForChannel(d.channel.id):[];return t.some(e=>{let{application_id:t}=e;return w.id===t})}),X=C.default.getChannel(null===(t=d.channel)||void 0===t?void 0:t.id),q=(0,u.useStateFromStores)([A.default],()=>null!=X&&A.default.can(R.Permissions.USE_EMBEDDED_ACTIVITIES,X),[X]),{analyticsLocations:Q}=(0,_.default)(p.default.INVITE_EMBED),$=(0,h.default)({applicationId:w.id,size:j}),ee=(0,u.useStateFromStoresArray)([m.default],()=>null!=X?m.default.getEmbeddedActivitiesForChannel(X.id).filter(e=>e.application_id===w.id).flatMap(e=>Array.from(e.connections.keys())):[],[X,w.id]),et=(0,u.useStateFromStoresArray)([N.default],()=>ee.map(e=>N.default.getUser(e)),[ee]),en=d.state===R.InviteStates.ACCEPTING,ea=null!=K;if(null==K){if(null==d.guild)return(0,a.jsx)(L.default,{});K=new T.default(d.guild)}let es=ea&&!q||ea&&Z,el=()=>{f.default.acceptInviteAndTransitionToInviteChannel({inviteKey:d.code,context:I("Invite Button Embed"),analyticsLocations:Q})};return(ea&&Z&&(l=P.default.Messages.EMBEDDED_ACTIVITIES_ALREADY_IN_ACTIVITY),!q&&(l=P.default.Messages.EMBEDDED_ACTIVITIES_INVALID_PERMISSIONS),r=Z?P.default.Messages.INVITE_EMBED_JOINED:J||!ea?P.default.Messages.JOIN:P.default.Messages.START,null==d.code||""===d.code)?null:(0,a.jsxs)("div",{className:D.container,ref:H,children:[(0,a.jsx)("div",{className:i(D.imgContainer,{[D.large]:F,[D.stacked]:Y}),children:(0,a.jsx)(E.default,{imageBackground:$,applicationName:null!==(n=null==z?void 0:z.name)&&void 0!==n?n:"",imageClassName:i(D.img,{[D.large]:F,[D.stacked]:Y}),imageNotFoundClassName:i(D.brokenImg,{[D.large]:F,[D.stacked]:Y})})}),(0,a.jsxs)(M.default,{className:i(D.content,{[D.large]:F,[D.stacked]:Y}),children:[(0,a.jsxs)("div",{className:D.info,children:[(0,a.jsx)(c.FormTitle,{children:ea?P.default.Messages.EMBEDDED_ACTIVITIES_EMBED_TITLE_INVITED_TO_JOIN:P.default.Messages.INVITE_BUTTON_TITLE_INVITED}),(0,a.jsx)(c.Heading,{className:D.heading,variant:"heading-xl/semibold",children:null==z?void 0:z.name}),(0,a.jsx)(G,{channel:X,guild:K,isStacked:Y,hasEnded:!J})]}),(0,a.jsxs)("div",{className:i(D.currentState,{[D.large]:F,[D.split]:!J&&Y}),children:[!J&&ea?(0,a.jsxs)("div",{className:i(D.endedNote,{[D.large]:F}),children:[(0,a.jsx)(c.Text,{variant:"text-xs/medium",children:P.default.Messages.EMBEDDED_ACTIVITIES_EMBED_ENDED}),(0,a.jsx)(c.Text,{variant:"text-xs/medium",children:P.default.Messages.EMBEDDED_ACTIVITIES_EMBED_START})]}):null,ea?null:(0,a.jsx)(B,{members:v,membersOnline:O,isLarge:F,isStacked:Y}),(0,a.jsxs)("div",{className:D.cta,children:[null!=K&&J?(0,a.jsx)("div",{className:D.avatars,children:(0,a.jsx)(x.default,{guildId:K.id,users:et,max:4})}):null,(0,a.jsx)(c.Tooltip,{text:l,children:e=>{let{onClick:t,...n}=e;return(0,a.jsx)(c.Button,{className:D.actionButton,onClick:()=>{el(),null==t||t()},wrapperClassName:D.tooltipButtonWrapper,...n,submitting:en,disabled:es,color:c.ButtonColors.GREEN,children:r})}})]})]})]})]})}},740589:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var s=n("446674"),l=n("271938"),i=n("174622"),r=n("883029"),o=n("782340");function u(e){var t,n;let{author:u,inviteError:d}=e,c=(0,s.useStateFromStores)([l.default],()=>l.default.getId()),f=c===u.id,m=f?o.default.Messages.INVITE_BUTTON_TITLE_INVITER_INVALID:o.default.Messages.INVITE_BUTTON_TITLE_INVITED_INVALID,h=(0,r.getDescriptiveInviteError)(null==d?void 0:d.code);return(0,a.jsxs)(i.default,{children:[(0,a.jsx)(i.default.Header,{text:m}),(0,a.jsxs)(i.default.Body,{children:[(0,a.jsx)(i.default.Icon,{expired:!0}),(0,a.jsx)(i.default.Info,{expired:!0,title:null!==(t=null==h?void 0:h.title)&&void 0!==t?t:o.default.Messages.INVITE_BUTTON_INVALID,children:null!==(n=null==h?void 0:h.description)&&void 0!==n?n:null==d?void 0:d.message})]})]})}},472315:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n("37983"),s=n("884691"),l=n("446674"),i=n("450911"),r=n("970728"),o=n("766274"),u=n("271938"),d=n("42203"),c=n("27618"),f=n("174622"),m=n("158998"),h=n("49111"),E=n("782340"),p=n("18978");function _(e){var t;let{invite:n,getAcceptInviteContext:_}=e,g=(0,l.useStateFromStores)([u.default],()=>u.default.getId()),I=(null===(t=n.inviter)||void 0===t?void 0:t.id)===g,T=n.state===h.InviteStates.ACCEPTING,C=(0,l.useStateFromStores)([c.default],()=>{var e;return null!=n.inviter&&c.default.isFriend(null===(e=n.inviter)||void 0===e?void 0:e.id)}),S=s.useCallback(()=>{if(null!=n.inviter){let e=d.default.getDMFromUserId(n.inviter.id);null!=e&&i.default.openPrivateChannel([n.inviter.id])}},[n.inviter]),A=s.useCallback(()=>{let e=_("Invite Button Embed");r.default.acceptInviteAndTransitionToInviteChannel({inviteKey:n.code,context:e})},[n.code,_]);if(null==n.inviter)return null;let N=C?S:A,M=E.default.Messages.INVITE_BUTTON_ADD_FRIEND,v=f.default.Button.Colors.GREEN;C?(M=E.default.Messages.INVITE_BUTTON_ALREADY_FRIENDS,v=f.default.Button.Colors.PRIMARY):I&&(M=E.default.Messages.INVITE_BUTTON_ADD_FRIEND,v=f.default.Button.Colors.PRIMARY);let x=I?E.default.Messages.INVITE_BUTTON_TITLE_INVITER_FRIEND:E.default.Messages.INVITE_BUTTON_TITLE_INVITED_FRIEND,O=null!=n.inviter?"".concat(n.inviter.username):"",L=null!=n.inviter?m.default.getUserTag(n.inviter):"";return(0,a.jsxs)(f.default,{children:[(0,a.jsx)(f.default.Header,{text:x}),(0,a.jsxs)(f.default.Body,{children:[(0,a.jsxs)("div",{className:p.headerLine,children:[(0,a.jsx)(f.default.Icon,{user:new o.default(n.inviter),onClick:C?N:void 0}),(0,a.jsx)(f.default.Info,{title:O,onClick:C?N:void 0,children:L})]}),(0,a.jsx)(f.default.Button,{onClick:N,submitting:T,isDisabled:I,color:v,children:M})]})]})}},783940:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}}),n("808653"),n("424973");var a=n("37983");n("884691");var s=n("627445"),l=n.n(s),i=n("446674"),r=n("233069"),o=n("42203"),u=n("697218"),d=n("174622"),c=n("449008"),f=n("793079"),m=n("49111"),h=n("782340"),E=n("18978");function p(e){let t,{invite:n,author:s,currentUserId:p,onTransitionToInviteChannel:_,onAcceptInstantInvite:g}=e,I=p===s.id,T=n.state===m.InviteStates.ACCEPTING,C=(0,i.useStateFromStores)([o.default],()=>null!=n.channel?o.default.getChannel(n.channel.id):null,[n]);l(null==C||C.isPrivate(),"must be a private channel");let S=null!=C;if(null==C){if(null==n.channel)return(0,a.jsx)(f.default,{});C=(0,r.createChannelRecordFromInvite)(n.channel),t=null!=n.channel&&null!=n.channel.recipients?n.channel.recipients:[]}else{t=C.recipients.reduce((e,t)=>{let n=u.default.getUser(t);return null!=n&&e.push(n),e},[]);let e=u.default.getCurrentUser();S&&null!=e&&t.push(e)}let A=C.name;(null==A||""===A)&&(A=t.length>0?t.filter(c.isNotNullish).map(e=>e.username).join(", "):h.default.Messages.UNNAMED);let N=S?_:g,M=h.default.Messages.JOIN_GUILD,v=d.default.Button.Colors.GREEN;S&&(M=h.default.Messages.JOINED_GUILD,v=d.default.Button.Colors.PRIMARY);let x=h.default.Messages.INVITE_BUTTON_TITLE_INVITED_GROUP_DM;return I&&(x=h.default.Messages.INVITE_BUTTON_TITLE_INVITER_GROUP_DM),(0,a.jsxs)(d.default,{children:[(0,a.jsx)(d.default.Header,{text:x}),(0,a.jsxs)(d.default.Body,{children:[(0,a.jsxs)("div",{className:E.headerLine,children:[(0,a.jsx)(d.default.Icon,{channel:C,onClick:S?N:void 0}),(0,a.jsx)(d.default.Info,{title:A,onClick:S?N:void 0,children:(0,a.jsx)(d.default.Data,{members:t.length})})]}),(0,a.jsx)(d.default.Button,{onClick:N,submitting:T,isDisabled:S,color:v,children:M})]})]})}},530078:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}}),n("702976");var a=n("37983");n("884691");var s=n("498574"),l=n("77078"),i=n("974755"),r=n("233069"),o=n("174622"),u=n("266926"),d=n("568734"),c=n("427459"),f=n("665618"),m=n("605953"),h=n("793079"),E=n("49111"),p=n("782340"),_=n("18978");function g(e){var t,g;let I,T,C,{onTransitionToInviteChannel:S,onAcceptInstantInvite:A,guild:N,invite:M,author:v,currentUserId:x}=e,O=x===v.id,{channel:L,approximate_member_count:R,approximate_presence_count:y}=M,P=M.state===E.InviteStates.ACCEPTING,D=null!=L?(0,r.createChannelRecordFromInvite)(L):null,j=null!=N,b=null!=D,U=null!=D&&D.isGuildVocal(),B=null!=D&&D.isGuildStageVoice(),G=(0,d.hasFlag)(null!==(t=M.flags)&&void 0!==t?t:0,s.GuildInviteFlags.IS_GUEST_INVITE),k=null!==(g=null==N?void 0:N.hasFeature(E.GuildFeatures.HUB))&&void 0!==g&&g;if(null==N){if(null==M.guild)return(0,a.jsx)(h.default,{});N=f.fromInviteGuild(M.guild);let e=(0,c.getGuildTierFromAppliedBoostCount)(M.guild.premium_subscription_count,M.guild.id);N.premiumTier=e}let w=j?S:A,H=(0,m.getHeaderTextForInvite)({isVoiceChannel:U,isOwnInvite:O,isGuest:G,isHubGuild:k,isStage:B,isStream:!1});return T=(0,a.jsxs)("span",{className:_.infoTitle,children:[(0,a.jsx)(o.default.GuildName,{guild:N}),(0,a.jsx)("span",{className:_.infoBadge,children:(0,a.jsx)(i.default,{guild:N,isBannerVisible:!1,disableBoostClick:!0})})]}),G&&(C=(0,a.jsx)(l.TooltipContainer,{className:_.tooltipContainer,text:p.default.Messages.GUEST_MEMBERSHIP_EXPLANATION,children:(0,a.jsx)(u.default,{className:_.infoIcon})})),U?(T=(0,a.jsx)(o.default.Channel,{channel:D}),I=(0,a.jsxs)("span",{className:_.infoTitle,children:[p.default.Messages.INVITE_BUTTON_BODY_IN_GUILD.format({guildName:N.name}),(0,a.jsx)("span",{className:_.infoBadge,children:(0,a.jsx)(i.default,{guild:N,isBannerVisible:!1})})]})):null!=R&&R>=5||null!=y&&y>0?I=(0,a.jsx)(o.default.Data,{members:R,membersOnline:y}):b&&(I=(0,a.jsx)(o.default.Channel,{channel:D,guild:N})),(0,a.jsxs)(o.default,{children:[(0,a.jsx)(o.default.GuildSplash,{guild:N}),(0,a.jsx)(o.default.Header,{text:H,extra:C}),(0,a.jsxs)(o.default.Body,{children:[(0,a.jsxs)("div",{className:_.headerLine,children:[(0,a.jsx)(o.default.Icon,{guild:N}),(0,a.jsx)(o.default.Info,{title:T,onClick:j?w:null,children:I})]}),(0,a.jsx)(o.default.Button,{onClick:w,submitting:P,color:o.default.Button.Colors.GREEN,children:U?B?p.default.Messages.STAGE_CHANNEL_JOIN:p.default.Messages.INVITE_VOICE_CHANNEL_JOIN:j?p.default.Messages.JOINED_GUILD:p.default.Messages.JOIN_GUILD})]}),N.hasFeature(E.GuildFeatures.HUB)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:_.separator}),(0,a.jsx)(l.Text,{variant:"text-sm/normal",color:"header-secondary",children:p.default.Messages.HUB_INVITE_ANOTHER_SCHOOL_LINK.format({onClick:()=>(0,l.openModalLazy)(async()=>{let{default:e}=await n.el("927475").then(n.bind(n,"927475"));return t=>(0,a.jsx)(e,{...t})})})})]})]})}},649112:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n("37983");n("884691");var s=n("446674"),l=n("352674"),i=n("271938"),r=n("18494"),o=n("174622"),u=n("659500"),d=n("158998"),c=n("49111"),f=n("782340"),m=n("18978");function h(e){let t,n,h,{author:E,banned:p}=e,_=(0,s.useStateFromStores)([i.default],()=>i.default.getId()),g=(0,s.useStateFromStores)([r.default],()=>r.default.getChannelId()),I=d.default.useName(E),T=_===E.id;return T?(t=f.default.Messages.INVITE_BUTTON_INVALID_OWNER,h=f.default.Messages.INVITE_BUTTON_TITLE_INVITER_INVALID):(h=f.default.Messages.INVITE_BUTTON_TITLE_INVITED_INVALID,p?t=f.default.Messages.INSTANT_INVITE_BANNED_INFO:null!=I?(t=f.default.Messages.INSTANT_INVITE_ASK_USER_FOR_NEW_INVITE.format({username:I}),n=(0,a.jsx)(o.default.Button,{onClick:function(){let{id:e}=E,t="@".concat(d.default.getUserTag(E,{decoration:"never"}));u.ComponentDispatch.dispatchToLastSubscribed(c.ComponentActions.INSERT_TEXT,{plainText:t,rawText:"<@".concat(e,">")}),null!=g&&l.default.startTyping(g)},children:f.default.Messages.MENTION})):t=f.default.Messages.INSTANT_INVITE_ASK_FOR_NEW_INVITE),(0,a.jsxs)(o.default,{children:[(0,a.jsx)(o.default.Header,{text:h}),(0,a.jsxs)(o.default.Body,{children:[(0,a.jsxs)("div",{className:m.headerLine,children:[(0,a.jsx)(o.default.Icon,{expired:!0}),(0,a.jsx)(o.default.Info,{expired:!0,title:f.default.Messages.INVITE_BUTTON_INVALID,children:t})]}),n]})]})}},793079:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var s=n("174622"),l=n("782340");function i(){return(0,a.jsxs)(s.default,{children:[(0,a.jsx)(s.default.Header,{text:l.default.Messages.INVITE_BUTTON_RESOLVING}),(0,a.jsx)(s.default.Body,{resolving:!0})]})}},135666:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var s=n("534438"),l=n("174622"),i=e=>{let{stageInstance:t,guild:n,isMember:i,onTransitionToInviteChannel:r,onAcceptInstantInvite:o}=e;return(0,a.jsx)(l.default,{children:(0,a.jsx)(s.default,{isEmbed:!0,stageInstance:t,guild:n,onClick:i?r:o})})}},158783:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n("37983");n("884691");var s=n("627445"),l=n.n(s),i=n("446674"),r=n("233069"),o=n("813006"),u=n("373469"),d=n("162771"),c=n("174622"),f=n("793079"),m=n("49111"),h=n("91366"),E=n("782340"),p=n("18978");function _(e){let t,n,s,{invite:_,currentUserId:g,guild:I,onTransitionToInviteChannel:T,onAcceptInstantInvite:C}=e,S=null==I?void 0:I.id,A=(0,i.useStateFromStores)([d.default],()=>d.default.getGuildId()),N=(0,i.useStateFromStores)([u.default],()=>null!=_&&null!=_.target_user?u.default.getActiveStreamForUser(_.target_user.id,S):null,[_,S]),M=(0,i.useStateFromStores)([u.default],()=>null!=_&&null!=_.target_user?u.default.getStreamForUser(_.target_user.id,S):null,[_,S]),v=null!=_&&_.target_type===h.InviteTargetTypes.STREAM&&null!=_.target_user&&null!=N,x=null!=_&&null!=M&&null!=_.channel&&null!=_.guild&&M.channelId===_.channel.id&&M.guildId===_.guild.id;l(null!=_,"Invite cannot be null");let{target_type:O,target_user:L}=_;l(O===h.InviteTargetTypes.STREAM&&null!=L,"invalid streaming invite");let R=g===L.id,y=_.state===m.InviteStates.ACCEPTING,P=null!=I;if(null==I){if(null==_.guild)return(0,a.jsx)(f.default,{});I=new o.default(_.guild)}let D=null!=_.channel?(0,r.createChannelRecordFromInvite)(_.channel):null,j=v?T:C;P&&!x?s=R?E.default.Messages.INVITE_BUTTON_STREAM_ENDED_STREAMER:E.default.Messages.INVITE_BUTTON_STREAM_ENDED.format({name:L.username}):(t=E.default.Messages.WATCH,n=c.default.Button.Colors.GREEN,v&&(t=E.default.Messages.INVITE_BUTTON_STREAM_WATCHING,n=c.default.Button.Colors.PRIMARY),s=R?E.default.Messages.INVITE_BUTTON_STREAMER:E.default.Messages.INVITE_BUTTON_STREAMING.format({name:L.username}));let b=A===I.id&&null!=D?(0,a.jsx)(c.default.Channel,{channel:D}):E.default.Messages.INVITE_BUTTON_STREAMING_SUBTEXT.format({guildName:I.name});return(0,a.jsxs)(c.default,{children:[(0,a.jsx)(c.default.Header,{text:E.default.Messages.INVITE_BUTTON_TITLE_STREAMING}),(0,a.jsxs)(c.default.Body,{children:[(0,a.jsxs)("div",{className:p.headerLine,children:[(0,a.jsx)(c.default.Icon,{guild:I,onClick:P&&x?j:void 0}),(0,a.jsx)(c.default.Info,{title:s,onClick:P&&x?j:void 0,children:b})]}),x?(0,a.jsx)(c.default.Button,{disabled:P&&!x,onClick:j,submitting:y,isDisabled:v&&x,color:n,children:t}):null]})]})}},67541:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983"),s=n("884691"),l=n("987317"),i=n("722525"),r=n("974755"),o=n("18494"),u=n("162771"),d=n("174622"),c=n("599110"),f=n("49111"),m=n("782340"),h=n("18978");function E(e){var t;let{guild:n,channel:E,messageData:p}=e,_=u.default.getGuildId(),g=o.default.getChannelId(_),I=s.useCallback(()=>{var e;c.default.track(f.AnalyticEvents.CHANNEL_LINK_PREVIEW_JOINED,{author_id:null===(e=p.author)||void 0===e?void 0:e.id,link_guild_id:n.id,link_channel_id:E.id,link_channel_type:E.type,guild_id:_,channel_id:g}),(0,i.transitionToChannel)(n.id,E.id),l.default.selectVoiceChannel(E.id)},[null===(t=p.author)||void 0===t?void 0:t.id,n.id,E.id,E.type,_,g]),T=(0,a.jsx)(d.default.Channel,{channel:E});return(0,a.jsx)(d.default,{children:(0,a.jsxs)(d.default.Body,{children:[(0,a.jsxs)("div",{className:h.headerLine,children:[(0,a.jsx)(d.default.Icon,{guild:n}),(0,a.jsx)(d.default.Info,{title:T,onClick:I,children:(0,a.jsxs)("span",{className:h.infoTitle,children:[m.default.Messages.INVITE_BUTTON_BODY_IN_GUILD.format({guildName:n.name}),(0,a.jsx)("span",{className:h.infoBadge,children:(0,a.jsx)(r.default,{guild:n,isBannerVisible:!1})})]})})]}),(0,a.jsx)(d.default.Button,{onClick:I,color:d.default.Button.Colors.GREEN,children:E.isGuildStageVoice()?m.default.Messages.STAGE_CHANNEL_JOIN:m.default.Messages.JOIN_VOICE})]})})}},115859:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i},renderSimpleAccessories:function(){return r}});var a=n("37983");n("884691");var s=n("849197"),l=n("723931");function i(e){let{channelMessageProps:{message:t,channel:n,compact:i=!1},hasSpoilerEmbeds:r,handleContextMenu:o,isInteracting:u,isAutomodBlockedMessage:d,renderThreadAccessory:c,renderComponentAccessory:f,renderSuppressEmbeds:m,showClydeAiEmbeds:h,forceAddReactions:E,className:p}=e;return d?null:(0,a.jsx)(s.default,{message:t,children:(0,a.jsx)(l.default,{className:p,isInteracting:u,message:t,channel:n,compact:i,hasSpoilerEmbeds:r,onAttachmentContextMenu:o,renderThreadAccessory:c,renderComponentAccessory:f,renderSuppressEmbeds:m,showClydeAiEmbeds:h,forceAddReactions:E})})}function r(e,t){let{message:n,channel:s,compact:i=!1,renderThreadAccessory:r,disableReactionCreates:o,disableReactionUpdates:u}=e;return(0,a.jsx)(l.SimpleMessageAccessories,{message:n,channel:s,compact:i,hasSpoilerEmbeds:t,renderThreadAccessory:r,disableReactionCreates:o,disableReactionUpdates:u})}},862451:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var s=n("913491"),l=n("844061");function i(e){let{message:t,channel:n,compact:i}=e;return(0,s.default)(t)?(0,a.jsx)(l.default,{message:t,channel:n,compact:i}):null}},611792:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("446674"),l=n("27618"),i=n("341716");function r(e){let{message:t,channel:n,compact:r}=e,o=(0,s.useStateFromStores)([l.default],()=>null!=t.interaction&&l.default.isBlocked(t.interaction.user.id),[t.interaction]);return(0,a.jsx)(i.default,{message:t,channel:n,compact:r,isInteractionUserBlocked:o})}function o(e,t,n){return null!=e.interaction&&""!==e.interaction.displayName?(0,a.jsx)(r,{message:e,channel:t,compact:n}):null}},554372:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983"),s=n("884691"),l=n("446674"),i=n("256572"),r=n("27618"),o=n("93427"),u=n("95045"),d=n("574073"),c=n("49111");let f=s.memo(function(e){let{baseMessage:t,channel:n,referencedMessage:c,compact:f=!1}=e,m=c.state===i.ReferencedMessageState.LOADED?c.message:void 0,h=s.useMemo(()=>(null==m?void 0:m.content)!=null&&""!==m.content?(0,u.default)(m,{formatInline:!0}).content:null,[m]),E=(0,l.useStateFromStores)([r.default],()=>null!=m&&r.default.isBlocked(m.author.id),[m]),p=(0,d.useNullableMessageAuthor)(m),_=(0,d.useNullableMessageAuthor)(t);return(0,a.jsx)(o.default,{repliedAuthor:p,baseAuthor:_,baseMessage:t,channel:n,referencedMessage:c,content:h,compact:f,isReplyAuthorBlocked:E})});function m(e,t,n,s,l){return e.type!==c.MessageTypes.REPLY||null==n?null:(0,a.jsx)(f,{baseMessage:e,channel:t,referencedMessage:s,compact:l})}},314058:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("862205");let s=(0,a.createExperiment)({id:"2023-06_new_activity_one_time_purchase_modal",label:"New Activity One Time Purchase Modal",kind:"user",defaultConfig:{enabled:!1},treatments:[{id:1,label:"enabled",config:{enabled:!0}}]});var l=s},509167:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var s=n("748820"),l=n("77078"),i=n("112679"),r=n("55689"),o=n("599110"),u=n("49111");function d(e){let{applicationId:t,skuId:d,onClose:c,onComplete:f,analyticsLocations:m,analyticsObject:h,contextKey:E}=e,p=!1,_=(0,s.v4)();(0,l.openModalLazy)(async()=>{let{default:e}=await n.el("405314").then(n.bind(n,"405314"));return n=>{let{onClose:s,...l}=n;return(0,a.jsx)(e,{...l,loadId:_,applicationId:t,skuId:d,analyticsLocations:m,onClose:e=>{s(),null==c||c(e)},onComplete:e=>{p=!0,null==f||f(e)}})}},{contextKey:E,onCloseCallback:()=>{!p&&o.default.track(u.AnalyticEvents.PAYMENT_FLOW_CANCELED,{load_id:_,payment_type:u.PurchaseTypeToAnalyticsPaymentType[u.PurchaseTypes.ONE_TIME],location:h,is_gift:!1,application_id:t,location_stack:m}),(0,i.clearError)(),(0,r.clearPurchaseTokenAuthState)(),null==c||c(p)},onCloseRequest:u.NOOP})}},314743:function(e,t,n){"use strict";function a(e,t){var n;let a=decodeURIComponent(t),s=null!==(n=a.split("/").pop())&&void 0!==n?n:"temp.gif";return"".concat(e,"-").concat(s)}n.r(t),n.d(t,{getFileNameFromGifUrl:function(){return a}}),n("186859")},239013:function(e,t,n){"use strict";n.r(t),n.d(t,{showVotesForAnswer:function(){return r}});var a=n("37983");n("884691");var s=n("77078"),l=n("875978"),i=n("377253");function r(e){let{channelId:t,messageId:r,answerId:o}=e,u=i.default.getMessage(t,r);if(null==u)return;let d={emoji:{id:o,name:o,animated:!1},reactionType:l.ReactionTypes.VOTE};(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("57155").then(n.bind(n,"57155"));return t=>(0,a.jsx)(e,{...t,message:u,selectedReaction:d,disableManage:!0,disableTabs:!0})})}},914271:function(e,t,n){"use strict";n.r(t),n.d(t,{handlePollGifAttachmentAdd:function(){return o},removePollUploadAttachment:function(){return u},removeAllPollUploadAttachments:function(){return d},sendPollMessageWithAttachments:function(){return c}});var a=n("81594"),s=n("783480"),l=n("966724"),i=n("474643"),r=n("314743");async function o(e,t,n){let s=(0,r.getFileNameFromGifUrl)(t,n),o=await fetch(n),u=await o.blob(),d=new File([u],s,{type:"image/gif"}),c={id:t,channelId:e,file:d,platform:l.UploadPlatform.WEB};return a.default.addFile({file:c,channelId:e,draftType:i.DraftType.Poll}),n}async function u(e,t,n){a.default.remove(e,t,i.DraftType.Poll)}async function d(e){a.default.clearAll(e,i.DraftType.Poll)}async function c(e){let{channel:t,items:n,poll:a,nonce:l,maxSizeCallback:r}=e;return s.default.uploadFiles({channelId:t.id,uploads:n,draftType:i.DraftType.Poll,parsedMessage:{content:"",tts:!1,invalidEmojis:[],validNonShortcutEmojis:[]},options:{nonce:l,poll:a},raiseEndpointErrors:!0})}},847511:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}}),n("70102"),n("222007"),n("881410");var a=n("627445"),s=n.n(a),l=n("917351"),i=n.n(l),r=n("913144"),o=n("404118"),u=n("819689"),d=n("448993"),c=n("875978"),f=n("815297"),m=n("256572"),h=n("271938"),E=n("474643"),p=n("377253"),_=n("585722"),g=n("239013"),I=n("914271"),T=n("690714"),C=n("641126"),S=n("905206"),A=n("782340");function N(e){let{channelId:t,messageId:n}=e,a=p.default.getMessage(t,n);if(null!=a)return{message:a,channelId:t,messageId:n};let l=m.default.getMessage(t,n);if(null!=l.message)return{channelId:t,messageId:n,message:l.message};throw s(null!=a,"Tapped on a non-existent poll message"),Error()}function M(e){let{isEditing:t,...n}=e,{channelId:a,messageId:s}=N(n);(0,C.updatePollState)(a,s,()=>({channelId:a,selectedAnswerIds:new Set,submitting:!1,editing:t}))}function v(e){let{channelId:t,messageId:n}=e,a=p.default.getMessage(t,n);return null==a?[]:a.reactions.flatMap(e=>!0===e.me_vote?e.emoji.name:[])}async function x(e){let t,{channelId:n,messageId:a,answerIds:s}=e,l=v({channelId:n,messageId:a}),o=i.difference(l,s),u=i.difference(s,l),d=h.default.getId(),f=[...o.map(e=>({type:"MESSAGE_REACTION_REMOVE",id:e})),...u.map(e=>({type:"MESSAGE_REACTION_ADD",id:e}))];for(let{id:e,type:s}of f)t=r.default.dispatch({type:s,channelId:n,messageId:a,emoji:{id:e,name:e},userId:d,optimistic:!0,reactionType:c.ReactionTypes.VOTE});null!=t&&await t}async function O(e){let{channelId:t,messageId:n}=N(e),a=(0,C.getPollState)(t,n);s(null!=a,"Must not be able to vote without existing state!"),(0,C.updatePollState)(t,n,e=>(s(null!=e,"Must not be able to vote without existing state!"),{...e,submitting:!0,editing:!1}));let l=v({channelId:t,messageId:n});try{let e=[...a.selectedAnswerIds.values()];await x({channelId:t,messageId:n,answerIds:e}),await T.submitPollVote({channelId:t,messageId:n,answerIds:e}),(0,C.updatePollState)(t,n,()=>void 0)}catch(e){var i,r,u;o.default.show({title:A.default.Messages.GENERIC_ERROR_TITLE,body:null!==(u=null!==(r=null===(i=e.getAnyErrorMessage)||void 0===i?void 0:i.call(e))&&void 0!==r?r:e.message)&&void 0!==u?u:A.default.Messages.GENERIC_ERROR_BODY}),await x({channelId:t,messageId:n,answerIds:l}),(0,C.updatePollState)(t,n,e=>{if(null!=e)return{...e,submitting:!1,editing:!1}})}}var L={handlePollAnswerTapped:function(e){var t,n,a,s,l;let{answerId:i,...r}=e,{channelId:u,messageId:d,message:c}=N(r),{tapShouldOpenVotersModal:f,reactions:m}=null!==(n=(0,S.computeBasicPollChatData)(c))&&void 0!==n?n:{};if(!0===f){let e=null!==(l=null===(s=(0,S.reactionForId)(null!=m?m:[],i))||void 0===s?void 0:null===(a=s.count_details)||void 0===a?void 0:a.vote)&&void 0!==l?l:0;0===e?o.default.show({title:A.default.Messages.POLL_NO_VOTES_FOR_ANSWER_TITLE,body:A.default.Messages.POLL_NO_VOTES_FOR_ANSWER_BODY}):g.showVotesForAnswer({channelId:u,messageId:d,answerId:i});return}let h=null===(t=c.poll)||void 0===t?void 0:t.allow_multiselect;(0,C.updatePollState)(u,d,e=>{if(null==e)return{channelId:u,selectedAnswerIds:new Set([i]),submitting:!1,editing:!1};let t={...e},n=new Set(t.selectedAnswerIds);if(t.selectedAnswerIds=n,n.has(i))n.delete(i);else{if(!h)for(let e of n)n.delete(e);n.add(i)}return t})},handlePollSubmitVote:O,handleUpdateVoteEditingState:M,handlePollActionTapped:function(e){let{channelId:t,messageId:n,type:a}=e;switch(a){case"submit":O({channelId:t,messageId:n});break;case"edit":M({channelId:t,messageId:n,isEditing:!0});break;case"cancel":M({channelId:t,messageId:n,isEditing:!1});break;default:s(!1,"Unknown poll action type: ".concat(a))}},createPoll:async function e(e){let{channel:t,question:n,answers:a,allowMultiSelect:s,layout:l,onClose:i}=e,r=_.default.getUploads(t.id,E.DraftType.Poll),o=a.map(e=>{var t;let n=null==r?void 0:r.findIndex(t=>t.id===e.uploadId),a={attachment_ids:-1!==n?["".concat(n)]:[]};a.text=e.text;let s=null===(t=e.image)||void 0===t?void 0:t.emoji;return null!=s&&(null!=s.id?a.emoji={id:s.id,name:""}:null!=s.optionallyDiverseSequence&&(a.emoji={name:s.optionallyDiverseSequence})),{poll_media:a}}),c={question:{text:n,attachment_ids:[]},answers:o,allow_multiselect:s,layout_type:l};try{if(null!=r&&r.length>0){var m;let e=null!==(m=h.default.getToken())&&void 0!==m?m:"";await I.sendPollMessageWithAttachments({channel:t,items:r,token:e,poll:c,nonce:(0,f.createNonce)(),maxSizeCallback:()=>{}})}else await u.default.sendPollMessage(t.id,c);null==i||i()}catch(t){let e=t instanceof d.APIError?t:new d.APIError(t);if("poll"===e.getAnyErrorMessage()&&null!=t.text)throw{...t,body:JSON.parse(t.text)};throw t}}}},186859:function(e,t,n){"use strict";n.r(t),n.d(t,{POLL_CREATION_MODAL_KEY:function(){return a},MIN_NUMBER_OF_ANSWERS_PER_POLL:function(){return s},MAX_NUMBER_OF_ANSWERS_PER_POLL:function(){return l},MAX_POLL_QUESTION_LENGTH:function(){return i},MAX_POLL_ANSWER_LENGTH:function(){return r}});let a="POLL_CREATION_MODAL_KEY",s=1,l=6,i=300,r=55},209346:function(e,t,n){"use strict";n.r(t),n.d(t,{useUserEligibleForPolls:function(){return s}});var a=n("83995");function s(e){let{enabled:t}=a.PollsUserExperiment.useExperiment({location:e},{autoTrackExposure:!0});return t}},690714:function(e,t,n){"use strict";n.r(t),n.d(t,{submitPollVote:function(){return i}});var a=n("872717"),s=n("448993"),l=n("49111");async function i(e){let{channelId:t,messageId:n,answerIds:i}=e;try{await a.default.put({url:l.Endpoints.POLL_ANSWERS(t,n),body:{answer_ids:i}})}catch(e){throw new s.APIError(e)}}},641126:function(e,t,n){"use strict";n.r(t),n.d(t,{useChannelPollInteractions:function(){return r},updatePollState:function(){return o},getPollState:function(){return u}});var a=n("308503"),s=n("233736");let l={},i=(0,a.default)(e=>({polls:{},updatePollState(t,n,a){e(e=>{var s;return{polls:{...e.polls,[t]:{...e.polls[t],[n]:a(null===(s=e.polls[t])||void 0===s?void 0:s[n])}}}})}}));function r(e){return i(t=>{var n;return null!==(n=t.polls[e])&&void 0!==n?n:l},s.default)}function o(e,t,n){i.getState().updatePollState(e,t,n)}function u(e,t){var n;return null===(n=i.getState().polls[e])||void 0===n?void 0:n[t]}},849197:function(e,t,n){"use strict";n.r(t),n.d(t,{useInteractivePollMessage:function(){return f},default:function(){return h}});var a=n("37983"),s=n("884691"),l=n("627445"),i=n.n(l),r=n("65597"),o=n("819689"),u=n("377253"),d=n("905206");let c=s.createContext(void 0);function f(e){var t;let n=null!==(t=s.useContext(c))&&void 0!==t?t:e;return i(null!=n,"Using PollReferenceMessageContext without a provider (or a fallback)"),n}function m(e){let{message:t,children:n}=e,l=(0,r.default)([u.default],()=>u.default.getMessage(t.channel_id,t.id),[t.channel_id,t.id]),i=null!=l;return s.useEffect(()=>{!i&&o.default.focusMessage({channelId:t.channel_id,messageId:t.id})},[i,t.channel_id,t.id]),(0,a.jsx)(c.Provider,{value:null!=l?l:t,children:n})}function h(e){let{message:t,children:n}=e;return(0,d.isPollMessageDirectlyInteractive)(t)?(0,a.jsx)(a.Fragment,{children:n}):(0,a.jsx)(m,{message:t,children:n})}},214400:function(e,t,n){"use strict";var a,s,l,i;n.r(t),n.d(t,{PollChatAnswerInteractionType:function(){return s}}),(l=a||(a={}))[l.NONE=0]="NONE",l[l.LOW=1]="LOW",l[l.HIGH=2]="HIGH",(i=s||(s={}))[i.LIST=1]="LIST",i[i.CHECKBOXES=2]="CHECKBOXES",i[i.RADIO_BUTTONS=3]="RADIO_BUTTONS"},410328:function(e,t,n){"use strict";n.r(t),n.d(t,{buildPlatformPollResources:function(){return i},getAvatarUrl:function(){return r}}),n("794252");var a=n("506838"),s=n("418009"),l=n("944313");function i(e,t){let n=(0,a.match)(t).with(s.PollLayoutTypes.IMAGE_ONLY_ANSWERS,()=>l.normalStylesImageOnlyAnswers).otherwise(()=>l.normalStylesDefault),i={styles:{loser:n,normal:n,notVoted:n,selected:n,voted:l.votedStyles,victor:l.victorStyles}};return i}function r(e,t){return e.getAvatarURL(t,20,!1)}},868586:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("917351"),s=n("410328"),l=(0,a.memoize)(function(e){let{theme:t,layoutType:n}=e;return(0,s.buildPlatformPollResources)(t,n)},e=>{let{theme:t,layoutType:n}=e;return"".concat(t,":").concat(n)})},905206:function(e,t,n){"use strict";n.r(t),n.d(t,{reactionForId:function(){return C},isPollMessageDirectlyInteractive:function(){return A},computeBasicPollChatData:function(){return N},default:function(){return M}}),n("222007"),n("794252"),n("808653");var a=n("506838"),s=n("418009"),l=n("385976"),i=n("867805"),r=n("42203"),o=n("377253"),u=n("697218"),d=n("315102"),c=n("402671"),f=n("773336"),m=n("641126"),h=n("214400"),E=n("410328"),p=n("868586"),_=n("973799"),g=n("49111"),I=n("782340");let T={channelId:"",selectedAnswerIds:new Set,submitting:!1,editing:!1};function C(e,t){for(let n of e){let e="number"==typeof n.emoji.id?"".concat(n.emoji.id):n.emoji.id;if(e===t)return n}}let S=e=>(0,a.match)(e).with({isInteractive:!1},()=>"normal").with({isVictor:!0},()=>"victor").with({isExpired:!0},()=>"loser").with({didSelfVote:!0,isExpired:!1},()=>"voted").with({hasVoted:!0,isExpired:!1},()=>"notVoted").with({isSelected:!0},()=>"selected").otherwise(()=>"normal");function A(e){let t=o.default.getMessage(e.channel_id,e.id);return t===e&&!0}function N(e,t){var n,a;let{formattedExpirationLabel:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{poll:l}=e;if(null==l)return;let i=e.state===g.MessageStates.SENT,r=i?null!=s?s:(0,_.formatExpirationLabel)(l.expiry):"",u=null==r&&i,{selectedAnswerIds:d,submitting:c,editing:f}=null!==(n=null!=t?t:(0,m.getPollState)(e.getChannelId(),e.id))&&void 0!==n?n:T,h=e.reactions,E=!0;if(!A(e)){let t=o.default.getMessage(e.channel_id,e.id);E=null!=t,h=null!==(a=null==t?void 0:t.reactions)&&void 0!==a?a:h}let p=d.size>0,I=h.some(e=>!0===e.me_vote),C=!f&&I,S=E&&(C||u);return{poll:l,canTapAnswers:i&&(!I||f||S),canEditVote:!c&&C&&i&&!u,canShowVoteCounts:S,canSubmitVote:!c&&p&&!C&&i,expirationLabel:r,hasSelectedAnswer:p,hasVoted:C,hasVoteRecorded:I,isEditingVote:f,isExpired:u,isInteractive:E,isSent:i,reactions:h,selectedAnswerIds:d,submitting:c,tapShouldOpenVotersModal:S}}function M(e,t,n){var o,m,_;let{animateEmoji:g=!1,theme:T="dark",formattedExpirationLabel:A}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{poll:M}=e;if(null==M||!t)return;let v=u.default.getCurrentUser();if(null==v)return;let x=null===(m=r.default.getChannel(e.getChannelId()))||void 0===m?void 0:null===(o=m.getGuildId)||void 0===o?void 0:o.call(m),O=(0,E.getAvatarUrl)(v,x),L=M.answers,R=M.layout_type,y=N(e,n,{formattedExpirationLabel:A});if(null==y)return;let{canTapAnswers:P,canEditVote:D,canShowVoteCounts:j,canSubmitVote:b,expirationLabel:U,hasSelectedAnswer:B,hasVoted:G,isEditingVote:k,isExpired:w,isInteractive:H,reactions:F,selectedAnswerIds:V,tapShouldOpenVotersModal:Y}=y,W=F.reduce((e,t)=>{var n,a;return e+(null!==(a=null===(n=t.count_details)||void 0===n?void 0:n.vote)&&void 0!==a?a:0)},0),K=Math.max(...L.map(e=>{var t,n;let a=C(F,"".concat(e.answer_id));return null!==(n=null==a?void 0:null===(t=a.count_details)||void 0===t?void 0:t.vote)&&void 0!==n?n:0})),z=L.map(e=>{var t,n,r;let o="".concat(e.answer_id),u=C(F,o),f=null!==(n=null==u?void 0:null===(t=u.count_details)||void 0===t?void 0:t.vote)&&void 0!==n?n:0,m=V.has(o),h=w?f>=K&&0!==f:void 0,E=G&&null!==(r=null==u?void 0:u.me_vote)&&void 0!==r&&r,p=S({didSelfVote:E,hasVoted:G,isExpired:w,isInteractive:H,isSelected:m,isVictor:h});return{answerId:o,pollMedia:{text:e.poll_media.text,emoji:function(e){let{animateEmoji:t=!1,size:n=48}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return;let a=!1;if(null!=e.id){var s,r;a=null!==(r=null===(s=l.default.getCustomEmojiById(e.id))||void 0===s?void 0:s.animated)&&void 0!==r&&r}let o=a&&t;return{id:null==e.id?null:"".concat(e.id),name:e.name,displayName:null==e.id?i.default.convertSurrogateToName(e.name):e.name,src:null==e.id?c.default.getURL(e.name):d.default.getEmojiURL({id:e.id,animated:o,size:n}),animated:o}}(e.poll_media.emoji,{animateEmoji:g}),stickerId:e.poll_media.sticker_id,attachmentIds:e.poll_media.attachment_ids},isSelected:m,isVictor:h,didSelfVote:E,style:p,votesPercentage:Math.round(100*(0===W?0:f/W)),votes:(0,a.match)(R).with(s.PollLayoutTypes.IMAGE_ONLY_ANSWERS,()=>"(".concat(String(f),")")).otherwise(()=>I.default.Messages.POLL_VOTES_COUNT.format({count:String(f)}))}}),Z=(0,a.match)({isExpired:w,canSubmitVote:b,hasVoted:G,isEditingVote:k,canEditVote:D,isInteractive:H}).with({isInteractive:!1},()=>void 0).with({isExpired:!0},()=>void 0).with({isEditingVote:!0},()=>({label:I.default.Messages.POLL_SUBMIT_VOTE,presentation:"button",enabled:B,type:"submit"})).with({canEditVote:!0},()=>({label:I.default.Messages.POLL_EDIT_VOTE,presentation:"textButton",enabled:!0,type:"edit"})).otherwise(()=>({label:I.default.Messages.POLL_SUBMIT_VOTE,presentation:"button",enabled:b,type:"submit"})),J=(0,a.match)({isInteractive:H,isEditingVote:k}).with({isInteractive:!1},()=>({label:I.default.Messages.POLL_NOT_INTERACTIVE,presentation:"text",enabled:!1})).with({isEditingVote:!0},()=>({label:I.default.Messages.CANCEL,presentation:"textButton",enabled:!0,type:"cancel"})).otherwise(()=>({label:null!=U?U:I.default.Messages.POLL_EXPIRED,presentation:"text",enabled:!1})),X="normal";w?X="victor":G&&(X="voted");let q=M.allow_multiselect;return{question:M.question,answers:z,answersInteraction:(0,a.match)({tapShouldOpenVotersModal:Y,canTapAnswers:P,canSelectMultipleAnswers:q}).with({tapShouldOpenVotersModal:!0},()=>h.PollChatAnswerInteractionType.LIST).with({canTapAnswers:!1},()=>h.PollChatAnswerInteractionType.LIST).with({canSelectMultipleAnswers:!1},()=>h.PollChatAnswerInteractionType.RADIO_BUTTONS).with({canSelectMultipleAnswers:!0},()=>h.PollChatAnswerInteractionType.CHECKBOXES).exhaustive(),answerTapAccessibilityLabel:(0,a.match)({tapShouldOpenVotersModal:Y,platform:(0,f.getNativePlatform)()}).with({tapShouldOpenVotersModal:!0,platform:"android"},()=>I.default.Messages.POLL_TAP_FOR_VOTERS_A11Y_ANDROID).with({tapShouldOpenVotersModal:!0,platform:"ios"},()=>I.default.Messages.POLL_TAP_FOR_VOTERS_A11Y_IOS).with({tapShouldOpenVotersModal:!0,platform:"web"},()=>I.default.Messages.POLL_TAP_FOR_VOTERS_A11Y_ANDROID).otherwise(()=>void 0),layoutType:R,resources:(0,p.default)({theme:T,layoutType:R}),containerStyle:X,primaryAction:Z,submitVoteLabel:null!==(_=null==Z?void 0:Z.label)&&void 0!==_?_:"",canSubmitVote:b,canTapAnswers:P,canSelectMultipleAnswers:q,hasSelectedAnswer:B,canShowVoteCounts:j,hasVoted:G,expirationLabel:null!=U?U:I.default.Messages.POLL_EXPIRED,isExpired:w,myAvatarUrl:O,secondaryAction:J}}},973799:function(e,t,n){"use strict";n.r(t),n.d(t,{formatExpirationLabel:function(){return i},default:function(){return r}});var a=n("866227"),s=n.n(a),l=n("782340");function i(e){let t=s();if(e<=t)return;let n=e.diff(t,"days");if(n>1)return l.default.Messages.POLL_EXPIRY_DAYS_REMAINING.format({days:n});let a=e.diff(t,"hours");if(a>1)return l.default.Messages.POLL_EXPIRY_HOURS_REMAINING.format({hours:a});let i=e.diff(t,"minutes");return l.default.Messages.POLL_EXPIRY_MINUTES_REMAINING.format({minutes:i})}function r(e){if(null!=e)return i(e)}},985883:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("884691"),s=n("841098"),l=n("845579"),i=n("209346"),r=n("641126"),o=n("849197"),u=n("905206"),d=n("973799");function c(e,t){var n;let c=(0,o.useInteractivePollMessage)(e),f=(0,r.useChannelPollInteractions)(c.getChannelId()),m=f[c.id],h=(0,d.default)(null===(n=c.poll)||void 0===n?void 0:n.expiry),E=l.AnimateEmoji.useSetting(),p=(0,i.useUserEligibleForPolls)("poll_message_data"),_=(0,s.default)(),g=null!=t?t:_;return a.useMemo(()=>(0,u.default)(c,p,m,{animateEmoji:E,theme:g,formattedExpirationLabel:h}),[E,c,m,h,g,p])}},426490:function(e,t,n){"use strict";n.r(t),n.d(t,{PollAnswers:function(){return P},PollMediaView:function(){return B},PollAnswerSelectedIcon:function(){return k},PollAnswerVictorIcon:function(){return w},PollAnswerVotedIcon:function(){return H}}),n("794252");var a,s,l=n("37983"),i=n("884691"),r=n("414456"),o=n.n(r),u=n("506838"),d=n("65597"),c=n("77078"),f=n("430568"),m=n("449918"),h=n("20606"),E=n("385976"),p=n("845579"),_=n("952368"),g=n("476765"),I=n("578706"),T=n("866190"),C=n("847511"),S=n("214400"),A=n("74232"),N=n("49111"),M=n("782340"),v=n("652886");function x(e){let{className:t,children:n}=e;return(0,l.jsx)("ul",{"aria-label":M.default.Messages.POLL_OPTIONS_ARIA,className:t,children:n})}function O(e){let{className:t,children:n}=e;return(0,l.jsx)("div",{"aria-label":M.default.Messages.POLL_OPTIONS_ARIA,role:"group",className:t,children:n})}function L(e){let{className:t,children:n}=e,a=(0,c.useRadioGroup)({orientation:"vertical"});return(0,l.jsx)("div",{"aria-label":M.default.Messages.POLL_OPTIONS_ARIA,...a,className:t,children:n})}function R(e){let{className:t,onClick:n,isSelected:a,children:s}=e;return(0,l.jsx)(c.Clickable,{role:"checkbox",className:o(t,v.enabled),onClick:n,"aria-checked":a,children:s})}function y(e){let t,{className:n,children:a,onClick:s,isSelected:i,hasSelectedAnyAnswer:r,isFirstAnswer:u}=e;return t=r?i?0:-1:u?0:-1,(0,l.jsx)(c.Clickable,{role:"radio",className:o(n,v.enabled),onClick:s,"aria-checked":i,tabIndex:t,children:a})}function P(e){let{answers:t,answersInteraction:n,answerTapAccessibilityLabel:a,isInteractive:s,hasSelectedAnyAnswer:i,className:r,answerClassName:d,renderAnswerContent:c}=e,{ContainerComponent:f,answerElementType:m}=(0,u.match)({isInteractive:s,answersInteraction:n}).with({answersInteraction:S.PollChatAnswerInteractionType.RADIO_BUTTONS},()=>({ContainerComponent:L,answerElementType:1})).with({answersInteraction:S.PollChatAnswerInteractionType.CHECKBOXES},()=>({ContainerComponent:O,answerElementType:2})).with({isInteractive:!0,answersInteraction:S.PollChatAnswerInteractionType.LIST},()=>({ContainerComponent:x,answerElementType:3})).otherwise(()=>({ContainerComponent:x,answerElementType:0}));return(0,l.jsx)(f,{className:r,children:t.map((e,t)=>(0,l.jsx)(D,{className:o(v.answer,d),answer:e,isFirstAnswer:0===t,elementType:m,answerTapAccessibilityLabel:a,hasSelectedAnyAnswer:i,children:c(e)},e.answerId))})}function D(e){let{className:t,answer:n,answerTapAccessibilityLabel:a,children:s,hasSelectedAnyAnswer:r,isFirstAnswer:u,elementType:d}=e,{channelId:f,messageId:m}=(0,A.useMessageIds)(),h=(0,A.useStyleClass)(n.style),E=!0===n.isSelected,p=i.useCallback(()=>{C.default.handlePollAnswerTapped({channelId:f,messageId:m,answerId:n.answerId})},[f,m,n.answerId]),_=(0,g.useUID)();switch(d){case 0:return(0,l.jsx)("li",{className:o(t,h),children:s});case 3:return(0,l.jsxs)("li",{children:[(0,l.jsx)(c.HiddenVisually,{id:_,children:a}),(0,l.jsx)(c.Clickable,{className:o(v.listItemButton,t,h),onClick:p,"aria-describedby":_,children:s})]});case 1:return(0,l.jsx)(y,{className:o(t,h),onClick:p,isSelected:E,hasSelectedAnyAnswer:r,isFirstAnswer:u,children:s});case 2:return(0,l.jsx)(R,{className:o(t,h),onClick:p,isSelected:E,children:s})}}function j(e){let{attachment:t,alt:n,className:a}=e,s=(0,T.useIsWindowFocused)(),i=p.GifAutoPlay.useSetting();return(0,l.jsx)(_.default,{className:a,imageClassName:v.attachmentImage,src:null!=t.proxy_url&&""!==t.proxy_url?t.proxy_url:t.url,alt:n,responsive:!0,width:212,height:212,autoPlay:i,shouldAnimate:s,shouldRenderAccessory:!1})}function b(e){let{alt:t,className:n,emoji:a}=e,s=(0,d.default)([E.default],()=>{var e,t,n;return null!==(n=null===(e=E.default.getCustomEmojiById(null!==(t=null==a?void 0:a.id)&&void 0!==t?t:""))||void 0===e?void 0:e.animated)&&void 0!==n&&n},[a.id]);return(0,l.jsx)(f.default,{className:n,emojiId:null==a?void 0:a.id,emojiName:null==a?void 0:a.name,alt:t,animated:s})}function U(e,t){return null!=e?(0,l.jsx)("div",{className:e,children:t}):(0,l.jsx)(l.Fragment,{children:t})}function B(e){var t;let{media:n,containerClassName:a,attachmentClassName:s,emojiClassName:i,fallback:r,alt:o}=e,{message:u}=(0,A.usePollContext)(),d=null!==(t=null!=o?o:n.text)&&void 0!==t?t:"";if(n.attachmentIds.length>0){let e=u.attachments.find(e=>e.id===n.attachmentIds[0]);if(null!=e)return U(a,(0,l.jsx)(j,{className:s,attachment:e,alt:d}))}return null!=n.emoji?U(a,(0,l.jsx)(b,{className:i,emoji:n.emoji,alt:d})):void 0!==r?(0,l.jsx)(l.Fragment,{children:r}):null}function G(e){let{size:t,color:n,className:a}=e;return(0,l.jsx)(I.default,{width:t,height:t,className:a,color:n,backgroundColor:(0,m.getColor)(N.Color.WHITE_500)})}function k(e){return(0,l.jsx)(G,{color:(0,m.getColor)(N.Color.BRAND_500),...e})}function w(e){return(0,l.jsx)(G,{color:h.default.POLLS_VICTOR_BORDER,...e})}function H(e){return(0,l.jsx)(G,{color:h.default.POLLS_VOTED_BORDER,...e})}(s=a||(a={}))[s.LIST_ITEM=0]="LIST_ITEM",s[s.RADIO=1]="RADIO",s[s.CHECKBOX=2]="CHECKBOX",s[s.LIST_ITEM_BUTTON=3]="LIST_ITEM_BUTTON"},619544:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("597287"),r=n("77078"),o=n("426490"),u=n("782340"),d=n("314164");function c(e){let{didSelfVote:t,label:n,percentage:s}=e;return(0,a.jsxs)("div",{className:d.votesData,children:[t&&(0,a.jsx)(i.VisuallyHidden,{children:u.default.Messages.POLL_ANSWER_VOTED_ARIA}),(0,a.jsxs)(r.Text,{variant:"text-md/semibold",color:"none",children:[s,"%"]}),(0,a.jsx)(r.Text,{variant:"text-xs/semibold",color:"none",children:n})]})}function f(e){let{answer:t,hasVoted:n,isExpired:s,myAvatarUrl:i}=e,r=n||s,u=!0===t.isSelected,f=!0===t.didSelfVote,m=!0===t.isVictor;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.PollMediaView,{attachmentClassName:l(d.attachment,{[d.attachmentWithResults]:r}),emojiClassName:d.emoji,media:t.pollMedia,fallback:(0,a.jsx)("div",{className:l(d.attachment,d.mediaMissing)})}),u&&(0,a.jsx)(o.PollAnswerSelectedIcon,{size:40,className:d.selectedIcon}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{didSelfVote:f,percentage:t.votesPercentage,label:t.votes,myAvatarUrl:f?i:void 0}),!s&&f&&(0,a.jsx)(o.PollAnswerVotedIcon,{size:18,className:d.pollAnswerIcon}),m&&(0,a.jsx)(o.PollAnswerVictorIcon,{size:18,className:d.pollAnswerIcon})]})]})}function m(e){let{isExpired:t,hasVoted:n,myAvatarUrl:s,...l}=e;return(0,a.jsx)(o.PollAnswers,{className:d.answersContainer,answerClassName:d.answer,myAvatarUrl:s,renderAnswerContent:e=>(0,a.jsx)(f,{answer:e,isExpired:t,hasVoted:n,myAvatarUrl:s}),...l})}},74232:function(e,t,n){"use strict";n.r(t),n.d(t,{usePollContext:function(){return i},PollContextProvider:function(){return r},useStyleClass:function(){return o},useMessageIds:function(){return u}}),n("70102");var a=n("37983"),s=n("884691");let l=s.createContext(void 0);function i(){let e=s.useContext(l);if(null==e)throw Error("No PollContextProvider found");return e}function r(e){let{children:t,message:n,poll:i}=e,r=s.useMemo(()=>({message:n,poll:i}),[n,i]);return(0,a.jsx)(l.Provider,{value:r,children:t})}function o(e){let t=function(){let{poll:e}=i();return e.resources}();return t.styles[e]}function u(){let{message:e}=i(),t=e.getChannelId();return s.useMemo(()=>({channelId:t,messageId:e.id}),[e.id,t])}},311830:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}}),n("794252");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("506838"),o=n("418009"),u=n("77078"),d=n("847511"),c=n("619544"),f=n("74232"),m=n("909366"),h=n("879958");function E(e){let{media:t}=e;return(0,a.jsx)(u.Text,{variant:"text-md/medium",children:t.text})}function p(e){let{children:t}=e;return(0,a.jsx)(u.Text,{variant:"text-sm/normal",color:"text-muted",children:t})}function _(e){let{children:t,onClick:n,className:s}=e;return(0,a.jsx)(u.Clickable,{onClick:n,className:i(s,h.textButton),children:(0,a.jsx)(u.Text,{variant:"text-sm/semibold",color:"text-link",children:t})})}function g(e){let{action:t,channelId:n,messageId:l}=e,i=s.useCallback(()=>{(null==t?void 0:t.type)!=null&&d.default.handlePollActionTapped({channelId:n,messageId:l,type:t.type})},[t,n,l]);return null==t?null:"button"===t.presentation?(0,a.jsx)(u.Button,{onClick:i,disabled:!t.enabled,children:t.label}):"textButton"===t.presentation?(0,a.jsx)(_,{onClick:i,children:t.label}):(0,a.jsx)(p,{children:t.label})}function I(e){let{message:t,poll:n,className:s}=e,l=(0,f.useStyleClass)(n.containerStyle),u=function(e,t){let n={answers:t.answers,answersInteraction:t.answersInteraction,answerTapAccessibilityLabel:t.answerTapAccessibilityLabel,isExpired:t.isExpired,isInteractive:t.canTapAnswers,hasSelectedAnyAnswer:t.hasSelectedAnswer,hasVoted:t.hasVoted,myAvatarUrl:t.myAvatarUrl};return(0,r.match)(t.layoutType).with(o.PollLayoutTypes.DEFAULT,()=>(0,a.jsx)(m.TextAndImageAnswers,{...n})).with(o.PollLayoutTypes.IMAGE_ONLY_ANSWERS,()=>(0,a.jsx)(c.default,{...n})).otherwise(()=>null)}(0,n);return null==u?null:(0,a.jsxs)("div",{className:i(h.container,l,s),children:[(0,a.jsx)(E,{media:n.question}),u,(0,a.jsxs)("div",{className:h.bottomBar,children:[(0,a.jsx)(g,{channelId:t.getChannelId(),messageId:t.id,action:n.secondaryAction}),(0,a.jsx)(g,{channelId:t.getChannelId(),messageId:t.id,action:n.primaryAction})]})]})}function T(e){let{message:t,poll:n,className:s}=e;return(0,a.jsx)(f.PollContextProvider,{message:t,poll:n,children:(0,a.jsx)(I,{message:t,poll:n,className:s})})}},909366:function(e,t,n){"use strict";n.r(t),n.d(t,{TextAndImageAnswers:function(){return c}});var a=n("37983");n("884691");var s=n("597287"),l=n("77078"),i=n("426490"),r=n("782340"),o=n("139583");function u(e){let{percentage:t,label:n}=e;return(0,a.jsxs)("div",{className:o.votesData,children:[(0,a.jsxs)(l.Text,{className:o.voteDataLine,variant:"text-xs/semibold",color:"none",children:[t,"%"]}),(0,a.jsx)(l.Text,{className:o.voteDataLine,variant:"text-xxs/semibold",color:"none",children:n})]})}function d(e){let{answer:t,isExpired:n,hasVoted:d,myAvatarUrl:c}=e,f=d||n,m=!0===t.isSelected,h=!0===t.didSelfVote,E=!0===t.isVictor;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:o.answerInner,children:[f&&(0,a.jsx)("span",{className:o.votePercentageBar,style:{width:"".concat(t.votesPercentage,"%")},"aria-hidden":!0}),(0,a.jsxs)("div",{className:o.answerContent,children:[(0,a.jsx)(i.PollMediaView,{attachmentClassName:o.attachment,containerClassName:o.mediaContainer,media:t.pollMedia,fallback:null,alt:""}),(0,a.jsx)(l.Text,{className:o.label,variant:"text-sm/semibold",color:"none",children:t.pollMedia.text}),(m||t.didSelfVote)&&(0,a.jsx)(l.Avatar,{className:o.avatarForSelected,size:l.AvatarSizes.SIZE_20,src:c,"aria-hidden":!0}),t.didSelfVote&&(0,a.jsx)(s.VisuallyHidden,{children:r.default.Messages.POLL_ANSWER_VOTED_ARIA}),f&&(0,a.jsx)(u,{percentage:t.votesPercentage,label:t.votes})]})]}),!n&&h&&(0,a.jsx)(i.PollAnswerVotedIcon,{size:18,className:o.pollAnswerIcon}),E&&(0,a.jsx)(i.PollAnswerVictorIcon,{size:18,className:o.pollAnswerIcon})]})}function c(e){let{hasVoted:t,isExpired:n,myAvatarUrl:s,...l}=e;return(0,a.jsx)(i.PollAnswers,{className:o.answersContainer,answerClassName:o.answer,myAvatarUrl:s,renderAnswerContent:e=>(0,a.jsx)(d,{answer:e,isExpired:n,hasVoted:t,myAvatarUrl:s}),...l})}},141254:function(e,t,n){"use strict";n.r(t),n.d(t,{isAtGuildCapAndNonPremium:function(){return r}}),n("446674"),n("139321");var a=n("305961"),s=n("697218"),l=n("719923"),i=n("49111");function r(){let e=a.default.getGuildCount()>=i.MAX_USER_GUILDS,t=l.default.canUseIncreasedGuildCap(s.default.getCurrentUser());return e&&!t}},428786:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("866227"),o=n.n(r),u=n("394846"),d=n("446674"),c=n("77078"),f=n("4919"),m=n("812204"),h=n("685665"),E=n("649844"),p=n("697218"),_=n("521012"),g=n("888400"),I=n("719923"),T=n("158998"),C=n("540692"),S=n("166960"),A=n("833516"),N=n("646718"),M=n("782340"),v=n("668524");class x extends s.Component{renderTitle(e,t){let{trialOffer:n}=this.props,a=p.default.getUser(n.user_id),s=null!=a?a.username:"???";return e&&void 0===n.redeemed_at?M.default.Messages.SHARE_NITRO_EMBEDDED_MESSAGE_DISABLED_HEADER.format({username:s}):t?M.default.Messages.SHARE_NITRO_EMBEDDED_MESSAGE_EXPIRED_HEADER:M.default.Messages.SHARE_NITRO_EMBEDDED_MESSAGE_HEADER.format({username:s})}renderBody(e,t,n){let{trialOffer:a}=this.props,s=p.default.getUser(a.referrer_id);return(e||t)&&n&&void 0===a.redeemed_at?M.default.Messages.SHARE_NITRO_EMBEDDED_MESSAGE_EXPIRED_BODY:e&&!n&&void 0===a.redeemed_at?M.default.Messages.SHARE_NITRO_EMBEDDED_MESSAGE_DISABLED_BODY:M.default.Messages.SHARE_NITRO_EMBEDDED_MESSAGE_BODY.format({username:null!=s?T.default.getName(s):"???"})}renderActions(e,t,n){let{trialOffer:s,currentUser:l,analyticsLocations:i}=this.props,r={onClick:()=>{this.handleStartTrial(s,i)},color:c.Button.Colors.BRAND},o=l.id!==s.user_id||(0,I.isPremium)(l)||!l.verified||(0,A.hasUserTrialOfferExpired)(s),u=this.renderExpirationDate(e,t,n);return r.disabled=o,(0,a.jsxs)("div",{className:v.buttonContainer,children:[(0,a.jsx)("div",{children:(0,a.jsx)(c.Button,{...r,size:c.Button.Sizes.SMALL,onClick:()=>{(0,E.default)({initialPlanId:null,subscriptionTier:N.PremiumSubscriptionSKUs.TIER_2,analyticsLocations:i,trialId:s.trial_id,referralTrialOfferId:s.id})},children:M.default.Messages.START_TRIAL})}),(0,a.jsx)("div",{className:v.metadata,children:u})]})}renderExpirationDate(e,t,n){let{trialOffer:a,trialEndsAt:s}=this.props;if(void 0!==a.redeemed_at&&!n&&null!==s)return M.default.Messages.TRIAL_EXPIRES.format({date:(0,g.dateFormat)(o(s),"LL")});if(e||void 0===a.expires_at)return null;let l=o(a.expires_at);if(t)return M.default.Messages.EXPIRED_DATE.format({date:(0,g.dateFormat)(o(l),"LL")});let i=l.diff(o(),"h");if(i>48){let e=l.diff(o(),"d");return M.default.Messages.EXPIRES_DAYS.format({numDays:e})}if(i>1)return M.default.Messages.EXPIRES_HOURS.format({numHours:i});let r=l.diff(o(),"minutes");return M.default.Messages.EXPIRES_MINUTES.format({numMinutes:r})}renderMedia(e){return(0,a.jsx)("div",{className:i({[v.referral]:!e,[v.birthdayReferral]:e})})}render(){let{trialOffer:e,currentUser:t,recipientHasNitro:n,shouldShowBirthdayUX:s}=this.props,l=(0,A.hasUserTrialOfferExpired)(e),r=t.id===e.referrer_id;return(0,a.jsxs)("div",{className:i(v.tile,v.container),children:[(0,a.jsx)("div",{className:v.media,children:this.renderMedia(s)}),(0,a.jsxs)("div",{className:v.description,children:[(0,a.jsx)(c.H,{className:v.title,children:this.renderTitle(n,l)}),(0,a.jsx)("div",{className:v.tagline,children:this.renderBody(n,l,r)}),(0,a.jsx)("div",{className:v.actions,children:this.renderActions(n,l,r)})]})]})}constructor(...e){super(...e),this.handleStartTrial=(e,t)=>{(0,E.default)({initialPlanId:null,subscriptionTier:N.PremiumSubscriptionSKUs.TIER_2,analyticsLocations:t,trialId:e.trial_id})}}}function O(e){let{userTrialOfferId:t,canRenderReferralEmbed:n}=e,{trialOffer:s,isResolving:l}=(0,d.useStateFromStoresObject)([C.default],()=>({trialOffer:n?C.default.getRelevantUserTrialOffer(t):null,isResolving:!!n&&C.default.isResolving(t)}),[n,t]),i=p.default.getCurrentUser(),r=(0,d.useStateFromStores)([p.default],()=>null!=s&&(0,I.isPremium)(void 0!==i&&s.user_id===i.id?i:p.default.getUser(s.user_id))),o=(0,d.useStateFromStores)([_.default],()=>{var e;return r?null===(e=_.default.getPremiumTypeSubscription())||void 0===e?void 0:e.trialEndsAt:null}),{analyticsLocations:c}=(0,h.default)(m.default.SHARE_NITRO_EMBED),{enabled:E}=S.default.useExperiment({location:"f4ff1d_1"},{autoTrackExposure:!0});return l?(0,a.jsx)(f.ResponsiveLoadingEmbedTile,{isHorizontal:!u.isMobile}):n&&null!=s&&void 0!==i?(0,a.jsx)(x,{trialOffer:s,currentUser:i,recipientHasNitro:r,trialEndsAt:o,analyticsLocations:c,shouldShowBirthdayUX:E,...e}):(0,a.jsx)("div",{className:v.invalidWrapper,children:(0,a.jsx)("div",{className:v.invalid})})}},456015:function(e,t,n){"use strict";n.r(t),n.d(t,{fetchUserOffer:function(){return i},acknowledgeUserOffer:function(){return r}});var a=n("872717"),s=n("913144"),l=n("49111");async function i(){s.default.dispatch({type:"BILLING_USER_OFFER_FETCH_START"});try{var e,t;let n=await a.default.post({url:l.Endpoints.USER_OFFER}),i=null!==(e=n.body.user_trial_offer)&&void 0!==e?e:null,r=null!==(t=n.body.user_discount)&&void 0!==t?t:null;return s.default.dispatch({type:"BILLING_USER_OFFER_FETCH_SUCCESS",userTrialOffer:i,userDiscount:r}),{userTrialOffer:i,userDiscount:r}}catch(e){s.default.dispatch({type:"BILLING_USER_OFFER_FETCH_FAIL"})}}function r(e,t){let n=null!=e&&null==e.expires_at?e.id:void 0,i=null!=t&&null==t.expires_at?t.id:void 0;if(void 0!==n||void 0!==i)return a.default.post({url:l.Endpoints.USER_OFFER_ACKNOWLEDGED,body:{user_trial_offer_id:n,user_discount_id:i},oldFormErrors:!0}).then(e=>{var t,n;s.default.dispatch({type:"BILLING_USER_OFFER_ACKNOWLEDGED_SUCCESS",userTrialOffer:null!==(t=e.body.user_trial_offer)&&void 0!==t?t:null,userDiscount:null!==(n=e.body.user_discount)&&void 0!==n?n:null})}).catch(e=>{404===e.status&&s.default.dispatch({type:"BILLING_USER_OFFER_ACKNOWLEDGED_SUCCESS",userTrialOffer:null,userDiscount:null})})}},781084:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("862205");let s=(0,a.createExperiment)({kind:"user",id:"2023-09_premium_likelihood_discount_offers",label:"Premium Likelihood Discount Offers",defaultConfig:{enabled:!1},treatments:[{id:0,label:"Control group. Users will only get trial offers",config:{enabled:!0}},{id:1,label:"Premium likelihood discount enabled for user.",config:{enabled:!0}},{id:2,label:"Holdout. No trial or discount offers",config:{enabled:!0}}]});var l=s},367594:function(e,t,n){"use strict";function a(e){let t=Number(e.content);return isNaN(t)||0===t?1:t}n.r(t),n.d(t,{default:function(){return a}})},583711:function(e,t,n){"use strict";n.r(t),n.d(t,{openGiftCodeAcceptModal:function(){return f}});var a=n("37983");n("884691");var s=n("77078"),l=n("697218"),i=n("521012"),r=n("659500"),o=n("719923"),u=n("676379"),d=n("646718"),c=n("49111");function f(e){let{processedCode:t,channelContext:f,customGiftMessage:m,giftInfo:h}=e,E=!1,p=null,_=l.default.getCurrentUser(),g=(0,o.isPremiumAtLeast)(null==_?void 0:_.premiumType,d.PremiumTypes.TIER_0);(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("669146").then(n.bind(n,"669146"));return n=>{var s,l;return(0,a.jsx)(e,{code:t,channelContext:f,customGiftMessage:m,emojiName:null==h?void 0:null===(s=h.emoji)||void 0===s?void 0:s.name,soundId:null==h?void 0:null===(l=h.sound)||void 0===l?void 0:l.id,onComplete:(e,t)=>{p=e,t&&(E=t,e.isSubscription&&null==i.default.getPremiumSubscription(!1)&&(0,u.setCanPlayWowMoment)(!0))},...n})}},{onCloseCallback:()=>{var e;E&&null!=p&&!g&&p.isSubscription&&(null==p?void 0:null===(e=p.subscriptionPlan)||void 0===e?void 0:e.premiumSubscriptionType)===d.PremiumTypes.TIER_2&&r.ComponentDispatch.dispatch(c.ComponentActions.PREMIUM_SUBSCRIPTION_CREATED)}})}},62587:function(e,t,n){"use strict";n.r(t),n.d(t,{NitroTooltipLabel:function(){return r}});var a=n("37983");n("884691");var s=n("77078"),l=n("216422"),i=n("560354");function r(e){let{tooltipText:t,textColor:n}=e;return(0,a.jsxs)("span",{className:i.tooltipTextContainer,children:[(0,a.jsx)(l.default,{className:i.nitroWheel}),(0,a.jsx)(s.Text,{className:i.tooltipText,variant:"text-sm/medium",color:null!=n?n:"text-normal",children:t})]})}},929479:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}}),n("70102"),n("222007");var a=n("37983");n("884691");var s=n("77078"),l=n("913144"),i=n("316272"),r=n("812204"),o=n("649844"),u=n("697218"),d=n("340412"),c=n("719923"),f=n("540692"),m=n("456015"),h=n("982457"),E=n("781084"),p=n("1607"),_=n("646718");class g extends i.default{_initialize(){__OVERLAY__?l.default.subscribe("PREMIUM_PAYMENT_MODAL_OPEN",this._handlePremiumPaymentModalOpen):(l.default.subscribe("PREMIUM_PAYMENT_MODAL_CLOSE",this._handlePremiumPaymentModalClose),l.default.subscribe("MESSAGE_LENGTH_UPSELL",this.handleMessageLengthUpsell),l.default.subscribe("POST_CONNECTION_OPEN",this._maybeFetchPremiumOffer),l.default.subscribe("POST_CONNECTION_OPEN",this._maybeFetchReferralsRemaining))}_terminate(){__OVERLAY__?l.default.unsubscribe("PREMIUM_PAYMENT_MODAL_OPEN",this._handlePremiumPaymentModalOpen):(l.default.unsubscribe("PREMIUM_PAYMENT_MODAL_CLOSE",this._handlePremiumPaymentModalClose),l.default.unsubscribe("MESSAGE_LENGTH_UPSELL",this.handleMessageLengthUpsell),l.default.unsubscribe("POST_CONNECTION_OPEN",this._maybeFetchPremiumOffer),l.default.unsubscribe("POST_CONNECTION_OPEN",this._maybeFetchReferralsRemaining))}handleMessageLengthUpsell(e){let{channel:t,content:l}=e;(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("571034").then(n.bind(n,"571034"));return n=>(0,a.jsx)(e,{channel:t,content:l,...n})})}openPremiumPaymentModalInApp(e){if(__OVERLAY__)throw Error("Should not use this function from the overlay, use ModalAPI.openModal instead");return new Promise((t,n)=>{(0,o.default)({...e,onClose:e=>{e?t():n()}})})}openPremiumPaymentModalInOverlay(e){if(__OVERLAY__)throw Error("Should not use this function from the overlay, use ModalAPI.openModal instead");let{initialPlanId:t,subscriptionTier:n,followupSKUInfo:a,analyticsObject:s}=null!=e?e:{};return new Promise((e,i)=>{this._premiumPaymentModalCloseResolve=e,this._premiumPaymentModalCloseReject=i,l.default.dispatch({type:"PREMIUM_PAYMENT_MODAL_OPEN",initialPlanId:t,subscriptionTier:n,followupSKUInfo:a,analyticsObject:s})})}constructor(...e){super(...e),this._premiumPaymentModalCloseResolve=null,this._premiumPaymentModalCloseReject=null,this._maybeFetchPremiumOffer=()=>{let e=u.default.getCurrentUser();if(null!=e&&e.verified&&!(0,c.isPremium)(e)&&d.default.shouldFetchOffer()){let{enabled:e}=E.default.getCurrentConfig({location:"PremiumManager"},{autoTrackExposure:!1});e?(0,m.fetchUserOffer)():h.default.fetchUserTrialOffer()}},this._maybeFetchReferralsRemaining=()=>{let e=u.default.getCurrentUser(),{enabled:t}=p.default.getCurrentConfig({location:"16261f_1"},{autoTrackExposure:!1});t&&null!=e&&e.verified&&(0,c.isPremiumExactly)(e,_.PremiumTypes.TIER_2)&&f.default.checkAndFetchReferralsRemaining()},this._handlePremiumPaymentModalOpen=e=>{(0,o.default)({...e,analyticsLocations:[r.default.OVERLAY],onClose:e=>{l.default.dispatch({type:"PREMIUM_PAYMENT_MODAL_CLOSE",didSucceed:e})}})},this._handlePremiumPaymentModalClose=e=>{let{didSucceed:t}=e;t&&null!=this._premiumPaymentModalCloseResolve?this._premiumPaymentModalCloseResolve():null!=this._premiumPaymentModalCloseReject&&this._premiumPaymentModalCloseReject(),this._premiumPaymentModalCloseResolve=null,this._premiumPaymentModalCloseReject=null}}}var I=new g},116616:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var s=n("77078"),l=n("305961");function i(e){let{onCloseCallback:t,analyticsLocations:i,...r}=e;(0,s.openModalLazy)(async()=>{let{default:e}=await n.el("341334").then(n.bind(n,"341334"));return t=>(0,a.jsx)(e,{...t,...r,analyticsLocations:i,guildCount:l.default.getGuildCount(),"aria-labelledby":"nitro-guild-cap-upsell"})},{onCloseCallback:t})}},950576:function(e,t,n){"use strict";n.r(t),n.d(t,{getPrivateChannelIntegrationAddedSystemMessageContent:function(){return i},getPrivateChannelIntegrationRemovedSystemMessageContent:function(){return r},getPrivateChannelIntegrationAddedSystemMessageASTContent:function(){return o},getPrivateChannelIntegrationRemovedSystemMessageASTContent:function(){return u}});var a=n("701909"),s=n("49111"),l=n("782340");function i(e){let{application:t,username:n,usernameHook:i=s.NOOP,applicationNameHook:r=s.NOOP}=e;return null!=t?l.default.Messages.PRIVATE_CHANNEL_INTEGRATION_ADDED.format({username:n,otherUsername:t.name,usernameHook:i,otherUsernameHook:r,helpCenterLink:a.default.getArticleURL(s.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)}):l.default.Messages.PRIVATE_CHANNEL_INTEGRATION_ADDED_DELETED_APPLICATION.format({username:n,usernameHook:i,helpCenterLink:a.default.getArticleURL(s.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)})}function r(e){let{application:t,username:n,usernameHook:i=s.NOOP,applicationNameHook:r=s.NOOP}=e;return null!=t?l.default.Messages.PRIVATE_CHANNEL_INTEGRATION_REMOVED.format({username:n,otherUsername:t.name,usernameHook:i,otherUsernameHook:r,helpCenterLink:a.default.getArticleURL(s.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)}):l.default.Messages.PRIVATE_CHANNEL_INTEGRATION_REMOVED_DELETED_APPLICATION.format({username:n,usernameHook:i,helpCenterLink:a.default.getArticleURL(s.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)})}function o(e){let{application:t,username:n,usernameOnClick:i,applicationNameOnClick:r,medium:o}=e;return null!=t?l.default.Messages.PRIVATE_CHANNEL_INTEGRATION_ADDED_MOBILE.astFormat({username:n,otherUsername:t.name,usernameOnClick:i,otherUsernameOnClick:r,medium:o,helpCenterLink:{url:a.default.getArticleURL(s.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)}}):l.default.Messages.PRIVATE_CHANNEL_INTEGRATION_ADDED_DELETED_APPLICATION_MOBILE.astFormat({username:n,usernameOnClick:i,medium:o,helpCenterLink:{url:a.default.getArticleURL(s.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)}})}function u(e){let{application:t,username:n,usernameOnClick:i,applicationNameOnClick:r,medium:o}=e;return null!=t?l.default.Messages.PRIVATE_CHANNEL_INTEGRATION_REMOVED_MOBILE.astFormat({username:n,otherUsername:t.name,usernameOnClick:i,otherUsernameOnClick:r,medium:o,helpCenterLink:{url:a.default.getArticleURL(s.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)}}):l.default.Messages.PRIVATE_CHANNEL_INTEGRATION_REMOVED_DELETED_APPLICATION_MOBILE.astFormat({username:n,usernameOnClick:i,medium:o,helpCenterLink:{url:a.default.getArticleURL(s.HelpdeskArticles.PRIVATE_CHANNEL_INTEGRATIONS)}})}},86456:function(e,t,n){"use strict";n.r(t),n.d(t,{PrivateChannelIntegrationAddedSystemMessage:function(){return I},PrivateChannelIntegrationRemovedSystemMessage:function(){return T}});var a=n("37983"),s=n("884691"),l=n("77078"),i=n("272030"),r=n("574073"),o=n("232259"),u=n("506885"),d=n("981601"),c=n("697218"),f=n("304198"),m=n("315102"),h=n("441823"),E=n("140596"),p=n("950576"),_=n("49111");function g(e){return s.useCallback(t=>(s,r)=>{var o;let f=m.default.getApplicationIconURL({id:t.id,icon:t.icon,bot:t.bot,botIconFirst:!0}),p=c.default.getUser(null===(o=t.bot)||void 0===o?void 0:o.id),_=E.default.getIntegration(e.id,t.id),g=e.isPrivate()&&null!=_?t=>{(0,i.openContextMenuLazy)(t,async()=>{let{default:t}=await n.el("348866").then(n.bind(n,"348866"));return n=>(0,a.jsx)(t,{...n,channel:e,integration:_})})}:null!=p?t=>(0,h.openUserContextMenu)(t,p,e):void 0,{bot:I}=t;return null==I?s:(0,a.jsx)(l.Popout,{position:"right",preload:()=>(0,u.default)(I.id,f,{guildId:e.guild_id,channelId:e.id}),renderPopout:t=>(0,a.jsx)(d.default,{...t,userId:I.id,guildId:e.guild_id,channelId:e.id}),children:e=>(0,a.jsx)(l.Anchor,{...e,onContextMenu:g,children:s})},r)},[e])}function I(e){let{message:t,channel:s,compact:l}=e,i=(0,r.default)(t),u=t.application,d=(0,o.useUsernameHook)(t.author,s.id,s.guild_id),c=g(s);return(0,a.jsx)(f.default,{icon:n("127067"),timestamp:t.timestamp,compact:l,children:(0,p.getPrivateChannelIntegrationAddedSystemMessageContent)({application:u,username:i.nick,usernameHook:d(i),applicationNameHook:null!=u?c(u):_.NOOP})})}function T(e){let{message:t,channel:s,compact:l}=e,i=(0,r.default)(t),u=t.application,d=(0,o.useUsernameHook)(t.author,s.id,s.guild_id),c=g(s);return(0,a.jsx)(f.default,{icon:n("226315"),timestamp:t.timestamp,compact:l,children:(0,p.getPrivateChannelIntegrationRemovedSystemMessageContent)({application:u,username:i.nick,usernameHook:d(i),applicationNameHook:null!=u?c(u):_.NOOP})})}},407972:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var s=n("77078"),l=n("145131"),i=n("730541"),r=n("782340"),o=n("175333"),u=()=>(0,a.jsxs)(l.default,{align:l.default.Align.CENTER,justify:l.default.Justify.CENTER,direction:l.default.Direction.VERTICAL,className:o.popout,children:[(0,a.jsx)("img",{alt:"",src:(0,i.getPublicSystemMessageAvatar)(),className:o.avatar}),(0,a.jsxs)(l.default,{align:l.default.Align.CENTER,justify:l.default.Justify.CENTER,className:o.nameWrapper,children:[(0,a.jsx)(s.Tooltip,{text:r.default.Messages.STAFF_BADGE_TOOLTIP,children:e=>(0,a.jsx)("div",{...e,className:o.staffBadge})}),(0,a.jsx)(s.Heading,{className:o.header,variant:"heading-md/semibold",children:r.default.Messages.ANNOUNCEMENT_GUILD_POPOUT_NAME})]}),(0,a.jsx)(s.Text,{className:o.description,color:"header-secondary",variant:"text-sm/normal",children:r.default.Messages.ANNOUNCEMENT_GUILD_DESCRIPTION}),(0,a.jsx)(s.Text,{className:o.description,color:"header-secondary",variant:"text-sm/normal",children:r.default.Messages.ANNOUNCEMENT_GUILD_HERE_TO_HELP})]})},219013:function(e,t,n){"use strict";n.r(t),n.d(t,{ReactionPicker:function(){return i}});var a=n("37983");n("884691");var s=n("86678"),l=n("958706");function i(e){let{channel:t,closePopout:n,analyticsOverride:i,onSelectEmoji:r,messageId:o}=e;return(0,a.jsx)(s.default,{closePopout:n,channel:t,onSelectEmoji:r,pickerIntention:l.EmojiIntention.REACTION,analyticsOverride:i,messageId:o})}},170213:function(e,t,n){"use strict";var a,s,l,i,r,o;n.r(t),n.d(t,{SafetyHubView:function(){return a},SafetyHubLinks:function(){return u},SafetyHubPolicyNoticeKeys:function(){return d},SafetyHubAnalyticsActions:function(){return s},SafetyHubAnalyticsActionSource:function(){return l}}),(i=a||(a={})).SETTINGS="SETTINGS",i.ACCOUNT_STANDING="ACCOUNT_STANDING";class u{}u.TOS_LINK="https://discord.com/terms",u.COMMUNITY_GUIDELINES="https://discord.com/guidelines",u.APPEALS_LINK="https://support.discord.com/hc/requests/new";class d{}d.CLASSIFICATION_ID="classification_id",d.INCIDENT_TIMESTAMP="incident_time",(r=s||(s={}))[r.ViewViolationDetail=0]="ViewViolationDetail",r[r.ViewViolationsDropdown=1]="ViewViolationsDropdown",r[r.ClickLetUsKnow=2]="ClickLetUsKnow",(o=l||(l={}))[o.SystemDM=0]="SystemDM",o[o.StandingTab=1]="StandingTab"},705423:function(e,t,n){"use strict";n.r(t),n.d(t,{SafetyPolicyNotice:function(){return m}});var a=n("37983");n("884691");var s=n("866227"),l=n.n(s),i=n("669491"),r=n("779807"),o=n("77078"),u=n("170213"),d=n("782340"),c=n("234995");let f=e=>l().diff(l.unix(e),"days");function m(e){var t,s,l,m,h;if(null==e.message.embeds||null==e.message.embeds[0].fields)return null;let E=e.message.embeds[0],p=null!==(l=null===(t=E.fields)||void 0===t?void 0:t.find(e=>e.rawName===u.SafetyHubPolicyNoticeKeys.CLASSIFICATION_ID))&&void 0!==l?l:void 0,_=null!==(m=null==p?void 0:p.rawValue)&&void 0!==m?m:void 0,g=null!==(h=null===(s=E.fields)||void 0===s?void 0:s.find(e=>e.rawName===u.SafetyHubPolicyNoticeKeys.INCIDENT_TIMESTAMP))&&void 0!==h?h:void 0,I=null==g||null==g.rawValue?void 0:parseFloat(g.rawValue);return null==_||null==I?null:(0,a.jsxs)(o.Clickable,{onClick:()=>{(0,o.openModalLazy)(async()=>{let{default:e}=await n.el("825138").then(n.bind(n,"825138"));return t=>(0,a.jsx)(e,{classificationId:_,source:u.SafetyHubAnalyticsActionSource.SystemDM,transitionState:t.transitionState,onClose:t.onClose})})},className:c.safetyPolicyNoticeContainer,children:[(0,a.jsxs)("div",{className:c.noticeContent,children:[(0,a.jsxs)("div",{className:c.headerRow,children:[(0,a.jsx)(r.WarningIcon,{className:c.warningIcon,color:i.default.colors.STATUS_DANGER}),(0,a.jsx)(o.Text,{variant:"text-md/semibold",children:d.default.Messages.SAFETY_POLICY_NOTICE_HEADER})]}),(0,a.jsx)("div",{className:c.incidentTiming,children:(0,a.jsx)(o.Text,{variant:"text-xs/medium",children:d.default.Messages.SAFETY_POLICY_NOTICE_DAYS_AGO.format({daysAgo:f(I)})})}),(0,a.jsx)("div",{className:c.noticeBody,children:(0,a.jsx)(o.Text,{variant:"text-md/normal",color:"text-muted",children:d.default.Messages.SAFETY_POLICY_NOTICE_BODY})})]}),(0,a.jsx)("div",{className:c.footerContainer,children:(0,a.jsx)(o.Button,{look:o.Button.Looks.BLANK,className:c.detailsButton,color:o.Button.Colors.WHITE,children:d.default.Messages.SAFETY_POLICY_NOTICE_BUTTON})})]})}},866253:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n("37983");n("884691");var s=n("77078"),l=n("996866");function i(e){let{activity:t,user:n,source:i,...r}=e,{label:o,tooltip:u,loading:d,disabled:c,onClick:f}=(0,l.useSpotifyJoinAction)(t,n,i);return(0,a.jsx)(s.Tooltip,{text:u,children:e=>{let{onMouseEnter:t,onMouseLeave:n}=e;return(0,a.jsx)(s.Button,{...r,color:c?s.Button.Colors.PRIMARY:s.Button.Colors.GREEN,onClick:f,onMouseEnter:t,onMouseLeave:n,disabled:!d&&c,submitting:d,children:o})}})}},943508:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}}),n("222007");var a=n("37983"),s=n("884691"),l=n("769846"),i=n("77078"),r=n("812204"),o=n("716241"),u=n("685665"),d=n("933629"),c=n("437472"),f=n("159885"),m=n("256860"),h=n("161585"),E=n("41170"),p=n("139185"),_=n("49111"),g=n("646718"),I=n("814809");let T=(0,f.cssValueToNumber)(l.default.STICKERS_CONSTANTS_STICKER_DIMENSION),C=e=>{null!=e&&o.default.trackWithMetadata(_.AnalyticEvents.EXPRESSION_TOOLTIP_VIEWED,{type:g.PremiumUpsellTypes.STICKER_IN_MESSAGE_HOVER,expression_id:e.id,expression_name:e.name,is_animated:(0,h.isAnimatedSticker)(e.format_type),is_custom:(0,h.isCustomSticker)(e.type)})};var S=e=>{let{renderableSticker:t,channel:n,isInteracting:l}=e,[o,f]=s.useState(!0),[h,_]=s.useState(String(Date.now())),[g]=(0,m.useStickerForRenderableSticker)(t,l),{AnalyticsLocationProvider:S}=(0,u.default)(r.default.STICKER_MESSAGE),A=(0,a.jsxs)("span",{className:I.stickerName,children:[(0,a.jsx)(c.default,{className:I.stickerIcon}),(null!=g?g:t).name]});return(0,a.jsx)(S,{children:(0,a.jsx)(i.Popout,{align:"center",animation:i.Popout.Animation.TRANSLATE,positionKey:h,onRequestClose:()=>{f(!0)},renderPopout:e=>(0,a.jsx)(p.default,{...e,renderableSticker:t,channel:n,refreshPositionKey:()=>_(String(Date.now()))}),children:e=>{let{onClick:n}=e;return(0,a.jsx)(i.Tooltip,{...d.EXPRESSION_TOOLTIP_PROPS,shouldShow:o,text:(0,d.renderClickableTooltipNode)(A),"aria-label":!1,onTooltipShow:()=>{C(g)},children:e=>(0,a.jsx)(i.Clickable,{...e,className:I.clickableSticker,onClick:e=>{f(!o),n(e)},tag:"span",children:(0,a.jsx)(E.default,{isInteracting:l,size:T,sticker:null!=g?g:t})})})}})})}},139185:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}}),n("808653"),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("446674"),o=n("77078"),u=n("851387"),d=n("716241"),c=n("446066"),f=n("243375"),m=n("459698"),h=n("933629"),E=n("626301"),p=n("716849"),_=n("552917"),g=n("635956"),I=n("305961"),T=n("697218"),C=n("145131"),S=n("98292"),A=n("256170"),N=n("599110"),M=n("719923"),v=n("256860"),x=n("364685"),O=n("24373"),L=n("41170"),R=n("730723"),y=n("49111"),P=n("646718"),D=n("782340"),j=n("347826"),b=n("154403");let U=(e,t)=>t?D.default.Messages.STICKER_POPOUT_PACK_INFO_PREMIUM.format({stickerPackName:e.name}):D.default.Messages.STICKER_POPOUT_PACK_INFO_UNAVAILABLE.format({stickerPackName:e.name}),B=e=>{let{sticker:t,stickerPack:n}=e;return s.useMemo(()=>null==n?[]:n.stickers.slice(0,4).reduce((e,n)=>3!==e.length&&n.id!==t.id?e.concat(n):e,[]),[t,n])};function G(e){N.default.track(y.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:null!=e.guild_id?y.AnalyticsPages.GUILD_CHANNEL:y.AnalyticsPages.DM_CHANNEL,location_section:y.AnalyticsSections.STICKER_POPOUT}),(0,E.navigateToPremiumMarketingPage)()}function k(e){let{sticker:t,description:n}=e;return(0,a.jsxs)(C.default,{children:[(0,a.jsx)(L.default,{sticker:t,size:48,isInteracting:!0}),(0,a.jsxs)(C.default,{direction:C.default.Direction.VERTICAL,justify:C.default.Justify.CENTER,className:b.truncatingText,children:[(0,a.jsx)(o.Text,{className:b.emojiName,variant:"text-md/semibold",children:(0,a.jsx)(S.default,{children:t.name})}),null!=n&&(0,a.jsx)(o.Text,{variant:"text-sm/normal",children:n})]})]})}let w=e=>{let{closePopout:t,sticker:n,channel:l,refreshPositionKey:i}=e,[u,c,f]=(0,r.useStateFromStoresArray)([x.default],()=>[x.default.getStickerPack(n.pack_id),!x.default.hasLoadedStickerPacks,x.default.isPremiumPack(n.pack_id)],[n]),m=B({sticker:n,stickerPack:u});(0,v.useFetchStickerPack)(n.pack_id);let E=(0,v.useFilteredStickerPackCategories)(l);return((0,p.useMaybeFetchPremiumLikelihood)(_.default),s.useEffect(()=>{i()},[c]),s.useEffect(()=>{N.default.track(y.AnalyticEvents.OPEN_POPOUT,{type:y.AnalyticsSections.STICKER_POPOUT,guild_id:l.getGuildId(),sticker_pack_id:n.pack_id,...(0,d.collectChannelAnalyticsMetadata)(l)})},[n.pack_id]),c||null==u)?(0,a.jsx)(h.PopoutLoadingAnimation,{className:j.popoutLoader}):(0,a.jsxs)(h.MessagePopoutContent,{className:j.popoutContent,children:[(0,a.jsx)(o.Heading,{variant:"heading-md/semibold",children:n.name}),(0,a.jsx)(o.Text,{variant:"text-sm/normal",children:U(u,f)}),(0,a.jsx)("ul",{className:j.stickersList,children:m.map(e=>(0,a.jsx)(L.default,{isInteracting:!0,size:80,sticker:e},e.id))}),f&&(0,a.jsx)("div",{className:j.packActions,children:(0,a.jsx)(o.Button,{color:o.Button.Colors.PRIMARY,size:o.Button.Sizes.SMALL,onClick:()=>{f&&(0,R.navigateToOwnedStickerPack)({stickerPack:u,stickerPickerCategories:E}),t()},children:D.default.Messages.STICKER_VIEW_MORE_STICKERS},"view-sticker-pack")})]})},H=e=>{let t,{sticker:n,channel:l,closePopout:E,refreshPositionKey:p}=e,[_,S]=s.useState(null),[v,x]=s.useState(!1),O=T.default.getCurrentUser(),R=M.default.canUseCustomStickersEverywhere(O),U=(0,r.useStateFromStores)([I.default],()=>I.default.getGuild(n.guild_id)),B=null!=U,[w,H]=s.useState(!1),[F,V]=s.useState(null),Y=s.useMemo(()=>({page:null!=l.guild_id?y.AnalyticsPages.GUILD_CHANNEL:y.AnalyticsPages.DM_CHANNEL,section:y.AnalyticsSections.STICKER_POPOUT}),[l.guild_id]),{current:W}=s.useRef({guild_id:l.getGuildId(),...(0,d.collectChannelAnalyticsMetadata)(l)});s.useEffect(()=>{let e=async()=>{let e=null==U||U.hasFeature(y.GuildFeatures.DISCOVERABLE);if(e){let e=await (0,f.default)(n.id);S(e)}x(!0)};e()},[n.id,B]);let K=n.guild_id===l.getGuildId(),z=null!=_,Z=!1,J="Custom Sticker Popout";R?t=B?K?D.default.Messages.STICKER_POPOUT_PREMIUM_CURRENT_GUILD_DESCRIPTION:D.default.Messages.STICKER_POPOUT_PREMIUM_JOINED_GUILD_DESCRIPTION:z?D.default.Messages.STICKER_POPOUT_PREMIUM_UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION:D.default.Messages.STICKER_POPOUT_PREMIUM_UNJOINED_PRIVATE_GUILD_DESCRIPTION:B?(K?t=D.default.Messages.STICKER_POPOUT_CURRENT_GUILD_DESCRIPTION:t=D.default.Messages.STICKER_POPOUT_JOINED_GUILD_DESCRIPTION,Z=!0,J="Custom Sticker Popout (Upsell)"):z?(t=D.default.Messages.STICKER_POPOUT_UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION,Z=!0,J="Custom Sticker Popout (Upsell)"):(t=D.default.Messages.STICKER_POPOUT_UNJOINED_PRIVATE_GUILD_DESCRIPTION.format({openPremiumSettings:()=>{G(l),E()}}),J="Custom Sticker Popout (Soft Upsell)");let X=!Z&&!B&&z&&R;return(s.useEffect(()=>{p()},[v,_]),s.useEffect(()=>{N.default.track(y.AnalyticEvents.OPEN_POPOUT,{type:J,...W})},[]),v)?(0,a.jsxs)(h.MessagePopoutContent,{className:b.popoutContent,children:[(()=>{let e=async()=>{if(null==_||B)return;E();let e=_.id;try{await u.default.joinGuild(e),u.default.transitionToGuildSync(e)}catch{}};return(0,a.jsxs)("div",{className:b.emojiSection,children:[(0,a.jsx)(k,{description:t,sticker:n}),Z&&(0,a.jsx)(g.default,{className:b.ctaButton,subscriptionTier:P.PremiumSubscriptionSKUs.TIER_2,size:o.Button.Sizes.SMALL,fullWidth:!0,buttonText:D.default.Messages.EMOJI_POPOUT_PREMIUM_CTA,onSubscribeModalClose:t=>t?e():E(),postSuccessGuild:B||null==_?void 0:_,premiumModalAnalyticsLocation:Y}),X&&(0,a.jsx)(o.Button,{size:o.Button.Sizes.SMALL,className:b.ctaButton,fullWidth:!0,onClick:e,children:D.default.Messages.GUILD_PROFILE_JOIN_SERVER_BUTTON})]})})(),(null!=U||null!=_)&&(()=>{var e;if(!z&&!B)return;let t=(null!==(e=null==_?void 0:_.stickers)&&void 0!==e?e:[]).slice(0,13).filter(e=>e.id!==n.id).slice(0,12),s=null!=_?c.default.createFromDiscoverableGuild(_):c.default.createFromGuildRecord(U);return(0,a.jsxs)("div",{className:b.guildSection,children:[(0,a.jsx)(o.FormTitle,{className:b.guildTitle,children:B?D.default.Messages.STICKER_POPOUT_JOINED_GUILD_EMOJI_DESCRIPTION:D.default.Messages.STICKER_POPOUT_UNJOINED_GUILD_EMOJI_DESCRIPTION}),(0,a.jsx)(m.GuildDetails,{expressionSourceGuild:s,hasJoinedExpressionSourceGuild:B,isDisplayingJoinGuildButtonInPopout:X}),!B&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Clickable,{onClick:()=>{p(),H(!w)},className:b.showMoreEmojis,children:(0,a.jsxs)(C.default,{children:[(0,a.jsx)(o.Text,{className:b.showMoreEmojisLabel,variant:"text-xs/normal",color:"none",children:D.default.Messages.STICKER_POPOUT_SHOW_MORE_STICKERS}),(0,a.jsx)(A.default,{className:i(b.showMoreEmojisArrow,{[b.showMoreEmojisArrowCollapsed]:!w})})]})}),w&&(0,a.jsx)(C.default,{wrap:C.default.Wrap.WRAP,align:C.default.Align.START,justify:C.default.Justify.START,className:b.otherEmojisContainer,children:t.map(e=>(0,a.jsx)(o.Tooltip,{text:e.name,...h.EXPRESSION_TOOLTIP_PROPS,children:t=>{let{onMouseEnter:n,onMouseLeave:s,...l}=t;return(0,a.jsx)("div",{className:i(b.otherEmoji,{[j.nonInteractingSticker]:null!=F&&F!==e.id}),onMouseEnter:()=>{null==n||n(),V(e.id)},onMouseLeave:()=>{null==s||s(),V(null)},...l,children:(0,a.jsx)(L.default,{size:32,enlargeOnInteraction:!0,enlargeWithName:!1,enlargeScaleFactor:2,isInteracting:F===e.id,sticker:e})},e.id)}},e.id))})]})]})})()]}):(0,a.jsx)(h.PopoutLoadingAnimation,{className:j.popoutLoader})};function F(e){let{channel:t,closePopout:n,sticker:s}=e;return(0,a.jsx)(h.MessagePopoutContent,{className:j.popoutContent,children:(0,a.jsx)(k,{sticker:s,description:D.default.Messages.STICKER_POPOUT_UNJOINED_PRIVATE_GUILD_DESCRIPTION.format({openPremiumSettings:()=>{n(),G(t)}})})})}var V=e=>{let{renderableSticker:t,channel:n,closePopout:s,refreshPositionKey:l}=e,[i,r]=(0,v.useStickerForRenderableSticker)(t,!0);if(null!=i&&(0,O.isStandardSticker)(i))return(0,a.jsx)(w,{sticker:i,closePopout:s,channel:n,refreshPositionKey:l});if(null!=i&&(0,O.isGuildSticker)(i))return(0,a.jsx)(H,{sticker:i,channel:n,closePopout:s,refreshPositionKey:l});if(!r)return(0,a.jsx)(h.PopoutLoadingAnimation,{});else if(r&&null==i)return(0,a.jsx)(F,{channel:n,closePopout:s,sticker:t});return s(),null}},730723:function(e,t,n){"use strict";n.r(t),n.d(t,{navigateToOwnedStickerPack:function(){return r}});var a=n("986632"),s=n("659500"),l=n("49111"),i=n("13030");function r(e){let{stickerPack:t,stickerPickerCategories:n}=e;s.ComponentDispatch.dispatchToLastSubscribed(l.ComponentActions.OPEN_EXPRESSION_PICKER,{activeView:i.ExpressionPickerViewType.STICKER});let r=n.findIndex(e=>e.id===t.id);-1!==r&&a.StickerPickerStore.setActiveCategoryIndex(r)}},415829:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("446674"),r=n("77078"),o=n("272030"),u=n("913491"),d=n("42203"),c=n("69890"),f=n("610730"),m=n("487269"),h=n("292657"),E=n("967241"),p=n("49111"),_=n("782340"),g=n("758179");function I(e){let{message:t,compact:n}=e,s=(0,i.useStateFromStores)([d.default],()=>d.default.getChannel(t.id));return null==s?null:(0,a.jsx)(T,{channel:s,compact:n,isSystemMessage:(0,u.default)(t)})}function T(e){let{channel:t,compact:s,isSystemMessage:u}=e,d=(0,i.useStateFromStores)([f.default],()=>f.default.getCount(t.id)),I=function(e){var t;let n=(0,i.useStateFromStores)([f.default],()=>f.default.getMostRecentMessage(e.id)),s=(0,i.useStateFromStores)([f.default],()=>f.default.getCount(e.id)),l=(0,m.useLastMessageTimestamp)(e);return(null===(t=e.threadMetadata)||void 0===t?void 0:t.archived)?_.default.Messages.NO_RECENT_THREAD_MESSAGES:null==s||0===s?_.default.Messages.NO_THREAD_MESSAGES:null==n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:_.default.Messages.NO_RECENT_THREAD_MESSAGES}),(0,a.jsx)("span",{className:g.timestamp,children:(0,m.getTimestampString)(l)})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.default,{message:n,channel:e}),(0,a.jsx)("span",{className:g.timestamp,children:(0,m.getTimestampString)(l)})]})}(t),T=null!=d&&d>0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:l(g.spine,{[g.cozy]:!s,[g.systemMessageSpine]:u})}),(0,a.jsx)(r.Clickable,{onClick:function(e){e.stopPropagation(),(0,E.openThreadSidebarForViewing)(t,e.shiftKey)},onKeyDown:function(e){e.stopPropagation();let n=!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey,a=e.shiftKey&&!(e.altKey||e.ctrlKey||e.metaKey);(e.which===p.KeyboardKeys.SPACE||e.which===p.KeyboardKeys.ENTER)&&(e.preventDefault(),(n||a)&&(0,E.openThreadSidebarForViewing)(t,a))},onContextMenu:function(e){(0,o.openContextMenuLazy)(e,async()=>{let{default:e}=await n.el("994827").then(n.bind(n,"994827"));return n=>(0,a.jsx)(e,{channel:t,...n})})},"aria-roledescription":_.default.Messages.THREAD_MESSAGE_ROLE_DESCRIPTION,className:l(g.container,{[g.systemMessageContainer]:u}),children:(0,a.jsxs)(r.BlockInteractions,{children:[(0,a.jsxs)("div",{className:g.topLine,children:[(0,a.jsx)(r.HiddenVisually,{children:_.default.Messages.THREAD}),(0,a.jsx)("span",{className:g.name,children:t.name}),(0,a.jsx)("span",{className:g.cta,"aria-hidden":!T,children:(0,c.formatMessageCountLabel)(d,t.id)})]}),(0,a.jsx)("span",{"aria-hidden":!0,className:l(g.bottomLine),children:I})]})})]})}},292657:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n("37983"),s=n("884691"),l=n("446674"),i=n("750560"),r=n("95045"),o=n("14526"),u=n("27618"),d=n("93427"),c=n("719347"),f=n("741566");function m(e){let{message:t,channel:n}=e,m=(0,l.useStateFromStores)([u.default],()=>u.default.isBlocked(t.author.id)),h=s.useMemo(()=>({[n.guild_id]:[t.author.id]}),[n.guild_id,t.author.id]);(0,i.useSubscribeGuildMembers)(h);let E=s.useMemo(()=>null!=t.content&&""!==t.content?(0,r.default)(t,{formatInline:!0}).content:null,[t]);return(0,a.jsxs)("div",{className:f.threadMessageAccessory,children:[(0,a.jsx)("img",{alt:"",src:t.author.getAvatarURL(n.guild_id,16),className:f.threadMessageAccessoryAvatar}),(0,a.jsx)(o.default,{message:t,channel:n,compact:!0}),(0,a.jsx)("div",{className:f.threadMessageAccessoryPreview,children:function(e,t,n){let{contentPlaceholder:s,renderedContent:l,icon:i}=(0,d.renderSingleLineMessage)(e,t,n,f.threadMessageAccessoryContent,{iconClass:f.threadMessageAccessoryContentIcon,iconSize:c.SINGLE_LINE_MESSAGE_DEFAULT_ICON_SIZE});return(0,a.jsxs)(a.Fragment,{children:[null!=l?l:(0,a.jsx)("span",{className:f.threadMessageAccessoryPlaceholder,children:s}),i]})}(t,E,m)})]})}},923873:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("862205");let s=(0,a.createExperiment)({kind:"user",id:"2023-10_thumbhash_messages",label:"Display thumbhash placeholders when loading message images",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Display thumbhashes",config:{enabled:!0}}]});var l=s},165405:function(e,t,n){"use strict";n.r(t),n.d(t,{logVoiceMessagePlaybackStarted:function(){return r},logVoiceMessagePlaybackEnded:function(){return o},logVoiceMessagePlaybackFailed:function(){return u}});var a,s,l=n("599110"),i=n("49111");function r(e,t,n,a){l.default.track(i.AnalyticEvents.VOICE_MESSAGE_PLAYBACK_STARTED,{message_id:e,total_duration_secs:t,start_duration_secs:Math.min(null!=t?t:n,n),sender_user_id:a})}function o(e,t,n,a,s){l.default.track(i.AnalyticEvents.VOICE_MESSAGE_PLAYBACK_ENDED,{message_id:e,total_duration_secs:t,end_duration_secs:Math.min(null!=t?t:n,n),sender_user_id:a,duration_listening_secs:s})}function u(e,t){l.default.track(i.AnalyticEvents.VOICE_MESSAGE_PLAYBACK_FAILED,{message_id:e,error_message:t})}(a=s||(s={})).SENT="sent",a.CANCELLED_DURATION="cancelled_duration",a.CANCELLED_USER_REQUESTED="cancelled_user_requested",a.CANCELLED_GESTURE_CONFLICT="cancelled_gesture_conflict",a.CANCELLED_ON_BACKGROUND="cancelled_on_background"},417256:function(e,t,n){"use strict";n.r(t),n.d(t,{WELCOME_STICKERS:function(){return a}});let a=[{id:"749054660769218631",format_type:3,description:"Wumpus waves hello",name:"Wave"},{id:"751606379340365864",format_type:3,description:"Nelly peeks around a wall and waves hello",name:"Wave"},{id:"754108890559283200",format_type:3,description:"Clyde cheerfully waving",name:"Wave"},{id:"781291131828699156",format_type:2,description:"Choco waves in greeting",name:"Wave"},{id:"816087792291282944",format_type:3,description:"Doggo spins and greets you",name:"Sup"},{id:"819128604311027752",format_type:3,description:"Peach raising her arms in distress",name:"Scream"}]},825150:function(e,t,n){"use strict";n.r(t),n.d(t,{pickWelcomeSticker:function(){return u},handleWelcomeCtaClicked:function(){return d}});var a=n("819689"),s=n("697218"),l=n("599110"),i=n("299039"),r=n("417256"),o=n("49111");let u=e=>{var t;let n=null===(t=s.default.getCurrentUser())||void 0===t?void 0:t.id,a=null!=n?i.default.extractTimestamp(n):0,l=(a+i.default.extractTimestamp(e))%r.WELCOME_STICKERS.length;return r.WELCOME_STICKERS[l]},d=(e,t,n)=>{var i;a.default.sendGreetMessage(e.id,n,a.default.getSendMessageOptionsForReply({channel:e,message:t,shouldMention:!0,showMentionToggle:!0})),l.default.track(o.AnalyticEvents.WELCOME_CTA_CLICKED,{is_reply:!0,sticker_id:n,target_user:t.author.id,sender:null===(i=s.default.getCurrentUser())||void 0===i?void 0:i.id})}},936436:function(e,t,n){"use strict";n.r(t),n.d(t,{WelcomeCTAContainer:function(){return T}}),n("222007");var a=n("37983"),s=n("884691"),l=n("446674"),i=n("77078"),r=n("850391"),o=n("41170"),u=n("300322"),d=n("26989"),c=n("305961"),f=n("957255"),m=n("697218"),h=n("718422"),E=n("825150"),p=n("49111"),_=n("782340"),g=n("727171");let I=e=>{let{channel:t,message:n}=e,[l,u]=s.useState(!1),d=(0,E.pickWelcomeSticker)(n.id),c=s.useCallback(()=>{(0,h.applyChatRestrictions)({type:r.ChatInputTypes.FORM,content:"",channel:t}).then(e=>{let{valid:a}=e;a&&(0,E.handleWelcomeCtaClicked)(t,n,d.id)})},[t,n,d]);return(0,a.jsx)("div",{className:g.welcomeCTA,children:(0,a.jsxs)(i.Button,{className:g.welcomeCTAButtonOuter,innerClassName:g.welcomeCTAButton,color:i.ButtonColors.PRIMARY,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onClick:c,children:[(0,a.jsx)(o.default,{className:g.welcomeCTASticker,isInteracting:l,sticker:d,size:28}),_.default.Messages.WELCOME_CTA_LABEL]})})},T=e=>{let{message:t,channel:n}=e,s=n.getGuildId(),i=(0,l.useStateFromStores)([m.default,f.default,c.default,d.default],()=>{var e;let a=m.default.getCurrentUser(),l=(0,u.computeIsReadOnlyThread)(n),i=f.default.can(p.Permissions.SEND_MESSAGES,n),r=null!=s&&null!=a&&(null===(e=d.default.getMember(s,a.id))||void 0===e?void 0:e.isPending),o=t.author.bot,h=c.default.getGuild(s),E=null!=h&&(h.systemChannelFlags&p.SystemChannelFlags.SUPPRESS_JOIN_NOTIFICATION_REPLIES)==0;return i&&!l&&!r&&!o&&E});return null!=s&&i?(0,a.jsx)(I,{message:t,channel:n}):null}},671071:function(e,t,n){"use strict";n.r(t),n.d(t,{SPOTIFY_APPLICATION_ID:function(){return i},SpotifyApplication:function(){return o},default:function(){return a}});var a,s=n("376556"),l=n("653047");let i="spotify",r=s.default.get(i);a=class extends l.default{getIconURL(e){return r.icon.lightPNG}constructor(){super({}),this.id=i,this.name=r.name}};let o=new a},925758:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}}),n("222007");var a=n("917351"),s=n.n(a),l=n("446674"),i=n("913144"),r=n("271938"),o=n("27618"),u=n("101125"),d=n("49111");let c={},f={};function m(e,t){var n;let a=null!==(n=c[e])&&void 0!==n?n:{};return a[t]}function h(e,t){let n=m(e,t);if(null==n)return;let a=c[e];delete a[t],s.isEmpty(a)&&delete c[e];let l=f[n];null!=l&&(l.delete(e),0===l.size&&delete f[n])}function E(e,t,n,a){let s=n.find(e=>null!=e.party&&e.party.id),l=null!=s&&null!=s.party?s.party.id:null,i=m(t,e);if(null==l||a===d.StatusTypes.OFFLINE)return null!=i&&(h(t,e),void 0);if(null!=i){if(i===l)return!1;h(t,e)}!function(e,t,n){var a;let s=c[e];if(null==s&&(s=c[e]={}),s[t]=n,o.default.isBlocked(e))return;let l=null!==(a=f[n])&&void 0!==a?a:new Set;f[n]=l,l.add(e)}(t,e,l)}function p(e){let{guild:t}=e,n=!1;for(let{user:e,status:a,activities:s}of t.presences)!1!==E(t.id,e.id,s,a)&&(n=!0);return n}function _(e,t){let n=!1;return t.forEach(t=>{null!=t&&E(e,t.user.id,t.activities,t.status)&&(n=!0)}),n}function g(){let e=r.default.getId(),t=u.default.getActivities();return E(d.ME,e,t)}class I extends l.default.Store{initialize(){this.syncWith([u.default],g),this.waitFor(u.default,o.default)}getParty(e){return null!=e&&null!=f[e]?f[e]:null}getUserParties(){return c}getParties(){return f}}I.displayName="GamePartyStore";var T=new I(i.default,{CONNECTION_OPEN_SUPPLEMENTAL:function(e){let{guilds:t,presences:n}=e,a=!1;for(let{user:e,status:t,activities:s}of n)null!=e&&!1!==E(d.ME,e.id,s,t)&&(a=!0);for(let e of t)!1!==p({guild:e})&&(a=!0);return a},OVERLAY_INITIALIZE:function(e){let{parties:t,userParties:n}=e;f={},c={...n},Object.keys(t).forEach(e=>f[e]=new Set(t[e]))},GUILD_CREATE:p,PRESENCES_REPLACE:function(e){let{presences:t}=e,n=!1;for(let{user:e,activities:a}of t)null!=e&&!1!==E(d.ME,e.id,a)&&(n=!0);return n},PRESENCE_UPDATES:function(e){let{updates:t}=e;return t.map(e=>{let{guildId:t,user:n,status:a,activities:s}=e;return E(null!=t?t:d.ME,n.id,s,a)}).some(e=>e)},THREAD_MEMBER_LIST_UPDATE:function(e){let{guildId:t,members:n}=e;return _(t,n.map(e=>e.presence))},THREAD_MEMBERS_UPDATE:function(e){let{guildId:t,addedMembers:n}=e;return null!=n&&_(t,n.map(e=>e.presence))},RELATIONSHIP_ADD:function(e){let{relationship:t}=e;if(!o.default.isBlocked(t.id))return!1;let n=c[t.id];if(null==n)return!1;for(let e of s.values(n)){let n=f[e];null!=n&&n.delete(t.id)}},RELATIONSHIP_REMOVE:function(e){let{relationship:t}=e,n=c[t.id];if(null==n)return!1;for(let e of s.values(n)){let n=f[e];null!=n&&n.add(t.id)}}})},290877:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("446674"),s=n("913144");let l={matureAgree:!1,muted:!0};class i extends a.default.Store{get didMatureAgree(){return l.matureAgree}get isDirectoryMuted(){return l.muted}}i.displayName="ApplicationStoreSettingsStore";var r=new i(s.default,{APPLICATION_STORE_MATURE_AGREE:function(){l.matureAgree=!0},APPLICATION_STORE_DIRECTORY_MUTE:function(){l.muted=!0},APPLICATION_STORE_DIRECTORY_UNMUTE:function(){l.muted=!1}})},763237:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}}),n("222007"),n("424973");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("669491"),o=n("77078"),u=n("871388"),d=n("676223"),c=n("429928"),f=n("506885"),m=n("766274"),h=n("701909"),E=n("474293"),p=n("158998"),_=n("145131"),g=n("963422"),I=n("533403"),T=n("85175"),C=n("49111"),S=n("450484"),A=n("782340"),N=n("639700");class M extends s.PureComponent{render(){let{member:e,className:t,guildId:n}=this.props;return(0,a.jsx)(o.Popout,{renderPopout:this.renderUserPopout,position:"left",preload:()=>(0,f.default)(e.user.id,e.user.getAvatarURL(n,80),{guildId:n}),children:s=>{var l;return(0,a.jsx)(o.Tooltip,{text:e.unknownUser?null:null!==(l=e.nick)&&void 0!==l?l:p.default.getName(e.user),children:l=>(0,a.jsx)(o.Clickable,{className:e.unknownUser?N.partyMember:N.partyMemberKnown,...l,...s,children:(0,a.jsx)(o.Avatar,{src:e.user.getAvatarURL(n,24),size:o.AvatarSizes.SIZE_24,className:i(N.partyAvatar,t),"aria-label":e.user.username})})})}})}constructor(...e){super(...e),this.renderUserPopout=e=>{let{renderUserPopout:t,member:n}=this.props;return n.unknownUser?null:t(n.user,e)}}}class v extends s.PureComponent{isDeadInvite(){let{isPreview:e,message:t,activity:n,applicationId:a}=this.props;return!e&&!(null!=t&&(0,d.default)(n,t,a))}getPartySize(){let{activity:e}=this.props;return null==e||null==e.party||null==e.party.size||e.party.size.length<2?[-1,-1]:e.party.size}getActionableMode(){return[C.ActivityActionTypes.LISTEN,(0,C.ActivityActionTypes)].includes(this.props.activityActionType)||this.props.isPreview||this.canJoin()?"Actionable":"NotActionable"}isInParty(){let{activity:e,myPartyId:t,isPreview:n}=this.props;return!n&&null!=e&&null!=e.party&&t===e.party.id}isPartyFull(){let[e,t]=this.getPartySize();return e>-1&&e>=t}hasPartySize(){let[e,t]=this.getPartySize();return e>-1&&t>-1}isActionType(e){return this.props.activityActionType===e}canJoin(){let{activity:e,isPreview:t,isGameLaunchable:n,isInBrowser:a}=this.props;return!!t||!(this.isDeadInvite()||!this.isActionType(C.ActivityActionTypes.JOIN)||!(0,u.default)(e,C.ActivityFlags.JOIN)||!this.hasPartySize()||this.isPartyFull()||a||!n||this.isInParty())&&!0}canSendInvite(){let{activity:e,isPreview:t}=this.props;return!!t||!(this.isDeadInvite()||!this.isActionType(C.ActivityActionTypes.JOIN_REQUEST)||!(0,u.default)(e,C.ActivityFlags.JOIN)||!this.hasPartySize()||this.isPartyFull())&&!0}canSync(){let{activity:e,isPreview:t,isSyncable:n,isInBrowser:a}=this.props;return!!t||!(!this.isActionType(C.ActivityActionTypes.LISTEN)&&!this.isActionType(C.ActivityActionTypes.WATCH)||this.isDeadInvite()||!(0,u.default)(e,C.ActivityFlags.SYNC)||a||!n||this.isInParty())&&!0}getHelpdeskArticleURL(){let{partyId:e}=this.props;return null!=e&&(0,S.isSpotifyParty)(e)?C.HelpdeskArticles.SPOTIFY_CONNECTION:C.HelpdeskArticles.RICH_PRESENCE_INTRODUCTION}renderHeaderText(){let{activityActionType:e,name:t}=this.props;switch(e){case C.ActivityActionTypes.LISTEN:return A.default.Messages.INVITE_EMBED_INVITE_TO_LISTEN.format({name:t});case C.ActivityActionTypes.WATCH:return A.default.Messages.INVITE_EMBED_INVITE_TO_WATCH.format({name:t});case C.ActivityActionTypes.JOIN:return A.default.Messages.INVITE_EMBED_INVITE_TO_JOIN_GROUP;case C.ActivityActionTypes.JOIN_REQUEST:default:return A.default.Messages.INVITE_EMBED_ASK_TO_JOIN}}renderPartyStatus(){let{activityActionType:e,isGameLaunchable:t,isSyncable:n,isPreview:s,isInBrowser:l,name:i,activity:r}=this.props,[u,d]=this.getPartySize();if(this.isDeadInvite())switch(e){case C.ActivityActionTypes.LISTEN:return A.default.Messages.INVITE_EMBED_LISTEN_HAS_ENDED;case C.ActivityActionTypes.WATCH:return A.default.Messages.INVITE_EMBED_WATCH_HAS_ENDED;case C.ActivityActionTypes.JOIN:case C.ActivityActionTypes.JOIN_REQUEST:default:return A.default.Messages.INVITE_EMBED_GAME_HAS_ENDED}if(l&&!s&&e===C.ActivityActionTypes.JOIN)return A.default.Messages.INVITE_EMBED_JOIN_VIA_DESKTOP_APP;if(this.isActionType(C.ActivityActionTypes.LISTEN)||this.isActionType(C.ActivityActionTypes.WATCH))return null!=r&&null!=r.details&&null!=r.state&&(0,c.default)(r)?[(0,a.jsx)("div",{className:N.details,children:(0,a.jsx)(o.Anchor,{className:N.textLink,onClick:this.handleOpenSpotifyTrack,children:r.details})},"details"),(0,a.jsx)("div",{className:N.state,children:A.default.Messages.USER_ACTIVITY_LISTENING_ARTISTS.format({artists:r.state,artistsHook:(e,t)=>null!=r.state?(0,a.jsx)(g.default,{artists:r.state,linkClassName:N.textLink,canOpen:null!=r.sync_id,onOpenSpotifyArtist:this.handleOpenSpotifyArtist},t):null})},"state")]:this.isActionType(C.ActivityActionTypes.LISTEN)?A.default.Messages.USER_ACTIVITY_LISTEN_ALONG:A.default.Messages.USER_ACTIVITY_WATCH_ALONG;return this.isActionType(C.ActivityActionTypes.JOIN_REQUEST)?this.isPartyFull()?A.default.Messages.INVITE_EMBED_FULL_GROUP:A.default.Messages.INVITE_EMBED_NUM_OPEN_SLOTS.format({number:d-u}):this.isInParty()?A.default.Messages.INVITE_EMBED_IN_GROUP:t||n||s?this.isPartyFull()?A.default.Messages.INVITE_EMBED_FULL_GROUP:this.hasPartySize()?A.default.Messages.INVITE_EMBED_NUM_OPEN_SLOTS.format({number:d-u}):A.default.Messages.JOIN:A.default.Messages.USER_ACTIVITY_NOT_DETECTED.format({name:i})}renderActionButton(){let{isInBrowser:e,isPreview:t,isGameLaunchable:n,isSender:s,partyId:l,activity:i,message:r,renderSpotifyJoinButton:u,renderCustomButton:d}=this.props,c={className:N.actionButton,size:o.Button.Sizes.SMALL},f=null!=d?d(c):null;return null!=f?f:!this.isDeadInvite()&&this.isActionType(C.ActivityActionTypes.LISTEN)&&null!=l&&null!=r&&null!=i&&(0,S.isSpotifyParty)(l)?u({...c,activity:i,user:r.author}):(0,a.jsx)(o.Button,{...c,...(()=>{if(!t&&e&&!this.isDeadInvite())return{children:A.default.Messages.USER_ACTIVITY_ACTION_DOWNLOAD_APP,onClick:this.handleDownloadApp};if(this.canJoin())return{children:A.default.Messages.JOIN,onClick:this.handleJoin};if(this.canSync())return{children:A.default.Messages.JOIN,onClick:this.handleSync};if(this.canSendInvite())return{children:A.default.Messages.INVITE_EMBED_INVITE_TO_JOIN,onClick:this.handleInvite,disabled:s};return{children:this.isActionType(C.ActivityActionTypes.JOIN_REQUEST)?A.default.Messages.INVITE_EMBED_INVITE_TO_JOIN:A.default.Messages.JOIN,disabled:!0}})(),color:(e||n)&&!this.isDeadInvite()?o.Button.Colors.GREEN:o.Button.Colors.PRIMARY,submitting:this.props.isLoading})}renderMoreUsers(e,t,n){return(0,a.jsx)("div",{className:N.moreUsers,children:e},n)}renderParty(){let{partyId:e,partyMembers:t,hideParty:n,guildId:s}=this.props,[l,i]=this.getPartySize(),r=this.hasPartySize()||this.isActionType(C.ActivityActionTypes.LISTEN)||this.isActionType(C.ActivityActionTypes.WATCH);if(null==e||this.isDeadInvite()||!r||n)return null;let o=[...t],u=Math.min(l,6);for(;o.length<u;)o.push({user:new m.default({discriminator:"0005"}),unknownUser:!0});let d=Math.min(i,106);for(;o.length<d;)o.push(null);return(0,a.jsx)(I.default,{guildId:s,className:N.partyMembers,users:o,max:i>0?Math.min(i,6):6,renderUser:this.renderUser,renderMoreUsers:this.renderMoreUsers})}render(){let{className:e,coverImage:t,name:n,activity:s}=this.props,l=this.isActionType(C.ActivityActionTypes.JOIN)||this.isActionType(C.ActivityActionTypes.JOIN_REQUEST),u=this.isDeadInvite(),d=null;null==t||null==s||l?!l&&u&&(d=(0,a.jsx)("div",{className:N.artworkSpotifySessionEnded})):d=(0,a.jsx)("img",{alt:"",src:t,className:(0,E.getClass)(N,"artwork",this.getActionableMode())});let f=null!=s&&null!=d&&null!=s.assets&&null!=s.assets.large_text&&""!==s.assets.large_text&&!u&&(0,c.default)(s)?s.assets.large_text:null,m=null!=f?(0,a.jsx)(o.Tooltip,{text:f,children:e=>{let{onMouseEnter:t,onMouseLeave:n}=e;return(0,a.jsx)(o.Anchor,{onClick:this.handleOpenSpotifyAlbum,onMouseEnter:t,onMouseLeave:n,children:d})}}):d;return(0,a.jsxs)("div",{className:i(N.invite,e),children:[(0,a.jsx)("div",{className:N.coverImageWrapper,children:(0,a.jsx)("div",{className:i((0,E.getClass)(N,"coverImage",this.getActionableMode()),null!=d?N.blurred:null),style:{backgroundImage:null!=t?"url('".concat(t,"')"):void 0}})}),(0,a.jsxs)(_.default,{className:N.fullHeight,children:[(0,a.jsxs)(_.default,{direction:_.default.Direction.VERTICAL,children:[(0,a.jsx)("div",{className:N.header,children:this.renderHeaderText()}),(0,a.jsx)(_.default.Child,{className:N.partyStatus,children:this.renderPartyStatus()}),(0,a.jsxs)(_.default,{align:_.default.Align.END,children:[(0,a.jsxs)(_.default,{align:_.default.Align.CENTER,className:N.actionAndParty,basis:0,style:{marginRight:0},children:[this.renderActionButton(),this.renderParty()]}),null==d&&l?(0,a.jsx)("div",{className:N.name,children:n}):null]})]}),m]}),(0,a.jsx)(o.Anchor,{href:h.default.getArticleURL(this.getHelpdeskArticleURL()),className:N.helpIcon,children:(0,a.jsx)(T.default,{color:r.default.unsafe_rawColors.PRIMARY_300.css,width:12,height:12})})]})}constructor(...e){super(...e),this.handleJoin=()=>{let{onJoin:e}=this.props;null==e||e()},this.handleInvite=()=>{let{onInvite:e}=this.props;null==e||e()},this.handleSync=()=>{let{onSync:e}=this.props;null==e||e()},this.handleDownloadApp=()=>{let{onDownloadApp:e}=this.props;null==e||e()},this.handleOpenSpotifyTrack=()=>{let{activity:e,onOpenSpotifyTrack:t}=this.props;null!=e&&(null==t||t(e))},this.handleOpenSpotifyArtist=e=>{let{activity:t,onOpenSpotifyArtist:n,message:a}=this.props;null!=t&&null!=a&&(null==n||n(t,a.author.id,e))},this.handleOpenSpotifyAlbum=()=>{let{activity:e,onOpenSpotifyAlbum:t,message:n}=this.props;null!=e&&null!=n&&(null==t||t(e,n.author.id))},this.renderUser=(e,t,n)=>{let{renderUserPopout:s,guildId:l}=this.props;return null!=e?(0,a.jsx)(M,{member:e,renderUserPopout:s,className:t,guildId:l},n):(0,a.jsx)("div",{className:i(N.partyMemberEmpty,t)},n)}}}var x=v},85871:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("782340"),r=n("400625"),o=e=>{let{className:t}=e;return(0,a.jsx)("div",{className:l(r.tag,t),children:(0,a.jsx)("span",{className:r.text,children:i.default.Messages.APPLICATION_STORE_FIRST_ON_DISCORD})})}},265836:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n("222007");var a=n("37983"),s=n("884691"),l=n("862337");class i extends s.Component{static getDerivedStateFromProps(e){return e.disable?{hovered:!1}:null}componentDidMount(){let{pauseOnHover:e,disable:t}=this.props,n=this.state.hovered&&e;!t&&!n&&this.startTimer()}componentWillUnmount(){this.stopTimer()}componentDidUpdate(e,t){var n,a,s,l;let{props:i}=this;let r=(n=i,a=this.state,!n.disable&&!(a.hovered&&n.pauseOnHover));let o=(s=e,l=t,!s.disable&&!(l.hovered&&s.pauseOnHover));r&&!o||e.interval!==i.interval?this.startTimer():!r&&o&&this.stopTimer()}startTimer(){let{interval:e,onInterval:t,disable:n}=this.props;!n&&this.timer.start(e,()=>{t()})}stopTimer(){this.timer.stop()}render(){let{children:e,className:t,disable:n}=this.props,s=n?null:{onMouseEnter:this.handlePause,onFocus:this.handlePause,onMouseLeave:this.handleResume,onBlur:this.handleResume};return(0,a.jsx)("div",{...s,className:t,children:e})}constructor(...e){super(...e),this.timer=new l.Interval,this.state={hovered:!1},this.handlePause=()=>{!this.state.hovered&&this.setState({hovered:!0})},this.handleResume=()=>{this.setState({hovered:!1})}}}i.defaultProps={disable:!1,pauseOnHover:!1};var r=i},273108:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("446674"),o=n("206230"),u=n("471671"),d=n("629758");class c extends s.PureComponent{async componentDidMount(){let{importData:e,nextScene:t,pauseWhileUnfocused:a,pause:s,isWindowFocused:l,useReducedMotion:i}=this.props,[r,{default:o}]=await Promise.all([e(),n.el("245749").then(n.t.bind(n,"245749",23))]);null!=this.animationRef&&(this.animation=o.loadAnimation({container:this.animationRef,renderer:"svg",loop:!0,autoplay:!0,animationData:r}),this.animation.addEventListener("loopComplete",this.handleLoopComplete),this.animation.addEventListener("complete",this.handleComplete),this.playScene(t),(a&&!l||s||i)&&this.animation.pause())}componentWillUnmount(){this.isUnmounted=!0,null!=this.animation&&(this.animation.destroy(),this.animation=void 0)}componentDidUpdate(e){var t,n,a;let{nextScene:s,pauseWhileUnfocused:l,pause:i,isWindowFocused:r,useReducedMotion:o}=this.props;s!==this.currentScene&&this.shouldForcePlayAfter()&&!i&&this.playScene(s),null!=this.animation&&(l&&!e.isWindowFocused&&r&&!o&&!0!==i?this.animation.play():(o||l&&e.isWindowFocused&&!r)&&this.animation.pause()),!e.pause&&i?null===(t=this.animation)||void 0===t||t.pause():e.pause&&!i&&!o&&(null===(n=this.animation)||void 0===n||n.play()),e.nextScene!==s&&i&&(this.playScene(s),null===(a=this.animation)||void 0===a||a.pause())}shouldForcePlayAfter(){let{sceneSegments:e}=this.props,t=e[this.currentScene];return!0===t.shouldForcePlayAfter}playScene(e){if(this.isUnmounted)return;let{onScenePlay:t,sceneSegments:n,useReducedMotion:a}=this.props,s=n[e],l=n[this.currentScene];if(null!=this.animation&&(e===this.currentScene||s.BEG!==l.BEG||s.END!==l.END)&&this.animation.playSegments([s.BEG,s.END],!0),this.currentScene=e,null!=t&&t(this.currentScene),a){var i;null===(i=this.animation)||void 0===i||i.pause()}}render(){return(0,a.jsx)("div",{ref:this.handleSetRef,className:i(this.props.className,d.wrapper)})}constructor(...e){super(...e),this.animationRef=null,this.currentScene=this.props.nextScene,this.isUnmounted=!1,this.handleLoopComplete=()=>{let{onSceneComplete:e,nextScene:t}=this.props;null!=e&&e(this.currentScene),this.playScene(t)},this.handleComplete=()=>{let{onSceneComplete:e}=this.props;null!=e&&e(this.currentScene)},this.handleSetRef=e=>{this.animationRef=e;let{animationRef:t}=this.props;null!=t&&t(e)}}}c.defaultProps={pauseWhileUnfocused:!0,pause:!1};var f=e=>{let{componentRef:t,...n}=e,s=(0,r.useStateFromStores)([u.default],()=>u.default.isFocused()),l=(0,r.useStateFromStores)([o.default],()=>o.default.useReducedMotion);return(0,a.jsx)(c,{...n,isWindowFocused:s,useReducedMotion:l,ref:t})}},231561:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("782340"),r=n("81027"),o=e=>{let{className:t}=e;return(0,a.jsx)("div",{className:l(r.tag,t),children:(0,a.jsx)("span",{className:r.text,children:i.default.Messages.APPLICATION_STORE_THE_GAME_AWARDS_WINNER})})}},347374:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("458960"),o=n("394846"),u=n("862337"),d=n("266491"),c=n("77078"),f=n("265836"),m=n("368121"),h=n("570511"),E=n("58608"),p=n("581361");class _ extends s.Component{renderMedia(){let{src:e,className:t,title:n}=this.props,{imageLoading:s}=this.state;return(0,a.jsx)(r.default.img,{className:i({[p.imageLoading]:s},t),src:e,alt:n,style:this.getImageStyle(),onError:this.handleImageError,onLoad:this.handleImageLoaded})}render(){let{className:e,title:t,src:n}=this.props,{imageLoadError:s,imageLoading:l}=this.state;return null==n||s?(0,a.jsx)(r.default.div,{className:i(p.titleContainer,e),style:this.getImageStyle(),children:t}):(0,a.jsxs)(r.default.div,{className:i(l?p.loadingContainer:null,e),style:this.getImageStyle(),children:[l?(0,a.jsx)(c.Spinner,{className:p.spinner,itemClassName:p.spinnerItem,type:c.Spinner.Type.PULSING_ELLIPSIS,animated:!0}):null,this.renderMedia()]})}constructor(...e){super(...e),this._animatedValue=new r.default.Value(1),this.state={imageLoadError:!1,imageLoading:!0},this.componentWillEnter=e=>{this._animatedValue.setValue(0),r.default.timing(this._animatedValue,{toValue:1,duration:400}).start(e)},this.componentWillLeave=e=>{r.default.timing(this._animatedValue,{toValue:0,duration:400}).start(e)},this.getImageStyle=()=>({opacity:this._animatedValue}),this.handleImageError=()=>{this.setState({imageLoadError:!0,imageLoading:!1})},this.handleImageLoaded=()=>{this.setState({imageLoading:!1})}}}class g extends s.Component{componentWillUnmount(){this.videoTimeout.stop()}componentDidUpdate(e){let{playing:t}=this.props,n=this._video.current;if(null!=n){if(t&&!e.playing){this.videoTimeout.stop(),isFinite(n.duration)&&isFinite(n.currentTime)&&(n.currentTime=0),n.volume=.3;let e=n.play();null!=e&&e.then(()=>{this.videoPlaying=!0})}else e.playing&&!t&&this.videoTimeout.start(400,()=>{this.videoPlaying&&(n.pause(),this.videoPlaying=!1)})}}renderTypeImage(){let{playing:e,slideImages:t,image:n,title:s,splashClassName:l}=this.props;return null==t?(0,a.jsx)(_,{className:i(p.splash,l),src:n,title:s},"image"):(0,a.jsx)(f.default,{onInterval:this.nextItem,interval:2e3,className:p.slideshowWrapper,disable:!e,children:(0,a.jsx)(d.default,{children:this.renderSlideItem(t)})})}render(){let{video:e,className:t,placeholder:n,renderMediaOverlay:s,playing:l}=this.props,{videoLoadError:r,videoLoaded:o}=this.state;return n?(0,a.jsx)("div",{className:t}):(0,a.jsxs)("figure",{className:i(p.tileMedia,t),children:[null==e||r?this.renderTypeImage():this.renderTypeVideo(),null!=s&&s(l&&o)]})}constructor(...e){super(...e),this.state={currentIndex:0,videoLoadError:!1,videoLoaded:!1},this._video=s.createRef(),this.videoTimeout=new u.Timeout,this.videoPlaying=!1,this.handleToggleMute=e=>{e.stopPropagation(),e.preventDefault();let{onToggleMute:t}=this.props;null==t||t(e)},this.handleVideoError=()=>{this.setState({videoLoadError:!0})},this.handleVideoLoaded=()=>{this.setState({videoLoaded:!0})},this.renderTypeVideo=()=>{let{videoLoaded:e}=this.state,{video:t,image:n,title:l,playing:r,muted:u,splashClassName:f,splashPlaceholderClassName:g,renderMediaOverlay:I}=this.props,T=u?h.default:m.default;return(0,a.jsxs)(s.Fragment,{children:[o.isMobile?null:(0,a.jsx)(E.default,{className:i(p.splash,f),muted:u,loop:!0,preload:"none",ref:this._video,onLoadedMetadata:this.handleVideoLoaded,onError:this.handleVideoError,children:(0,a.jsx)("source",{src:t,type:"video/mp4"})}),(0,a.jsx)(d.default,{children:r&&e?null:(0,a.jsx)(_,{className:i(p.splashPlaceholder,g),src:n,title:l},0)}),(0,a.jsx)(c.Clickable,{className:i(p.muteContainer,{[p.muteContainerPlaying]:r&&e,[p.muteContainerMediaOverlay]:null!=I}),onClick:this.handleToggleMute,children:r&&e?(0,a.jsx)(T,{className:p.mute}):null})]})},this.nextItem=()=>{let{slideImages:e}=this.props;null!=e&&this.setState({currentIndex:(this.state.currentIndex+1)%e.length})},this.renderSlideItem=e=>{let{image:t,title:n,playing:s,splashClassName:l}=this.props,{currentIndex:r}=this.state;return s?(0,a.jsx)(_,{className:i(p.splash,l),src:e[r],title:n},r):(0,a.jsx)(_,{className:i(p.splash,l),src:t,title:n},"image")}}}var I=g},79945:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("469563"),l=n("906069"),i=n("75196"),r=(0,s.replaceIcon)(function(e){let{width:t=18,height:n=18,color:s="currentColor",foreground:l,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{className:l,fillRule:"evenodd",clipRule:"evenodd",d:"M12.1151 2.00065C12.0768 2.00022 12.0384 2 12 2C6.477 2 2 6.477 2 12C2 17.522 6.477 22 12 22C17.523 22 22 17.522 22 12C22 11.9616 21.9998 11.9232 21.9993 11.8849C21.1882 12.1737 20.3146 12.3309 19.4043 12.3309C15.1323 12.3309 11.6691 8.86771 11.6691 4.59565C11.6691 3.68536 11.8263 2.8118 12.1151 2.00065ZM7.92105 11.8023C7.92105 12.7107 7.18468 13.4471 6.27631 13.4471C5.36795 13.4471 4.63158 12.7107 4.63158 11.8023C4.63158 10.894 5.36795 10.1576 6.27631 10.1576C7.18467 10.1576 7.92105 10.894 7.92105 11.8023ZM10.5217 14.5171C10.3859 13.9893 9.84786 13.6716 9.32005 13.8074C8.79223 13.9433 8.47448 14.4813 8.61033 15.0091C9.01196 16.5695 10.4273 17.7236 12.1147 17.7236C13.8021 17.7236 15.2174 16.5695 15.6191 15.0091C15.7549 14.4813 15.4372 13.9433 14.9093 13.8074C14.3815 13.6716 13.8435 13.9893 13.7077 14.5171C13.525 15.2267 12.8797 15.7499 12.1147 15.7499C11.3497 15.7499 10.7044 15.2267 10.5217 14.5171Z",fill:s}),(0,a.jsx)("path",{d:"M18.5 2C17.9477 2 17.5 2.44772 17.5 3V4.5H16C15.4477 4.5 15 4.94771 15 5.5C15 6.05228 15.4477 6.5 16 6.5H17.5V8C17.5 8.55228 17.9477 9 18.5 9C19.0523 9 19.5 8.55229 19.5 8V6.5H21C21.5523 6.5 22 6.05229 22 5.5C22 4.94772 21.5523 4.5 21 4.5H19.5V3C19.5 2.44772 19.0523 2 18.5 2Z",fill:s})]})},l.ReactionIcon,void 0,{size:18})},988150:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:i,...r}=e;return(0,a.jsx)("svg",{...(0,s.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{className:i,fill:l,d:"M21 5V11.59L18 8.59L14 12.59L10 8.59L6 12.59L3 9.59V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5ZM18 11.42L21 14.42V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V12.42L6 15.42L10 11.42L14 15.42L18 11.42Z"})})}},790950:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("469563"),l=n("856567"),i=n("75196"),r=(0,s.replaceIcon)(function(e){let{width:t=18,height:n=18,color:s="currentColor",...l}=e;return(0,a.jsxs)("svg",{...(0,i.default)(l),width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3397 14.2379C21.2318 14.4731 22.1292 14.5474 23 14.4789C22.9906 14.5151 22.9809 14.5514 22.9711 14.5876C21.5194 19.9201 15.9496 23.086 10.5309 21.6569C10.3451 21.6079 10.1619 21.5542 9.98145 21.4958C7.94618 20.8378 5.90941 20 3.77041 20H3.5C2.67157 20 2 19.3284 2 18.5C2 17.6716 2.67157 17 3.5 17C4.75918 17 3.9661 15.8584 3.47514 14.7655C3.28101 14.3334 2.86615 14 2.39244 14H1.5C0.671573 14 0 13.3284 0 12.5C0 11.6716 0.671573 11 1.5 11V11C2.38174 11 3.10559 10.3274 3.33171 9.47516C3.33726 9.45427 3.34287 9.43338 3.34856 9.41249V9.41249C3.53406 8.7311 2.9812 8.0187 2.44976 7.55366C2.17543 7.31362 2 6.96872 2 6.5C2 5.67157 2.67157 5 3.5 5V5C5.03983 5 6.4765 4.31861 7.78941 3.51404C10.0926 2.10261 12.9612 1.59744 15.7887 2.34316C15.827 2.35324 15.8651 2.36352 15.9031 2.374C15.4064 3.08271 15.0224 3.88574 14.7831 4.76493C13.6598 8.89108 16.1476 13.1323 20.3397 14.2379ZM9.26206 8.71607C8.70747 8.56981 8.13976 8.79579 7.83448 9.23964C7.62045 9.55083 7.19184 9.86027 6.69655 9.72964C6.24033 9.60932 5.88292 9.10507 6.13732 8.60064C6.78216 7.32202 8.27206 6.62396 9.72714 7.00771C11.1822 7.39146 12.1179 8.72923 12.0268 10.1539C11.9909 10.7159 11.4252 10.9767 10.969 10.8564C10.4737 10.7258 10.2597 10.2469 10.2324 9.87205C10.1935 9.33743 9.81666 8.86234 9.26206 8.71607ZM16.3671 14.9268C16.17 14.5422 15.7892 14.2404 15.3308 14.1195L10.6411 12.8827C10.1826 12.7618 9.69947 12.8357 9.33352 13.0718C8.95878 13.3135 8.70829 13.7284 8.7613 14.2422C8.93054 15.8827 10.1055 17.3278 11.821 17.7802C13.5365 18.2326 15.2881 17.5594 16.2681 16.222C16.575 15.8031 16.5688 15.3205 16.3671 14.9268Z",fill:s}),(0,a.jsx)("path",{d:"M20.5 4C19.9477 4 19.5 4.44772 19.5 5V6.5H18C17.4477 6.5 17 6.94771 17 7.5C17 8.05228 17.4477 8.5 18 8.5H19.5V10C19.5 10.5523 19.9477 11 20.5 11C21.0523 11 21.5 10.5523 21.5 10V8.5H23C23.5523 8.5 24 8.05229 24 7.5C24 6.94772 23.5523 6.5 23 6.5H21.5V5C21.5 4.44772 21.0523 4 20.5 4Z",fill:s})]})},l.SuperReactionIcon,void 0,{size:18})},85175:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=16,height:n=16,color:l="currentColor",foreground:i,...r}=e;return(0,a.jsx)("svg",{...(0,s.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsx)("g",{fill:l,className:i,fillRule:"evenodd",transform:"translate(7 4)",children:(0,a.jsx)("path",{d:"M0 4.3258427C0 5.06741573.616438356 5.68539326 1.35616438 5.68539326 2.09589041 5.68539326 2.71232877 5.06741573 2.71232877 4.3258427 2.71232877 2.84269663 4.31506849 2.78089888 4.5 2.78089888 4.68493151 2.78089888 6.28767123 2.84269663 6.28767123 4.3258427L6.28767123 4.63483146C6.28767123 5.25280899 5.97945205 5.74719101 5.42465753 6.05617978L4.19178082 6.73595506C3.51369863 7.10674157 3.14383562 7.78651685 3.14383562 8.52808989L3.14383562 9.64044944C3.14383562 10.3820225 3.76027397 11 4.5 11 5.23972603 11 5.85616438 10.3820225 5.85616438 9.64044944L5.85616438 8.96067416 6.71917808 8.52808989C8.1369863 7.78651685 9 6.30337079 9 4.69662921L9 4.3258427C9 1.48314607 6.71917808 0 4.5 0 2.21917808 0 0 1.48314607 0 4.3258427zM4.5 12C2.5 12 2.5 15 4.5 15 6.5 15 6.5 12 4.5 12L4.5 12z"})})})}},840817:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("469563"),l=n("851298"),i=n("75196"),r=(0,s.replaceIcon)(function(e){let{width:t=24,height:n=24,color:s="currentColor",foreground:l,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",className:l,d:"M13.2899 2H6C3.79086 2 2 3.79086 2 6V18C2 20.2091 3.79086 22 6 22H18C20.2091 22 22 20.2091 22 18V10.7101C21.3663 10.8987 20.695 11 20 11C16.134 11 13 7.86599 13 4C13 3.30503 13.1013 2.63371 13.2899 2ZM8 6C9.1032 6 10 6.8952 10 8C10 9.1056 9.1032 10 8 10C6.8944 10 6 9.1056 6 8C6 6.8952 6.8944 6 8 6ZM6 18L9 14L11 16L15 11L18 18H6Z",fill:s}),(0,a.jsx)("path",{d:"M21 0V3H24V5H21V8H19V5H16V3H19V0H21Z",fill:s})]})},l.ImagePlusIcon,void 0,{size:24})},880013:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("469563"),l=n("858994"),i=n("75196"),r=(0,s.replaceIcon)(function(e){let{width:t=24,height:n=24,color:s="currentColor",foreground:l,...r}=e;return(0,a.jsx)("svg",{...(0,i.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsx)("g",{fill:"none",fillRule:"evenodd",children:(0,a.jsx)("path",{className:l,fill:s,d:"M17,13.6 L17.3999992,13.6 C19.0406735,13.6 20.496781,12.8097754 21.4084757,11.5891722 L21.8198761,18.8298199 C21.913864,20.4840062 20.6490733,21.9011814 18.994887,21.9951692 C18.9382174,21.9983891 18.8814679,22 18.8247069,22 L5.1752931,22 C3.51843885,22 2.1752931,20.6568542 2.1752931,19 C2.1752931,18.943239 2.17690401,18.8864895 2.18012387,18.8298199 L2.59152425,11.5891732 C3.503219,12.8097758 4.95932613,13.6 6.6,13.6 L7,13.6 L7,15 L9,15 L9,13.6 L15,13.6 L15,15 L17,15 L17,13.6 Z M7,16 L7,18 L9,18 L9,16 L7,16 Z M15,16 L17,16 L17,18 L15,18 L15,16 Z M15,11.6 L9,11.6 L9,9 L7,9 L7,11.6 L6.6,11.6 C4.94314575,11.6 3.6,10.2568542 3.6,8.6 L3.6,5 C3.6,3.34314575 4.94314575,2 6.6,2 L17.3999992,2 C19.0568535,2 20.3999992,3.34314575 20.3999992,5 L20.3999992,8.6 C20.3999992,10.2568542 19.0568535,11.6 17.3999992,11.6 L17,11.6 L17,9 L15,9 L15,11.6 Z"})})})},l.InventoryIcon,void 0,{size:24})},752531:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("469563"),l=n("249736"),i=n("75196"),r=(0,s.replaceIcon)(function(e){let{width:t=24,height:n=24,color:s="currentColor",foreground:l,...r}=e;return(0,a.jsxs)("svg",{...(0,i.default)(r),width:t,height:n,fill:"none",viewBox:"0 0 20 20",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_1139_61312)",children:[(0,a.jsx)("path",{transform:"translate(1.5, 0.5)",d:"M14.5714 6.54545C14.3743 6.54545 14.2114 6.42273 14.16 6.24273L13.7743 4.89273C13.6543 4.47545 13.3114 4.14818 12.8743 4.03364L11.46 3.66545C11.2714 3.61636 11.1429 3.46091 11.1429 3.27273C11.1429 3.08455 11.2714 2.92909 11.46 2.88L12.8743 2.51182C13.3114 2.39727 13.6543 2.07 13.7743 1.65273L14.16 0.302727C14.2114 0.122727 14.3743 0 14.5714 0C14.7686 0 14.9314 0.122727 14.9829 0.302727L15.3686 1.65273C15.4886 2.07 15.8314 2.39727 16.2686 2.51182L17.6829 2.88C17.8714 2.92909 18 3.08455 18 3.27273C18 3.46091 17.8714 3.61636 17.6829 3.66545L16.2686 4.03364C15.8314 4.14818 15.4886 4.47545 15.3686 4.89273L14.9829 6.24273C14.9314 6.42273 14.7686 6.54545 14.5714 6.54545Z",fill:"url(#paint0_linear_1139_61312)"}),(0,a.jsx)("path",{transform:"translate(1.5, 0.5)",fillRule:"evenodd",clipRule:"evenodd",d:"M8.8 1.63636H3.2C1.43269 1.63636 0 3.06905 0 4.83636V14.4364C0 16.2036 1.43269 17.6364 3.2 17.6364H12.8C14.5673 17.6364 16 16.2036 16 14.4364V8.03636H10.4C9.51632 8.03636 8.8 7.32002 8.8 6.43636V1.63636ZM4.8 4.83636C5.68256 4.83636 6.4 5.55252 6.4 6.43636C6.4 7.32084 5.68256 8.03636 4.8 8.03636C3.91552 8.03636 3.2 7.32084 3.2 6.43636C3.2 5.55252 3.91552 4.83636 4.8 4.83636ZM3.2 14.4364L5.6 11.2364L7.2 12.8364L10.4 8.83636L12.8 14.4364H3.2Z",className:l,fill:s})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"paint0_linear_1139_61312",x1:"11.1429",y1:"6.54546",x2:"17.6812",y2:"-0.304273",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{"stop-color":"#0B875E"}),(0,a.jsx)("stop",{offset:"1","stop-color":"#0075A8"})]}),(0,a.jsx)("clipPath",{id:"clip0_1139_61312",children:(0,a.jsx)("rect",{width:"18",height:"18",fill:"white"})})]})]})},l.ImageSparkleIcon,void 0,{size:24})},277174:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("469563"),l=n("729"),i=n("75196"),r=(0,s.replaceIcon)(function(e){let{width:t=24,height:n=24,color:s="currentColor",...l}=e;return(0,a.jsxs)("svg",{...(0,i.default)(l),width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,a.jsx)("path",{d:"M18.8648 1.13516L21.0013 3.27074H16V4.72926H21.0013L18.8648 6.86484L20 8L24 4L20 0L18.8648 1.13516Z",fill:s}),(0,a.jsx)("path",{d:"M12 2C12.4342 2 12.8466 2.0917 13.2188 2.25683C13.0759 2.81411 13 3.39819 13 4C13 5.90397 13.7601 7.6304 14.9935 8.89235L14.99 11C14.99 12.66 13.66 14 12 14C10.34 14 9 12.66 9 11V5C9 3.34 10.34 2 12 2Z",fill:s}),(0,a.jsx)("path",{d:"M12 16.1C14.76 16.1 17.3 14 17.3 11H19C19 14.42 16.28 17.24 13 17.72V22H11V17.72C7.72 17.23 5 14.41 5 11H6.7C6.7 14 9.24 16.1 12 16.1Z",fill:s})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0",children:(0,a.jsx)("rect",{width:"24",height:"24",fill:s})})})]})},l.MicrophoneArrowRightIcon,void 0,{size:24})},943519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{color:t="currentColor",foreground:n,...l}=e;return(0,a.jsx)("svg",{...(0,s.default)(l),viewBox:"0 0 136 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsxs)("g",{className:n,fill:t,children:[(0,a.jsx)("path",{d:"M124.299 22.9512H107.187C106.75 22.9512 106.368 23.2787 106.313 23.7154L105.495 29.3918C105.413 29.9103 105.822 30.4015 106.368 30.4015H109.506C109.834 30.4015 110.025 30.729 109.916 31.0019C109.534 31.9025 109.234 32.9122 109.097 33.9766L107.514 44.9746C106.477 52.343 112.591 56 119.277 56C126.264 56 133.142 52.3157 134.179 44.9746L135.762 33.9766C136.744 26.7719 130.822 23.115 124.299 22.9512ZM127.574 34.0038L125.991 44.7563C125.636 47.2943 122.771 48.4678 120.123 48.4678C117.667 48.4678 115.265 47.2943 115.593 44.9746L117.176 33.9766C117.53 31.575 120.396 30.3469 123.043 30.3469C125.691 30.3469 127.956 31.575 127.574 34.0038Z",fill:t}),(0,a.jsx)("path",{d:"M29.3491 22.9512H22.9627C22.526 22.9512 22.1439 23.2787 22.0894 23.7154L20.1243 37.7154V37.7427L20.2062 43.1462C20.2062 43.2553 20.1243 43.3645 20.0151 43.3918L18.1866 36.8694V36.8421L12.4825 23.497C12.346 23.1696 12.0185 22.9512 11.6637 22.9512H5.19545C4.75878 22.9512 4.37668 23.2787 4.3221 23.7154L0.00992229 54.5536C-0.0719545 55.0994 0.364722 55.5633 0.883275 55.5633H7.32425C7.76092 55.5633 8.14302 55.2358 8.1976 54.7992L9.88972 42.5458V42.5185L9.80784 36.2417L9.99889 36.1871L11.9366 42.7095V42.7368L17.2586 55.0448C17.3951 55.3723 17.7226 55.5906 18.0774 55.5906H25.0642C25.5009 55.5906 25.883 55.2631 25.9376 54.8265L30.2497 23.9883C30.3316 23.4425 29.8949 22.9512 29.3491 22.9512Z",fill:t}),(0,a.jsx)("path",{d:"M43.322 22.9512H36.8814C36.4448 22.9512 36.0627 23.2787 36.0081 23.7154L31.6962 54.5263C31.6144 55.0721 32.051 55.536 32.5695 55.536H39.0101C39.4467 55.536 39.8288 55.2085 39.8834 54.7719L44.1953 23.961C44.2771 23.4424 43.8678 22.9512 43.322 22.9512Z",fill:t}),(0,a.jsx)("path",{d:"M73.5353 22.9512H49.4363C48.9996 22.9512 48.6175 23.2787 48.5629 23.7154L47.7168 29.4736C47.635 30.0194 48.0443 30.4834 48.5902 30.4834H55.3314C55.8772 30.4834 56.2866 30.9473 56.2047 31.4931L53.0388 54.5263C52.957 55.0721 53.3936 55.536 53.9122 55.536H60.435C60.8717 55.536 61.2538 55.2085 61.3084 54.7719L64.5562 31.2475C64.6107 30.8109 64.9928 30.4834 65.4295 30.4834H72.662C73.0986 30.4834 73.4807 30.1559 73.5353 29.7192L74.3814 23.961C74.5178 23.4424 74.0812 22.9512 73.5353 22.9512Z",fill:t}),(0,a.jsx)("path",{d:"M91.9575 22.9512H79.7033C79.2666 22.9512 78.8845 23.2787 78.8299 23.7154L74.5177 54.5263C74.4359 55.0721 74.8725 55.536 75.3911 55.536H81.9139C82.3506 55.536 82.7327 55.2085 82.7873 54.7719L84.0427 45.575C84.07 45.3567 84.2611 45.1929 84.4794 45.1929H85.3255C85.4892 45.1929 85.6257 45.2748 85.7076 45.4113L91.9302 55.1539C92.0939 55.3996 92.3669 55.5633 92.6944 55.5633H100.773C101.482 55.5633 101.919 54.7446 101.51 54.1715L94.9596 44.8109C94.7959 44.5925 94.8778 44.2651 95.1234 44.1559C99.2991 42.1091 101.728 40.035 102.52 34.1949C103.448 26.5536 98.6714 22.9512 91.9575 22.9512ZM94.1954 34.3313C93.9771 36.2144 92.5033 38.0974 89.9651 38.0974H86.1715C85.6257 38.0974 85.2163 37.6062 85.2982 37.0877L86.1169 31.4113C86.1715 30.9746 86.5536 30.6471 86.9903 30.6471H91.0568C93.4586 30.6471 94.4411 32.3664 94.1954 34.3313Z",fill:t}),(0,a.jsx)("path",{d:"M29.1035 3.43858H33.7428C34.8617 3.43858 35.8169 3.60233 36.581 3.9571C37.2906 4.2573 37.891 4.77581 38.3276 5.43079C38.7097 6.08576 38.928 6.8226 38.9007 7.55944C38.9007 8.32357 38.7097 9.06041 38.3003 9.71539C37.8637 10.3976 37.2087 10.9162 36.4719 11.2437C35.6532 11.6257 34.6161 11.8167 33.4153 11.8167H29.1035V3.43858V3.43858ZM33.3881 9.66081C34.1522 9.66081 34.7253 9.46977 35.1346 9.08771C35.544 8.67835 35.7623 8.13254 35.735 7.53215C35.7623 6.98634 35.5713 6.46782 35.1892 6.08576C34.8345 5.73098 34.2886 5.53995 33.5518 5.53995H32.1054V9.63351H33.3881V9.66081Z",fill:t}),(0,a.jsx)("path",{d:"M45.8881 11.7895C45.2877 11.6257 44.6873 11.3801 44.1415 11.0526V9.06043C44.6055 9.4152 45.1513 9.66082 45.6971 9.79727C46.3248 9.9883 46.9525 10.0702 47.6074 10.0975C47.8258 10.0975 48.0441 10.0702 48.2624 9.9883C48.3989 9.90643 48.4807 9.82456 48.4807 9.7154C48.4807 9.60624 48.4534 9.49707 48.3716 9.4152C48.2351 9.30604 48.0714 9.25146 47.9076 9.22417L46.4885 8.89668C45.6698 8.70565 45.0967 8.43275 44.7419 8.10526C44.3872 7.75049 44.1961 7.25926 44.2234 6.76803C44.2234 6.33138 44.3872 5.89473 44.6873 5.56725C45.0421 5.18518 45.4788 4.91228 45.97 4.77583C46.5977 4.58479 47.2527 4.47563 47.9349 4.50292C48.5626 4.50292 49.163 4.5575 49.7634 4.72124C50.2546 4.83041 50.7185 5.02144 51.1552 5.26705V7.1501C50.7458 6.90448 50.3092 6.74074 49.8725 6.63158C49.3813 6.49512 48.8628 6.44054 48.3716 6.44054C47.6347 6.44054 47.2527 6.577 47.2527 6.82261C47.2527 6.93177 47.3072 7.04093 47.4164 7.09551C47.6074 7.17739 47.8258 7.23197 48.0441 7.28655L49.2449 7.50487C50.009 7.64132 50.6094 7.88694 50.9914 8.21442C51.3735 8.54191 51.5645 9.06043 51.5645 9.7154C51.5645 10.4249 51.2098 11.0799 50.6094 11.4347C49.9817 11.8441 49.0811 12.0624 47.9076 12.0624C47.2254 12.0351 46.5431 11.9532 45.8881 11.7895Z",fill:t}),(0,a.jsx)("path",{d:"M54.3486 11.5438C53.7209 11.2436 53.1751 10.7797 52.7931 10.1793C52.4383 9.60622 52.2745 8.92396 52.2745 8.2417C52.2745 7.55944 52.4383 6.90447 52.8203 6.33137C53.2024 5.73098 53.7482 5.29433 54.4032 4.99413C55.1946 4.66665 56.0406 4.47562 56.8866 4.50291C58.0874 4.50291 59.0699 4.74852 59.8613 5.26704V7.45027C59.5611 7.25924 59.2336 7.0955 58.8788 6.98634C58.4968 6.87718 58.0874 6.7953 57.678 6.7953C56.9412 6.7953 56.3681 6.93176 55.9315 7.20466C55.3311 7.53215 55.14 8.26899 55.4675 8.86938C55.5767 9.06041 55.7404 9.22415 55.9315 9.33332C56.3408 9.60622 56.9139 9.74267 57.7053 9.74267C58.1147 9.74267 58.4968 9.68809 58.8788 9.57893C59.2336 9.46977 59.5611 9.33332 59.8613 9.14228V11.2436C58.9334 11.7895 57.8964 12.0624 56.832 12.0351C55.986 12.0624 55.1127 11.8986 54.3486 11.5438Z",fill:t}),(0,a.jsx)("path",{d:"M62.8365 11.5439C62.1816 11.2437 61.6358 10.7797 61.2537 10.1793C60.8989 9.60624 60.7079 8.92398 60.7079 8.24171C60.7079 7.55945 60.8716 6.90448 61.2537 6.33138C61.6358 5.75828 62.1816 5.29435 62.8365 5.02144C64.3921 4.39376 66.166 4.39376 67.7215 5.02144C68.3492 5.29435 68.895 5.75828 69.2771 6.33138C69.6319 6.90448 69.8229 7.58674 69.8229 8.24171C69.8229 8.92398 69.6319 9.60624 69.2771 10.1793C68.895 10.7797 68.3492 11.2437 67.7215 11.5439C66.1387 12.1988 64.3921 12.1988 62.8365 11.5439ZM66.4389 9.4152C66.7391 9.11501 66.9028 8.67836 66.8755 8.269C66.9028 7.83236 66.7391 7.423 66.4389 7.12281C66.1114 6.82261 65.6747 6.68616 65.2381 6.68616C64.8015 6.65887 64.3648 6.82261 64.0373 7.12281C63.7371 7.423 63.5734 7.83236 63.6007 8.269C63.5734 8.70565 63.7371 9.11501 64.0373 9.4152C64.3648 9.7154 64.8015 9.87914 65.2381 9.85185C65.702 9.87914 66.1387 9.7154 66.4389 9.4152Z",fill:t}),(0,a.jsx)("path",{d:"M76.9736 4.93955V7.53214C76.6188 7.31381 76.2095 7.20465 75.8001 7.23194C75.1724 7.23194 74.6812 7.42298 74.3264 7.80504C73.999 8.18711 73.8079 8.7875 73.8079 9.60621V11.7894H70.8878V4.80309H73.7533V7.01362C73.9171 6.19491 74.1627 5.59452 74.5175 5.21245C74.8723 4.83038 75.3635 4.61206 75.882 4.63935C76.2641 4.63935 76.6461 4.74851 76.9736 4.93955Z",fill:t}),(0,a.jsx)("path",{d:"M86.6895 3.19298V11.7895H83.7694V10.2339C83.5511 10.7797 83.1418 11.2709 82.6505 11.5711C82.0774 11.8986 81.4497 12.0624 80.7948 12.0351C80.1944 12.0624 79.594 11.8713 79.0755 11.5439C78.5842 11.2164 78.1749 10.7524 77.9293 10.2066C77.6564 9.60623 77.5199 8.95126 77.5199 8.29629C77.4926 7.61403 77.6564 6.93177 77.9293 6.33138C78.2022 5.75828 78.6388 5.29434 79.1573 4.96686C79.7032 4.63937 80.3308 4.47563 80.9585 4.47563C82.3503 4.47563 83.2782 5.07602 83.7694 6.2768V3.19298H86.6895ZM83.3328 9.36062C83.633 9.06042 83.7967 8.65107 83.7694 8.24171C83.7694 7.83235 83.6057 7.423 83.3328 7.15009C82.6505 6.57699 81.6681 6.57699 80.9585 7.15009C80.6583 7.45029 80.4946 7.83235 80.5219 8.24171C80.4946 8.65107 80.6583 9.06042 80.9585 9.36062C81.286 9.66081 81.6954 9.79727 82.132 9.79727C82.5959 9.82456 83.0053 9.66081 83.3328 9.36062Z",fill:t}),(0,a.jsx)("path",{d:"M18.3503 1.36452C16.9311 0.736842 15.4301 0.272904 13.8744 0C13.6561 0.382066 13.465 0.764132 13.3013 1.17349C11.6637 0.927875 9.9716 0.927875 8.33407 1.17349C8.17031 0.764132 7.97927 0.382066 7.76093 0C6.23256 0.272904 4.73149 0.736842 3.285 1.39181C0.473899 5.56725 -0.290284 9.63353 0.0918077 13.6725C1.75664 14.9006 3.61251 15.8285 5.57755 16.4288C6.01423 15.8285 6.42361 15.2008 6.75112 14.5458C6.1234 14.3002 5.49567 14 4.89524 13.6725C5.059 13.5633 5.19546 13.4542 5.35921 13.345C8.82533 14.9825 12.8373 14.9825 16.3307 13.345C16.4672 13.4542 16.6309 13.5906 16.7947 13.6725C16.1942 14.0273 15.5938 14.3275 14.9388 14.5458C15.2663 15.2008 15.6757 15.8285 16.1124 16.4288C18.0774 15.8285 19.9333 14.9006 21.5981 13.6725C22.0348 9.00585 20.8066 4.96686 18.3503 1.36452ZM7.21509 11.1891C6.15069 11.1891 5.25004 10.2066 5.25004 9.03314C5.25004 7.85965 6.0961 6.8499 7.18779 6.8499C8.27948 6.8499 9.15284 7.83236 9.15284 9.03314C9.15284 10.2339 8.30678 11.1891 7.21509 11.1891ZM14.4202 11.1891C13.3558 11.1891 12.4825 10.2066 12.4825 9.03314C12.4825 7.85965 13.3285 6.8499 14.4202 6.8499C15.5119 6.8499 16.3853 7.83236 16.358 9.03314C16.358 10.2339 15.5119 11.1891 14.4202 11.1891Z",fill:t}),(0,a.jsx)("path",{d:"M41.3849 5.56724C42.1837 5.56724 42.8313 4.98076 42.8313 4.2573C42.8313 3.53384 42.1837 2.94736 41.3849 2.94736C40.5861 2.94736 39.9385 3.53384 39.9385 4.2573C39.9385 4.98076 40.5861 5.56724 41.3849 5.56724Z",fill:t}),(0,a.jsx)("path",{d:"M39.9385 6.46785C40.8664 6.84992 41.9307 6.84992 42.8586 6.46785V11.8441H39.9385V6.46785Z",fill:t})]})})}},84084:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:i,...r}=e;return(0,a.jsx)("svg",{...(0,s.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,a.jsx)("path",{className:i,fill:l,d:"M14.62 8.35c-.42.28-1.75 1.04-1.95 1.19-.39.31-.75.29-1.14-.01-.2-.16-1.53-.92-1.95-1.19-.48-.31-.45-.7.08-.92 1.64-.69 3.28-.64 4.91.03.49.21.51.6.05.9m7.22 7.28c-.93-2.09-2.2-3.99-3.84-5.66a4.31 4.31 0 0 1-1.06-1.88c-.1-.33-.17-.67-.24-1.01-.2-.88-.29-1.78-.7-2.61-.73-1.58-2-2.4-3.84-2.47-1.81.05-3.16.81-3.95 2.4-.21.43-.36.88-.46 1.34-.17.76-.32 1.55-.5 2.32-.15.65-.45 1.21-.96 1.71-1.61 1.57-2.9 3.37-3.88 5.35-.14.29-.28.58-.37.88-.19.66.29 1.12.99.96.44-.09.88-.18 1.3-.31.41-.15.57-.05.67.35.65 2.15 2.07 3.66 4.24 4.5 4.12 1.56 8.93-.66 9.97-4.58.07-.27.17-.37.47-.27.46.14.93.24 1.4.35.49.09.85-.16.92-.64.03-.26-.06-.49-.16-.73"}),(0,a.jsx)("rect",{width:"24",height:"24"})]})})}},260162:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:i,...r}=e;return(0,a.jsx)("svg",{...(0,s.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,a.jsx)("path",{className:i,fill:l,d:"M18.64 19.499c-.82 1.24-1.687 2.45-3.008 2.47-1.322.03-1.746-.79-3.245-.79-1.508 0-1.972.77-3.224.82-1.292.05-2.268-1.32-3.097-2.53-1.686-2.47-2.978-7.02-1.242-10.08.858-1.52 2.396-2.48 4.063-2.51 1.262-.02 2.465.87 3.244.87.77 0 2.229-1.07 3.757-.91.64.03 2.436.26 3.59 1.98-.09.06-2.14 1.28-2.12 3.81.029 3.02 2.612 4.03 2.642 4.04-.03.07-.414 1.44-1.36 2.83zm-5.631-16c.72-.829 1.913-1.459 2.899-1.499.128 1.17-.336 2.35-1.026 3.19-.68.85-1.804 1.51-2.909 1.42-.148-1.15.404-2.35 1.036-3.11z"}),(0,a.jsx)("rect",{width:"24",height:"24"})]})})}},415844:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=24,height:n=24,color:l="currentColor",foreground:i,...r}=e;return(0,a.jsx)("svg",{...(0,s.default)(r),width:t,height:n,viewBox:"0 0 24 24",children:(0,a.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,a.jsx)("path",{className:i,fill:l,d:"M4 11.526V6.553l5.684-1.25v6.138L4 11.526zM20.105 3v8.29l-9.473.142V5.094L20.105 3zM4 12.474l5.684.085v6.452L4 17.92v-5.447zm16.105.237V21l-9.473-1.81v-6.622l9.473.143z"}),(0,a.jsx)("rect",{width:"24",height:"24"})]})})}},711486:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("469563"),l=n("216199"),i=n("75196"),r=(0,s.replaceIcon)(function(e){let{width:t=24,height:n=24,color:s="currentColor",...l}=e;return(0,a.jsxs)("svg",{...(0,i.default)(l),width:t,height:n,viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M21.03 7.76998C20.955 7.60998 20.81 7.48998 20.635 7.44498C20.545 7.41998 20.445 7.39498 20.35 7.36998C19.805 7.22998 19.135 7.56498 18.85 8.11498L17.87 9.99998C17.585 10.55 17.225 10.51 17.07 9.90998L14.895 1.38498C14.74 0.779981 14.14 0.459981 13.55 0.664981C12.96 0.869981 12.595 1.52498 12.725 2.13498L13.995 7.95998C14.13 8.56998 14.075 9.11498 13.875 9.18498C13.675 9.25498 13.35 8.83498 13.15 8.24498L11.05 2.07498C10.85 1.48498 10.21 1.17498 9.62004 1.37998C9.03004 1.58498 8.71504 2.22998 8.91004 2.81998L10.97 8.99998C11.165 9.58998 11.165 10.125 10.965 10.195C10.765 10.265 10.385 9.86498 10.125 9.29998L7.77504 4.29998C7.51004 3.73998 6.82004 3.44498 6.23004 3.64998C5.64504 3.85498 5.37504 4.47498 5.64004 5.03998L8.60004 11.045C8.86004 11.61 8.91004 12.125 8.71004 12.195C8.51004 12.265 8.03004 11.93 7.64004 11.445L5.60504 8.82498C5.21504 8.33998 4.54004 8.07498 4.09504 8.22998C3.65504 8.38498 3.54004 8.94498 3.84504 9.48998L6.34504 13.865C6.40004 14.02 7.85504 16.8 7.96004 16.915C9.00004 18.565 10.645 19.51 12.73 18.79L14.91 18.035C16.145 17.605 17.095 16.735 17.63 15.7C17.64 15.69 20.15 10.205 21.03 8.28498C21.105 8.11498 21.105 7.92998 21.03 7.76998Z",fill:s}),(0,a.jsx)("path",{d:"M21.3251 23.4001L19.1101 19.0301C18.8501 18.5201 18.2501 18.2851 17.7151 18.4851L12.3101 20.5101C12.0201 20.6201 11.7851 20.8451 11.6651 21.1351C11.5451 21.4251 11.5551 21.7501 11.6851 22.0301L12.3151 23.3951H21.3251V23.4001Z",fill:s})]})},l.HandRequestSpeakIcon,void 0,{size:24})},478895:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n("37983");n("884691");var s=n("75196");function l(e){let{width:t=40,height:n=40,color:l="currentColor",...i}=e;return(0,a.jsxs)("svg",{...(0,s.default)(i),width:t,height:n,style:{minWidth:t,minHeight:n},viewBox:"0 0 40 40",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 4C15.5817 4 12 7.58172 12 12V20C12 24.4183 15.5817 28 20 28H28C32.4183 28 36 24.4183 36 20V12C36 7.58172 32.4183 4 28 4H20ZM19.5962 21.6084C19.5599 21.8126 19.717 22 19.9244 22H20.5806C20.7422 22 20.8806 21.8841 20.9088 21.7249L21.3333 19.3333H25.3333L24.9295 21.6084C24.8932 21.8126 25.0503 22 25.2577 22H25.9139C26.0756 22 26.2139 21.8841 26.2421 21.7249L26.6667 19.3333H29.0533C29.2152 19.3333 29.3537 19.217 29.3816 19.0575L29.4983 18.3908C29.534 18.1868 29.377 18 29.1699 18H26.9L27.6067 14H29.9933C30.1552 14 30.2937 13.8836 30.3216 13.7241L30.4383 13.0575C30.474 12.8535 30.317 12.6667 30.1099 12.6667H27.84L28.2438 10.3916C28.2801 10.1874 28.123 10 27.9156 10H27.2594C27.0977 10 26.9594 10.1159 26.9312 10.2751L26.5067 12.6667H22.5067L22.9105 10.3916C22.9467 10.1874 22.7897 10 22.5823 10H21.926C21.7644 10 21.6261 10.1159 21.5978 10.2751L21.1733 12.6667H18.7867C18.6248 12.6667 18.4863 12.783 18.4584 12.9425L18.3417 13.6092C18.306 13.8132 18.463 14 18.6701 14H20.94L20.2333 18H17.8467C17.6848 18 17.5463 18.1164 17.5184 18.2759L17.4017 18.9425C17.366 19.1465 17.523 19.3333 17.7301 19.3333H20L19.5962 21.6084ZM21.5669 18L22.2736 14H26.2736L25.5669 18H21.5669Z",fill:l}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33335 14.0208C6.11738 16.1734 4 19.8395 4 24C4 30.6274 9.37258 36 16 36C20.1604 36 23.8262 33.8829 25.979 30.6672H24.3268C22.372 33.1055 19.3683 34.6667 16 34.6667C10.109 34.6667 5.33333 29.8911 5.33333 24C5.33333 20.6315 6.89477 17.6277 9.33335 15.6729V14.0208Z",fill:l})]})}},105017:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}}),n("222007");var a=n("37983"),s=n("884691"),l=n("249654"),i=n("446674"),r=n("77078"),o=n("819689"),u=n("850391"),d=n("41170"),c=n("300322"),f=n("26989"),m=n("957255"),h=n("697218"),E=n("599110"),p=n("718422"),_=n("49111"),g=n("33536");function I(e){let{assets:t,currentUser:n,message:a}=e,s=(l.default.extractTimestamp(n.id)+l.default.extractTimestamp(a.id))%t.length;return t[s]}function T(e){let{currentUser:t,channel:n,message:l,buttonLabels:i,stickers:c,event:f,eventProperties:m}=e,[h,_]=s.useState(!1),T=s.useMemo(()=>I({assets:c,currentUser:t,message:l}),[c,t,l]),C=s.useMemo(()=>I({assets:i,currentUser:t,message:l}),[i,t,l]),S=s.useCallback(async()=>{let{valid:e}=await (0,p.applyChatRestrictions)({type:u.ChatInputTypes.FORM,content:"",channel:n});e&&(!function(e){let{channel:t,message:n,sticker:a}=e;o.default.sendGreetMessage(t.id,a.id,o.default.getSendMessageOptionsForReply({channel:t,message:n,shouldMention:!0,showMentionToggle:!0}))}({channel:n,message:l,sticker:T}),!function(e){let{sticker:t,event:n,eventProperties:a}=e;null!=n&&E.default.track(n,{...a,sticker_id:t.id})}({sticker:T,event:f,eventProperties:m}))},[n,l,T,f,m]);return(0,a.jsxs)(r.Button,{className:g.CTAMessageButtonOuter,innerClassName:g.CTAMessageButton,color:r.ButtonColors.PRIMARY,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),onClick:S,children:[(0,a.jsx)(d.default,{className:g.CTAMessageSticker,isInteracting:h,sticker:T,size:28}),C]})}function C(e){let{channel:t,message:n,buttonLabels:s,stickers:l,event:r,eventProperties:o}=e,u=h.default.getCurrentUser(),d=function(e){let{channel:t,message:n,currentUser:a}=e;return(0,i.useStateFromStores)([m.default,f.default],()=>{var e;let s=t.guild_id;if(null==a||null==s)return!1;let l=(0,c.computeIsReadOnlyThread)(t),i=m.default.can(_.Permissions.SEND_MESSAGES,t),r=null===(e=f.default.getMember(s,a.id))||void 0===e?void 0:e.isPending,o=n.author.bot;return i&&!l&&!r&&!o})}({channel:t,message:n,currentUser:u});return null!=u&&d?(0,a.jsx)("div",{className:g.CTAMessage,children:(0,a.jsx)(T,{currentUser:u,channel:t,message:n,buttonLabels:s,stickers:l,event:r,eventProperties:o})}):null}},843194:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("574073"),r=n("780571"),o=n("497880"),u=n("93332"),d=n("97194");function c(e){let{message:t,channel:n,content:s,className:c,compact:f,popoutProps:m,hideTimestamp:h=!1,withFooter:E=!1,...p}=e,_=(0,i.default)(t);return(0,a.jsx)("div",{className:l({[d.withFooter]:E},d.embedCard,{[d.compact]:f},c),children:(0,a.jsx)(r.default,{...p,className:l(d.messageContainer,{[d.compact]:f}),childrenMessageContent:(0,a.jsx)(o.default,{className:l(d.messageContent,{[d.compact]:f}),message:t,content:s}),childrenHeader:(0,a.jsx)(u.default,{message:t,channel:n,author:_,guildId:null==n?void 0:n.guild_id,compact:f,hideTimestamp:h,className:l(d.header,{[d.compact]:f}),...null!=m?m:{}}),compact:f})})}},124297:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("462579"),l=n("49111"),i=n("782340"),r=n("486064");function o(e){let{message:t,onDeleteMessage:n,children:o}=e;return(0,a.jsxs)("div",{className:r.ephemeralMessage,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(s.default,{className:r.icon,width:16,height:16}),(null==t?void 0:t.type)===l.MessageTypes.STAGE_RAISE_HAND?i.default.Messages.STAGE_SYSTEM_MESSAGE_MODERATOR_VISIBILITY_MESSAGE.format({handleDelete(){n(t,!0)}}):i.default.Messages.ONLY_YOU_CAN_SEE_AND_DELETE_THESE.format({count:1,countMessages:1,handleDelete(){n(t,!0)}}),o]})}},341716:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("627445"),o=n.n(r),u=n("866227"),d=n.n(u),c=n("77078"),f=n("574073"),m=n("38600"),h=n("981601"),E=n("315102"),p=n("888400"),_=n("927632"),g=n("195483"),I=n("49111"),T=n("782340"),C=n("741566");function S(e){let{width:t=6,height:n=10,color:s="currentColor",className:l,foreground:i}=e;return(0,a.jsx)("svg",{className:l,width:t,height:n,viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M4.61241 0L6 0.845294L1.38759 10L0 9.15471L4.61241 0Z",className:i,fill:s})})}function A(e){var t;let{message:n,channel:l}=e,r=s.useMemo(()=>(e,t)=>(o(null!=l&&null!=t,"ExecuteCommand: user and channel cannot be undefined"),(0,a.jsx)(h.default,{...e,channelId:l.id,guildId:l.guild_id,userId:t.id})),[l]),u=s.useMemo(()=>e=>(o(null!=l,"ExecutedCommand: channel cannot be null"),(0,a.jsx)(_.default,{...e,channel:l,messageId:n.id,interactionData:n.interactionData})),[l,n.id,n.interactionData]),A=(0,f.useNullableUserAuthor)(null===(t=n.interaction)||void 0===t?void 0:t.user,l),N=s.useMemo(()=>e.compact?(0,m.default)((0,p.dateFormat)(d(),"LT")):null,[e.compact]);if(null==n.interaction||null==A)return null;let M=function(e,t){let n,{message:s,compact:l,channel:r,isInteractionUserBlocked:o,showAvatarPopout:u,onClickAvatar:d,onUserContextMenu:m,onPopoutRequestClose:h}=e;if(l||o)return(0,a.jsx)("div",{className:C.replyBadge,children:(0,a.jsx)(S,{className:C.commandIcon})});if(null!=s.interaction){var p,_,g;let e=(0,f.getUserAuthor)(s.interaction.user,r);n=null!==(g=E.default.getGuildMemberAvatarURL({avatar:null!==(p=e.guildMemberAvatar)&&void 0!==p?p:void 0,userId:s.interaction.user.id,guildId:null!==(_=null==r?void 0:r.guild_id)&&void 0!==_?_:""}))&&void 0!==g?g:void 0}let I=()=>null!=s.interaction&&function(e){let{user:t,guildId:n,guildAvatar:s,onClick:l,onContextMenu:r,onMouseDown:o}=e;return(0,a.jsx)("img",{alt:"",src:null!=s?s:t.getAvatarURL(n,16),onClick:l,onContextMenu:r,onMouseDown:o,className:i({[C.executedCommandAvatar]:!0,[C.clickable]:null!=l})})}({user:s.interaction.user,guildId:r.guild_id,guildAvatar:n,onClick:d,onContextMenu:m});return null!=t&&null!=u?(0,a.jsx)(c.Popout,{renderPopout:t,shouldShow:u,position:"right",onRequestClose:h,children:I}):I()}(e,e=>{var t;return r(e,null===(t=n.interaction)||void 0===t?void 0:t.user)}),v=function(e,t,n){var s;let{message:l,channel:i,showUsernamePopout:r,onClickUsername:o,onUserContextMenu:u,onPopoutRequestClose:d}=e;return(0,a.jsx)(g.default,{compact:!0,author:t,message:l,channel:i,userOverride:null===(s=l.interaction)||void 0===s?void 0:s.user,showPopout:r,renderPopout:n,onClick:o,onContextMenu:u,onPopoutRequestClose:d})}(e,A,e=>{var t;return r(e,null===(t=n.interaction)||void 0===t?void 0:t.user)}),x=function(e,t){let{showDataPopout:n,message:s,onClickCommand:l,onPopoutRequestClose:r}=e;return(0,a.jsx)(c.Popout,{renderPopout:t,shouldShow:n,position:"top",align:"center",onRequestClose:r,animation:c.Popout.Animation.FADE,positionKey:null!=s.interactionData?"ready":"loading",children:e=>{let{onClick:t,...n}=e;return s.type===I.MessageTypes.CHAT_INPUT_COMMAND||s.type===I.MessageTypes.INTERACTION_PREMIUM_UPSELL?(0,a.jsx)(c.Clickable,{...n,tag:"span",onClick:l,children:(0,a.jsx)("div",{className:i(C.commandName,C.clickable),children:"/"+s.interaction.displayName})}):(0,a.jsx)("div",{className:C.commandName,children:s.interaction.displayName})}})}(e,u),O=T.default.Messages.APPLICATION_COMMAND_USED_SHORT.format({userHook:()=>(0,a.jsxs)(s.Fragment,{children:[M,v]},"user"),commandHook:()=>(0,a.jsx)(s.Fragment,{children:x},"command")});return(0,a.jsx)("div",{className:i(C.repliedMessage,C.executedCommand,N),"aria-hidden":!e.compact,children:O})}},927632:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}}),n("222007");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("446674"),o=n("77078"),u=n("798609"),d=n("175528"),c=n("274800"),f=n("574073"),m=n("401642"),h=n("42203"),E=n("305961"),p=n("697218"),_=n("666897"),g=n("49111"),I=n("406291"),T=n("782340"),C=n("532560");let S={tag:"span",variant:"text-md/normal",color:"header-secondary"},A={className:i("mention",C.mention)};function N(e){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.Text,{...S,color:"header-primary",children:e})})}var M=s.memo(function(e){var t,n,l,i,M,v;let x,{channel:O,messageId:L,interactionData:R}=e,{onCopy:y,copyRef:P}=(0,d.default)(O,null==R?void 0:null===(t=R.application_command)||void 0===t?void 0:t.id),D=(0,r.useStateFromStores)([E.default],()=>E.default.getGuild(O.guild_id),[O.guild_id]);if(s.useEffect(()=>{(null==R||R.type===u.ApplicationCommandType.CHAT&&void 0===R.application_command)&&c.fetchMessageInteractionData(O.id,L)},[O.id,L,R]),null==R)x=(0,a.jsx)(o.Spinner,{type:o.Spinner.Type.SPINNING_CIRCLE,className:C.spinner});else{let e=[],t=Object.fromEntries((null!==(i=null===(n=R.application_command)||void 0===n?void 0:n.options)&&void 0!==i?i:[]).map(e=>[e.name,e]));for(let n of null!==(M=R.options)&&void 0!==M?M:[])e=e.concat(function e(t,n,l,i,r){var d,c,E,C,M,v,x;let O;let L=null!=i?i+" "+t.name:t.name;if(t.type===u.ApplicationCommandOptionType.SUB_COMMAND||t.type===u.ApplicationCommandOptionType.SUB_COMMAND_GROUP){let i=[(0,a.jsxs)(s.Fragment,{children:[" ",(0,a.jsx)(o.Text,{...S,children:null!==(c=null==r?void 0:r.name_localized)&&void 0!==c?c:t.name})]},L)],u=Object.fromEntries(null===(d=null!==(E=null==r?void 0:r.options)&&void 0!==E?E:[])||void 0===d?void 0:d.map(e=>[e.name,e]));for(let a of null!==(C=t.options)&&void 0!==C?C:[])i=i.concat(e(a,n,l,L,u[a.name]));return i}let R=t.value;if(null!=t.value)switch(t.type){case u.ApplicationCommandOptionType.USER:{let e=t.value.toString(),s=p.default.getUser(e);if(null!=s){let e=(0,f.getUserAuthor)(s,n);O=(0,a.jsxs)(_.default,{...A,onClick:()=>(0,m.openUserProfileModal)({userId:s.id,guildId:n.guild_id,analyticsLocation:{section:g.AnalyticsSections.CHANNEL_TEXT_AREA_AUTOCOMPLETE}}),children:[I.MENTION_SENTINEL,e.nick]})}break}case u.ApplicationCommandOptionType.CHANNEL:{let e=t.value.toString(),n=h.default.getChannel(e);null!=n&&(O=(0,a.jsxs)(_.default,{...A,children:[I.CHANNEL_SENTINEL,n.name]}));break}case u.ApplicationCommandOptionType.ROLE:{let e=t.value.toString(),n=(null==l?void 0:l.roles)!=null?l.roles[e]:null;null!=n&&(O=(0,a.jsxs)(_.default,{...A,children:[I.MENTION_SENTINEL,n.name]}));break}case u.ApplicationCommandOptionType.MENTIONABLE:{let e=t.value.toString(),s=(null==l?void 0:l.roles)!=null?l.roles[e]:null;if(null!=s)O=(0,a.jsxs)(_.default,{children:[I.MENTION_SENTINEL,s.name]});else{let t=p.default.getUser(e);if(null!=t){let e=(0,f.getUserAuthor)(t,n);O=(0,a.jsxs)(_.default,{...A,onClick:()=>(0,m.openUserProfileModal)({userId:t.id,guildId:n.guild_id,analyticsLocation:{section:g.AnalyticsSections.CHANNEL_TEXT_AREA_AUTOCOMPLETE}}),children:[I.MENTION_SENTINEL,e.nick]})}}break}case u.ApplicationCommandOptionType.ATTACHMENT:O=N(T.default.Messages.EXECUTED_COMMAND_POPOUT_ATTACHMENT_OPTION_VALUE);break;default:{let e=null==r?void 0:null===(M=r.choices)||void 0===M?void 0:M.find(e=>e.value===t.value);null!=e&&(R=null!==(v=e.name_localized)&&void 0!==v?v:e.name)}}return null==O&&(O=N(null==R?void 0:R.toString())),[(0,a.jsxs)(s.Fragment,{children:[(0,a.jsxs)(o.Text,{...S,children:[" ",null!==(x=null==r?void 0:r.name_localized)&&void 0!==x?x:t.name,": "]}),O]},L)]}(n,O,D,null,t[n.name]));x=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Text,{...S,children:["/",null!==(v=null===(l=R.application_command)||void 0===l?void 0:l.name_localized)&&void 0!==v?v:R.name]}),e]})}return(0,a.jsxs)("div",{className:C.container,onCopy:e=>{var t,n,a;let s=null!==(a=null===(n=window)||void 0===n?void 0:null===(t=n.getSelection())||void 0===t?void 0:t.toString())&&void 0!==a?a:"";s.startsWith("/")&&s.endsWith("\n")&&y(e,R)},children:[(0,a.jsx)("div",{className:C.tooltip,ref:P,children:x}),(0,a.jsx)("div",{className:C.tooltipPointer})]})})},994402:function(e,t,n){"use strict";n.r(t),n.d(t,{isMediaAttachment:function(){return L},getAttachmentKind:function(){return R},default:function(){return D}}),n("222007"),n("702976"),n("511434"),n("313619"),n("654714"),n("287168"),n("956660");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("77078"),o=n("963119"),u=n("467475"),d=n("651693"),c=n("605160"),f=n("903962"),m=n("923873"),h=n("165405"),E=n("410889"),p=n("725962"),_=n("505684"),g=n("328620"),I=n("522049"),T=n("945330"),C=n("228220"),S=n("568734"),A=n("103603"),N=n("719347"),M=n("49111"),v=n("782340"),x=n("715968");let O=/\.(mp3|m4a|ogg|wav|flac)$/i,L=e=>"IMAGE"===e||"VIDEO"===e;function R(e,t){let{filename:n,width:a,height:s}=e;if(t&&null!=a&&a>0&&null!=s&&s>0)return(0,d.isImageFile)(n)?"IMAGE":(0,d.isVideoFile)(n)&&null!=e.proxy_url?"VIDEO":"INVALID";if(null!=t&&O.test(n)&&null!=e.url)return"AUDIO";if(null!=e.url&&(0,f.isPlaintextPreviewableFile)(n))return"PLAINTEXT_PREVIEW";return"OTHER"}let y=e=>{let t,n,{downloadURL:s,downloadMimeType:l,onRemoveAttachment:o,isAttachmentMediaType:u}=e;return(null!=s&&null!=l&&(t=(0,a.jsx)(r.Tooltip,{text:v.default.Messages.DOWNLOAD,children:e=>(0,a.jsx)(p.default,{...e,target:"_blank",rel:"noreferrer noopener",className:x.hoverButton,iconClassName:x.downloadHoverButtonIcon,focusProps:{offset:2},href:s,mimeType:l})})),null!=o&&(n=(0,a.jsx)(r.Tooltip,{text:v.default.Messages.REMOVE_ATTACHMENT_TOOLTIP_TEXT,children:e=>(0,a.jsx)(r.Clickable,{...e,className:i(x.hoverButton,x.removeAttachmentHoverButton),focusProps:{offset:2},onClick:o,"aria-label":v.default.Messages.REMOVE_MESSAGE_ATTACHMENT,children:(0,a.jsx)(C.default,{width:20,height:20})})})),null==n&&null==t)?null:(0,a.jsxs)("div",{className:i(x.hoverButtonGroup,{[x.nonMediaAttachment]:!u}),children:[t,n]})},P=e=>{let{message:t,attachment:n,inlineMedia:l,autoPlayGif:o,canRemoveAttachment:d,onRemoveAttachment:c,onClick:f,onContextMenu:p,onPlay:_,renderImageComponent:C,renderVideoComponent:O,renderAudioComponent:L,renderPlaintextFilePreview:P,className:D,imgContainerClassName:j,imgClassName:b,focusable:U,hiddenSpoilers:B,mediaLayoutType:G,maxWidth:k,maxHeight:w,noBorderBottomRadius:H,useFullWidth:F,isAttachmentMediaType:V}=e,{width:Y,height:W,description:K,spoiler:z}=n,Z=R(n,l),[J,X]=s.useState(!1),q=(0,u.default)(t.getChannelId()),{enabled:Q}=m.default.useExperiment({location:"MessageAttachment"},{autoTrackExposure:!1}),$=s.useMemo(()=>null!=n.content_type&&-1!==n.content_type.indexOf("/")?n.content_type.split("/"):["unknown","unknown"],[n.content_type]),ee=s.useCallback(()=>{c(n)},[n,c]),et=s.useCallback((e,a,s)=>{if(t.hasFlag(M.MessageFlags.IS_VOICE_MESSAGE)){var l;(0,h.logVoiceMessagePlaybackStarted)(t.id,null!==(l=n.duration_secs)&&void 0!==l?l:null,a,t.author.id)}else null==_||_(e,a,s)},[t,n.duration_secs,_]),en=s.useCallback((e,a)=>{var s;t.hasFlag(M.MessageFlags.IS_VOICE_MESSAGE)&&(0,h.logVoiceMessagePlaybackEnded)(t.id,null!==(s=n.duration_secs)&&void 0!==s?s:null,e,t.author.id,a)},[t,n.duration_secs]),ea=s.useCallback(e=>{var n;t.hasFlag(M.MessageFlags.IS_VOICE_MESSAGE)&&(0,h.logVoiceMessagePlaybackFailed)(t.id,null!==(n=null==e?void 0:e.message)&&void 0!==n?n:null)},[t]),es=s.useCallback(()=>{if(G===N.MediaLayoutType.MOSAIC){let e=!q&&"VIDEO"===Z||!q&&"AUDIO"===Z||"OTHER"===Z;if(V){if(null==Y||null==W)return null;let e=(0,A.getRatio)({width:Y,height:W,maxWidth:N.MEDIA_MOSAIC_MAX_WIDTH,maxHeight:N.MEDIA_MOSAIC_MAX_HEIGHT});if(!F&&(e*Y<N.MINIMUM_MEDIA_MOSAIC_DIM||e*W<N.MINIMUM_MEDIA_MOSAIC_DIM))return null}return!J&&(0,a.jsx)(y,{downloadURL:e?n.url:void 0,downloadMimeType:e?$:void 0,onRemoveAttachment:d?ee:void 0,isAttachmentMediaType:V})}return d&&(0,a.jsx)(r.Clickable,{className:z?x.spoilerRemoveAttachmentButton:x.removeAttachmentButton,focusProps:{offset:{bottom:4}},onClick:()=>c(n),"aria-label":v.default.Messages.REMOVE_MESSAGE_ATTACHMENT,children:(0,a.jsx)(T.default,{width:16,height:16})})},[G,d,z,Z,V,J,n,$,ee,Y,W,F,c,q]),el=s.useCallback(()=>{var e;return(0,S.hasFlag)(null!==(e=n.flags)&&void 0!==e?e:0,M.MessageAttachmentFlags.IS_CLIP)?(0,a.jsxs)(r.TooltipContainer,{text:v.default.Messages.CLIPS_BETA_TAG_HOVER,className:x.clipPill,children:[(0,a.jsx)(I.default,{}),(0,a.jsx)(r.Text,{variant:"text-xs/semibold",color:"always-white",children:v.default.Messages.CLIP_TAG})]}):null},[n]);switch(Z){case"IMAGE":return(0,a.jsx)(g.GIFAccessoryContext.Consumer,{children:e=>C({alt:K,src:null!=n.proxy_url&&""!==n.proxy_url?n.proxy_url:n.url,original:n.url,placeholder:n.placeholder,placeholderVersion:n.placeholder_version,showThumbhashPlaceholder:Q,width:Y,height:W,autoPlay:o&&!B,onClick:f,onContextMenu:p,shouldHideMediaOptions:q,renderAccessory:e,renderAdjacentContent:es,containerClassName:D,className:j,imageClassName:b,shouldLink:U,hiddenSpoilers:B,responsive:!0,mediaLayoutType:G,maxWidth:k,maxHeight:w,useFullWidth:F})});case"VIDEO":let ei=new URL(n.proxy_url);return ei.searchParams.append("format","jpeg"),O({poster:ei.toString(),fileSize:n.size,fileName:n.filename,src:n.url,placeholder:n.placeholder,placeholderVersion:n.placeholder_version,showThumbhashPlaceholder:Q,width:Y,height:W,onClick:f,onContextMenu:p,renderOverlayContent:el,renderAdjacentContent:es,naturalWidth:Y,naturalHeight:W,className:i(D,{[x.noBorderBottomRadius]:H}),playable:U,responsive:!0,mediaLayoutType:G,maxWidth:k,maxHeight:w,useFullWidth:F,mimeType:$,onPlay:_,downloadable:!q,mediaPlayerClassName:H?x.noBorderBottomRadius:void 0});case"AUDIO":return L({fileSize:n.size,fileName:n.filename,src:n.url,className:D,playable:U,mimeType:$,durationSecs:n.duration_secs,waveform:n.waveform,renderAdjacentContent:es,onVolumeShow:()=>X(!0),onVolumeHide:()=>X(!1),onPlay:et,onPause:en,onError:ea});case"PLAINTEXT_PREVIEW":return P({attachment:n,className:D,onClick:f,onContextMenu:p,renderAdjacentContent:es});case"OTHER":return(0,a.jsx)(E.default,{url:n.url,filename:n.filename,size:n.size,onClick:f,onContextMenu:p,className:D,renderAdjacentContent:es});case"INVALID":return null}};var D=e=>{var t;let{className:n,attachment:l,message:r,inlineMedia:u,useFullWidth:d,mediaLayoutType:f,canRemoveAttachment:m,isSingleMosaicItem:h,footer:E,...p}=e,{width:g,height:I}=l,T=(0,o.useShouldRedactExplicitContent)(r.channel_id,r.author.id),C=(0,c.getObscureReason)(l,T),[S,M]=s.useState(void 0!==C),v=f===N.MediaLayoutType.MOSAIC,O=!v&&(null!=g&&g<200||null!=I&&I<50),y=R(l,u);let D="IMAGE"===(t=y)||"VIDEO"===t,j=L(R(l,u)),b=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,a.jsx)(P,{...p,attachment:l,message:r,inlineMedia:u,hiddenSpoilers:e,canRemoveAttachment:m,className:i(n,x.attachmentContentItem,{[x.obscured]:S&&!O,[x.hiddenSpoiler]:S&&C===c.ObscureReason.SPOILER,[x.hiddenExplicit]:S&&null!=C&&[c.ObscureReason.EXPLICIT_CONTENT,c.ObscureReason.POTENTIAL_EXPLICIT_CONTENT].includes(C),[x.hiddenAttachment]:S&&e,[x.inline]:S&&O}),focusable:!e,mediaLayoutType:f,noBorderBottomRadius:null!=E,useFullWidth:d,isAttachmentMediaType:j})};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:i(x.messageAttachment,{[x.messageAttachmentNoJustify]:D,[x.messageAttachmentFullWidth]:d,[x.messageAttachmentMediaMosaic]:v,[x.hideOverflow]:v&&j,[x.noBorderBottomRadius]:null!=E}),children:null!=C?(0,a.jsx)(_.default,{type:_.default.Types.ATTACHMENT,inline:O,reason:C,isSingleMosaicItem:h,obscured:S,containerStyles:function(e,t,n){if(!t)return;let a=e.width;if(void 0!==e.width&&void 0!==e.height){let{width:t}=(0,A.fit)({width:e.width,height:e.height,maxWidth:400,maxHeight:300});a=t}return{...n!==N.MediaLayoutType.MOSAIC&&{maxWidth:null!=a?a:"400px"},width:"100%",height:"100%",justifySelf:"auto"}}(l,D,f),obscurityControlClassName:i({[x.obscureVideo]:"VIDEO"===y&&h&&!S}),onToggleObscurity:()=>M(e=>!e),children:e=>b(e)}):b()}),E]})}},377502:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}}),n("222007"),n("702976");var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("627445"),o=n.n(r),u=n("917351"),d=n.n(u),c=n("446674"),f=n("411723"),m=n("42203"),h=n("328620"),E=n("568734"),p=n("994402"),_=n("719347"),g=n("49111"),I=n("655793");let T=Math.round((_.MEDIA_MOSAIC_MAX_WIDTH-8)/3),C=Math.round((_.MEDIA_MOSAIC_MAX_WIDTH-4)/2),S=Math.round((_.MEDIA_MOSAIC_MAX_HEIGHT-4)/2),A=Math.round(2*(_.MEDIA_MOSAIC_MAX_WIDTH-4)/3),N=A/2,M=e=>{let{mediaAttachments:t,getAttachmentKind:n,footer:s}=e;null!=s&&o(1===t.length,"footer only gets applied to single attachments");let l=t.length;if(1===l)return(0,a.jsx)(v,{attachmentsForLayout:t,getAttachmentKind:n,isSingleImage:!0,footer:s});if(2===l)return(0,a.jsx)(x,{attachmentsForLayout:t,getAttachmentKind:n});if(3===l)return(0,a.jsx)(O,{attachmentsForLayout:t,getAttachmentKind:n});if(4===l)return(0,a.jsx)(L,{attachmentsForLayout:t,getAttachmentKind:n});let i=l%3;return(0,a.jsxs)(a.Fragment,{children:[1===i&&(0,a.jsx)(v,{attachmentsForLayout:t.slice(0,i),getAttachmentKind:n}),2===i&&(0,a.jsx)(x,{attachmentsForLayout:t.slice(0,i),getAttachmentKind:n}),0===i?(0,a.jsx)(R,{attachmentsForLayout:t,getAttachmentKind:n}):(0,a.jsx)(R,{attachmentsForLayout:t.slice(i),getAttachmentKind:n})]})},v=e=>{let{attachmentsForLayout:t,getAttachmentKind:n,isSingleImage:s,footer:l}=e,r=t[0];return(0,a.jsx)("div",{className:i(I.oneByOneGrid,{[I.oneByOneGridSingle]:s,[I.oneByOneGridMosaic]:!s,[I.hasFooter]:null!=l}),children:(0,a.jsx)(D,{props:r,attachmentKind:n(r.attachment.id),useFullWidth:!s,isSingleItem:!0,footer:l})})},x=e=>{let{attachmentsForLayout:t,getAttachmentKind:n}=e;return(0,a.jsx)("div",{className:I.oneByTwoGrid,children:t.map(e=>(0,a.jsx)("div",{className:I.oneByTwoGridItem,children:(0,a.jsx)(D,{props:e,attachmentKind:n(e.attachment.id),maxWidth:C,maxHeight:C})},e.attachment.id))})},O=e=>{let{attachmentsForLayout:t,getAttachmentKind:n}=e;return(0,a.jsxs)("div",{className:i(I.oneByTwoGrid,I.oneByTwoLayoutThreeGrid),children:[(0,a.jsx)("div",{className:I.oneByTwoSoloItem,children:(0,a.jsx)(D,{props:t[0],attachmentKind:n(t[0].attachment.id),maxWidth:A})}),(0,a.jsx)("div",{className:I.oneByTwoDuoItem,children:(0,a.jsx)("div",{className:I.twoByOneGrid,children:t.splice(1).map(e=>(0,a.jsx)("div",{className:I.twoByOneGridItem,children:(0,a.jsx)(D,{props:e,attachmentKind:n(e.attachment.id),maxWidth:N,maxHeight:S})},e.attachment.id))})})]})},L=e=>{let{attachmentsForLayout:t,getAttachmentKind:n}=e;return(0,a.jsx)("div",{className:I.twoByTwoGrid,children:t.map(e=>(0,a.jsx)(D,{props:e,attachmentKind:n(e.attachment.id),maxWidth:C,maxHeight:S},e.attachment.id))})},R=e=>{let{attachmentsForLayout:t,getAttachmentKind:n}=e;return(0,a.jsx)("div",{className:I.threeByThreeGrid,children:t.map(e=>(0,a.jsx)(D,{props:e,attachmentKind:n(e.attachment.id),maxWidth:T,maxHeight:T},e.attachment.id))})},y=e=>({className:i(e,I.attachmentContentContainer),imgContainerClassName:I.lazyImgContainer,imgClassName:I.lazyImg}),P=e=>({className:i(e,I.lazyImg)}),D=e=>{let{props:t,attachmentKind:n,maxWidth:s=_.MEDIA_MOSAIC_MAX_WIDTH,maxHeight:l=_.MEDIA_MOSAIC_MAX_HEIGHT,useFullWidth:i=!0,isSingleItem:r=!1,footer:o}=e,u={...t,..."IMAGE"===n&&y(t.className),..."VIDEO"===n&&P(t.className),mediaLayoutType:_.MediaLayoutType.MOSAIC,maxWidth:s,maxHeight:l,useFullWidth:i,isSingleMosaicItem:r};return(0,a.jsx)(h.GIFAccessoryContext.Provider,{value:t.gifFavoriteButton,children:(0,a.jsx)(p.default,{...u,footer:o})})};var j=e=>{let{attachments:t}=e,n=t[0].message.channel_id,l=(0,c.useStateFromStores)([m.default],()=>{var e;return null===(e=m.default.getBasicChannel(n))||void 0===e?void 0:e.guild_id}),i=s.useMemo(()=>new Map(t.map(e=>[e.attachment.id,(0,p.getAttachmentKind)(e.attachment,e.inlineMedia)])),[t]),r=s.useCallback(e=>{var t;return null!==(t=i.get(e))&&void 0!==t?t:"INVALID"},[i]),[o,u]=s.useMemo(()=>d.partition(t,e=>{var t;return(0,E.hasFlag)(null!==(t=e.attachment.flags)&&void 0!==t?t:0,g.MessageAttachmentFlags.IS_CLIP)}),[t]),[h,_]=s.useMemo(()=>d.partition(u,e=>(0,p.isMediaAttachment)(r(e.attachment.id))),[u,r]);return(0,a.jsxs)(a.Fragment,{children:[h.length>0&&(0,a.jsx)("div",{className:I.mediaAttachmentsContainer,children:(0,a.jsx)(M,{mediaAttachments:h,getAttachmentKind:r})}),_.length>0&&(0,a.jsx)("div",{className:I.nonMediaAttachmentsContainer,children:_.map(e=>(0,a.jsx)("div",{className:I.nonMediaAttachmentItem,children:(0,a.jsx)(D,{props:e,attachmentKind:r(e.attachment.id)})},e.attachment.id))}),o.length>0&&o.map(e=>(0,a.jsx)("div",{className:I.mediaAttachmentsContainer,children:(0,a.jsx)(M,{mediaAttachments:[e],getAttachmentKind:r,footer:(0,a.jsx)(f.default,{attachment:e.attachment,guildId:l})})},e.attachment.id))]})}},304198:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("77078"),r=n("587904"),o=n("933470");function u(e){let{icon:t,iconNode:n,timestamp:s,className:i,children:u,contentClassName:d,iconClassName:c,iconContainerClassName:f,compact:m=!1}=e;return(0,a.jsxs)("div",{className:l(i,{[o.container]:!0,[o.compact]:m,[o.cozy]:!m}),children:[null!=n&&(0,a.jsx)("div",{className:l(o.iconContainer,f),children:n}),null!=t&&(0,a.jsx)("div",{className:o.iconContainer,children:(0,a.jsx)("div",{"data-accessibility":"desaturate",className:l(o.icon,o.iconSize,c),style:{backgroundImage:"url('".concat(t,"')")}})}),(0,a.jsxs)("div",{className:l(d,o.content),children:[u,null!=s&&(0,a.jsx)(r.default,{timestamp:s})]})]})}u.Action=e=>{let{onClick:t,children:n}=e;return(0,a.jsxs)("span",{className:o.action,children:["",(0,a.jsx)(i.Anchor,{onClick:t,className:o.actionAnchor,children:n})]})};var d=u},292200:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("866227"),o=n.n(r),u=n("974667"),d=n("733724"),c=n("446674"),f=n("77078"),m=n("206230"),h=n("228944"),E=n("201131"),p=n("928098"),_=n("702873"),g=n("537325"),I=n("95045"),T=n("909917"),C=n("380986"),S=n("969706"),A=n("957255"),N=n("697218"),M=n("79798"),v=n("36694"),x=n("907566"),O=n("561359"),L=n("228220"),R=n("759885"),y=n("843194"),P=n("93332"),D=n("304198"),j=n("387111"),b=n("158998"),U=n("250375"),B=n("49111"),G=n("988268"),k=n("903639"),w=n("894488"),H=n("782340"),F=n("180094");function V(e){let{children:t,className:n,compact:s}=e;return(0,a.jsx)("div",{className:i(F.footerContainer,n,{[F.compact]:s}),children:t})}function Y(e){let{children:t,className:n}=e;return(0,a.jsx)("div",{className:i(F.annotationRow,n),children:t})}function W(e,t){switch(e){case h.AutomodAlertActionType.DELETE_USER_MESSAGE:return(0,a.jsx)(L.default,{width:16,height:16,className:F.alertActionIcon,...t});case h.AutomodAlertActionType.SET_COMPLETED:return(0,a.jsx)(v.default,{width:16,height:16,className:i(F.alertActionIcon,F.alertActionSetCompletedIcon),...t});case h.AutomodAlertActionType.SUBMIT_FEEDBACK:return(0,a.jsx)(x.default,{width:16,height:16,className:i(F.alertActionIcon),...t});default:return null}}function K(e){let{alertAction:t,guildId:n}=e,s=(0,c.useStateFromStores)([N.default],()=>N.default.getUser(t.actor),[t.actor]);try{let e=parseInt(t.actionType);if(null==s)return W(e,{});let l=function(e,t,n){var a;let s=null!==(a=j.default.getNickname(n,null,t))&&void 0!==a?a:b.default.getUserTag(t),l=o(e.ts),i="".concat(s," ").concat(l.fromNow());try{let t=parseInt(e.actionType);switch(t){case h.AutomodAlertActionType.DELETE_USER_MESSAGE:return H.default.Messages.GUILD_AUTOMOD_ALERT_ACTION_ICON_TOOLTIP_DELETE_MESSAGE.format({userName:s,timestamp:l.fromNow()});case h.AutomodAlertActionType.SET_COMPLETED:return H.default.Messages.GUILD_AUTOMOD_ALERT_ACTION_ICON_TOOLTIP_SET_COMPLETED.format({userName:s,timestamp:l.fromNow()});case h.AutomodAlertActionType.SUBMIT_FEEDBACK:return H.default.Messages.GUILD_AUTOMOD_ALERT_ACTION_ICON_TOOLTIP_SUBMIT_FEEDBACK.format({userName:s,timestamp:l.fromNow()});default:return i}}catch(e){return i}}(t,s,n);return(0,a.jsx)(f.Tooltip,{text:l,children:t=>W(e,t)})}catch(e){return null}}function z(e){let{alertActionsExecution:t,guildId:n}=e,s=Object.values(t.actions).sort((e,t)=>e.actionType<t.actionType?1:-1);return(0,a.jsx)("div",{className:F.alertActionsIconContainer,children:s.map(e=>(0,a.jsx)(K,{alertAction:e,guildId:n},e.actionType))})}function Z(e){let{id:t,compact:n,message:l,channel:r}=e,{avatarSrc:o,eventHandlers:{onMouseEnter:N,onMouseLeave:v}}=(0,U.useAutomodAvatar)(!0),{onFocus:x,...L}=(0,u.useListItem)(null!=t?t:""),{isFocused:j,handleFocus:b,handleBlur:W}=(0,C.useFocusInside)(x),K=(0,c.useStateFromStores)([m.default],()=>m.default.keyboardModeEnabled),Z=(0,c.useStateFromStores)([A.default],()=>A.default.can(B.Permissions.MANAGE_MESSAGES,r),[r]),{ruleName:J,embedChannel:X,decisionId:q,keywordMatchedContent:Q,keyword:$,content:ee,flaggedMessageId:et,timeoutDuration:en,decisionReason:ea,alertActionsExecution:es,quarantineType:el}=(0,E.default)(l),ei=s.useMemo(()=>(0,I.renderAutomodMessageMarkup)(ee,Q,r.id),[ee,Q,r]),{selected:er,...eo}=function(e,t){let{popouts:n,selected:a,setPopout:l}=(0,S.default)(e.id,w.DEFAULT_POPOUTS),{usernameProfile:i,avatarProfile:r}=n,o=(0,C.useContextMenuUser)(e.author.id,t.id),u=(0,C.useContextMenuModerateUser)(e.author.id,t.id,e.id),d=(0,C.useClickMessageAuthorUsername)(e,t,i,l),c=(0,C.useClickMessageAuthorAvatar)(r,l),f=s.useCallback(()=>l({usernameProfile:!1,avatarProfile:!1,referencedUsernameProfile:!1}),[l]);return{selected:a,onContextMenu:o,onContextMenuModerateUser:u,onClickUsername:d,onClickAvatar:c,onPopoutRequestClose:f,renderPopout:T.default,showAvatarPopout:r,showUsernamePopout:i}}(l,r),eu=s.useCallback(()=>{(0,p.openSubmitFeedback)(l.id,ee,q,r)},[l.id,ee,q,r]),ed=s.useCallback(e=>{null!=et&&null!=X&&(e.stopPropagation(),e.preventDefault(),(0,g.default)(B.Routes.CHANNEL(null==X?void 0:X.guild_id,null==X?void 0:X.id,et)))},[X,et]),ec=s.useCallback(()=>{(0,_.executeAlertAction)(l.id,r,h.AutomodAlertActionType.DELETE_USER_MESSAGE)},[r,l.id]),ef=s.useMemo(()=>(0,E.getActionHeaderText)(l,X,()=>(0,a.jsx)("div",{className:F.channelNameContainer,children:(0,a.jsx)(R.default,{channel:X,className:F.channelName,openChatWithoutConnecting:!0})})),[l,X]),em=(0,k.getFriendlyDurationString)(Number(en)),eh=null!=ea,eE=Z&&null!=et&&(null==es||!es.actions.hasOwnProperty(h.AutomodAlertActionType.DELETE_USER_MESSAGE));return(0,a.jsx)("div",{onMouseEnter:N,onMouseLeave:v,children:(0,a.jsx)(D.default,{className:i(F.mainContainer,{[F.compact]:n}),iconNode:n?null:(0,a.jsx)(U.AutomodAvatar,{src:o}),iconContainerClassName:F.iconContainer,compact:n,children:(0,a.jsxs)("div",{className:i(F.content,{[F.compact]:n}),children:[(0,a.jsx)(P.BaseMessageHeader,{message:l,messageClassname:F.spanCorrection,className:i(F.usernameContainer,F.spanCorrection,{[F.compact]:n}),username:(0,a.jsxs)("div",{className:F.spanCorrection,children:[(0,a.jsx)(f.Text,{variant:"text-md/normal",color:"text-brand",tag:"span",className:F.username,children:H.default.Messages.GUILD_AUTOMOD_USERNAME}),(0,a.jsx)(M.default,{type:G.BotTagTypes.SYSTEM_DM,className:F.systemTag}),(0,a.jsx)(f.Text,{variant:"text-md/normal",color:"header-primary",tag:"span",className:F.spanCorrection,children:ef})]}),compact:n,showTimestamp:!0}),(0,a.jsx)("div",{className:i(F.messageContent,{[F.compact]:n}),children:(0,a.jsx)(y.default,{...L,message:l,channel:X,content:ei,compact:n,withFooter:!0,hideTimestamp:!0,className:i(F.embedCard,{[F.compact]:n,[F.selected]:er||K&&j,[F.isClickable]:null!=et&&null!=X}),childrenAccessories:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:F.centeredRowContainer,children:[null!=$&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-muted",tag:"span",children:H.default.Messages.GUILD_AUTOMOD_POST_TO_CHANNEL_KEYWORD.format({keyword:$})}),(0,a.jsx)("div",{className:i(F.dot,F.dotMargin)})]}),null!=J&&(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-muted",tag:"span",children:H.default.Messages.GUILD_AUTOMOD_POST_TO_CHANNEL_RULE_NAME.format({ruleName:J})}),null!=em&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:i(F.dot,F.dotMargin)}),(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-muted",tag:"span",className:F.footerText,children:H.default.Messages.GUILD_AUTOMOD_POST_TO_CHANNEL_TIMEOUT_DURATION.format({duration:em})})]}),null!=el&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:i(F.dot,F.dotMargin)}),(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-muted",tag:"span",className:F.titleCase,children:H.default.Messages.GUILD_AUTOMOD_POST_TO_CHANNEL_REASON.format({reason:(0,E.getQuarantineReasonString)(el)})})]})]}),eh?(0,a.jsx)(Y,{children:(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-normal",tag:"span",children:ea})}):null]}),popoutProps:eo,zalgo:!0,onFocus:b,onBlur:W,onClick:ed})}),(0,a.jsx)(V,{compact:n,children:(0,a.jsxs)("div",{className:i(F.centeredRowContainer,F.buttonContainer,{[F.compact]:n}),children:[(0,a.jsx)(f.Button,{onClick:e=>{var t;null===(t=eo.onContextMenuModerateUser)||void 0===t||t.call(eo,e)},color:f.Button.Colors.LINK,look:f.Button.Looks.LINK,size:f.Button.Sizes.SMALL,className:F.buttonStyle,children:(0,a.jsxs)("div",{className:F.footerAction,children:[(0,a.jsx)(O.default,{width:16,height:16,color:d.default.BLUE_345,className:F.footerIcon}),(0,a.jsx)(f.Text,{variant:"text-xs/normal",color:"text-link",children:H.default.Messages.ACTIONS})]})}),(0,a.jsx)("div",{className:F.dot}),(0,a.jsx)(f.Button,{onClick:eu,color:f.Button.Colors.LINK,look:f.Button.Looks.LINK,size:f.Button.Sizes.SMALL,className:F.buttonStyle,children:(0,a.jsx)("div",{className:F.footerAction,children:(0,a.jsx)(f.Text,{variant:"text-xs/normal",color:"text-link",children:H.default.Messages.GUILD_AUTOMOD_REPORT_ISSUES})})}),eE?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:F.dot}),(0,a.jsx)(f.Button,{onClick:ec,color:f.Button.Colors.LINK,look:f.Button.Looks.LINK,size:f.Button.Sizes.SMALL,className:F.buttonStyle,children:(0,a.jsx)("div",{className:F.footerAction,children:(0,a.jsx)(f.Text,{variant:"text-xs/normal",color:"text-link",children:H.default.Messages.GUILD_AUTOMOD_ALERT_DELETE_MEMBERS_MESSAGE})})})]}):null,null!=es?(0,a.jsx)(z,{alertActionsExecution:es,guildId:r.guild_id}):null]})})]})})})}},944662:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("201131"),l=n("292200"),i=n("119715");function r(e){let{message:t,...n}=e;return(0,s.isAutomodNotification)(t)?(0,a.jsx)(i.default,{message:t,...n}):(0,a.jsx)(l.default,{message:t,...n})}},250375:function(e,t,n){"use strict";n.r(t),n.d(t,{useAutomodAvatar:function(){return m},AutomodAvatar:function(){return h}}),n("222007");var a=n("37983"),s=n("884691"),l=n("446674"),i=n("77078"),r=n("206230"),o=n("523096"),u=n("50885"),d=n("782340"),c=n("180094");let f=u.default.getEnableHardwareAcceleration()?i.AnimatedAvatar:i.Avatar;function m(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,n]=s.useState(!1),a=(0,l.useStateFromStores)([r.default],()=>r.default.useReducedMotion),i=s.useMemo(()=>{let n=t||!a&&!e;return(0,o.getAutomodAvatarURL)(n)},[t,a,e]),u=s.useCallback(()=>n(!0),[]),d=s.useCallback(()=>n(!1),[]);return{avatarSrc:i,eventHandlers:{onMouseEnter:u,onMouseLeave:d}}}function h(e){let{src:t}=e;return(0,a.jsx)("div",{className:c.avatarContainer,children:(0,a.jsx)(f,{src:t,size:i.AvatarSizes.SIZE_40,"aria-label":d.default.Messages.GUILD_AUTOMOD_USERNAME})})}},119715:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var a=n("37983"),s=n("884691"),l=n("414456"),i=n.n(l),r=n("866227"),o=n.n(r),u=n("733724"),d=n("446674"),c=n("669491"),f=n("77078"),m=n("417796"),h=n("398654"),E=n("712125"),p=n("311161"),_=n("201131"),g=n("928098"),I=n("380986"),T=n("42203"),C=n("79798"),S=n("45029"),A=n("561359"),N=n("423487"),M=n("93332"),v=n("304198"),x=n("250375"),O=n("988268"),L=n("782340"),R=n("413362");function y(e){var t;let{message:l,compact:r}=e,{joinAttempts:C,raidDatetime:M,dmsSent:v,raidType:x,resolvedReason:O}=(0,_.extractAutomodNotificationFields)(l),y=(0,d.useStateFromStores)([T.default],()=>T.default.getChannel(l.channel_id),[l.channel_id]),P=null!==(t=null==y?void 0:y.guild_id)&&void 0!==t?t:null,{incidentData:D,shouldShowIncidentActions:j}=(0,h.useGuildIncidentsState)(P),b=(0,I.useContextMenuRaidAlert)(l.author.id,l.channel_id),U=s.useCallback(()=>{let e=null==y?void 0:y.guild_id;null!=e&&(0,g.openRaidResolveModal)(l.id,e)},[l.id,y]),B=x===m.AutomodRaidAlertTypes.DM_RAID;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:R.embedCard,children:[(0,a.jsxs)("div",{className:R.cardHeaderContianer,children:[(0,a.jsxs)("div",{className:R.cardHeader,children:[(0,a.jsx)(N.default,{width:16,height:16,color:c.default.colors.TEXT_DANGER.css}),(0,a.jsx)(f.Text,{variant:"text-md/semibold",color:"text-danger",children:B?L.default.Messages.GUILD_AUTOMOD_NOTIFICATION_DM_RAID_TITLE:L.default.Messages.GUILD_AUTOMOD_NOTIFICATION_RAID_TITLE})]}),(0,a.jsxs)("div",{className:R.subheader,children:[null!=C&&(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-normal",children:L.default.Messages.GUILD_AUTOMOD_NOTIFICATION_RAID_JOINS.format({joinCount:C})}),null!=v&&(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-normal",children:L.default.Messages.GUILD_AUTOMOD_NOTIFICATION_RAID_DMS.format({dmsSent:v})}),(null!=v||null!=C)&&null!=M&&(0,a.jsx)("div",{className:R.dot}),null!=M&&(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-normal",children:o(M).fromNow()})]})]}),(0,a.jsx)("div",{className:R.cardContent,children:null!=M&&(0,a.jsx)(f.Text,{variant:"text-md/normal",color:"text-muted",children:L.default.Messages.GUILD_AUTOMOD_NOTIFICATION_RAID_ACTION_DESCRIPTION.format({dateTime:M.toLocaleString(L.default.getLocale(),p.DATE_CONFIG)})})})]}),(0,a.jsxs)("div",{className:i(R.centeredRowContainer,R.cardFooter,{[R.compact]:r}),children:[(0,a.jsx)(f.Button,{onClick:e=>{if(null!=P&&j){let e={source:E.GuildIncidentActionSources.MESSAGE,messageId:l.id,alertType:(0,p.getIncidentAlertType)(D)};(0,f.openModalLazy)(async()=>{let{default:t}=await n.el("186638").then(n.bind(n,"186638"));return n=>(0,a.jsx)(t,{...n,guildId:P,analyticsData:e})})}else b(e)},color:f.Button.Colors.LINK,look:f.Button.Looks.LINK,size:f.Button.Sizes.SMALL,className:R.buttonStyle,children:(0,a.jsx)("div",{className:R.footerAction,children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.default,{width:16,height:16,color:u.default.BLUE_345,className:R.footerIcon}),(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-link",children:L.default.Messages.GUILD_ANTIRAID_NAGBAR_ACTION})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.default,{width:16,height:16,color:u.default.BLUE_345,className:R.footerIcon}),(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-link",children:L.default.Messages.ACTIONS})]})})}),(0,a.jsx)("div",{className:R.dot}),(0,a.jsx)(f.Button,{onClick:U,color:f.Button.Colors.LINK,look:f.Button.Looks.LINK,size:f.Button.Sizes.SMALL,className:R.buttonStyle,children:(0,a.jsx)("div",{className:R.footerAction,children:(0,a.jsx)(f.Text,{variant:"text-xs/medium",color:"text-link",children:(0,_.getRaidAlertResolveCTAText)(O)})})})]})]})}function P(e){let{id:t,compact:n,message:s,channel:l}=e,{avatarSrc:r,eventHandlers:{onMouseEnter:o,onMouseLeave:u}}=(0,x.useAutomodAvatar)(!0);return(0,a.jsx)("div",{onMouseEnter:o,onMouseLeave:u,children:(0,a.jsx)(v.default,{className:i(R.mainContainer,{[R.compact]:n}),iconNode:n?null:(0,a.jsx)(x.AutomodAvatar,{src:r}),iconContainerClassName:R.iconContainer,compact:n,children:(0,a.jsxs)("div",{className:i(R.content,{[R.compact]:n}),children:[(0,a.jsx)(M.BaseMessageHeader,{message:s,messageClassname:R.spanCorrection,className:i(R.usernameContainer,R.spanCorrection,{[R.compact]:n}),username:(0,a.jsxs)("div",{className:R.spanCorrection,children:[(0,a.jsx)(f.Text,{variant:"text-md/normal",color:"text-brand",tag:"span",className:R.username,children:L.default.Messages.GUILD_AUTOMOD_USERNAME}),(0,a.jsx)(C.default,{type:O.BotTagTypes.SYSTEM_DM,className:R.systemTag}),(0,a.jsx)(f.Text,{variant:"text-md/normal",color:"header-primary",tag:"span",className:R.spanCorrection,children:L.default.Messages.GUILD_AUTOMOD_NOTIFICATION_TITLE})]}),compact:n,showTimestamp:!0}),(0,a.jsx)("div",{className:i(R.messageContent,{[R.compact]:n}),children:(0,a.jsx)(y,{message:s,compact:n})})]})})})}},748880:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("574073"),l=n("304198"),i=n("782340");function r(e){let{message:t,compact:r,missed:o,joinable:u,usernameHook:d,onClickJoinCall:c}=e,f=(0,s.default)(t),m=f.nick,h=d(f),E=function(e){let t=null!=e.call?e.call.duration:null;return null!=t?t.humanize():null}(t);return o?(0,a.jsx)(l.default,{icon:n("349745"),timestamp:t.timestamp,compact:r,children:null!=E?i.default.Messages.SYSTEM_MESSAGE_CALL_MISSED_WITH_DURATION_HOOK.format({username:m,usernameHook:h,callDuration:E}):i.default.Messages.SYSTEM_MESSAGE_CALL_MISSED_HOOK.format({username:m,usernameHook:h})}):(0,a.jsxs)(l.default,{icon:n("309541"),timestamp:t.timestamp,compact:r,children:[null!=E?i.default.Messages.SYSTEM_MESSAGE_CALL_STARTED_WITH_DURATION_HOOK.format({username:m,usernameHook:h,callDuration:E}):i.default.Messages.SYSTEM_MESSAGE_CALL_STARTED_HOOK.format({username:m,usernameHook:h}),u?(0,a.jsx)(l.default.Action,{onClick:c,children:i.default.Messages.SYSTEM_MESSAGE_JOIN_CALL}):null]})}},888393:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var s=n("77078"),l=n("687521"),i=n("574073"),r=n("304198"),o=n("782340");function u(e){let{children:t,messageReference:n}=e;if(null==n)return(0,a.jsx)(s.Anchor,{children:t});let{guild_id:i,channel_id:r,message_id:o}=n;return null==i?(0,a.jsx)(s.Anchor,{children:t}):(0,a.jsx)(l.default,{guildId:i,channelId:r,messageId:o,children:e=>{let{"aria-controls":n,"aria-expanded":l,...i}=e;return(0,a.jsx)(s.Anchor,{...i,children:t})}})}function d(e){let{usernameHook:t,message:s,compact:l}=e,{content:d,timestamp:c,messageReference:f}=s,m=(0,i.default)(s),h=t(m),E=o.default.Messages.SYSTEM_MESSAGE_CHANNEL_FOLLOW_ADD_HOOK.format({username:m.nick,usernameHook:h,webhookName:d,webhookNameHook:(e,t)=>(0,a.jsx)(u,{messageReference:f,children:e},t)});return(0,a.jsx)(r.default,{icon:n("127067"),timestamp:c,compact:l,children:E})}},548703:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("574073"),l=n("304198"),i=n("782340");function r(e){let{message:t,usernameHook:r,compact:o}=e,u=(0,s.default)(t),d=r(u);return(0,a.jsx)(l.default,{icon:n("544484"),timestamp:t.timestamp,compact:o,children:i.default.Messages.SYSTEM_MESSAGE_CHANNEL_ICON_CHANGE_HOOK.format({username:u.nick,usernameHook:d})})}},859316:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("574073"),l=n("304198"),i=n("782340"),r=n("902896");function o(e){let{message:t,usernameHook:o,compact:u,isForumPost:d}=e,c=(0,s.default)(t),f=o(c);return(0,a.jsx)(l.default,{compact:u,className:r.channelNameChange,icon:n("544484"),timestamp:t.timestamp,children:(d?i.default.Messages.SYSTEM_MESSAGE_FORUM_POST_TITLE_CHANGE2:i.default.Messages.SYSTEM_MESSAGE_CHANNEL_NAME_CHANGE2).format({username:c.nick,usernameHook:f,channelName:t.content})})}},427655:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var s=n("281862"),l=n("77078"),i=n("819689"),r=n("574073"),o=n("304198"),u=n("782340");function d(e){let{message:t,usernameHook:d,onClickPins:c,compact:f}=e,m=(0,r.default)(t),h=m.nick,E=d(m),p=()=>{if(null==t.messageReference)return;let{channel_id:e,message_id:n}=t.messageReference;i.default.jumpToMessage({channelId:e,messageId:n,flash:!0})},_=(0,l.useRedesignIconContext)().enabled,g=_?{iconNode:(0,a.jsx)(s.PinIcon,{width:18,height:18,color:"currentColor"})}:{icon:n("728963")};return(0,a.jsx)(o.default,{...g,timestamp:t.timestamp,compact:f,children:null!=t.messageReference?null==c?u.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA_FORMATTED_WITH_MESSAGE_HOOK.format({usernameHook:E,username:h,messageOnClick:p}):u.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_WITH_MESSAGE.format({usernameHook:E,username:h,pinsActionOnClick:c,messageOnClick:p}):null==c?u.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA_FORMATTED_HOOK.format({usernameHook:E,username:h}):u.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE.format({usernameHook:E,username:h,pinsActionOnClick:c})})}},161225:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("77078"),r=n("574073"),o=n("79798"),u=n("93332"),d=n("304198"),c=n("250375"),f=n("49111"),m=n("988268"),h=n("782340"),E=n("413362");function p(e){let{message:t,compact:n,usernameHook:s}=e,p=(0,r.default)(t),_=s(p),{avatarSrc:g,eventHandlers:{onMouseEnter:I,onMouseLeave:T}}=(0,c.useAutomodAvatar)(!0),C=""!==t.content?new Date(t.content).toLocaleString(h.default.getLocale(),{hour:"numeric",minute:"2-digit",month:"2-digit",day:"2-digit",year:"numeric"}):"";return(0,a.jsx)("div",{onMouseEnter:I,onMouseLeave:T,children:(0,a.jsx)(d.default,{className:l(E.mainContainer,{[E.compact]:n}),iconNode:n?null:(0,a.jsx)(c.AutomodAvatar,{src:g}),iconContainerClassName:E.iconContainer,compact:n,children:(0,a.jsxs)("div",{className:l(E.content,{[E.compact]:n}),children:[(0,a.jsx)(u.BaseMessageHeader,{message:t,messageClassname:E.spanCorrection,className:l(E.usernameContainer,E.spanCorrection,{[E.compact]:n}),username:(0,a.jsxs)("div",{className:E.spanCorrection,children:[(0,a.jsx)(i.Text,{variant:"text-md/normal",color:"text-brand",tag:"span",className:E.username,children:h.default.Messages.GUILD_AUTOMOD_USERNAME}),(0,a.jsx)(o.default,{type:m.BotTagTypes.SYSTEM_DM,className:E.systemTag})]}),compact:n,showTimestamp:!0}),(0,a.jsx)("div",{className:l(E.messageContent,{[E.compact]:n}),children:t.type===f.MessageTypes.GUILD_INCIDENT_ALERT_MODE_ENABLED?h.default.Messages.GUILD_SERVER_LOCKDOWN_ENABLED_SYSTEM_MESSAGE_SHORT.format({username:p.nick,usernameHook:_,time:C}):h.default.Messages.GUILD_SERVER_LOCKDOWN_DISABLED_SYSTEM_MESSAGE.format({username:p.nick,usernameHook:_})})]})})})}},41163:function(e,t,n){"use strict";n.r(t),n.d(t,{UIKitGuildDiscoveryDisqualified:function(){return o},UIKitGuildDiscoveryRequalified:function(){return u},UIKitGuildDiscoveryGracePeriodInitialWarning:function(){return d},UIKitGuildDiscoveryGracePeriodFinalWarning:function(){return c}});var a=n("37983");n("884691");var s=n("423487"),l=n("304198"),i=n("782340"),r=n("744806");function o(e){let{message:t,compact:s,onClick:o}=e;return(0,a.jsx)(l.default,{icon:n("768074"),timestamp:t.timestamp,compact:s,contentClassName:r.messageContent,children:i.default.Messages.SYSTEM_MESSAGE_GUILD_DISCOVERY_DISQUALIFIED.format({onClick:o})})}function u(e){let{message:t,compact:s}=e;return(0,a.jsx)(l.default,{icon:n("228165"),timestamp:t.timestamp,compact:s,contentClassName:r.messageContent,children:i.default.Messages.SYSTEM_MESSAGE_GUILD_DISCOVERY_REQUALIFIED})}function d(e){let{message:t,compact:n}=e;return(0,a.jsx)(l.default,{iconNode:(0,a.jsx)(s.default,{className:r.alertIcon}),timestamp:t.timestamp,compact:n,contentClassName:r.messageContent,children:i.default.Messages.SYSTEM_MESSAGE_GUILD_DISCOVERY_GRACE_PERIOD_INITIAL_WARNING})}function c(e){let{message:t,compact:n}=e;return(0,a.jsx)(l.default,{iconNode:(0,a.jsx)(s.default,{className:r.alertIcon}),timestamp:t.timestamp,compact:n,contentClassName:r.messageContent,children:i.default.Messages.SYSTEM_MESSAGE_GUILD_DISCOVERY_GRACE_PERIOD_FINAL_WARNING})}},830220:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("77078"),r=n("574073"),o=n("79798"),u=n("93332"),d=n("304198"),c=n("250375"),f=n("988268"),m=n("782340"),h=n("413362");function E(e){let{message:t,compact:n,usernameHook:s}=e,E=(0,r.default)(t),p=s(E),{avatarSrc:_,eventHandlers:{onMouseEnter:g,onMouseLeave:I}}=(0,c.useAutomodAvatar)(!0);return(0,a.jsx)("div",{onMouseEnter:g,onMouseLeave:I,children:(0,a.jsx)(d.default,{className:l(h.mainContainer,{[h.compact]:n}),iconNode:n?null:(0,a.jsx)(c.AutomodAvatar,{src:_}),iconContainerClassName:h.iconContainer,compact:n,children:(0,a.jsxs)("div",{className:l(h.content,{[h.compact]:n}),children:[(0,a.jsx)(u.BaseMessageHeader,{message:t,messageClassname:h.spanCorrection,className:l(h.usernameContainer,h.spanCorrection,{[h.compact]:n}),username:(0,a.jsxs)("div",{className:h.spanCorrection,children:[(0,a.jsx)(i.Text,{variant:"text-md/normal",color:"text-brand",tag:"span",className:h.username,children:m.default.Messages.GUILD_AUTOMOD_USERNAME}),(0,a.jsx)(o.default,{type:f.BotTagTypes.SYSTEM_DM,className:h.systemTag})]}),compact:n,showTimestamp:!0}),(0,a.jsx)("div",{className:l(h.messageContent,{[h.compact]:n}),children:m.default.Messages.GUILD_REPORT_FALSE_ALARM_SYSTEM_MESSAGE_SHORT.format({username:E.nick,usernameHook:p})})]})})})}},924399:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n("37983");n("884691");var s=n("414456"),l=n.n(s),i=n("446674"),r=n("77078"),o=n("574073"),u=n("305961"),d=n("79798"),c=n("93332"),f=n("304198"),m=n("250375"),h=n("988268"),E=n("782340"),p=n("413362");function _(e){var t;let{message:n,compact:s,usernameHook:_,channel:g}=e,I=(0,i.useStateFromStores)([u.default],()=>u.default.getGuild(g.guild_id)),T=(0,o.default)(n),C=_(T),{avatarSrc:S,eventHandlers:{onMouseEnter:A,onMouseLeave:N}}=(0,m.useAutomodAvatar)(!0);return(0,a.jsx)("div",{onMouseEnter:A,onMouseLeave:N,children:(0,a.jsx)(f.default,{className:l(p.mainContainer,{[p.compact]:s}),iconNode:s?null:(0,a.jsx)(m.AutomodAvatar,{src:S}),iconContainerClassName:p.iconContainer,compact:s,children:(0,a.jsxs)("div",{className:l(p.content,{[p.compact]:s}),children:[(0,a.jsx)(c.BaseMessageHeader,{message:n,messageClassname:p.spanCorrection,className:l(p.usernameContainer,p.spanCorrection,{[p.compact]:s}),username:(0,a.jsxs)("div",{className:p.spanCorrection,children:[(0,a.jsx)(r.Text,{variant:"text-md/normal",color:"text-brand",tag:"span",className:p.username,children:E.default.Messages.GUILD_AUTOMOD_USERNAME}),(0,a.jsx)(d.default,{type:h.BotTagTypes.SYSTEM_DM,className:p.systemTag})]}),compact:s,showTimestamp:!0}),(0,a.jsx)("div",{className:l(p.messageContent,{[p.compact]:s}),children:E.default.Messages.GUILD_RAID_REPORT_SYSTEM_MESSAGE.format({username:T.nick,usernameHook:C,guildName:null!==(t=null==I?void 0:I.name)&&void 0!==t?t:""})})]})})})}},954060:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var s=n("574073"),l=n("985622"),i=n("304198"),r=n("980423"),o=n("782340");function u(e){var t;let{message:n,channel:u,playingActivity:d,onJoinStream:c,usernameHook:f,compact:m}=e,h=(0,s.default)(n),E=null===(t=n.call)||void 0===t?void 0:t.duration,p=f(h),_=o.default.Messages.SYSTEM_MESSAGE_GUILD_STREAM_ACTIVE.format({username:h.nick,activityName:null!=d?d.name:"unknown",onJoinStream:c,usernameHook:p});return null!=E&&(_=o.default.Messages.SYSTEM_MESSAGE_GUILD_STREAM_ENDED.format({username:h.nick,duration:E.humanize(),channelName:u.name,usernameHook:p})),(0,a.jsx)(i.default,{iconNode:null!=E?(0,a.jsx)(l.default,{width:20,height:20}):(0,a.jsx)(r.default,{size:r.default.Sizes.SMALL}),timestamp:n.timestamp,compact:m,children:_})}},178889:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var s=n("77078"),l=n("129953"),i=n("305961"),r=n("304198"),o=n("49111"),u=n("782340"),d=n("985140");function c(e){let t,{compact:c,isOwner:f,channel:m}=e,h=()=>{let e=i.default.getGuild(m.getGuildId());null!=e&&((0,s.openModalLazy)(async()=>{let{default:t}=await n.el("310688").then(n.bind(n,"310688"));return n=>(0,a.jsx)(t,{...n,guild:e,channel:m,source:o.InstantInviteSources.INVITE_SYSTEM_MESSAGE})}),(0,l.trackGuildInviteNotificationAction)())},E=(e,t)=>(0,a.jsx)(s.Anchor,{className:d.inviteLink,onClick:h,children:e},t);return t=c?(0,a.jsx)("div",{className:d.inviteContent,children:f?u.default.Messages.SYSTEM_MESSAGE_INVITE_USERS_OWNER_COMPACT.format({inviteHook:E}):u.default.Messages.SYSTEM_MESSAGE_INVITE_USERS_COMPACT.format({inviteHook:E})}):(0,a.jsxs)("div",{className:d.content,children:[(0,a.jsx)("div",{className:d.inviteHeader,children:f?u.default.Messages.SYSTEM_MESSAGE_INVITE_USERS_OWNER:u.default.Messages.SYSTEM_MESSAGE_INVITE_USERS}),(0,a.jsx)("div",{className:d.inviteContent,children:f?u.default.Messages.SYSTEM_MESSAGE_INVITE_USERS_DESCRIPTION_OWNER:u.default.Messages.SYSTEM_MESSAGE_INVITE_USERS_DESCRIPTION}),(0,a.jsx)(s.Button,{onClick:h,size:s.Button.Sizes.SMALL,className:d.inviteButton,children:u.default.Messages.SYSTEM_MESSAGE_INVITE_USERS_BUTTON})]}),(0,a.jsx)(r.default,{className:c?d.compact:d.inviteContent,iconNode:c?null:(0,a.jsx)("img",{alt:"",src:n("190368"),width:40,height:40}),iconContainerClassName:d.iconContainer,compact:c,children:t})}},52538:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("574073"),l=n("304198"),i=n("782340");function r(e){let{message:t,otherUsername:r,usernameHook:o,otherUsernameHook:u,compact:d}=e,{nick:c}=(0,s.default)(t),f=o(),m=u(),h=i.default.Messages.SYSTEM_MESSAGE_RECIPIENT_ADD_HOOK.format({username:c,usernameHook:f,otherUsername:r,otherUsernameHook:m});return(0,a.jsx)(l.default,{icon:n("127067"),timestamp:t.timestamp,compact:d,children:h})}},879033:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("574073"),l=n("304198"),i=n("782340");function r(e){let t,{message:r,usernameHook:o,otherUser:u,otherUsernameHook:d,compact:c,channel:f}=e,m=(0,s.default)(r),h=m.nick,E=o(m),p=(0,s.useNullableUserAuthor)(u,f);if(null!=p&&null!=d){let e=d(p);t=i.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_HOOK.format({username:h,usernameHook:E,otherUsername:p.nick,otherUsernameHook:e})}else t=i.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_SELF_HOOK.format({username:h,usernameHook:E});return(0,a.jsx)(l.default,{icon:n("226315"),timestamp:r.timestamp,compact:c,children:t})}},523257:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var s=n("574073"),l=n("228427"),i=n("304198"),r=n("782340"),o=n("896393");function u(e){let{message:t,compact:n,usernameHook:u}=e,d=(0,s.default)(t),c=u(d),f=r.default.Messages.SYSTEM_MESSAGE_STAGE_END_HOOK.format({username:d.nick,usernameHook:c,topic:t.content});return(0,a.jsx)(i.default,{className:o.stageSystemMessage,iconNode:(0,a.jsx)(l.default,{height:24,width:24}),iconContainerClassName:o.iconContainer,timestamp:t.timestamp,compact:n,children:f})}},14733:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var s=n("574073"),l=n("711486"),i=n("304198"),r=n("782340"),o=n("896393");function u(e){let{message:t,compact:n,usernameHook:u}=e,d=(0,s.default)(t),c=u(d),f=r.default.Messages.SYSTEM_MESSAGE_STAGE_RAISE_HAND_HOOK.format({username:d.nick,usernameHook:c});return(0,a.jsx)(i.default,{className:o.stageSystemMessage,iconNode:(0,a.jsx)(l.default,{height:24,width:24}),iconContainerClassName:o.iconContainer,timestamp:t.timestamp,compact:n,children:f})}},513448:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var s=n("574073"),l=n("277174"),i=n("304198"),r=n("782340"),o=n("896393");function u(e){let{message:t,compact:n,usernameHook:u}=e,d=(0,s.default)(t),c=u(d),f=r.default.Messages.SYSTEM_MESSAGE_STAGE_SPEAKER_HOOK.format({username:d.nick,usernameHook:c});return(0,a.jsx)(i.default,{className:o.stageSystemMessage,iconNode:(0,a.jsx)(l.default,{height:24,width:24}),iconContainerClassName:o.iconContainer,timestamp:t.timestamp,compact:n,children:f})}},606099:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n("37983");n("884691");var s=n("669491"),l=n("574073"),i=n("228427"),r=n("304198"),o=n("782340"),u=n("896393");function d(e){let{message:t,compact:n,usernameHook:d}=e,c=(0,l.default)(t),f=d(c),m=o.default.Messages.SYSTEM_MESSAGE_STAGE_START_HOOK.format({username:c.nick,usernameHook:f,topic:t.content});return(0,a.jsx)(r.default,{className:u.stageSystemMessage,iconNode:(0,a.jsx)(i.default,{height:24,width:24,color:s.default.unsafe_rawColors.GREEN_360.css}),iconContainerClassName:u.iconContainer,timestamp:t.timestamp,compact:n,children:m})}},151218:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n("37983");n("884691");var s=n("574073"),l=n("228427"),i=n("304198"),r=n("782340"),o=n("896393");function u(e){let{message:t,compact:n,usernameHook:u}=e,d=(0,s.default)(t),c=u(d),f=r.default.Messages.SYSTEM_MESSAGE_STAGE_TOPIC_HOOK.format({username:d.nick,usernameHook:c,topic:t.content});return(0,a.jsx)(i.default,{className:o.stageSystemMessage,iconNode:(0,a.jsx)(l.default,{height:24,width:24}),iconContainerClassName:o.iconContainer,timestamp:t.timestamp,compact:n,children:f})}},423509:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n("37983");n("884691");var s=n("446674"),l=n("574073"),i=n("42203"),r=n("959097"),o=n("304198"),u=n("782340"),d=n("829583");function c(e){var t;let{message:n,compact:c,usernameHook:f,onClickThread:m,onClickViewThreads:h,onContextMenuThread:E}=e,p=(0,l.default)(n),_=f(p),g=(0,s.useStateFromStores)([i.default],()=>{var e;return i.default.getChannel(null===(e=n.messageReference)||void 0===e?void 0:e.channel_id)}),I=u.default.Messages.SYSTEM_MESSAGE_THREAD_CREATED.format({actorName:p.nick,actorHook:_,threadName:null!==(t=null==g?void 0:g.name)&&void 0!==t?t:n.content,threadOnClick:{onClick:m,onContextMenu:E},viewThreadsOnClick:h});return(0,a.jsx)(o.default,{iconNode:(0,a.jsx)(r.default,{className:d.icon}),timestamp:n.timestamp,compact:c,children:I})}},80301:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("574073"),l=n("304198"),i=n("782340");function r(e){let{message:t,channel:r,targetUser:o,actorUsernameHook:u,targetUsernameHook:d,compact:c}=e,f=(0,s.default)(t),m=(0,s.useNullableUserAuthor)(o,r),h=u(f),E=d(null!=m?m:void 0),p=i.default.Messages.SYSTEM_MESSAGE_THREAD_MEMBER_ADD.format({actorName:f.nick,actorHook:h,targetName:null==m?void 0:m.nick,targetHook:E});return(0,a.jsx)(l.default,{icon:n("127067"),timestamp:t.timestamp,compact:c,children:p})}},210977:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("574073"),l=n("304198"),i=n("782340");function r(e){let{message:t,channel:r,targetUser:o,actorUsernameHook:u,targetUsernameHook:d,compact:c}=e,f=(0,s.default)(t),m=(0,s.useNullableUserAuthor)(o,r),h=u(f),E=d(null!=m?m:void 0),p=i.default.Messages.SYSTEM_MESSAGE_THREAD_MEMBER_REMOVE.format({actorName:f.nick,actorHook:h,targetName:null==m?void 0:m.nick,targetHook:E});return(0,a.jsx)(l.default,{icon:n("226315"),timestamp:t.timestamp,compact:c,children:p})}},512622:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n("37983");n("884691");var s=n("959097"),l=n("304198"),i=n("782340"),r=n("13154");function o(e){let{message:t,compact:n}=e;return(0,a.jsx)(l.default,{iconNode:(0,a.jsx)(s.default,{className:r.icon}),timestamp:t.timestamp,compact:n,children:i.default.Messages.THREAD_STARTER_MESSAGE_NOT_LOADED})}},874612:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n("37983");n("884691");var s=n("574073"),l=n("304198"),i=n("700097");function r(e){let{message:t,usernameHook:r,compact:o}=e,u=(0,s.default)(t),d=r(u),c=i.default.getSystemMessageUserJoin(t.id),f=c.format({username:u.nick,usernameHook:d});return(0,a.jsx)(l.default,{icon:n("127067"),timestamp:t.timestamp,compact:o,children:f})}},703712:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}}),n("222007");var a,s,l,i,r=n("37983"),o=n("884691"),u=n("414456"),d=n.n(u),c=n("516555"),f=n("748820"),m=n("617258"),h=n("769846"),E=n("77078"),p=n("79112"),_=n("526887"),g=n("574073"),I=n("28007"),T=n("367594"),C=n("273108"),S=n("118503"),A=n("659186"),N=n("304198"),M=n("427459"),v=n("49111"),x=n("782340"),O=n("673983");(l=a||(a={})).ENTER="enter",l.CONFETTI="confetti",l.LEAF_PEEL="leaf_peel",l.LEAF_FALL="leaf_fall",l.EXIT="exit";let L={enter:{BEG:0,END:22},confetti:{BEG:23,END:119},leaf_peel:{BEG:120,END:160},leaf_fall:{BEG:161,END:163},exit:{BEG:164,END:200}};(i=s||(s={})).TOP_LEFT="TOP_LEFT",i.TOP_RIGHT="TOP_RIGHT",i.BOTTOM_LEFT="BOTTOM_LEFT",i.BOTTOM_RIGHT="BOTTOM_RIGHT";let R=["TOP_LEFT","TOP_RIGHT"],y=(0,m.cssValueToNumber)(h.default.USER_PREMIUM_GUILD_SUBSCRIPTION_EASTER_EGG_SIZE),P={leafPosition:{x:85,y:125},leafRotationDirection:1},D=Object.freeze({TOP_LEFT:{confettiPosition:{x:y-11,y:y-125},confettiVelocityDirection:{x:1,y:1},leafPosition:{x:100,y:144},leafRotationDirection:1},TOP_RIGHT:{confettiPosition:{x:11,y:y-125},confettiVelocityDirection:{x:-1,y:1},leafPosition:{x:90,y:144},leafRotationDirection:-1},BOTTOM_LEFT:{...P,confettiPosition:{x:y-11,y:125},confettiVelocityDirection:{x:1,y:-1}},BOTTOM_RIGHT:{...P,confettiPosition:{x:11,y:125},confettiVelocityDirection:{x:-1,y:-1}}}),j="falling-leaf",b=["#61D5B2"],U=n("761545"),B=n("689888"),G=[U,B];function k(){return n.el("510370").then(n.t.bind(n,"510370",19)).then(e=>{let{default:t}=e;return t})}function w(e){let{onAnimationComplete:t}=e,n=o.useRef(null),[a,l]=o.useState(null),[i]=o.useState(function(){let e=Math.floor(Math.random()*Object.keys(s).length);switch(e){case 0:return"TOP_LEFT";case 2:return"TOP_RIGHT";case 3:return"BOTTOM_LEFT";default:return"BOTTOM_RIGHT"}}()),{createMultipleConfettiAt:u,confettiCanvas:m}=o.useContext(_.ConfettiCannonContext),[h,E]=o.useState(null),p=(0,c.useConfettiCannon)(m,h),g=function(e,t){if(null==e)return"enter";switch(e){case"enter":return"confetti";case"confetti":if(R.includes(t))return"leaf_peel";return"exit";case"leaf_peel":return"leaf_fall";case"leaf_fall":return"exit";case"exit":return"enter"}}(a,i),I=R.includes(i),T=I&&"exit"===a,S=o.useCallback(e=>{l(e)},[]),A=o.useCallback(()=>{"exit"===a&&t()},[t,a]),N=o.useCallback(e=>{n.current=e},[]);return o.useEffect(()=>{if("confetti"===a){let{confettiVelocityDirection:e}=D[i],t=function(e,t){let n=null==e?void 0:e.getBoundingClientRect();if(null==n)return{x:0,y:0};let a=D[t];return{x:n.left+a.confettiPosition.x,y:n.top+a.confettiPosition.y}}(n.current,i);u(t.x,t.y,{velocity:{type:"static-random",minValue:{x:10*e.x,y:80*e.y},maxValue:{x:80*e.x,y:180*e.y}}})}},[u,i,a]),o.useEffect(()=>{if(I&&"leaf_fall"===a){let e=D[i].leafRotationDirection;p.createConfetti({id:"".concat(j,"-").concat((0,f.v4)()),position:{type:"static",value:function(e,t){let n=null==e?void 0:e.getBoundingClientRect();if(null==n)return{x:0,y:0};let a=D[t];return{x:n.left+a.leafPosition.x,y:n.top+a.leafPosition.y}}(n.current,i)},size:{type:"static",value:45},rotation:{type:"linear-random",minValue:{x:0,y:0,z:0},maxValue:{x:0,y:0,z:0},minAddValue:{x:0,y:0,z:8*e},maxAddValue:{x:0,y:0,z:12*e}}},{sprite:"TOP_LEFT"===i?U:B})}},[I,p,i,a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.SpriteCanvas,{ref:E,sprites:G,colors:b,spriteWidth:45,spriteHeight:45}),(0,r.jsx)(C.default,{animationRef:N,className:d(O.easterEggAnimation,{[O.easterEggAnimationTopLeft]:"TOP_LEFT"===i,[O.easterEggAnimationTopRight]:"TOP_RIGHT"===i,[O.easterEggAnimationBottomLeft]:"BOTTOM_LEFT"===i,[O.easterEggAnimationBottomRight]:"BOTTOM_RIGHT"===i,[O.easterEggAnimationHideLeaf]:T}),nextScene:g,sceneSegments:L,onScenePlay:S,onSceneComplete:A,importData:k,pauseWhileUnfocused:!1})]})}function H(e){let t,{message:n,compact:a,guild:s,usernameHook:l,onClickMessage:i}=e,u=function(e){switch(e.type){case v.MessageTypes.GUILD_BOOST_TIER_1:return v.BoostedGuildTiers.TIER_1;case v.MessageTypes.GUILD_BOOST_TIER_2:return v.BoostedGuildTiers.TIER_2;case v.MessageTypes.GUILD_BOOST_TIER_3:return v.BoostedGuildTiers.TIER_3}return null}(n),d=(0,T.default)(n),{createMultipleConfettiAt:c,addClickListener:f}=o.useContext(_.ConfettiCannonContext),[m,h]=o.useState(!1),C=o.useRef(null),{reducedMotion:L}=o.useContext(E.AccessibilityPreferencesContext),R=(0,g.getMessageAuthor)(n),y=R.nick,P=l(R);t=null==u||null==s?d>1?x.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED_MANY_HOOK.format({username:y,usernameHook:P,numSubscriptions:d}):x.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED_HOOK.format({username:y,usernameHook:P}):d>1?x.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED_MANY_ACHIEVED_TIER_HOOK.format({username:y,usernameHook:P,numSubscriptions:d,guildName:s.name,newTierName:(0,M.getTierName)(u)}):x.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED_ACHIEVED_TIER_HOOK.format({username:y,usernameHook:P,guildName:s.name,newTierName:(0,M.getTierName)(u)});let D=o.useCallback(()=>{if(!L.enabled){if(m||0!==Math.floor(50*Math.random())){var e;let t=null===(e=C.current)||void 0===e?void 0:e.getBoundingClientRect();if(null!=t)c(t.left+t.width/2,t.top+t.height/2)}else h(!0)}},[c,L,m]),b=o.useCallback(()=>{h(!1)},[]),U=o.useCallback((e,t)=>{(null==t?void 0:t.id.startsWith(j))&&((0,I.updatePoggermodeSettings)({settingsVisible:!0}),p.default.open(v.UserSettingsSections.POGGERMODE))},[]);o.useEffect(()=>{let e=f(U);return e});let B=(0,r.jsx)(E.Clickable,{className:O.iconWrapper,innerRef:C,onClick:i,children:(0,r.jsx)(S.default,{className:O.icon,onMouseEnter:D})});return(0,r.jsxs)(N.default,{iconNode:B,timestamp:n.timestamp,compact:a,children:[(0,r.jsx)("div",{onClick:i,className:O.message,children:t}),m?(0,r.jsx)(A.default,{children:(0,r.jsx)("div",{className:O.cannonWrapper,children:(0,r.jsx)(w,{onAnimationComplete:b})})}):null]})}},181108:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}}),n("222007");var a=n("37983"),s=n("884691"),l=n("516555");let i=[n("315147")],r=["#FFFFFF"],o=1e3/60,u={velocity:{type:"static-random",minValue:{x:0,y:1},maxValue:{x:3,y:3}},rotation:{type:"linear-random",minValue:{x:0,y:0,z:0},maxValue:{x:0,y:0,z:360},minAddValue:{x:0,y:0,z:-5},maxAddValue:{x:0,y:0,z:5}},size:{type:"static-random",minValue:2,maxValue:6},dragCoefficient:{type:"static",value:{x:.05,y:.05}},opacity:{type:"static",value:.3}};function d(e){let{className:t,firing:n=!0,wind:d=2}=e,[c,f]=s.useState(null),[m,h]=s.useState(null),E=(0,l.useConfettiCannon)(m,c),p=s.useMemo(()=>new l.Environment({wind:d}),[d]),_=s.useCallback(()=>{let e=null==m?void 0:m.getCanvas();if(null==e)return;let t=e.getBoundingClientRect();E.createConfetti({...u,position:{type:"static-random",minValue:{x:-t.width/2,y:-6},maxValue:{x:t.width,y:-6}}})},[E,m]);return s.useEffect(()=>{let e=n?setInterval(_,o):null;return()=>clearInterval(e)},[n,_]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.ConfettiCanvas,{ref:h,className:t,environment:p}),(0,a.jsx)(l.SpriteCanvas,{ref:f,colors:r,sprites:i,spriteWidth:6,spriteHeight:6})]})}},980423:function(e,t,n){"use strict";n.r(t),n.d(t,{LiveIndicatorLooks:function(){return s},LiveIndicatorShapes:function(){return m},default:function(){return E}});var a,s,l=n("37983");n("884691");var i=n("414456"),r=n.n(i),o=n("669491"),u=n("956089"),d=n("782340"),c=n("164910");(a=s||(s={})).RED="RED",a.GRAY="GRAY";let f={LARGE:c.liveLarge,SMALL:c.liveSmall},m={[u.BadgeShapes.ROUND]:c.liveShapeRound,[u.BadgeShapes.ROUND_LEFT]:c.liveShapeRoundLeft,[u.BadgeShapes.ROUND_RIGHT]:c.liveShapeRoundRight,[u.BadgeShapes.SQUARE]:""};function h(e){let{className:t,style:n,shape:a=u.BadgeShapes.ROUND,look:s="RED",size:i=f.LARGE}=e;return"RED"===s?(0,l.jsx)(u.TextBadge,{text:d.default.Messages.LIVE,className:r(t,c.live,i),color:o.default.unsafe_rawColors.RED_400.css,shape:m[a],style:n}):(0,l.jsx)(u.TextBadge,{text:d.default.Messages.LIVE,className:r(t,c.live,i,c.grey),disableColor:!0,shape:m[a],style:n})}h.Looks=s,h.Sizes=f;var E=h},883029:function(e,t,n){"use strict";n.r(t),n.d(t,{getDescriptiveInviteError:function(){return o},getInviteError:function(){return u}});var a=n("697218"),s=n("701909"),l=n("719923"),i=n("49111"),r=n("782340");function o(e){switch(e){case i.AbortCodes.TOO_MANY_USER_GUILDS:let t=a.default.getCurrentUser(),n=l.default.canUseIncreasedGuildCap(t)||(null==t?void 0:t.isStaff()),s=n?i.MAX_USER_GUILDS_PREMIUM:i.MAX_USER_GUILDS;return{title:r.default.Messages.TOO_MANY_USER_GUILDS_TITLE_2.format({quantity:s}),description:r.default.Messages.TOO_MANY_USER_GUILDS_DESCRIPTION};case i.AbortCodes.GUILD_AT_CAPACITY:return{title:r.default.Messages.SERVER_IS_CURRENTLY_FULL,description:r.default.Messages.PLEASE_TRY_AGAIN_LATER};case i.AbortCodes.GUILD_JOIN_INVITE_LIMITED_ACCESS:return{title:r.default.Messages.GUILD_LIMITED_ACCESS_INFO_MODAL_HEADING,description:r.default.Messages.PLEASE_TRY_AGAIN_LATER};default:return null}}function u(e){switch(e){case i.AbortCodes.TOO_MANY_USER_GUILDS:return r.default.Messages.TOO_MANY_USER_GUILDS_DESCRIPTION;case i.AbortCodes.GUILD_AT_CAPACITY:return r.default.Messages.MAX_GUILD_MEMBERS_REACHED_ERROR;case i.AbortCodes.INVALID_COUNTRY_CODE:return r.default.Messages.INVALID_COUNTRY_CODE;case i.AbortCodes.INVALID_CANNOT_FRIEND_SELF:return r.default.Messages.INVALID_CANNOT_FRIEND_SELF;case i.AbortCodes.INVITES_DISABLED:return r.default.Messages.INVITES_DISABLED_MODAL_DESCRIPTION.format({articleLink:s.default.getArticleURL(i.HelpdeskArticles.INVITE_DISABLED)});default:return r.default.Messages.INVITE_MODAL_ERROR_DEFAULT}}},882941:function(e,t,n){"use strict";n.r(t),n.d(t,{getSKUIdFromURL:function(){return f},canUserInstall:function(){return m},getReadablePreorderReleaseDate:function(){return E}}),n("781738"),n("222007");var a=n("866227"),s=n.n(a),l=n("803182"),i=n("773336"),r=n("271560"),o=n("49111");n("782340");let u={},d={},c=Object.freeze({ALL:-1,...o.SKUGenres});function f(e){let t=(0,l.matchPath)(e,{path:o.Routes.APPLICATION_STORE_LISTING_SKU(":skuId",":slug")});return null!=t?t.params.skuId:null}function m(e){let t=(0,r.nativePlatformTypeToSKUOperatingSystem)((0,i.getPlatform)());return e.type===o.SKUTypes.DURABLE_PRIMARY&&null!=t&&e.supportedOperatingSystems.includes(t)}Object.keys(c).forEach(e=>{let t=e.toLowerCase().replace(/_/g,"-"),n=c[e];u[t]=n,d[n]=t});let h=[["YYYY-MM-DD","MMMM DD, Y"],["YYYY-MM","MMMM Y"],["MM-DD","MMMM DD"],["MM","MMMM"],["YYYY","Y"]];function E(e){let{preorderReleaseAt:t,preorderApproximateReleaseDate:n}=e;if(null!=t)return t.format("MMMM DD");if(null==n)return null;for(let e=0;e<h.length;e++){let[t,a]=h[e],l=s(n,t,!0);if(l.isValid())return l.format(a)}return n}},380186:function(e,t,n){"use strict";n.r(t),n.d(t,{getSubscriptionSKUs:function(){return u},subscriptionCanSwitchImmediately:function(){return d},subscriptionCanDowngrade:function(){return c},getOrFetchSubscriptionPlan:function(){return f}}),n("222007"),n("884691");var a=n("627445"),s=n.n(a);n("446674");var l=n("775433"),i=n("10514"),r=n("49111"),o=n("646718");function u(e){return e.items.map(e=>{let t=i.default.get(e.planId);return s(null!=t,"Unable to fetch plan"),t}).map(e=>e.skuId)}function d(e,t,n){let a=e.getCurrentSubscriptionPlanIdForGroup(n);return e.type===r.SubscriptionTypes.PREMIUM&&null==a||(s(null!=a,"Current subscription has no plan in group"),s(!(a===o.SubscriptionPlans.PREMIUM_YEAR_TIER_1&&t===o.SubscriptionPlans.PREMIUM_MONTH_TIER_2),"Unexpected plan switch"),n.indexOf(a)<n.indexOf(t))}function c(e,t,n){return!d(e,t,n)}function f(e,t){let n=i.default.get(e);if(null==n){let n=o.SubscriptionPlanInfo[e];s(null!=n,"Missing hardcoded subscriptionPlan: ".concat(e));let a=n.skuId;!i.default.isFetchingForSKU(a)&&(0,l.fetchSubscriptionPlansForSKU)(a,t)}return n}},700097:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var a=n("933805"),s=n("409129"),l=n("277683"),i=n("843257"),r=n("692038"),o=n("574073"),u=n("950576"),d=n("719926"),c=n("271938"),f=n("42203"),m=n("305961"),h=n("697218"),E=n("387111"),p=n("299039"),_=n("49111"),g=n("782340");let I={"234395307759108106":"https://groovy.bot/commands","365975655608745985":"https://www.pokecord.com/getting-started","512412940897484800":"http://jameslantz.net/smilebot"},T=()=>[g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_001_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_002_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_003_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_004_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_005_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_006_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_007_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_008_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_009_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_010_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_011_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_012_HOOK,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_013_HOOK],C=()=>[g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_001,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_002,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_003,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_004,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_005,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_006,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_007,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_008,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_009,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_010,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_011,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_012,g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_013];function S(e){let t=C(),n=p.default.extractTimestamp(e)%t.length;return t[n]}function A(e){return(0,a.astToString)(g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED.astFormat({username:e,usernameOnClick:_.NOOP}))}function N(e,t){let n=f.default.getChannel(t);if(null==n)return A(e);let s=m.default.getGuild(n.getGuildId());return null==s?A(e):(0,a.astToString)(g.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED.astFormat({username:e,usernameOnClick:_.NOOP}))}var M={stringify:function(e,t){var n,p,I,T;let C=null===(n=e.mentions)||void 0===n?void 0:n[0],M=null!=C&&"string"!=typeof C?h.default.getUser(C.id):void 0,v=e.channel_id,x=E.default.getName(null,v,e.author);switch(e.type){case _.MessageTypes.RECIPIENT_ADD:if(null==M)return;return(0,a.astToString)(g.default.Messages.SYSTEM_MESSAGE_RECIPIENT_ADD.astFormat({username:x,usernameOnClick:_.NOOP,otherUsername:E.default.getName(null,v,M),otherUsernameOnClick:_.NOOP}));case _.MessageTypes.RECIPIENT_REMOVE:if(null==M)return;let O=e.author;if(null==O||O.id===M.id)return(0,a.astToString)(g.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_SELF.astFormat({username:x,usernameOnClick:_.NOOP}));return(0,a.astToString)(g.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE.astFormat({username:x,usernameOnClick:_.NOOP,otherUsername:E.default.getName(null,v,M),otherUsernameOnClick:_.NOOP}));case _.MessageTypes.CALL:let{call:L}=e;if(null!=L&&-1===L.participants.indexOf(c.default.getId()))return(0,a.astToString)(g.default.Messages.SYSTEM_MESSAGE_CALL_STARTED.astFormat({username:x,usernameOnClick:_.NOOP}));return;case _.MessageTypes.CHANNEL_NAME_CHANGE:return(0,a.astToString)((t.isForumPost()?g.default.Messages.SYSTEM_MESSAGE_FORUM_POST_TITLE_CHANGE:g.default.Messages.SYSTEM_MESSAGE_CHANNEL_NAME_CHANGE).astFormat({username:x,usernameOnClick:_.NOOP,channelName:e.content}));case _.MessageTypes.CHANNEL_ICON_CHANGE:return(0,a.astToString)(g.default.Messages.SYSTEM_MESSAGE_CHANNEL_ICON_CHANGE.astFormat({username:x,usernameOnClick:_.NOOP}));case _.MessageTypes.CHANNEL_PINNED_MESSAGE:return(0,a.astToString)(g.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA.astFormat({username:x,usernameOnClick:_.NOOP}));case _.MessageTypes.USER_JOIN:return(0,a.astToString)(S(e.id).astFormat({username:x,usernameOnClick:_.NOOP}));case _.MessageTypes.GUILD_BOOST:return A(x);case _.MessageTypes.GUILD_BOOST_TIER_1:case _.MessageTypes.GUILD_BOOST_TIER_2:case _.MessageTypes.GUILD_BOOST_TIER_3:return N(x,v);case _.MessageTypes.GUILD_INVITE_REMINDER:return g.default.Messages.SYSTEM_MESSAGE_INVITE_NOTIFICATION;case _.MessageTypes.THREAD_STARTER_MESSAGE:return g.default.Messages.THREAD_STARTER_MESSAGE_NOTIFICATION.format({username:x,threadName:t.name});case _.MessageTypes.ROLE_SUBSCRIPTION_PURCHASE:if(e instanceof d.default)return null;return(0,a.astToString)((0,i.getRoleSubscriptionPurchaseSystemMessageContentMobile)({username:x,guildId:t.guild_id,roleSubscriptionData:e.role_subscription_data}));case _.MessageTypes.PURCHASE_NOTIFICATION:if(e instanceof d.default||(null===(I=e.purchase_notification)||void 0===I?void 0:null===(p=I.guild_product_purchase)||void 0===p?void 0:p.product_name)==null)return null;return(0,a.astToString)((0,l.getGuildProductPurchaseSystemMessageContentMobile)({username:x,productName:e.purchase_notification.guild_product_purchase.product_name}));case _.MessageTypes.GUILD_APPLICATION_PREMIUM_SUBSCRIPTION:if(e instanceof d.default)return null;let R=(0,o.getMessageAuthor)((0,r.createMessageRecord)(e));return(0,a.astToString)((0,s.getApplicationSubscriptionSystemMessageASTContent)({application:e.application,username:R.nick}));case _.MessageTypes.PRIVATE_CHANNEL_INTEGRATION_ADDED:if(e instanceof d.default)return null;return(0,a.astToString)((0,u.getPrivateChannelIntegrationAddedSystemMessageASTContent)({application:e.application,username:(0,o.getMessageAuthor)((0,r.createMessageRecord)(e)).nick}));case _.MessageTypes.PRIVATE_CHANNEL_INTEGRATION_REMOVED:if(e instanceof d.default)return null;return(0,a.astToString)((0,u.getPrivateChannelIntegrationRemovedSystemMessageASTContent)({application:e.application,username:(0,o.getMessageAuthor)((0,r.createMessageRecord)(e)).nick}));case _.MessageTypes.AUTO_MODERATION_ACTION:if(null===(T=e.embeds)||void 0===T?void 0:T.some(e=>{let{type:t}=e;return t===_.MessageEmbedTypes.AUTO_MODERATION_NOTIFICATION}))return function(e){let t=f.default.getChannel(e);if(null==t)return null;let n=m.default.getGuild(t.getGuildId());return null==n?null:(0,a.astToString)(g.default.Messages.GUILD_SERVER_RAID_ALERT_NOTIFICATION.astFormat({guildName:n.name}))}(v);return e.content;case _.MessageTypes.GUILD_INCIDENT_ALERT_MODE_ENABLED:return function(e,t,n){let s=f.default.getChannel(t);if(null==s)return null;let l=m.default.getGuild(s.getGuildId());return null==l?null:(0,a.astToString)(g.default.Messages.GUILD_SERVER_LOCKDOWN_ENABLED_NOTIFICATION.astFormat({username:e,guildName:l.name,time:""!==n?new Date(n).toLocaleString(g.default.getLocale(),{hour:"numeric",minute:"2-digit"}):""}))}(x,v,e.content);case _.MessageTypes.GUILD_INCIDENT_ALERT_MODE_DISABLED:return function(e,t){let n=f.default.getChannel(t);if(null==n)return null;let s=m.default.getGuild(n.getGuildId());return null==s?null:(0,a.astToString)(g.default.Messages.GUILD_SERVER_LOCKDOWN_DISABLED_NOTIFICATION.astFormat({username:e,guildName:s.name}))}(x,v);default:return e.content}},getSystemMessageUserJoin:function(e){let t=T(),n=p.default.extractTimestamp(e)%t.length;return t[n]},getSystemMessageUserJoinMobile:S,getSystemMessageBotJoin:function(e){return null==I[e]?null:g.default.Messages.SYSTEM_MESSAGE_GUILD_BOT_JOIN.format({learnOnClick:{onClick:()=>window.open(I[e])}})}}},417796:function(e,t,n){"use strict";var a,s;n.r(t),n.d(t,{AutomodRaidAlertTypes:function(){return a}}),(s=a||(a={})).JOIN_RAID="JOIN_RAID",s.DM_RAID="DM_RAID"}}]);
//# sourceMappingURL=62e9e12cfd8a643f2227.js.map